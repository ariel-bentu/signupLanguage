!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=101)}([function(e,t,n){"use strict";n.d(t,"f",function(){return o}),n.d(t,"G",function(){return r}),n.d(t,"o",function(){return s}),n.d(t,"k",function(){return l}),n.d(t,"C",function(){return c}),n.d(t,"A",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"q",function(){return m}),n.d(t,"x",function(){return g}),n.d(t,"y",function(){return h}),n.d(t,"z",function(){return f}),n.d(t,"n",function(){return v}),n.d(t,"B",function(){return j}),n.d(t,"D",function(){return E}),n.d(t,"K",function(){return w}),n.d(t,"b",function(){return x}),n.d(t,"g",function(){return k}),n.d(t,"e",function(){return L}),n.d(t,"E",function(){return D}),n.d(t,"a",function(){return q}),n.d(t,"J",function(){return T}),n.d(t,"t",function(){return P}),n.d(t,"H",function(){return B}),n.d(t,"v",function(){return A}),n.d(t,"r",function(){return U}),n.d(t,"c",function(){return F}),n.d(t,"p",function(){return M}),n.d(t,"u",function(){return Z}),n.d(t,"s",function(){return H}),n.d(t,"I",function(){return W}),n.d(t,"m",function(){return K}),n.d(t,"F",function(){return X}),n.d(t,"j",function(){return $}),n.d(t,"l",function(){return Q}),n.d(t,"i",function(){return ee}),n.d(t,"h",function(){return te}),n.d(t,"w",function(){return ne});var i=n(5),a=n.n(i);function o(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&apos;")}function r(e){return e.replace(/&apos;/gm,"'").replace(/&quot;/gm,'"').replace(/&gt;/gm,">").replace(/&lt;/gm,"<").replace(/&amp;/gm,"&")}function s(e){setTimeout(function(){e.focus(),e.select()},4)}function l(e){for(var t=e.parentElement;t&&t.scrollHeight<=t.clientHeight;)t=t.parentElement;return t}function c(e,t){var n=document.createElement("div"),i=document.createElement("div");n.appendChild(i),n.classList.add("toastContainer"),i.classList.add("toast"),i.textContent=e,(t=t||document.body).appendChild(n),setTimeout(function(){n.classList.add("show"),setTimeout(function(){n.addEventListener("transitionend",function(){n.remove()}),n.classList.remove("show")},3e3)},50)}function u(e){getSelection().removeAllRanges();var t=document.createRange();t.selectNodeContents(e),getSelection().addRange(t)}function d(e){var t=document.createElement("div");t.classList.add("copyContainer"),t.textContent=e.content,e.container?e.container.appendChild(t):document.body.appendChild(t),u(t);try{document.execCommand("copy")&&e.toastContainer&&c("Copied to clipboard!",e.toastContainer)}catch(e){}getSelection().removeAllRanges(),t.remove()}function m(e,t){if(!(t=t||l(e)))return!0;var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return i.top<=n.top&&i.bottom>=n.bottom&&i.left<=n.left&&i.right>=n.right}function p(e,t){return new Promise(function(n){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var a=i.getContext("2d");a.webkitImageSmoothingEnabled=!0,a.mozImageSmoothingEnabled=!0,a.msImageSmoothingEnabled=!0,a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="medium";var o=document.createElement("img");o.crossOrigin="anonymous";var r,s,l,c=1,u=0,d=0;o.addEventListener("load",function(e){o.width<=i.width?(r=o.width,u=(i.width-o.width)/2):(c=i.width/o.width,r=i.width),t.height||(i.height=i.width*o.height/o.width),(l=c*o.height)<=i.height?(s=o.height,d=(i.height-l)/2):(s=i.height/c,l=i.height),a.drawImage(o,0,0,o.width,s,u,d,r,l),i.toBlob(function(e){n(URL.createObjectURL(e))})}),o.addEventListener("error",function(t){n(e)}),o.src=e})}function g(e,t,n){var i=Zeplin.urls.imgURL+"/"+encodeURIComponent(t[n]),a="?w="+e.width,o="?w="+2*e.width;e.height&&(a+="&cropTop=0&cropLeft=0&cropWidth="+e.width+"&cropHeight="+e.height,o+="&cropTop=0&cropLeft=0&cropWidth="+2*e.width+"&cropHeight="+2*e.height),e.addEventListener("error",function i(){e.removeEventListener("error",i),function(e,t,n){t[Symbol.for("thumbnail")]?Object.assign(e,t[Symbol.for("thumbnail")]):Promise.all([p(t[n],{width:e.width,height:e.height}),p(t[n],{width:2*e.width,height:2*e.height})]).then(function(n){t[Symbol.for("thumbnail")]={src:n[0],srcset:n[1]},Object.assign(e,t[Symbol.for("thumbnail")])})}(e,t,n)}),Object.assign(e,{src:i+a,srcset:i+o+" 2x"})}function h(e,t){var n=Number(e).toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:t});return Number(n)}function f(e,t){if(t=t||l(e)){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();setTimeout(function(){n.top<i.top?t.scrollTop-=i.top-n.top:n.bottom>i.bottom&&(t.scrollTop+=n.bottom-i.bottom)},4)}}var b=["alien","bear","grapes","meat_on_bone","bread","lollipop","chicken","cookie","dark_sunglasses","dart","dog","eyes","frog","ghost","gift","jack_o_lantern","hamburger","koala","four_leaf_clover","lemon","lion_face","tophat","monkey_face","new_moon_with_face","hamster","mushroom","chestnut","octopus","panda_face","penguin","pig_nose","rabbit","mouse","robot_face","space_invader","full_moon_with_face","tennis","tomato","tv"],y={};function v(e,t){if(!e)return Zeplin.urls.appURL+"/img/emotars/emotarAnonymous.png";var n,i=!1;if("ignoreRandomEmotar"in(t=t||{})&&(i=t.ignoreRandomEmotar),!i&&e.emotar){var o=e.emotar.replace(/_\w/g,function(e){return e.charAt(1).toUpperCase()});return o=B(o),{src:Zeplin.urls.appURL+"/img/emotars/emotar"+o+".png"}}if(e.avatar)return{src:e.avatar};if(i)return{src:Zeplin.urls.appURL+"/img/emotars/icRandom.svg"};if(e.email){var r=y[e._id];r||(r=Array.from(a()(e._id)).reduce(function(e,t){return e+t.charCodeAt()},0),y[e._id]=r),n=B(n=b[r%b.length].replace(/_\w/g,function(e){return e.charAt(1).toUpperCase()})),n=Zeplin.urls.appURL+"/img/emotars/emotar"+n+".png";var s="https://secure.gravatar.com/avatar/"+a()(e.email);return{src:s+"?"+(t.size?"s="+t.size+"&":"")+"d="+n,srcset:s+"?"+(t.size?"s="+2*t.size+"&":"")+"d="+n+" 2x"}}}function j(e,t,n){var i=e.parentElement;i.classList.add("loading"),e.removeAttribute("src"),e.removeAttribute("srcset"),e.addEventListener("load",function t(){e.removeEventListener("load",t),i.classList.remove("loading")});var a=v(t,{ignoreRandomEmotar:!!n,size:e.width});a&&Object.assign(e,a)}var S={king:4,queen:3,rook:2,knight:1,pawn:0,owner:2,admin:1,user:0},E={role:function(e,t){return"invited"===e.user.status?"invited"===t.user.status&&e.user.email<t.user.email?-1:1:"invited"===t.user.status?-1:e.role===t.role?e.user.username<t.user.username?-1:1:S[t.role]-S[e.role]},created:function(e,t){return new Date(t.created)-new Date(e.created)},lastUpdated:function(e,t){return new Date(t.updated)-new Date(e.updated)},_property:function(e,t,n){e&&(t=t[e],n=n[e]);for(var i=t.toLowerCase().match(/\D+|\d+/g),a=n.toLowerCase().match(/\D+|\d+/g),o=Math.min(i.length,a.length),r=0;r<o;r++)if(i[r]!==a[r]){var s=parseInt(i[r],10),l=parseInt(a[r],10);return isNaN(s)||isNaN(l)?i[r]<a[r]?-1:i[r]>a[r]?1:0:s-l}return i.length-a.length},naturally:function(e,t){return E._property(null,e,t)},name:function(e,t){return E._property("name",e,t)}};function w(e){e.addEventListener("animationend",function(t){e.classList.remove("wiggle")}),e.classList.add("wiggle")}var L=/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83D\uDC69\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83D\uDC69\u200D[\u2695\u2696\u2708])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC68(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F/g,C=/\ud83c[\udffb-\udfff]/g;function D(e){return e.replace(L,function(e){return C.test(e)?'<span class="emoji skinType">'+e+"</span>":'<span class="emoji">'+e+"</span>"}).replace(/<\/span><span class="emoji skinType">/g,"")}function x(e,t){var n=e.findIndex(t);if(-1!==n)return e.splice(n,1)[0]}function k(e,t){return e.fontSize>t.fontSize?-1:e.fontSize===t.fontSize?e.fontWeight>t.fontWeight?-1:e.fontWeight===t.fontWeight?e.color&&t.color?e.fontFace<=t.fontFace?-1:1:e.color?-1:t.color?1:e.fontFace<=t.fontFace?-1:1:1:1}function q(e,t,n){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function T(e,t){return!(!e||!/^[0-9a-f]{24}$/i.test(e))||("Raven"in window&&Raven.captureException(new Error("Invalid "+(t||"object")+" id"),{extra:{id:e}}),!1)}var _=["user","admin","owner","pawn","knight","rook","queen","king"],I={canTransferOwnership:["king","queen","rook","owner"],canLeaveProject:["king","queen","rook","knight","pawn","user","admin"],canCreateProject:["king","queen","rook"],canUpdateProject:["king","queen","rook","owner","admin","user"],canChangeProjectAccesibility:["king","queen","rook","owner","admin"],canChangeProjectStatus:["king","queen","rook","owner","admin"],canDeleteProject:["king","queen","rook","owner"],canManageScreens:["king","queen","rook","owner","admin","user"],canMoveScreens:["king","queen","rook","owner","admin"],canManageColors:["king","queen","rook","owner","admin","user"],canManageTextStyles:["king","queen","rook","owner","admin","user"],canRemoveNotes:["king","queen","owner","admin"],canRemoveExtensions:["king","queen","rook","knight","owner","admin","user"]};function O(e){return function(t){return I[e].indexOf(t.role)>=0}}function P(e){return e.charAt(0).toLowerCase()+e.substring(1)}function B(e){return e.charAt(0).toUpperCase()+e.substring(1)}var A={isSuperior:function(e,t,n){var i=_.indexOf(e.role),a=_.indexOf(t.role);return n&&i===a||i>a}};for(var N in I)A[N]=O(N);var R=["king","queen","rook","knight","pawn"];function U(e){return!e.users.length||R.includes(e.users[0].role)}function F(e,t,n){var i=t.toLowerCase();if(e===i)return{score:1,hasFuzzyMatch:!1};var a=0,o=e,r=n&&n.toLowerCase();if(r&&o.includes(r)){a+=.3;var s=o.replace(new RegExp("\\s*\\b"+r+"\\s*\\b","g")," ").trim();s.length&&(o=s)}var l=i.indexOf(o);l>-1&&(a+=.3,i.startsWith(o)?a+=.3:" "===i.charAt(l-1)&&(a+=.2),a+=(i.length-l)/i.length/200);for(var c=-1,u=0,d=0,m=c=i.indexOf(o.charAt(d));m<i.length&&-1!==c;m++){u+=(i.length-c)/i.length/200," "===i.charAt(c>0?c-1:c)&&(u+=(i.length-c)/i.length/200);var p=o[++d];c=p?i.indexOf(p,c+1):-1}var g=!1;return d===o.length&&(a+=.05,a+=u,g=!0),{score:a,hasFuzzyMatch:g}}function M(e,t,n,i){var a=0,r=t.toLowerCase();if(r.includes(n))a=r.indexOf(n),e.innerHTML=o(t.slice(0,a))+"<span class='highlight'>"+o(t.slice(a,a+n.length))+"</span>"+o(t.slice(a+n.length,t.length));else if(i){var s=Array.from(t),l=Array.from(r),c=Array.from(n),u="",d=0;a=l.indexOf(c[0]);for(var m=0;m<l.length;m++)if(a===m){var p=c[++d];a=p?l.indexOf(p,a+1):-1,u+="<span class='highlight'>"+o(s[m])+"</span>"}else u+=o(s[m]);e.innerHTML=u}else e.textContent=t}var z={downloads:"/downloads",forgotPassword:"/forgot-password",hodor:"/hodor",huggingSlack:"/hugging-slack",login:"/login",preview:"/project/:pid/preview",profile:"/profile","profile-account":"/profile/account","profile-password":"/profile/password","profile-billing":"/profile/billing",project:"/project/:pid","project-dashboard":"/project/:pid/dashboard","project-styleguide":"/project/:pid/styleguide","project-screen":"/project/:pid/screen/:sid",projects:"/projects",register:"/register",resetPassword:"/reset-password",thanks:"/thanks",verify:"/verify",welcome:"/welcome","organization-create":"/organization/create","organization-dashboard":"/organization/:oid/dashboard","organization-profile":"/organization/:oid/profile","organization-profile-billing":"/organization/:oid/profile/billing","organization-projects":"/organization/:oid/projects"};function Z(e){var t=(e="?"===e[0]?e.substring(1):e).split("&").map(function(e){return e.split("=").map(function(e){return e.replace(/\+/g,"%20")}).map(decodeURIComponent)}),n=Array.from(new Set(t.map(function(e){return e[0]}))).reduce(function(e,t){return e[t]=[],e},{});return t.forEach(function(e){var t=n[e[0]];t&&e[1]&&t.push(e[1])}),n}function H(e){if(!Object.keys(e))return"";var t=[];return Object.keys(e).forEach(function(n){e[n]&&("string"==typeof e[n]?t.push([n,e[n]]):e[n].forEach(function(e){t.push([n,e])}))}),t.map(function(e){return e.map(encodeURIComponent).join("=")}).join("&")}function V(e){return 0===Object.keys(e).length}function W(e,t){t=t||{};var n=new URL(t.origin||"https://app.zeplin.io");return n.pathname=t.url?function(e,t){return Object.keys(t).reduce(function(e,n){return e.replace(new RegExp(":"+n),t[n])},e)}(z[e],t.url):z[e],t.query&&!V(t.query)&&(n.search=H(t.query)),t.hash&&!V(t.hash)&&(n.hash=H(t.hash)),n.toString()}function Y(e){return(e.getDay()+6)%7}function K(e){var t=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=t.getTime(),i=new Date(n-864e5),a=new Date(n-864e5*Y(e)),o=new Date(n-864e5*(Y(e)+7)),r=new Date(n-864e5*(e.getDate()-1)),s=new Date(n-864e5*(e.getDate()+1));return s.setDate(1),[["today",t],["yesterday",i],["this week",a],["last week",o],["this month",r],["last month",s]]}().find(function(t){return e>=t[1]});if(t)return t[0];var n={month:"long"};return(new Date).getFullYear()!==e.getFullYear()&&(n.year="numeric"),te(e,n)}function X(e,t){return e.split(/[\W_]/).some(function(e){return e.startsWith(t)})}function $(e,t){return t?e.length-e.split("").reverse().join("").search(/\W/)-1:e.search(/\W/)}var J=["broccoli","car","cook","elephant","mariachi","paw","pear","rocket"],G=J.map(function(){return.95/(J.length-1)});function Q(){for(var e=Math.random(),t=0,n=0;t<J.length;t++)if(e<=(n+=G[t]))return J[t];return J[J.length-1]}G[J.indexOf("mariachi")]=.05;new Intl.NumberFormat("en-US",{useGrouping:!1,minimumFractionDigits:1,maximumFractionDigits:2});function ee(e){return e?`https://extensions.zeplin.io/${e.id}`:"https://extensions.zeplin.io"}function te(e,t){var n=new Intl.DateTimeFormat("en",t),i=n.resolvedOptions().timeZone;return i&&"etc/unknown"!==i.toLowerCase()||(t.timeZone="UTC",n=new Intl.DateTimeFormat("en",t)),n.format(new Date(e))}function ne(e,t){const n=e.x+e.width,i=e.y+e.height,a=t.x+t.width,o=t.y+t.height;return e.x<=t.x&&e.y<=t.y&&n>=a&&i>=o}},function(e,t){e.exports=preact},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});var i=n(6),a=n(8),o=n(3);function r(e,t){return t=t||{},e>=400&&e<500?new i.a(e,t.title,t.message):e>=500&&e<600?new a.a(e):new Error("We're experiencing a problem here, our developers are on the case. Please try it later.")}function s(e,t){var n={title:e.title,message:e.message};if(e instanceof a.a)t?"serverErrorHandler"in t?t.serverErrorHandler(e):("serverErrorDialogCallback"in t?n.done={cb:t.serverErrorDialogCallback}:"dialogCallback"in t&&(n.done={cb:t.dialogCallback}),o.a(n)):o.a(n);else if(e instanceof i.a)if(401===e.status){if(t&&"clientErrorHandler"in t&&"object"==typeof t.clientErrorHandler)if("function"==typeof(s=t.clientErrorHandler[401]))return void s();Cookies.expire("userToken"),localStorage.removeItem("user"),Raven.setUserContext(),o.a({title:e.title,message:e.message},{defer:!0}),Zeplin.requireLogin()}else if(400===e.status&&Raven.captureException(e),t)if("clientErrorHandler"in t){var r=t.clientErrorHandler;if("function"==typeof r)r(e);else if("object"==typeof r){var s;"function"==typeof(s=r[e.status])?s(e):"default"in r&&r.default(e)}}else"clientErrorDialogCallback"in t?n.done={cb:t.clientErrorDialogCallback}:"dialogCallback"in t&&(n.done={cb:t.dialogCallback}),o.a(n);else o.a(n);else Raven.captureException(e),t&&"fallbackHandler"in t?t.fallbackHandler():o.a()}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(7),a=n.n(i);function o(e){var t=document.createElement("dialog"),n=document.createElement("h1"),i=document.createElement("div"),a=document.createElement("form"),o=document.createElement("button"),r=document.createElement("div"),s=document.createElement("div");if(e&&e.img){var l=document.createElement("div");l.classList.add("iconContainer"),r.appendChild(l),function(e,t){var n=t.querySelector("img");n?(n.src=e.src,n.srcset=e.srcset||""):((n=document.createElement("img")).src=e.src,n.srcset=e.srcset||"",t.querySelector(".iconContainer").appendChild(n))}(e.img,t)}if(n.classList.add("title"),r.appendChild(n),i.classList.add("message"),r.appendChild(i),e&&e.input){r.classList.add("inputDialogContainer");var c=document.createElement("div"),u=document.createElement("span"),d=document.createElement("input");c.classList.add("inputContainer"),u.classList.add("subtitle"),u.textContent=e.input.title,d.type=e.input.type,c.appendChild(u),c.appendChild(d),a.appendChild(c)}if(e&&e.cancel){var m=document.createElement("button");m.classList.add("cancel"),m.type="submit",m.textContent=e.cancel.name||"CANCEL",m.appendChild(document.createElement("paper-ripple")),e.cancel.cb&&m.addEventListener("click",e.cancel.cb),s.appendChild(m)}return o.classList.add("done"),o.type="submit",o.autofocus=!0,o.textContent=e&&e.done&&e.done.name||"OK",o.appendChild(document.createElement("paper-ripple")),e&&e.done&&e.done.cb&&o.addEventListener("click",e.done.cb),s.appendChild(o),s.classList.add("buttonContainer"),a.appendChild(s),a.setAttribute("method","dialog"),r.appendChild(a),t.appendChild(r),document.querySelector("body").appendChild(t),t}function r(e,t){if(!document.querySelector("dialog.generic")||e){var n=e&&e.title||"",i=e&&e.message||"We're experiencing a problem here, our developers are on the case. Please try it later.",r=!1;if(t&&"defer"in t&&(r=t.defer),r)sessionStorage.setItem("deferredDialog",JSON.stringify({title:n,message:i}));else{var s=o(e);a.a.registerDialog(s),s.querySelector(".title").textContent=n,s.querySelector(".message").textContent=i,s.addEventListener("click",function(e){e.stopPropagation()}),s.addEventListener("close",function(){s.remove()}),e||s.classList.add("generic"),s.showModal()}}}n.d(t,"b",function(){return a.a});var s=JSON.parse(sessionStorage.getItem("deferredDialog"));s&&(sessionStorage.removeItem("deferredDialog"),r(s))},function(e,t,n){"use strict";t.a=function(){var e=[];return Array.from(arguments).forEach(function(t){t&&(Array.isArray(t)?e=e.concat(t):"string"==typeof t?e.push(t):"object"==typeof t&&(e=e.concat(Object.keys(t).filter(function(e){return!0===t[e]}))))}),e.join(" ")}},function(e,t){e.exports=md5},function(e,t,n){"use strict";function i(e,t,n){this.stack=(new Error).stack,this.status=e||400,this.title=t||"Ooops!",this.message=n||"We're experiencing a problem here, our developers are on the case. Please try it later."}t.a=i,i.prototype=Object.create(Error.prototype),i.prototype.name="ClientError",i.prototype.toString=function(){return"("+this.status+") "+this.title+"\n"+this.message}},function(e,t){e.exports=dialogPolyfill},function(e,t,n){"use strict";function i(e){switch(this.stack=(new Error).stack,this.status=e||500,this.status){case 503:this.message="Under maintenance, please try again in a little while.";break;default:this.message="We're experiencing a problem here, our developers are on the case. Please try it later."}}t.a=i,i.prototype=Object.create(Error.prototype),i.prototype.name="ServerError",i.prototype.toString=function(){return"("+this.status+") "+this.message}},function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return p});var i,a,o,r=n(15),s=n.n(r),l={notificationStatus:!1,notificationBannerStatus:!0,projectSortType:"created",tabTutorialSeen:!1,versionsTutorialSeen:!1,hideNoVectorAssetInfo:!1,lastOrganization:"user",dashboardMemberSortKey:{field:"role",reverse:!0},resolvedDotsTutorialSeen:!1,noScreensDesignToolSelection:"photoshop",flowLinkInfoDismissed:!1,windowsAppsNewReleasePointReminderOpen:!1},c={assetNamingConvention:"default",dotListingsStatusFilter:"open",generatorContainerWidth:300,lastNoteColorUsed:"yellow",layoutGridEnabled:!1,noResourceInfoDismissed:!1,noteVisibility:!0,projectInfoWidth:280,rightSidebarWrapperWidth:280,sectionsCollapseState:{},showOptimizedSVG:!0,versionsLastSeen:{},versionsSidebarWrapperWidth:280,zoomLevel:1,androidResFolderReminderSeen:!1,extensionsMigrated:!1};function u(){i=s.a.createInstance({driver:[s.a.INDEXEDDB,s.a.LOCALSTORAGE],name:"userPrefs",version:1}),a=s.a.createInstance({driver:[s.a.INDEXEDDB,s.a.LOCALSTORAGE],name:"projectPrefs",version:1}),o=s.a.createInstance({driver:[s.a.INDEXEDDB,s.a.LOCALSTORAGE],name:"extensionPrefs",version:1})}u();var d={get:function(e){return i.getItem(e).then(function(t){return null===t?l[e]:t})},set:function(e,t){return i.setItem(e,t)}},m={get:function(e,t,n){return a.getItem(e).then(function(e){return e&&t in e?n?e[t][n]:e[t]:c[t]})},set:function(e,t,n,i){return a.getItem(e).then(function(o){return o||(o={}),i?(o[t]||(o[t]={}),o[t][n]=i,a.setItem(e,o)):(o[t]=n,a.setItem(e,o))})}},p={get:function(e,t,n){return o.getItem(e).then(function(e){return e&&t in e?n?e[t][n]:e[t]:null})},set:function(e,t,n,i){return o.getItem(e).then(function(a){return a||(a={}),a[t]||(a[t]={}),a[t][n]=i,o.setItem(e,a)})},remove:function(e){return o.removeItem(e)}};function g(e){return function(){var t=arguments;return e.apply(null,t).catch(function(){u(),e.apply(null,t)})}}m.get=g(m.get),m.set=g(m.set),d.get=g(d.get),d.set=g(d.set),p.get=g(p.get),p.set=g(p.set),a.iterate(function(e,t){var n=!1;"webStyleColorFormat"in e&&(e.styleColorFormat=e.webStyleColorFormat,delete e.webStyleColorFormat,n=!0),"webDefaultValues"in e&&(e.showDefaultValues=e.webDefaultValues,delete e.webDefaultValues,n=!0),"webShowDimensions"in e&&(e.showDimensions=e.webShowDimensions,delete e.webShowDimensions,n=!0),e.extensionsMigrated&&(n=n||["iosStyleExportType","androidStyleExportType","webStyleExportType","osxStyleExportType","styleColorFormat","showDefaultValues","showDimensions","webUnitlessLineHeight","webMixin","androidLineSpacingType","attributedStringShowDefaultAttributes","iosDeploymentTarget","osxDeploymentTarget","extensionPrefsMigrated","selectedExtension"].map(function(t){return function(e,t){if(t in e){var n=e[t];return delete e[t],n}return null}(e,t)}).some(Boolean)),n&&a.setItem(t,e)})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i="https://app.zeplin.io";function a(e){var t=new URL(i);return t.pathname=e,t.href}},function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"a",function(){return b}),n.d(t,"d",function(){return S}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return j});var i,a,o,r,s=n(19),l=(n.n(s),n(25)),c=n.n(l),u=n(2),d=n(14),m=n(0),p=n(26),g=n(20),h=Object.freeze({android:"Android",ios:"iOS",osx:"macOS",web:"Web"}),f=3e4;function b(){return i?Promise.resolve(i):fetch(`${Zeplin.urls.baseURL}/api/plans`).then(function(e){return e.json().then(function(t){if(e.ok)return i=Object.freeze(t.plans);throw u.a(e.status,t)})})}function y(){r||"dismissed"===sessionStorage.getItem("socketErrorBannerStatus")||(r=setTimeout(function(){d.b({contentType:"text",group:"socket",content:"Real-time updates are disabled due to socket connectivity problem.",closeCallback:function(){sessionStorage.setItem("socketErrorBannerStatus","dismissed")}})},f))}window.addEventListener("storage",function(e){if(e.storageArea===localStorage&&"user"===e.key){var t=JSON.parse(e.oldValue),n=JSON.parse(e.newValue);if(!n)return;if(Zeplin.user=n,t._id!==n._id)return location.reload()}}),function(){var e=window,t=e.Intercom;function n(){var e=i.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://widget.intercom.io/widget/41ycdg94";var t=i.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}if("function"==typeof t)t("reattach_activator"),t("update",intercomSettings);else{var i=document,a=function(){a.c(arguments)};a.q=[],a.c=function(e){a.q.push(e)},e.Intercom=a,e.attachEvent?e.attachEvent("onload",n):e.addEventListener("load",n,!1)}}();const v=new g.a(p.a,document.body);function j(e){v.update({page:e})}function S(e){let t;const n={contentType:"html",group:"payment"},i=document.querySelector("#billingTab");function a(){d.a("payment"),i&&(document.querySelector("header.tabs").dataset.selection="billing",document.querySelector("#billingTab").checked=!0)}e.oid?"queen"!==e.currentRole&&"king"!==e.currentRole||(t=`Payment failed: To continue accessing ${e.isGeneric?"the projects of the organization":"this project"}, please <a href="${Object(m.I)("organization-profile-billing",{url:{oid:e.oid}})}">update</a> your organization payment information.`,n.bodyCallbacks={a:a}):"owner"===e.currentRole?(t=`Payment failed: To continue accessing ${e.isGeneric?"your projects":"this project"}, please <a href="${Object(m.I)("profile-billing")}">update</a> your payment information.`,n.bodyCallbacks={a:a}):t=`Payment failed: To continue accessing this project, please contact the owner (${e.ownerEmail}) and ask them to update their payment information.`,t&&(n.content=t,d.b(n))}function E(e){return fetch(`${Zeplin.urls.baseURL}/users/emotar`,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({emotar:e})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw u.a(e.status,t)})})}v.render(),Cookies.get("userToken")&&(Intercom("boot",{app_id:"41ycdg94",user_id:Zeplin.user._id,email:Zeplin.user.email,last_seen_user_agent:navigator.userAgent,"last seen at web":Math.floor(Date.now()/1e3),username:Zeplin.user.username,verified:"verified"===Zeplin.user.status,plan:Zeplin.user.paymentPlan}),(a=new c.a("12ddd9afec9f9b421244",{cluster:"zeplin",encrypted:!0,enabledTransports:["ws","wss"],authEndpoint:`${Zeplin.urls.baseURL}/v2/pusher/auth`,auth:{headers:{"Zeplin-Token":Cookies.get("userToken")}}})).connection.bind("failed",y),a.connection.bind("unavailable",y),a.connection.bind("connected",function(){Zeplin.headers.set("Zeplin-Socket-Id",a.connection.socket_id),clearTimeout(r),d.a("socket")}),(o=a.subscribe(`private-user@${Zeplin.user._id}`)).bind("UpdateUsername",function(e){Zeplin.updateUser({username:e.body.username})}),o.bind("UpdateEmail",function(e){Zeplin.updateUser({email:e.body.email})}),o.bind("VerifyUser",function(){Zeplin.updateUser({status:"verified"})}),o.bind("UpdateEmailNotifications",function(e){Zeplin.updateUser({emailNotifications:e.body.emailNotifications})}),o.bind("UpdateUserBilling",function(e){Zeplin.updateUser({billing:{email:e.body.email,extraInfo:e.body.extraInfo}})}),o.bind("DeleteUser",function(){Cookies.expire("userToken"),localStorage.removeItem("user"),location.replace(Object(m.I)("login"))}))},function(e,t,n){"use strict";var i;"function"==typeof window.require&&(i=window.require("electron")),t.a=i},,function(e,t,n){"use strict";t.b=function(e){e=e||{};var t=document.importNode(i.content,!0).querySelector(".banner"),n=t.querySelector(".bannerContent");if(e.group){if(document.querySelector("."+e.group+"Banner"))return;t.classList.add(e.group+"Banner")}switch(e.contentType){case"html":n.innerHTML=e.content;break;case"text":default:n.textContent=e.content}t.classList.add(e.type||"warn"),t.addEventListener("click",function(e){e.stopPropagation()}),e.bannerCloseText&&(t.querySelector(".bannerCloseButton span").textContent=e.bannerCloseText);e.style&&e.style.zIndex&&(t.style.zIndex=e.style.zIndex);if(t.querySelector(".bannerCloseButton").addEventListener("click",function(n){n.stopPropagation(),n.preventDefault(),e.closeCallback&&e.closeCallback(),t.remove()}),e.bodyCallbacks)for(var a in e.bodyCallbacks)t.querySelector(a).addEventListener("click",e.bodyCallbacks[a]);e.container?e.container.appendChild(t):document.body.appendChild(t)},t.a=function(e){var t=document.querySelector("."+e+"Banner");t&&t.remove()};var i=document.getElementById("bannerTemplate")},function(e,t){e.exports=localforage},,,function(e,t,n){"use strict";function i(){}i.prototype.toObject=function(){return{}},i.prototype.serialize=function(){return{model:this.constructor.name,data:this.toObject()}},t.a=i},function(e,t,n){var i;i=(()=>({sanitizeUrl(e,t){if(!e)return t;const n=e.replace(/[^\x20-\x7E]/gim,"");return"/"===n[0]?n:/^(?:%20|\s)*(?:javascript|data)/im.test(n)?t:n}})),"undefined"!=typeof window?(window.interop=window.interop||{},window.interop.commonUtils=i()):e.exports=i()},function(e,t,n){"use strict";var i=n(1),a=n.n(i);t.a=class{constructor(e,t){this.domContainer=t,this.preactComponent=e,this.props={}}render(e){this.props=e||{},this.domNode=a.a.render(a.a.h(this.preactComponent,this.props),this.domContainer,this.domNode)}update(e){Object.assign(this.props,e),this.domNode=a.a.render(a.a.h(this.preactComponent,this.props),this.domContainer,this.domNode)}remove(){a.a.render(null,this.domContainer,this.domNode),this.domNode=null,this.props=null}}},function(e,t,n){"use strict";var i,a,o=n(12),r=n(9),s=n(0),l=["assetNamingConvention","showOptimizedSVG"];!function(){if(o.a){var e=!!o.a&&!!o.a.features&&!!o.a.features.webviews;i=Object.defineProperties({},{addRecentProject:{value:function(e){o.a.ipcRenderer.send("add-recent-project",{id:e.id,name:e.name})}},updateProjectPreferences:{value:function(e){o.a.ipcRenderer.send("project-preferences-changed",e)}},bindProjectPreferences:{value:function(e){o.a.ipcRenderer.removeAllListeners("project:"+a+":preferenceMenuItemClicked"),a=e.id,o.a.ipcRenderer.on("project:"+a+":preferenceMenuItemClicked",function(e,t,n){var i;l.includes(t)&&("string"==typeof n?(i=document.querySelector("input[type='radio'][name='"+t+"'][value='"+n+"']")).checked=!0:(i=document.querySelector("input[type='checkbox'][name='"+t+"']")).checked=n,i.dispatchEvent(new Event("change")))}),Promise.all(l.map(function(t){return r.b.get(e.id,t)})).then(function(t){var n=l.reduce(function(e,n,i){return e[n]=t[i],e},{});o.a.ipcRenderer.send("project-preferences",{id:e.id,type:e.type},n)})}},updateEditCapabilities:{value:function(e){o.a.ipcRenderer.send("edit-capabilities",e)}},setViewMenuContext:{value:function(e,t){o.a.ipcRenderer.send("view-menu-context",e,t)}}}),o.a.ipcRenderer.on("open-recent-project",function(e,t){i.onOpenRecentProject?i.onOpenRecentProject(t):location.assign(s.I("project",{url:{pid:t}}))}),e||o.a.ipcRenderer.on("projects",function(){i.onProjects?i.onProjects():location.assign(s.I("projects"))})}}(),t.a=i},function(e,t,n){"use strict";t.a=function(e,t,n="nodeRefs"){let i;n in e?i=e[n]:(i={},e[n]=i);return e=>{i[t]=e}}},function(e,t,n){"use strict";var i=n(40),a=n(56),o=n(18);const r=Object.freeze({android:"snakeCase",ios:"camelCase",osx:"camelCase",web:"kebabCase"}),s=new Intl.NumberFormat("en-US",{useGrouping:!1,maximumFractionDigits:2});function l(e){const t=Math.trunc(e+e/255);return Math.max(0,Math.min(t,255))}function c(e,t,n,i){return t||i?(e*t+n*i*(1-t))/(t+i*(1-t)):0}function u(e){const t=Math.max(0,Math.min(e,255));return(t<16?"0":"")+t.toString(16)}class Color extends o.a{constructor(e){if(e instanceof Color)return e;super();const{_id:t,id:n,name:i,r:a,g:o,b:r,a:s=1}=e;var c;this.id=t||n,this.r=l(a),this.g=l(o),this.b=l(r),this.a=(c=s,Math.max(0,Math.min(c,1))),this.name=i}static get NAMED_COLORS(){return a.a}static fromHex(e){const t=parseInt(e.replace("#",""),16);return new Color({r:t>>16&255,g:t>>8&255,b:255&t})}toObject(){return{r:this.r,g:this.g,b:this.b,a:this.a,name:this.name}}equals(e){const t=new Color(e);return this.r===t.r&&this.g===t.g&&this.b===t.b&&s.format(this.a)===s.format(t.a)}blend(e){const t=new Color(e);return new Color({r:c(this.r,this.a,t.r,t.a),g:c(this.g,this.a,t.g,t.a),b:c(this.b,this.a,t.b,t.a),a:this.a+t.a*(1-this.a)})}static blendAll(e){let t=new Color(Color.NAMED_COLORS.transparent);for(const n of e)if(n.a&&1===(t=t.blend(n)).a)break;return t}hexBase(){return u(this.r)+u(this.g)+u(this.b)}toHexString(e){let t=this.hexBase();if(this.a<1){const n=255*this.a,i=u(Math.trunc(n+n/255));t=e?i+t:t+i}return`#${t}`}toRGBABase(){const e=`${this.r} ${this.g} ${this.b}`;return this.a<1?`rgba ${e} ${s.format(this.a)}`:`rgb ${e}`}toRGBAString(){const e=`${this.r}, ${this.g}, ${this.b}`;return this.a<1?`rgba(${e}, ${s.format(this.a)})`:`rgb(${e})`}_toHSL(){const e=this.r/255,t=this.g/255,n=this.b/255,i=Math.max(e,t,n),a=Math.min(e,t,n),o=(i+a)/2;let r,s;if(i===a)r=0,s=0;else{const l=i-a;switch(s=o>.5?l/(2-i-a):l/(i+a),i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:s,l:o}}toHSLAString(){const e=this._toHSL(),t=`${Math.round(360*e.h)}, ${Math.round(100*e.s)}%, ${Math.round(100*e.l)}%`;return this.a<1?`hsla(${t}, ${s.format(this.a)})`:`hsl(${t})`}toPlatformString(e,t){switch(e){case"android":return this.toHexString(!0);case"ios":case"osx":return this.toRGBABase();case"web":return this.toCSS(t);default:return this.toHexString()}}toCSS(e){switch(e){case"hex":return this.toHexString();case"rgb":return this.toRGBAString();case"hsl":return this.toHSLAString();case"default":default:return this.a<1?this.toRGBAString():this.toHexString()}}generateName(e){let t=0,n=-1,o=-1;for(let s=0;s<a.b.length;s++){const l=new Color(a.b[s]);if(this.r===l.r&&this.g===l.g&&this.b===l.b)return Object(i.a)(l.name,r[e]);const c=this._toHSL();Object.keys(c).forEach(e=>c[e]*=255);const u=l._toHSL();Object.keys(u).forEach(e=>u[e]*=255),t=Math.pow(this.r-l.r,2)+Math.pow(this.g-l.g,2)+Math.pow(this.b-l.b,2)+2*(Math.pow(c.h-u.h,2)+Math.pow(c.s-u.s,2)+Math.pow(c.l-u.l,2)),(o<0||t<o)&&(o=t,n=s)}return Object(i.a)(a.b[n].name,r[e])}}t.a=Color},function(e,t,n){"use strict";var i=n(37);t.a=i.a},function(e,t){e.exports=Pusher},function(e,t,n){"use strict";var i=n(27);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(4),r=n(10),s=n(28);n.n(s);const l={default:[{text:"Downloading Mac and Windows apps",url:"https://support.zeplin.io/quick-start/downloading-mac-and-windows-apps"},{text:"Creating a project",url:"https://support.zeplin.io/quick-start/creating-a-project"},{text:"Exporting assets from Sketch",url:"https://support.zeplin.io/sketch-integration/exporting-assets-from-sketch"},{text:"Exporting designs from Photoshop",url:"https://support.zeplin.io/quick-start/exporting-designs-from-photoshop"},{text:"Updating plans, billing information",url:"https://support.zeplin.io/pricing-and-plans"}],projects:[{text:"Inviting users",url:"https://support.zeplin.io/zeplin-101/inviting-a-user-to-a-project"},{text:"Exporting designs",url:"https://support.zeplin.io/quick-start/exporting-designs-from-sketch"},{text:"Managing profile",url:"https://support.zeplin.io/profile"},{text:"Creating a project",url:"https://support.zeplin.io/quick-start/creating-a-project"},{text:"Transferring a project",url:"https://support.zeplin.io/faq/transferring-a-project"}],"project-dashboard":[{text:"Adding a project to Slack",url:"https://support.zeplin.io/faq/adding-a-project-to-slack"},{text:"Moving screens between projects",url:"https://support.zeplin.io/zeplin-101/moving-screens-between-projects"},{text:"Downloading screens as images",url:"https://support.zeplin.io/zeplin-101/downloading-screens-as-images"},{text:"Organizing screens with Sections",url:"https://support.zeplin.io/zeplin-101/organizing-screens-with-sections"},{text:"Collaborating with the team",url:"https://support.zeplin.io/quick-start/collaborating-with-your-team"}],"project-styleguide":[{text:"Organizing Styleguide colors",url:"https://support.zeplin.io/zeplin-101/organizing-styleguide-colors"},{text:"Changing color formats",url:"https://support.zeplin.io/zeplin-101/changing-color-formats"},{text:"Exporting React Native code snippets",url:"https://support.zeplin.io/zeplin-101/exporting-react-native-code-snippets"}],"project-screen":[{text:"Updating a screen",url:"https://support.zeplin.io/zeplin-101/updating-a-screen"},{text:"Exporting grids (layouts) from Sketch or Photoshop",url:"https://support.zeplin.io/zeplin-101/exporting-grids-layouts-from-sketch-or-photoshop"},{text:"Changing units",url:"https://support.zeplin.io/faq/changing-units"},{text:"Comparing app/website with designs using Pop Out",url:"https://support.zeplin.io/zeplin-101/comparing-appwebsite-with-designs-using-pop-out"},{text:"Exporting assets",url:"https://support.zeplin.io/quick-start/exporting-designs-from-sketch"}],"organization-dashboard":[{text:"Assigning roles to organization members",url:"https://support.zeplin.io/pricing-and-plans/organization/assigning-roles-to-organization-members"},{text:"Restricting organization members",url:"https://support.zeplin.io/pricing-and-plans/organization/restricting-organization-members"},{text:"Grouping organization members by tags",url:"https://support.zeplin.io/pricing-and-plans/organization/grouping-organization-members-by-tags"},{text:"Updating organization profile and billing information",url:"https://support.zeplin.io/pricing-and-plans/organization/updating-organization-profile-and-billing-information"},{text:"Transfer organization ownership",url:"https://support.zeplin.io/pricing-and-plans/organization/transferring-an-organization"}],"organization-projects":[{text:"Transferring personal projects to org",url:"https://support.zeplin.io/faq/transferring-a-project"},{text:"Exporting designs",url:"https://support.zeplin.io/quick-start/exporting-designs-from-sketch"},{text:"Assigning roles to organization members",url:"https://support.zeplin.io/pricing-and-plans/organization/assigning-roles-to-organization-members"},{text:"Updating organization profile and billing information",url:"https://support.zeplin.io/pricing-and-plans/organization/updating-organization-profile-and-billing-information"},{text:"Archiving a project",url:"https://support.zeplin.io/zeplin-101/archiving-a-project"}],"organization-profile":[{text:"Updating organization profile and billing information",url:"https://support.zeplin.io/pricing-and-plans/organization/updating-organization-profile-and-billing-information"},{text:"Updating invoice and billing information",url:"https://support.zeplin.io/pricing-and-plans/updating-invoice-and-billing-information"},{text:"Setting a billing email",url:"https://support.zeplin.io/pricing-and-plans/setting-a-billing-email"},{text:"Updating credit card",url:"https://support.zeplin.io/profile/updating-credit-card"},{text:"Sending Invoices",url:"https://support.zeplin.io/faq/sending-invoices"}],"profile-account":[{text:"Setting your profile picture",url:"https://support.zeplin.io/profile/setting-your-profile-picture"},{text:"Updating invoice and billing information",url:"https://support.zeplin.io/pricing-and-plans/updating-invoice-and-billing-information"},{text:"Setting a billing email",url:"https://support.zeplin.io/pricing-and-plans/setting-a-billing-email"},{text:"Changing your plan",url:"https://support.zeplin.io/pricing-and-plans/changing-your-plan"},{text:"Transferring subscription",url:"https://support.zeplin.io/pricing-and-plans/transferring-subscription"}]};t.a=class extends a.a.Component{constructor(){super(),this.closePopup=this.closePopup.bind(this),this.escHandler=this.escHandler.bind(this),this.buttonClickHandler=this.buttonClickHandler.bind(this),this.popupClickHandler=this.popupClickHandler.bind(this),this.showMessages=this.showMessages.bind(this),this.handleLinkClick=this.handleLinkClick.bind(this),this.state={popupOpen:!1,unreadCount:0}}closePopup(e){this.state.popupOpen&&this.setState({popupOpen:!1})}escHandler(e){this.state.popupOpen&&e.keyCode===Zeplin.KEY_CODE.ESC&&this.closePopup()}buttonClickHandler(e){e.stopPropagation(),this.setState({popupOpen:!this.state.popupOpen})}popupClickHandler(e){e.stopPropagation(),this.closePopup()}showMessages(){Intercom("showMessages")}componentDidMount(){document.addEventListener("click",this.closePopup),document.addEventListener("keydown",this.escHandler),Intercom("onShow",()=>{this.setState({intercomOpen:!0})}),Intercom("onHide",()=>{this.setState({intercomOpen:!1})}),Intercom("onUnreadCountChange",e=>{this.setState({unreadCount:e})})}handleLinkClick(e){mixpanel.webapp.track("Clicked support link",{article:e.target.textContent})}componentWillUnmount(){document.removeEventListener("click",this.closePopup),document.removeEventListener("keydown",this.escHandler)}renderUnreadBadge(){return this.state.unreadCount?a.a.h("div",{class:"unreadBadge"}):null}renderPopup(){if(!this.state.popupOpen)return null;const{page:e="default"}=this.props,t=l[e].map(e=>a.a.h("li",{key:e.url},a.a.h("a",{href:e.url,target:"_blank",onclick:this.handleLinkClick},a.a.h("span",null,e.text))));return a.a.h("div",{class:"supportPopup",onClick:this.popupClickHandler},a.a.h("h3",null,"Handy articles:"),a.a.h("ul",null,t),a.a.h("hr",null),a.a.h("a",{href:"https://support.zeplin.io",target:"_blank"},"Got another question?",a.a.h("img",{src:r.a("img/emjPointUp@12w.png"),srcSet:r.a("img/emjPointUp@24w.png")+" 2x, "+r.a("img/emjPointUp@36w.png")+" 3x"})),a.a.h("hr",null),a.a.h("button",{type:"button",onClick:this.showMessages},a.a.h("span",null,"Contact us",this.renderUnreadBadge())))}render(e,t){const n=Object(o.a)("supportButton",{popupOpen:t.popupOpen,intercomOpen:t.intercomOpen});return a.a.h("div",{class:n,onClick:this.buttonClickHandler},a.a.h("img",{src:r.a("img/icLifeBuoy.svg")}),this.renderPopup(),this.renderUnreadBadge())}}},function(e,t){},,function(e,t,n){"use strict";var i=n(11),a=n(3),o=n(2),r=n(0),s=document.getElementById("loading"),l=document.getElementById("planChooserOverlay"),c=document.getElementById("planChooserContent"),u=document.getElementById("discountNotice"),d=document.getElementById("couponForm"),m=document.getElementById("couponCode"),p=document.getElementById("plans"),g=document.getElementById("applyCouponButton"),h=document.getElementById("friendlyReminderDialog"),f=document.getElementById("cancelFriendlyReminderButton"),b=document.getElementById("continueToPaymentButton");a.b.registerDialog(h);var y,v,j,S,E,w,L,C,D,x={},k={monthly:{bff:"bff",banker_bilo:"banker_bilo",free:"free",starter:"starter_monthly_v2",growing:"growing_monthly_v2",organization:"organization_monthly"},annual:{bff:"bff",banker_bilo:"banker_bilo",free:"free",starter:"starter_annual_v2",growing:"growing_annual_v2",organization:"organization_annual_v2"}},q=["starter_monthly_v2","starter_annual_v2","growing_monthly_v2","growing_annual_v2","organization_monthly","organization_annual_v2"];function T(){l.classList.remove("hidden"),mixpanel.webapp.track("Opened pricing popup"),ga("legacyTracker.send","event","PAYMENT_EVENTS","opened-pricing-popup"),ga("send","pageview","/pricing-popup")}function _(e){i.a().then(function(t){var n=t.find(function(t){return t._id===e});if(y=e,S=n.price){var i=e.split("_");v=i[0],j=i[1]||"monthly",E=v,w=j}else{E=v=e,w=j="annual";var a=document.getElementById("updatePlanButton");a&&("banker_bilo"===e?a.querySelector("button").textContent="💰💰💰":"bff"===e&&(a.querySelector("button").textContent="💝"))}var o=document.getElementById("planName");o&&(o.textContent=n.name),c.dataset.currentPlanId=e,"period"in x?(P(x.period),document.getElementById(x.period+"Payment").checked=!0,delete x.period,T()):(P(j),document.getElementById(j+"Payment").checked=!0),"coupon"in x&&(m.value=x.coupon,m.parentElement.classList.toggle("typed",!!m.value),B(x.coupon),delete x.coupon,T())}).catch(o.b)}var I=StripeCheckout.configure({key:"pk_live_XfHC5uYDKaZYEOC1m9FlXwtq",image:Zeplin.urls.appURL+"/img/favicon/128x128.png",token:function(e){s.classList.remove("hidden"),function(e,t,n,i){s.classList.remove("hidden");var a={plan:k[n][t],stripeToken:e};"monthly"===n&&i&&(a.coupon=i.id);fetch(Zeplin.urls.baseURL+"/stripe/users/subscriptions",{method:"POST",headers:Zeplin.headers,body:JSON.stringify(a)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw o.a(e.status,t)})}).then(function(){fbq("track","Purchase",{value:L/100,currency:"USD",content_type:"product",content_ids:[k[n][t]]}),ga("legacyTracker.send","event","PAYMENT_EVENTS","subscribed","to:"+k[n][t]),mixpanel.webapp.track("Subscribed",{to:k[n][t]}),Zeplin.updateUser({paymentPlan:k[n][t]}),location.replace(Object(r.I)("thanks",{query:{at:"ns"}}))}).catch(function(e){s.classList.add("hidden"),o.b(e)})}(e.id,E,w,C)}});function O(e,t,n,i){var a=t.price/("monthly"===n?1:12),o=e.querySelector(".planPrice"),r=e.querySelector(".planProjectCount"),s=function(e,t){if(!t||"annual"===e)return u.innerHTML="&nbsp;",!1;if(t.redeem_by&&Date.now()/1e3>t.redeem_by)return u.textContent="This coupon is expired.",!1;if(t.max_redemptions&&t.times_redeemed>=t.max_redemptions)return u.textContent="This coupon is maxed out.",!1;var n=t.percent_off?t.percent_off+"% off":t.amount_off/100+"$ off";switch(t.duration){case"once":n+=" for the first "+("monthly"===e?"month":"year");break;case"repeating":n+=" for "+t.duration_in_months+" months";break;case"forever":n+=" forever"}return u.textContent=n,!0}(w,i);e.classList.toggle("annual","annual"===n),s&&(a-=i.percent_off?a*i.percent_off/100:i.amount_off,a=Math.max(a,0)),o.dataset.value=a;var l=(a/=100)%1;o.textContent=Math.trunc(a),o.dataset.fr=l>0?l.toFixed(2).substring(1,4):"",r.textContent=function(e){switch(e){case 1:return"1 active project";case 999:case-1:return"Unlimited projects";default:return e+" Active Projects"}}(t.limit)}function P(e,t){var n=document.querySelector(".plan.growing"),a=document.querySelector(".plan.current"),s=document.querySelector(".plan.organization");w=e||"monthly",d.classList.toggle("invisible","annual"===e),i.a().then(function(i){if(Array.from(document.querySelectorAll(".plan")).forEach(function(n){var a=i.find(function(t){return k[e][n.dataset.planId]===t._id});O(n,a,e,t)}),a&&a.classList.remove("current"),a&&(a.querySelector("button").disabled=!1),"free"===v||"starter"===v||"growing"===v&&"monthly"===j&&"annual"===e?n.classList.add("recommended"):n.classList.remove("recommended"),s.querySelector(".createLink").href=Object(r.I)("organization-create",{query:{period:e}}),S&&e===j&&"company"!==v&&q.indexOf(y)>-1){(a=document.querySelector(".plan."+v)).classList.add("current"),a.querySelector("button").disabled=!0;var o=i.find(function(e){return y===e._id});O(a,o,e)}}).catch(o.b)}function B(e,t){(function(e){return e?fetch(Zeplin.urls.baseURL+"/stripe/coupons/"+encodeURIComponent(e),{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(!e.ok)throw o.a(e.status,t);return t})}):Promise.resolve(null)})(e).then(function(e){C=e,g.disabled=!0,t=t||"auto";var n=e.metadata&&e.metadata.source;mixpanel.webapp.track("Applied coupon",{type:t,source:n}),ga("legacyTracker.send","event","PAYMENT_EVENTS","applied-coupon","type:"+t+(n?";source:"+n:""))}).catch(function(e){C=null,g.disabled=!1,o.b(e)}).then(function(){P(w,C)})}function A(e){var t;e.preventDefault(),D?(t=D._id,a.a({title:"Cancel subscription?",message:"Your organization projects will be archived.",done:{name:"CANCEL PLAN",cb:function(){s.classList.remove("hidden"),fetch(Zeplin.urls.baseURL+"/stripe/organizations/"+t+"/subscriptions",{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw o.a(e.status,t)})}).then(function(){a.a({title:"Subscription cancelled successfully",message:"It's sad to see you go. Let us know if there's anything we can improve: support@zeplin.io",done:{cb:function(){location.replace(Object(r.I)("projects"))}}})}).catch(function(e){s.classList.add("hidden"),o.b(e)})}},cancel:{name:"KEEP"}})):a.a({title:"Cancel subscription?",message:"Make sure to archive your projects before.",done:{name:"CANCEL PLAN",cb:function(){s.classList.remove("hidden"),fetch(Zeplin.urls.baseURL+"/stripe/users/subscriptions",{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw o.a(e.status,t)});Zeplin.updateUser({paymentPlan:"free"}),a.a({title:"Subscription cancelled successfully",message:"It's sad to see you go. Let us know if there's anything bothering you: support@zeplin.io",done:{cb:function(){location.replace(Object(r.I)("projects"))}}})}).catch(function(e){s.classList.add("hidden"),o.b(e)})}},cancel:{name:"KEEP"}})}function N(e,t){I.open({name:"Zeplin, Inc.",description:e,email:Zeplin.user.email,panelLabel:t,amount:L}),mixpanel.webapp.track("Opened Stripe popup"),ga("legacyTracker.send","event","PAYMENT_EVENTS","opened-stripe-popup"),ga("send","pageview","/stripe-popup")}Array.from(c.querySelectorAll("[name='paymentPeriod']")).forEach(function(e){e.addEventListener("change",function(e){P(e.target.value,C)})}),m.parentElement.classList.toggle("typed",!!m.value),m.addEventListener("keyup",function(){m.parentElement.classList.toggle("typed",!!m.value),m.value||(C=null,P(w))}),m.addEventListener("blur",function(){m.parentElement.classList.toggle("typed",!!m.value),m.value||(C=null,P(w))}),m.addEventListener("input",function(e){g.disabled=C&&C.id===m.value}),d.addEventListener("submit",function(e){e.preventDefault(),B(m.value,"manual")}),f.addEventListener("click",function(){h.close()}),b.addEventListener("click",function(){N(h.dataset.planName,"Pay 0/mo")}),p.addEventListener("click",function(e){if(e.target.classList.contains("choosePlan")){var t,n=e.target.closest(".plan");if(E=n.dataset.planId,S)"organization"===E?l.classList.add("hidden"):D?(c=D._id,u=E,d=w,m=C,a.a({title:"Downgrade subscription?",message:"You can upgrade again at anytime.",done:{name:"UPDATE",cb:function(){s.classList.remove("hidden");var e={plan:k[d][u]};"monthly"===d&&m&&(e.coupon=m.id),fetch(Zeplin.urls.baseURL+"/stripe/organizations/"+c+"/subscriptions/downgrade",{method:"POST",headers:Zeplin.headers,body:JSON.stringify(e)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw o.a(e.status,t)});Zeplin.updateUser({paymentPlan:k[d][u]}),location.replace(Object(r.I)("projects"))}).catch(function(e){s.classList.add("hidden"),o.b(e)})}},cancel:{name:"CANCEL"}})):function(e,t,n){a.a({title:"Update subscription?",message:"You can update it again, anytime!",done:{name:"UPDATE",cb:function(){s.classList.remove("hidden");var i={plan:k[t][e]};"monthly"===t&&n&&(i.coupon=n.id),fetch(Zeplin.urls.baseURL+"/stripe/users/subscriptions",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(i)}).then(function(n){if(!n.ok)return n.json().then(function(e){throw o.a(n.status,e)});mixpanel.webapp.track("Changed plan",{from:Zeplin.user.paymentPlan,to:k[t][e]}),ga("legacyTracker.send","event","PAYMENT_EVENTS","changed-plan","from:"+Zeplin.user.paymentPlan+";to:"+k[t][e]),Zeplin.updateUser({paymentPlan:k[t][e]}),location.replace(Object(r.I)("thanks",{query:{at:"us"}}))}).catch(function(e){s.classList.add("hidden"),o.b(e)})}},cancel:{name:"CANCEL"}}),mixpanel.webapp.track("Opened change plan dialog",{currentPlan:Zeplin.user.paymentPlan}),ga("legacyTracker.send","event","PAYMENT_EVENTS","opened-change-plan-dialog","currentPlan:"+Zeplin.user.paymentPlan)}(E,w,C);else if((L=parseInt(n.querySelector(".planPrice").dataset.value,10))||"forever"===C.duration)"monthly"===w?t="Pay {{amount}}/mo":(t="Pay {{amount}}/year",L*=12),N(n.querySelector(".planName").textContent,t);else!function(e,t,n){var a;switch(n.duration){case"once":a="30 days";break;case"repeating":a=n.duration_in_months+" months"}Array.from(h.querySelectorAll(".friendlyReminderDuration")).forEach(function(e){e.textContent=a}),h.dataset.planName=e.querySelector(".planName").textContent,i.a().then(function(n){var i=n.find(function(n){return k[t][e.dataset.planId]===n._id});h.querySelector(".friendlyReminderPrice").textContent=i.price/100,h.showModal(),mixpanel.webapp.track("Opened trial credit card explanation popup"),ga("legacyTracker.send","event","PAYMENT_EVENTS","opened-trial-credit-card-explanation-popup")})}(n,w,C)}else e.target.classList.contains("cancelPlan")&&A(e);var c,u,d,m}),Array.from(c.querySelectorAll(".warning .cancelPlanLink")).forEach(function(e){e.addEventListener("click",A)}),c.addEventListener("click",function(e){e.stopPropagation()}),l.addEventListener("click",function(){l.classList.add("hidden")}),l.addEventListener("keydown",function(e){e.stopPropagation()}),document.addEventListener("keydown",function(e){e.keyCode===Zeplin.KEY_CODE.ESC&&l.classList.add("hidden")}),location.search&&location.search.substr(1).split("&").forEach(function(e){var t=e.split("=");x[decodeURIComponent(t[0])]=decodeURIComponent(t[1])});var R,U,F=location.pathname.match(/\/organization\/([\da-f]{24})\/profile/i);F?(U=F[1],fetch(Zeplin.urls.baseURL+"/organizations/"+U,{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw o.a(e.status,t)})})).then(function(e){var t,n;D=e,"organization_free"!==e.paymentPlan&&_(e.paymentPlan),t=e._id,(n=i.c.subscribe("private-organization@"+t)).bind("CreateOrganizationSubscription",function(e){D.paymentPlan=e.body.plan,_(e.body.plan),P(j),document.getElementById(j+"Payment").checked=!0}),n.bind("UpdateOrganizationSubscription",function(e){D.paymentPlan=e.body.plan,_(e.body.plan),P(j),document.getElementById(j+"Payment").checked=!0})}).catch(o.b):(_(Zeplin.user.paymentPlan),(R=i.g).bind("CreateUserSubscription",function(e){_(e.body.plan),P(j),document.getElementById(j+"Payment").checked=!0,Zeplin.updateUser({paymentPlan:e.body.plan})}),R.bind("UpdateUserSubscription",function(e){_(e.body.plan),P(j),document.getElementById(j+"Payment").checked=!0,Zeplin.updateUser({paymentPlan:e.body.plan})}),R.bind("CancelUserSubscription",function(){_("free"),P(j),document.getElementById(j+"Payment").checked=!0,Zeplin.updateUser({paymentPlan:"free"})}))},,function(e,t,n){"use strict";var i=n(45);t.a=i.a},function(e,t,n){"use strict";t.a=Font;var i=n(23),a=n(18),o=["start","left","right","end","center","justify"];function Font(e){var t=Object.assign({},e);"_id"in t||(t._id=t.id),t.color=e.color&&new i.a(e.color),t.fontFace&&function(e){var t=e.fontFace,n=t.match(r);n?(n=n[n.length-1],t=c(t,n),n=n.toLowerCase()):n="regular";var i=t.match(s);i?(i=i[i.length-1],t=c(t,i),i=i.toLowerCase()):i="normal";var a=t.match(l);a?(a=a[a.length-1],t=c(t,a),a=a.toLowerCase()):a="normal";t=t.replace(/--/,"-").replace(/-$/,"").trim(),e.fontFamily=t.match(/^Arial-?MT$/)?"Arial":t,e.fontStyle=i,e.weightText=n,e.fontStretch=function(e){if(/(ultra(\s|-)?)+condensed/i.test(e))return"ultra-condensed";if(/(extra(\s|-)?)+condensed/i.test(e))return"extra-condensed";if(/(semi(\s|-)?)+condensed/i.test(e))return"semi-condensed";if(/condensed/i.test(e))return"condensed";if(/(ultra(\s|-)?)+expanded/i.test(e))return"ultra-expanded";if(/(extra(\s|-)?)+expanded/i.test(e))return"extra-expanded";if(/(semi(\s|-)?)+expanded/i.test(e))return"semi-expanded";if(/expanded/i.test(e))return"expanded";return"normal"}(a)}(t),Object.defineProperties(this,{id:{value:t._id,enumerable:!0},name:{get:function(){return t.name},set:function(e){t.name=e},enumerable:!0},fontFace:{get:function(){return t.fontFace},set:function(e){t.fontFace=e},enumerable:!0},fontSize:{get:function(){return t.fontSize},set:function(e){t.fontSize=e},enumerable:!0},fontWeight:{get:function(){return function(e){if(/black|heavy|900/gi.test(e))return 900;if(/((ex|ul)tra)\s?bold|800/gi.test(e))return 800;if(/([ds]emi)\s?bold|600/gi.test(e))return 600;if(/bold|700/gi.test(e))return 700;if(/medium|500/gi.test(e))return 500;if(/((ex|ul)tra)\s?light|200/gi.test(e))return 200;if(/light|300/gi.test(e))return 300;if(/thin|hairline|100/gi.test(e))return 100;return 400}(t.weightText)},set:function(e){t.fontWeight=e},enumerable:!0},fontStyle:{get:function(){return t.fontStyle},set:function(e){t.fontStyle=e},enumerable:!0},fontFamily:{get:function(){return t.fontFamily},set:function(e){t.fontFamily=e},enumerable:!0},fontStretch:{get:function(){return t.fontStretch},set:function(e){t.fontStretch=e},enumerable:!0},lineHeight:{get:function(){return t.lineHeight},set:function(e){t.lineHeight=e},enumerable:!0},textAlign:{get:function(){return t.textAlign},set:function(e){if(-1===o.indexOf(e))throw new TypeError("Unknown alignment: '"+e+"'. Possible values: "+JSON.stringify(o));t.textAlign=e},enumerable:!0},letterSpacing:{get:function(){return t.letterSpacing},set:function(e){t.letterSpacing=e},enumerable:!0},color:{get:function(){return t.color},set:function(e){t.color=e&&new i.a(e)},enumerable:!0},weightText:{get:function(){return t.weightText},set:function(e){t.weightText=e},enumerable:!0},scaledFontSize:{get:function(){return t.scaledFontSize},set:function(e){t.scaledFontSize=e},enumerable:!0}})}Font.prototype=Object.create(a.a.prototype),Font.prototype.constructor=Font,Font.prototype.toObject=function(){var e={name:this.name,fontFace:this.fontFace,fontSize:this.fontSize,fontWeight:this.fontWeight,fontStyle:this.fontStyle,fontFamily:this.fontFamily,fontStretch:this.fontStretch,lineHeight:this.lineHeight,textAlign:this.textAlign,letterSpacing:this.letterSpacing,weightText:this.weightText};return this.color&&(e.color=this.color.toObject()),e},Font.prototype.equals=function(e){return this.fontFamily===e.fontFamily&&this.fontStyle===e.fontStyle&&this.fontStretch===e.fontStretch&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.lineHeight===e.lineHeight&&this.textAlign===e.textAlign&&this.letterSpacing===e.letterSpacing&&(!this.color||!e.color||this.color.equals(e.color))},Font.prototype.conforms=function(e){return this.fontFamily===e.fontFamily&&this.fontStyle===e.fontStyle&&this.fontStretch===e.fontStretch&&this.fontWeight===e.fontWeight&&this.textAlign===e.textAlign&&this.fontSize===e.fontSize&&(this.lineHeight===e.lineHeight||!e.lineHeight)&&(this.letterSpacing===e.letterSpacing||!e.letterSpacing)&&(!this.color||!e.color||this.color.equals(e.color))};var r=/(thin|hairline|([ds]emi|(ex|ul)tra)?(light|bold)|normal|regular|book|medium|heavy|black|[1-9]00$)/gi,s=/(italic|oblique)/gi,l=/((?:(ultra|extra|semi)[\s-]?)?(?:condensed|expanded))/gi;function c(e,t){var n=e.lastIndexOf(t);return e.substring(0,n)+e.substr(n+t.length)}},function(e,t,n){"use strict";var i=n(35);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(4),r=n(22),s=n(36),l=(n.n(s),"32"),c="32";t.a=class extends a.a.Component{constructor(){super(),this.handleLoad=this.handleLoad.bind(this),this.state={loading:!0}}handleLoad(){this.setState({loading:!1})}componentWillReceiveProps(e){e.src===this.props.src&&e.srcset===this.props.srcset||this.setState({loading:!0})}componentDidMount(){this.state.loading&&this.nodeRefs.img.src&&this.nodeRefs.img.complete&&this.handleLoad()}componentDidUpdate(){this.state.loading&&this.nodeRefs.img.src&&this.nodeRefs.img.complete&&this.handleLoad()}render(e,t){const n=e.width||l,i=e.height||c,s=Object(o.a)("avatarFrame",{loading:t.loading},e.type,e.class),u={};return"bgSize"in e&&(u.backgroundSize=e.bgSize),a.a.h("div",{class:s,style:u,title:e.title},a.a.h("img",{ref:Object(r.a)(this,"img"),srcSet:e.srcset,src:e.src,width:n,height:i,onLoad:this.handleLoad,alt:"👤"}))}}},function(e,t){},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(38);n.n(o);t.a=class extends a.a.Component{shouldComponentUpdate(){return!1}componentWillReceiveProps(e){e.class!==this.props.class&&(this.rippleElement.classList.remove(this.props.class),this.rippleElement.classList.add(e.class))}componentDidMount(){this.rippleElement=document.createElement("paper-ripple"),this.props.class&&this.rippleElement.classList.add(this.props.class),this.base.appendChild(this.rippleElement)}render(){return a.a.h("div",{class:"rippleContainer"})}}},function(e,t){},,function(e,t,n){"use strict";var i=n(0);var a=/\d+|[a-z]+|[A-Z]+(?![a-z])|[A-Z][a-z]+/g;t.a=function(e,t){return function(e,t){if("camelCase"===t||"upperCamelCase"===t){var n=e.map(i.H).join("");return"camelCase"===t?i.t(n):n}return"snakeCase"===t?e.join("_"):e.join("-")}((n=e.match(a))?n.map(function(e){return e.toLowerCase()}):["invalid","name"],t);var n}},function(e,t,n){"use strict";var i=n(58);t.a=i.a},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(135);n.n(i);n.o(i,"ReduceStore")&&n.d(t,"b",function(){return i.ReduceStore});var a={create:function(e,t){return i.Container.create((a=n=e,(n=function(){var e=Array.from(arguments);return new(Function.prototype.bind.apply(a,[null].concat(e)))}).prototype=a.prototype,n.getStores=a.getStores,n.calculateState=a.calculateState,n),t);var n,a},createFunctional:function(){return i.Container.createFunctional.apply(i.Container,arguments)}}},function(e,t,n){"use strict";var i=n(80),a=n(153);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return a.a})},function(e,t,n){"use strict";t.g=function(){return fetch(Zeplin.urls.baseURL+"/organizations",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t.organizations;throw Object(i.a)(e.status,t)})})},t.f=function(e,t){return fetch(Zeplin.urls.baseURL+"/organizations/"+e+"/members/"+t+"/profile",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})})},t.j=function(e){return fetch(Zeplin.urls.baseURL+(e?"/organizations/"+e:"/v2")+"/projects",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t.projects;throw Object(i.a)(e.status,t)})})},t.h=function(e){return fetch(Zeplin.urls.baseURL+"/v2/projects/"+e,{method:"GET",headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})})},t.k=function(e){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/users",{method:"POST",headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})})},t.b=function(e,t,n,a,o){return fetch(Zeplin.urls.baseURL+(e&&"user"!==e?"/organizations/"+e:"")+"/projects",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({name:o||"Untitled",type:t,density:a,icon:{type:n}})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})})},t.n=function(e,t){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/density",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({density:t})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw Object(i.a)(e.status,t)})})},t.l=function(e,t,n){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/screens/projects/"+t,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({screens:n})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw Object(i.a)(e.status,t)})})},t.c=function(e,t){var n={name:t.name};"description"in t&&(n.description=t.description);"index"in t&&(n.index=t.index);return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/sections",{method:"POST",headers:Zeplin.headers,body:JSON.stringify(n)}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})}).then(function(t){return{seid:t._id,pid:e}})},t.o=function(e,t,n,a){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/sections/"+t+"/screens",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({index:n,screens:a})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw Object(i.a)(e.status,t)})})},t.e=function(e,t){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/sections/"+t,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw Object(i.a)(e.status,t)})})},t.d=function(e,t,n){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/integrations/"+t+"/"+n,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw Object(i.a)(e.status,t)})})},t.i=function(e){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/extensions",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})})},t.m=function(e,t){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/extensions/"+t,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw Object(i.a)(e.status,t)})})},t.a=function(e,t){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/extensions",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({eid:t})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw Object(i.a)(e.status,t)})})};var i=n(2)},function(e,t,n){"use strict";t.a=function(e){var t=Object(o.a)("button",e.class,{ripple:!!e.ripple}),n="string"==typeof e.ripple&&e.ripple;return a.a.h("button",{type:e.type||"button",disabled:e.disabled,onClick:e.onClick,class:t},e.children,e.ripple&&a.a.h(r.a,{class:n}))};var i=n(1),a=n.n(i),o=n(4),r=n(24),s=n(46);n.n(s)},function(e,t){},function(e,t,n){"use strict";var i=n(48);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(49),r=n(4),s=n(22),l=n(10),c=n(51);n.n(c);class u extends a.a.Component{constructor(e){super(e),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this)}get edgeOffset(){return this.props.edgeOffset||12}positionOptions(){const e=this.props.posRef.getBoundingClientRect(),t=this.nodeRefs.options.getBoundingClientRect(),n=this.props.top||e.height,i=this.props.left||0;let a=e.top+n,o=e.left+i;a<this.edgeOffset?a=this.edgeOffset:a+t.height+this.edgeOffset>window.innerHeight&&(a=window.innerHeight-t.height-this.edgeOffset),o<this.edgeOffset?o=this.edgeOffset:o+t.width+this.edgeOffset>window.innerWidth&&(o=window.innerWidth-t.width-this.edgeOffset),this.nodeRefs.options.style.transform="translate3d("+o+"px, "+a+"px, 0)"}handleBackdropClick(e){this.props.onClose&&(e.stopPropagation(),this.props.onClose())}handleDocumentKeyDown(e){this.props.onClose&&e.keyCode===Zeplin.KEY_CODE.ESC&&(e.stopPropagation(),this.props.onClose())}componentDidUpdate(){this.positionOptions()}componentDidMount(){document.addEventListener("keydown",this.handleDocumentKeyDown,!0),this.positionOptions()}componentWillUnmount(){document.removeEventListener("keydown",this.handleDocumentKeyDown,!0)}render(e){return a.a.h("div",{class:"dropdownOptionsBackdrop",onClick:this.handleBackdropClick},a.a.h("div",{class:"dropdownOptions",ref:Object(s.a)(this,"options")},e.content))}}class d extends a.a.Component{constructor(e){super(e),this.hideOptions=this.hideOptions.bind(this),this.toggleOptions=this.toggleOptions.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.state={selectedIndex:e.selectedIndex,optionsVisible:!1}}hideOptions(){this.setState({optionsVisible:!1})}toggleOptions(e){e.stopPropagation(),this.setState({optionsVisible:!this.state.optionsVisible})}handleItemClick(e){this.setState({selectedIndex:e}),this.hideOptions(),this.props.onChange&&this.props.onChange(e)}getChildContext(){return{handleItemClick:this.handleItemClick}}render(e,t){const n=Object(r.a)("dropdown",e.class,{open:t.optionsVisible});return a.a.h("div",{class:n,onClick:this.toggleOptions},e.children.length>0?e.children:e.options[t.selectedIndex].name,a.a.h("img",{width:e.arrowWidth||9,alt:"˅",src:l.a("img/icDropdown.svg")}),t.optionsVisible&&a.a.h(o.a,{into:e.portalInto},a.a.h(u,{onClose:this.hideOptions,posRef:this.base,top:e.pos.top,left:e.pos.left,content:e.content})))}}d.Item=class extends a.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){e.stopPropagation(),this.context.handleItemClick(this.props.index)}render(e){return a.a.h("div",{class:Object(r.a)("dropdownItem",e.class),onClick:this.handleClick},e.children)}},t.a=d},function(e,t,n){"use strict";var i=n(50);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i);t.a=class extends a.a.Component{componentDidUpdate(e){for(let t in e)if(e[t]!==this.props[t])return this.renderLayer(!0)}componentDidMount(){this.renderLayer(!0)}componentWillUnmount(){this.renderLayer(!1),this.remote&&this.remote.parentNode.removeChild(this.remote)}findNode(e){return"string"==typeof e?document.querySelector(e):e}renderLayer(e){var t=this.props.into||document.body;t!==this.intoPointer&&(this.intoPointer=t,this.into&&this.remote&&(this.remote=a.a.render(a.a.h(o,null),this.into,this.remote)),this.into=this.findNode(t)),this.remote=a.a.render(a.a.h(o,{context:this.context},e&&this.props.children||null),this.into,this.remote)}render(){return null}};class o extends a.a.Component{getChildContext(){return this.props.context}render(e){return e.children&&e.children[0]||null}}},function(e,t){},,,function(e,t,n){"use strict";var i=n(0),a=12,o=2,r=500,s=200,l=new WeakMap;function c(e){clearTimeout(l.get(e)),l.delete(e)}function u(e){if(e.target.classList.contains("tooltipShown"))c(e.target);else{var t=document.createElement("div");t.classList.add("tooltip","invisible");var n=e.target.dataset.tooltip;switch(e.target.dataset.tooltipType){case"html":t.innerHTML=i.G(n);break;case"text":default:t.textContent=n}e.target.classList.add("tooltipShown");var u=e.target.getBoundingClientRect();t.style.top=u.bottom-o+"px",t.style.left=u.left+u.width/2+"px",e.target.addEventListener("mouseleave",p),e.target.addEventListener("click",p),t.addEventListener("mouseenter",function(){c(e.target),t.addEventListener("mouseleave",p),t.addEventListener("click",function(e){e.stopPropagation()})}),document.body.appendChild(t);var d=t.getBoundingClientRect();d.left<a?(t.style.left=a+"px",t.classList.add("overflown")):d.right+a>window.innerWidth&&(t.style.left=window.innerWidth-a-d.width+"px",t.classList.add("overflown")),d.bottom+a>window.innerHeight&&(t.style.top=u.top-d.height+o+"px");var m=r;e.target.dataset.tooltipDelay&&(m=parseInt(e.target.dataset.tooltipDelay,10)),setTimeout(function(){t.classList.remove("invisible")},m)}function p(){c(e.target),l.set(e.target,setTimeout(function(){e.target.removeEventListener("mouseleave",p),e.target.classList.remove("tooltipShown"),t.remove()},s))}}function d(e){e.removeAttribute("title"),e.addEventListener("mouseenter",u)}function m(e){if(e.nodeType===Node.ELEMENT_NODE){if(e.hasAttribute("data-tooltip"))return void d(e);Array.from(e.children).forEach(m)}}window.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("[data-tooltip]");Array.from(e).forEach(d),new MutationObserver(function(e){e.forEach(function(e){switch(e.type){case"attributes":null===e.oldValue?d(e.target):e.target.dataset.tooltip||e.target.removeEventListener("mouseenter",u);break;case"childList":Array.from(e.addedNodes).forEach(m)}})}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["data-tooltip"]})})},function(e,t,n){"use strict";var i,a=n(11),o=n(0),r=n(2),s=n(23),l=n(33),c=n(12),u=50,d=document.getElementById("notificationsButton"),m=document.getElementById("notificationContainer"),p=document.getElementById("notificationList"),g=document.getElementById("notificationError"),h=document.getElementById("userMenu"),f=new Date,b=[],y={king:{name:"Owner",icon:"icQueen"},queen:{name:"Admin",icon:"icQueen"},rook:{name:"Editor",icon:"icRook"},knight:{name:"Member",icon:"icKnight"}};function v(e){return o.f(e).replace(/\*([^*]+)\*/g,function(e,t){return"<strong>"+t+"</strong>"})}function j(e,t){var n,i="end",r=e.events.length;t&&t.position&&(i=["start","end"].includes(t.position)?t.position:"end");var c=new Date(e.updated);switch(e.actionName){case"CreateDot":var u=[],g={url:{pid:e.params.project._id,sid:e.params.screen._id},query:{}};if(new Set(e.events.map(function(e){return e.source.username})).forEach(function(e){u.push(e)}),1===u.length){var h=e.events[0].source;n=document.importNode(document.querySelector(".notificationTemplate.createDotSingleUser").content,!0),o.B(n.querySelector(".dotAuthorImage"),h),n.querySelector(".dotAuthor").textContent=h.username}else{n=document.importNode(document.querySelector(".notificationTemplate.createDotMultiUser").content,!0),u.length>3?(C=u.slice(0,3),D=u.length-3+" more people",n.querySelector(".tailUsername").title=u.slice(3).join("\n")):(D=u.pop(),C=u),n.querySelector(".headUsernames").textContent=C.join(", "),n.querySelector(".tailUsername").textContent=D}1===r?(g.query.did=e.events[0].dot._id,n.querySelector(".notification").classList.add("withContent"),n.querySelector(".notificationContent").innerHTML=o.E(o.f(e.content)),n.querySelector(".notificationContent").title=e.content):(n.querySelector(".dotCount").textContent=r,g.query.did=e.events.map(function(e){return e.dot._id})),n.querySelector(".notification").href=o.I("project-screen",g),n.querySelector(".screenName").textContent=e.params.screen.name,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"ResolveDot":u=[],g={url:{pid:e.params.project._id,sid:e.params.screen._id},query:{}};if(new Set(e.events.map(function(e){return e.source.username})).forEach(function(e){u.push(e)}),1===u.length){var b=e.events[0].source;n=document.importNode(document.querySelector(".notificationTemplate.resolveDotSingleUser").content,!0),o.B(n.querySelector(".dotResolverImage"),b),n.querySelector(".dotResolver").textContent=b.username}else{n=document.importNode(document.querySelector(".notificationTemplate.resolveDotMultiUser").content,!0),u.length>3?(C=u.slice(0,3),D=u.length-3+" more people",n.querySelector(".tailUsername").title=u.slice(3).join("\n")):(D=u.pop(),C=u),n.querySelector(".headUsernames").textContent=C.join(", "),n.querySelector(".tailUsername").textContent=D}1===r?(g.query.did=e.events[0].dot._id,n.querySelector(".dotName").textContent=e.events[0].dot.name):(n.querySelector(".dotCount").textContent=r,g.query.did=e.events.map(function(e){return e.dot._id})),n.querySelector(".notification").href=o.I("project-screen",g),n.querySelector(".screenName").textContent=e.params.screen.name,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"CreateDotComment":u=[],g={url:{pid:e.params.project._id,sid:e.params.screen._id},query:{did:e.params.dot._id}};if(new Set(e.events.map(function(e){return e.source.username})).forEach(function(e){u.push(e)}),1===u.length){h=e.events[0].source;n=document.importNode(document.querySelector(".notificationTemplate.createCommentSingleUser").content,!0),o.B(n.querySelector(".commentAuthorImage"),h),n.querySelector(".commentAuthor").textContent=h.username}else{n=document.importNode(document.querySelector(".notificationTemplate.createCommentMultiUser").content,!0),u.length>3?(C=u.slice(0,3),D=u.length-3+" more people",n.querySelector(".tailUsername").title=u.slice(3).join("\n")):(D=u.pop(),C=u),n.querySelector(".headUsernames").textContent=C.join(", "),n.querySelector(".tailUsername").textContent=D}1===r?(g.query.cmid=e.events[0].comment._id,n.querySelector(".notification").classList.add("withContent"),n.querySelector(".notificationContent").innerHTML=o.E(o.f(e.content)),n.querySelector(".notificationContent").title=e.content):g.query.cmid=e.events.map(function(e){return e.comment._id}),n.querySelector(".notification").href=o.I("project-screen",g),n.querySelector(".noteName").textContent=e.params.dot.name,n.querySelector(".screenName").textContent=e.params.screen.name,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"CreateDot-Mention":case"CreateDotComment-Mention":var j=e.events[0];g={url:{pid:e.params.project._id,sid:e.params.screen._id},query:{did:"CreateDot-Mention"===e.actionName?j.dot._id:e.params.dot._id,cmid:j.comment._id}};(n=document.importNode(document.querySelector(".notificationTemplate.commentMention").content,!0)).querySelector(".notification").href=o.I("project-screen",g),o.B(n.querySelector(".mentionAuthorImage"),j.source),n.querySelector(".mentionAuthor").textContent=j.source.username,n.querySelector(".noteName").textContent="CreateDot-Mention"===e.actionName?j.dot.name:e.params.dot.name,n.querySelector(".screenName").textContent=e.params.screen.name,n.querySelector(".notificationContent").innerHTML=o.E(o.f(e.content)),n.querySelector(".notificationContent").title=e.content,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"CreateScreen":g={url:{pid:e.params.project._id}};if(1===r){E="project-screen";var S=e.events[0].screen;g.url.sid=S._id,(n=document.importNode(document.querySelector(".notificationTemplate.createScreen").content,!0)).querySelector(".screenName").textContent=S.name}else E="project",(n=document.importNode(document.querySelector(".notificationTemplate.createScreenMulti").content,!0)).querySelector(".screenCount").textContent=r,n.querySelector(".screenCount").title=e.events.map(function(e){return e.screen.name}).join("\n"),g.query={sid:e.events.map(function(e){return e.screen._id})};n.querySelector(".notification").href=o.I(E,g),o.B(n.querySelector(".notifierImage"),e.params.source),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"CreateScreenVersion":var E;g={url:{pid:e.params.project._id}};if(1===r){E="project-screen";S=e.events[0].screen;g.url.sid=S._id,(n=document.importNode(document.querySelector(".notificationTemplate.createVersion").content,!0)).querySelector(".screenName").textContent=S.name}else E="project",(n=document.importNode(document.querySelector(".notificationTemplate.createVersionMulti").content,!0)).querySelector(".screenCount").textContent=r,n.querySelector(".screenCount").title=e.events.map(function(e){return e.screen.name}).join("\n"),g.query={sid:e.events.map(function(e){return e.screen._id})};n.querySelector(".notification").href=o.I(E,g),o.B(n.querySelector(".notifierImage"),e.params.source),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"DeleteScreen":if(1===r){S=e.events[0].screen;(n=document.importNode(document.querySelector(".notificationTemplate.deleteScreen").content,!0)).querySelector(".screenName").textContent=S.name}else(n=document.importNode(document.querySelector(".notificationTemplate.deleteScreenMulti").content,!0)).querySelector(".screenCount").textContent=r,n.querySelector(".screenCount").title=e.events.map(function(e){return e.screen.name}).join("\n");o.B(n.querySelector(".notifierImage"),e.params.source),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"InviteUser":if(r>1){q=e.events.map(function(e){return e.project.name}),T=e.events.map(function(e){return e.project._id}),(n=document.importNode(document.querySelector(".notificationTemplate.inviteUserMulti").content,!0)).querySelector(".projectCount").textContent=r,n.querySelector(".tailProject").textContent=q.pop(),n.querySelector(".headProjects").textContent=q.join(", "),k=o.I("projects",{query:{pid:T}})}else{var w=e.events[0].project;(n=document.importNode(document.querySelector(".notificationTemplate.inviteUser").content,!0)).querySelector(".projectName").textContent=w.name,k=o.I("project",{url:{pid:w._id}})}n.querySelector(".notification").href=k;var L=e.params.source;o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username;break;case"RemoveUserFromProject":L=e.params.source;n=document.importNode(document.querySelector(".notificationTemplate.removeUser").content,!0),o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username,n.querySelector(".projectName").textContent=e.params.project.name;break;case"UserJoined":if(r>1){var C,D;n=document.importNode(document.querySelector(".notificationTemplate.newMemberMulti").content,!0),r>3?(C=e.events.slice(0,3),D=r-3+" more",n.querySelector(".tailUsername").title=e.events.slice(3).map(function(e){return e.member.username}).join("\n")):(C=e.events.slice(0,r-1),D=e.events[r-1].member.username),n.querySelector(".headUsernames").textContent=C.map(function(e){return e.member.username}).join(", "),n.querySelector(".tailUsername").textContent=D}else{var x=e.events[0].member;n=document.importNode(document.querySelector(".notificationTemplate.newMember").content,!0),o.B(n.querySelector(".newMemberImage"),x),n.querySelector(".memberUsername").textContent=x.username}n.querySelector(".notification").href=o.I("project",{url:{pid:e.params.project._id}}),n.querySelector(".projectName").textContent=e.params.project.name;break;case"DeleteProject":L=e.params.source;n=document.importNode(document.querySelector(".notificationTemplate.deleteProject").content,!0),o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username,n.querySelector(".projectName").textContent=e.events[0].project.name;break;case"ArchiveProject":L=e.params.source;n=document.importNode(document.querySelector(".notificationTemplate.archiveProject").content,!0),o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username,n.querySelector(".projectName").textContent=e.events[0].project.name;break;case"ActivateProject":w=e.events[0].project,L=e.params.source;(n=document.importNode(document.querySelector(".notificationTemplate.activateProject").content,!0)).querySelector(".notification").href=o.I("project",{url:{pid:w._id}}),o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username,n.querySelector(".projectName").textContent=w.name;break;case"UpdateUserRole":var k;if(r>1){var q,T;q=e.events.map(function(e){return e.project.name}),T=e.events.map(function(e){return e.project._id}),(n=document.importNode(document.querySelector(".notificationTemplate.assignAdminMulti").content,!0)).querySelector(".projectCount").textContent=r,n.querySelector(".tailProject").textContent=q.pop(),n.querySelector(".headProjects").textContent=q.join(", "),k=o.I("projects",{query:{pid:T}})}else{w=e.events[0].project;(n=document.importNode(document.querySelector(".notificationTemplate.assignAdmin").content,!0)).querySelector(".projectName").textContent=w.name,k=o.I("project",{url:{pid:w._id}})}n.querySelector(".notification").href=k;L=e.params.source;o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username;break;case"TransferOwnership":w=e.events[0].project,L=e.params.source;(n=document.importNode(document.querySelector(".notificationTemplate.transferOwnership").content,!0)).querySelector(".notification").href=o.I("project",{url:{pid:w._id}}),o.B(n.querySelector(".notifierImage"),L),n.querySelector(".notifier").textContent=L.username,n.querySelector(".projectName").textContent=w.name;break;case"CreateColor":g={url:{pid:e.params.project._id},query:{}};if(r>1)(n=document.importNode(document.querySelector(".notificationTemplate.createColorMulti").content,!0)).querySelector(".colorCount").textContent=r,n.querySelector(".colorCount").title=e.events.map(function(t){var n=new s.a(t.color);return n.name+": "+n.toPlatformString(e.params.project.type)}).join("\n"),g.query.cid=e.events.map(function(e){return e.color._id});else{var _=new s.a(e.events[0].color);(n=document.importNode(document.querySelector(".notificationTemplate.createColor").content,!0)).querySelector(".colorPreview").style.backgroundColor=_.toCSS(),n.querySelector(".colorPreview").title=_.toPlatformString(e.params.project.type),n.querySelector(".notificationColorName").textContent=_.name,n.querySelector(".notificationColorName").title=_.toPlatformString(e.params.project.type),g.query.cid=e.events[0].color._id}n.querySelector(".notification").href=o.I("project-styleguide",g),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"DeleteColor":if(r>1)(n=document.importNode(document.querySelector(".notificationTemplate.deleteColorMulti").content,!0)).querySelector(".colorCount").textContent=r,n.querySelector(".colorCount").title=e.events.map(function(t){var n=new s.a(t.color);return n.name+": "+n.toPlatformString(e.params.project.type)}).join("\n");else{_=new s.a(e.events[0].color);(n=document.importNode(document.querySelector(".notificationTemplate.deleteColor").content,!0)).querySelector(".colorPreview").style.backgroundColor=_.toCSS(),n.querySelector(".colorPreview").title=_.toPlatformString(e.params.project.type),n.querySelector(".notificationColorName").textContent=_.name,n.querySelector(".notificationColorName").title=_.toPlatformString(e.params.project.type)}n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"UpdateColor":g={url:{pid:e.params.project._id},query:{}};if(r>1)(n=document.importNode(document.querySelector(".notificationTemplate.updateColorMulti").content,!0)).querySelector(".colorCount").textContent=r,n.querySelector(".colorCount").title=e.events.map(function(t){var n=new s.a(t.color);return n.name+": "+n.toPlatformString(e.params.project.type)}).join("\n"),g.query.cid=e.events.map(function(e){return e.color._id});else{_=new s.a(e.events[0].color);(n=document.importNode(document.querySelector(".notificationTemplate.updateColor").content,!0)).querySelector(".colorPreview").style.backgroundColor=_.toCSS(),n.querySelector(".colorPreview").title=_.toPlatformString(e.params.project.type),n.querySelector(".notificationColorName").textContent=_.name,n.querySelector(".notificationColorName").title=_.toPlatformString(e.params.project.type),g.query.cid=e.events[0].color._id}n.querySelector(".notification").href=o.I("project-styleguide",g),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"CreateCoupon":(n=document.importNode(document.querySelector(".notificationTemplate.createCoupon").content,!0)).querySelector(".notification").href=e.action.webURI,n.querySelector(".notificationContent").innerHTML=v(e.content),f<c&&m.classList.contains("hidden")&&d.classList.add("hasPromotion");break;case"AuthSlack":w=e.events[0].project,L=e.params.source;(n=document.importNode(document.querySelector(".notificationTemplate.authSlack").content,!0)).querySelector(".notification").href=o.I("project",{url:{pid:w._id}}),n.querySelector(".notifier").textContent=L.username,n.querySelector(".projectName").textContent=w.name,n.querySelector(".slackChannelName").textContent=e.content;break;case"CreateAnnouncement":if(!("webURI"in e.action))return;(n=document.importNode(document.querySelector(".notificationTemplate.announcement").content,!0)).querySelector(".notification").href=e.action.webURI||"#",n.querySelector(".notificationContent").innerHTML=v(e.content),n.querySelector(".notificationAnnouncer").textContent=e.params.source.username,e.action.webURI||(n.querySelector(".notification").classList.add("noClick"),n.querySelector(".notification").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()}));break;case"CreateTextStyle":g={url:{pid:e.params.project._id},query:{}};if(r>1)(n=document.importNode(document.querySelector(".notificationTemplate.createFontMulti").content,!0)).querySelector(".fontCount").textContent=r,n.querySelector(".fontCount").title=e.events.map(function(e){return new l.a(e.textStyle).name}).join("\n"),g.query.tsid=e.events.map(function(e){return e.textStyle._id});else{var I=new l.a(e.events[0].textStyle);(n=document.importNode(document.querySelector(".notificationTemplate.createFont").content,!0)).querySelector(".notificationFontName").textContent=I.name,g.query.tsid=e.events[0].textStyle._id}n.querySelector(".notification").href=o.I("project-styleguide",g),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"UpdateTextStyle":g={url:{pid:e.params.project._id},query:{}};if(r>1)(n=document.importNode(document.querySelector(".notificationTemplate.updateFontMulti").content,!0)).querySelector(".fontCount").textContent=r,n.querySelector(".fontCount").title=e.events.map(function(e){return new l.a(e.textStyle).name}).join("\n"),g.query.tsid=e.events.map(function(e){return e.textStyle._id});else{I=new l.a(e.events[0].textStyle);(n=document.importNode(document.querySelector(".notificationTemplate.updateFont").content,!0)).querySelector(".notificationFontName").textContent=I.name,g.query.tsid=e.events[0].textStyle._id}n.querySelector(".notification").href=o.I("project-styleguide",g),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"DeleteTextStyle":if(r>1)(n=document.importNode(document.querySelector(".notificationTemplate.deleteFontMulti").content,!0)).querySelector(".fontCount").textContent=r,n.querySelector(".fontCount").title=e.events.map(function(e){return new l.a(e.textStyle).name}).join("\n");else{I=new l.a(e.events[0].textStyle);(n=document.importNode(document.querySelector(".notificationTemplate.deleteFont").content,!0)).querySelector(".notificationFontName").textContent=I.name}n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"InviteMember":n=document.importNode(document.querySelector(".notificationTemplate.inviteMember").content,!0),o.B(n.querySelector(".notifierImage"),e.params.source),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".organizationName").textContent=e.params.organization.name,n.querySelector(".notification").href=o.I("organization-dashboard",{url:{oid:e.params.organization._id}});break;case"UpdateOrganizationMemberRole":j=e.events[r-1];var O=y[j.user.role],P=j.source;n=document.importNode(document.querySelector(".notificationTemplate.updateOrganizationMemberRole").content,!0),o.B(n.querySelector(".notifierImage"),P),n.querySelector(".notifier").textContent=P.username,n.querySelector(".roleName").textContent=O.name,n.querySelector(".roleIcon").src=Zeplin.urls.appURL+"/img/"+O.icon+".png",n.querySelector(".roleIcon").srcset=Zeplin.urls.appURL+"/img/"+O.icon+"@2x.png 2x, "+Zeplin.urls.appURL+"/img/"+O.icon+"@3x.png 3x",n.querySelector(".organizationName").textContent=e.params.organization.name,n.querySelector(".notification").href=o.I("organization-dashboard",{url:{oid:e.params.organization._id}});break;case"AddProjectExtension":var B=e.events[0].extension;g={url:{pid:e.params.project._id},query:{eid:B._id}};(n=document.importNode(document.querySelector(".notificationTemplate.addProjectExtension").content,!0)).querySelector(".extensionName").textContent=B.name,n.querySelector(".notification").href=o.I("project",g),o.B(n.querySelector(".notifierImage"),e.params.source),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;case"RemoveExtensionFromProject":B=e.events[0].extension;(n=document.importNode(document.querySelector(".notificationTemplate.removeExtensionFromProject").content,!0)).querySelector(".extensionName").textContent=B.name,o.B(n.querySelector(".notifierImage"),e.params.source),n.querySelector(".notifier").textContent=e.params.source.username,n.querySelector(".notificationProjectName").textContent=e.params.project.name,n.querySelector(".notificationProjectName").title=e.params.project.name,n.querySelector(".notificationProjectType").textContent=a.b[e.params.project.type];break;default:n=document.importNode(document.querySelector(".notificationTemplate.undefinedNotification").content,!0)}switch(f<c&&m.classList.contains("hidden")&&d.classList.add("hasUnread"),n.querySelector(".notification").dataset.id=e._id,n.querySelector(".notification").classList.toggle("new",f<c),n.querySelector(".notificationLastUpdated").setAttribute("datetime",e.updated),i){case"start":p.childElementCount?p.insertBefore(n,p.firstElementChild):p.appendChild(n);break;case"end":default:p.appendChild(n)}}var S=new IntersectionObserver(function(e){var t=e[0];!0===t.isIntersecting&&(S.unobserve(t.target),E())},{root:m,rootMargin:"0px 0px 288px 0px",threshold:0});function E(){var e="";b.length&&(e="&date_before="+b[b.length-1].updated),fetch(Zeplin.urls.baseURL+"/notifications?count="+u+e,{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw r.a(e.status,t)})}).then(function(e){for(var t=function(e){for(var t=0,n=0;n<b.length;n++)if(b[n]._id===e[0]._id){t=b.splice(n).length;break}return b=b.concat(e),t}(e.notifications);t<e.notifications.length;t++)j(e.notifications[t]);e.notifications.length<u||!e.hasMore?m.classList.add("fin"):S.observe(document.querySelector(".notification:last-child"))}).catch(function(e){m.classList.add("error")})}function w(){d.classList.remove("hasUnread","hasPromotion")}function L(){Array.from(p.querySelectorAll(".notification")).forEach(function(e){e.classList.remove("new")})}function C(){f=new Date,fetch(Zeplin.urls.baseURL+"/users/notificationLastReadTime",{method:"PUT",headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw r.a(e.status,t)})}).then(function(e){f=new Date(e.notificationLastReadTime),Zeplin.updateUser({notificationLastReadTime:e.notificationLastReadTime})})}var D=new MutationObserver(function(e){e.forEach(function(e){e.oldValue&&e.oldValue.includes("hidden")||!e.target.classList.contains("hidden")||(w(),L(),C())})});c.a&&c.a.features&&c.a.features.webviews&&c.a.ipcRenderer.on("read-notifications",function(){w(),L(),C()});var x=document.createElement("canvas"),k=16,q=13,T=2;function _(e){return e/2*window.devicePixelRatio}function I(){x.width=16*window.devicePixelRatio,x.height=16*window.devicePixelRatio;var e=x.getContext("2d");return e.beginPath(),e.fillStyle="#ee6723",e.arc(_(k),_(k),_(q),0,6.28,!1),e.fill(),e.beginPath(),e.fillStyle="#fff",e.arc(_(k),_(k),_(T),0,6.28,!1),e.fill(),x.toDataURL()}if(Cookies.get("userToken")){if(d.addEventListener("click",function(e){e.stopPropagation(),window.ImportProgresses&&ImportProgresses.hideImportProgressesContainer(),h.classList.add("hidden"),m.classList.toggle("hidden"),m.classList.contains("hidden")&&clearTimeout(i)}),p.addEventListener("click",function(e){e.stopPropagation(),e.button===Zeplin.MOUSE_BUTTON.LEFT&&"A"===e.target.closest(".notification").tagName&&m.classList.add("hidden")}),g.addEventListener("click",function(e){e.stopPropagation(),e.button===Zeplin.MOUSE_BUTTON.LEFT&&(m.classList.remove("error"),E())}),document.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&m.classList.add("hidden")}),document.addEventListener("keydown",function(e){e.keyCode===Zeplin.KEY_CODE.ESC&&m.classList.add("hidden")}),window.addEventListener("online",function(){b=[],p.innerHTML="",m.classList.remove("fin","error"),w(),E()}),D.observe(m,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),c.a)new MutationObserver(function(e){e.forEach(function(e){e.oldValue&&e.oldValue.includes("hasUnread")||!e.target.classList.contains("hasUnread")?e.oldValue.includes("hasUnread")&&!e.target.classList.contains("hasUnread")&&c.a.ipcRenderer.send("read-notifications"):c.a.ipcRenderer.send("unread-notifications",I())})}).observe(d,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),c.a.features&&c.a.features.revampedMenu&&c.a.ipcRenderer.on("show-badge",function(e,t){t&&d.classList.contains("hasUnread")&&c.a.ipcRenderer.send("unread-notifications",I())});f=new Date(Zeplin.user.notificationLastReadTime),E(),a.g.bind("Notification",function(e){var t=b.findIndex(function(t){return t._id===e.body._id});if(-1!==t){b.splice(t,1);var n=p.querySelector(".notification[data-id='"+e.body._id+"']");n&&n.remove()}b.unshift(e.body),j(e.body,{position:"start"})}),a.c.subscribe("announcement").bind("Notification",function(e){b.unshift(e.body),j(e.body,{position:"start"})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var i=Object.freeze({transparent:{name:"transparent",r:0,g:0,b:0,a:0}}),a=Object.freeze([{r:0,g:0,b:0,name:"black"},{r:0,g:1,b:51,name:"very dark blue"},{r:0,g:2,b:46,name:"dark navy blue"},{r:0,g:3,b:91,name:"dark blue"},{r:0,g:4,b:53,name:"dark navy"},{r:0,g:17,b:70,name:"navy blue"},{r:0,g:45,b:4,name:"dark forest green"},{r:0,g:69,b:119,name:"prussian blue"},{r:0,g:82,b:73,name:"dark blue green"},{r:0,g:85,b:90,name:"deep teal"},{r:0,g:95,b:106,name:"petrol"},{r:0,g:147,b:55,name:"kelley green"},{r:0,g:251,b:176,name:"greenish turquoise"},{r:0,g:255,b:255,name:"cyan"},{r:1,g:15,b:204,name:"true blue"},{r:1,g:21,b:62,name:"navy"},{r:1,g:56,b:106,name:"marine blue"},{r:1,g:65,b:130,name:"darkish blue"},{r:1,g:70,b:0,name:"racing green"},{r:1,g:77,b:78,name:"dark teal"},{r:1,g:84,b:130,name:"deep sea blue"},{r:1,g:101,b:252,name:"bright blue"},{r:1,g:103,b:149,name:"peacock blue"},{r:1,g:115,b:113,name:"dark aquamarine"},{r:1,g:115,b:116,name:"deep turquoise"},{r:1,g:122,b:121,name:"bluegreen"},{r:1,g:123,b:146,name:"ocean"},{r:1,g:136,b:159,name:"teal blue"},{r:1,g:149,b:41,name:"irish green"},{r:1,g:160,b:73,name:"emerald"},{r:1,g:180,b:76,name:"shamrock"},{r:1,g:192,b:141,name:"green blue"},{r:1,g:249,b:198,name:"bright teal"},{r:1,g:255,b:7,name:"bright green"},{r:2,g:0,b:53,name:"midnight blue"},{r:2,g:3,b:226,name:"pure blue"},{r:2,g:6,b:111,name:"dark royal blue"},{r:2,g:27,b:249,name:"rich blue"},{r:2,g:89,b:15,name:"deep green"},{r:2,g:143,b:30,name:"emerald green"},{r:2,g:147,b:134,name:"teal"},{r:2,g:171,b:46,name:"kelly green"},{r:2,g:193,b:77,name:"shamrock green"},{r:2,g:204,b:254,name:"bright sky blue"},{r:2,g:216,b:233,name:"aqua blue"},{r:3,g:1,b:45,name:"midnight"},{r:3,g:7,b:100,name:"darkblue"},{r:3,g:10,b:167,name:"cobalt blue"},{r:3,g:53,b:0,name:"dark green"},{r:3,g:57,b:248,name:"vibrant blue"},{r:3,g:67,b:223,name:"blue"},{r:3,g:113,b:156,name:"ocean blue"},{r:4,g:2,b:115,name:"deep blue"},{r:4,g:3,b:72,name:"night blue"},{r:4,g:46,b:96,name:"marine"},{r:4,g:74,b:5,name:"bottle green"},{r:4,g:92,b:90,name:"dark turquoise"},{r:4,g:116,b:149,name:"sea blue"},{r:4,g:130,b:67,name:"jungle green"},{r:4,g:133,b:209,name:"cerulean"},{r:4,g:216,b:178,name:"aquamarine"},{r:4,g:217,b:255,name:"neon blue"},{r:4,g:244,b:137,name:"turquoise green"},{r:5,g:4,b:170,name:"royal blue"},{r:5,g:71,b:42,name:"evergreen"},{r:5,g:72,b:13,name:"british racing green"},{r:5,g:73,b:7,name:"darkgreen"},{r:5,g:105,b:107,name:"dark aqua"},{r:5,g:110,b:238,name:"cerulean blue"},{r:5,g:255,b:166,name:"bright sea green"},{r:6,g:46,b:3,name:"very dark green"},{r:6,g:71,b:12,name:"forest green"},{r:6,g:82,b:255,name:"electric blue"},{r:6,g:154,b:243,name:"azure"},{r:6,g:177,b:196,name:"turquoise blue"},{r:6,g:180,b:139,name:"green blue"},{r:6,g:194,b:172,name:"turquoise"},{r:7,g:13,b:13,name:"almost black"},{r:8,g:4,b:249,name:"primary blue"},{r:8,g:120,b:127,name:"deep aqua"},{r:8,g:148,b:4,name:"true green"},{r:8,g:255,b:8,name:"fluorescent green"},{r:10,g:67,b:122,name:"twilight blue"},{r:10,g:72,b:30,name:"pine green"},{r:10,g:95,b:56,name:"spruce"},{r:10,g:136,b:138,name:"dark cyan"},{r:10,g:221,b:8,name:"vibrant green"},{r:10,g:255,b:2,name:"fluro green"},{r:11,g:64,b:8,name:"hunter green"},{r:11,g:85,b:9,name:"forest"},{r:11,g:139,b:135,name:"greenish blue"},{r:11,g:247,b:125,name:"minty green"},{r:11,g:249,b:234,name:"bright aqua"},{r:12,g:6,b:247,name:"strong blue"},{r:12,g:23,b:147,name:"royal"},{r:12,g:181,b:119,name:"green teal"},{r:12,g:220,b:115,name:"tealish green"},{r:12,g:255,b:12,name:"neon green"},{r:13,g:117,b:248,name:"deep sky blue"},{r:14,g:135,b:204,name:"water blue"},{r:15,g:155,b:142,name:"blue green"},{r:15,g:254,b:249,name:"bright turquoise"},{r:16,g:122,b:176,name:"nice blue"},{r:16,g:166,b:116,name:"bluish green"},{r:17,g:135,b:93,name:"dark sea green"},{r:18,g:225,b:147,name:"aqua green"},{r:19,g:126,b:109,name:"blue green"},{r:19,g:187,b:175,name:"topaz"},{r:19,g:234,b:201,name:"aqua"},{r:21,g:46,b:255,name:"vivid blue"},{r:21,g:68,b:6,name:"forrest green"},{r:21,g:80,b:132,name:"light navy"},{r:21,g:176,b:26,name:"green"},{r:24,g:5,b:219,name:"ultramarine blue"},{r:24,g:209,b:123,name:"seaweed"},{r:27,g:36,b:49,name:"dark"},{r:27,g:252,b:6,name:"highlighter green"},{r:29,g:2,b:0,name:"very dark brown"},{r:29,g:93,b:236,name:"azul"},{r:30,g:72,b:143,name:"cobalt"},{r:30,g:145,b:103,name:"viridian"},{r:30,g:248,b:118,name:"spearmint"},{r:31,g:9,b:84,name:"dark indigo"},{r:31,g:59,b:77,name:"dark blue grey"},{r:31,g:99,b:87,name:"dark green blue"},{r:31,g:167,b:116,name:"jade"},{r:31,g:181,b:122,name:"dark seafoam"},{r:32,g:0,b:177,name:"ultramarine"},{r:32,g:192,b:115,name:"dark mint green"},{r:32,g:249,b:134,name:"wintergreen"},{r:33,g:56,b:171,name:"sapphire"},{r:33,g:71,b:97,name:"dark slate blue"},{r:33,g:195,b:111,name:"algae green"},{r:33,g:252,b:13,name:"electric green"},{r:34,g:66,b:199,name:"blue blue"},{r:35,g:196,b:139,name:"greenblue"},{r:36,g:122,b:253,name:"clear blue"},{r:36,g:188,b:168,name:"tealish"},{r:37,g:163,b:111,name:"teal green"},{r:37,g:255,b:41,name:"hot green"},{r:38,g:83,b:141,name:"dusk blue"},{r:38,g:247,b:253,name:"bright light blue"},{r:39,g:106,b:179,name:"mid blue"},{r:40,g:1,b:55,name:"midnight purple"},{r:40,g:124,b:55,name:"darkish green"},{r:41,g:70,b:91,name:"dark grey blue"},{r:41,g:118,b:187,name:"bluish"},{r:42,g:1,b:52,name:"very dark purple"},{r:42,g:126,b:25,name:"tree green"},{r:42,g:254,b:183,name:"greenish cyan"},{r:43,g:93,b:52,name:"pine"},{r:43,g:175,b:106,name:"jade green"},{r:43,g:177,b:121,name:"bluey green"},{r:44,g:111,b:187,name:"medium blue"},{r:44,g:250,b:31,name:"radioactive green"},{r:45,g:254,b:84,name:"bright light green"},{r:46,g:90,b:136,name:"light navy blue"},{r:46,g:232,b:187,name:"aqua marine"},{r:47,g:239,b:16,name:"vivid green"},{r:49,g:102,b:138,name:"ugly blue"},{r:50,g:191,b:132,name:"greenish teal"},{r:51,g:184,b:100,name:"cool green"},{r:52,g:1,b:63,name:"dark violet"},{r:52,g:28,b:2,name:"dark brown"},{r:52,g:56,b:55,name:"charcoal"},{r:53,g:6,b:62,name:"dark purple"},{r:53,g:83,b:10,name:"navy green"},{r:53,g:173,b:107,name:"seaweed green"},{r:54,g:1,b:63,name:"deep purple"},{r:54,g:55,b:55,name:"dark grey"},{r:55,g:62,b:2,name:"dark olive"},{r:55,g:120,b:191,name:"windows blue"},{r:56,g:2,b:130,name:"indigo"},{r:56,g:8,b:53,name:"eggplant"},{r:56,g:128,b:4,name:"dark grass green"},{r:57,g:173,b:72,name:"medium green"},{r:58,g:24,b:177,name:"indigo blue"},{r:58,g:46,b:254,name:"light royal blue"},{r:58,g:229,b:127,name:"weird green"},{r:59,g:91,b:146,name:"denim blue"},{r:59,g:99,b:140,name:"denim"},{r:59,g:113,b:159,name:"muted blue"},{r:60,g:0,b:8,name:"dark maroon"},{r:60,g:65,b:66,name:"charcoal grey"},{r:60,g:77,b:3,name:"dark olive green"},{r:60,g:115,b:168,name:"flat blue"},{r:60,g:153,b:146,name:"sea"},{r:61,g:7,b:52,name:"aubergine"},{r:61,g:28,b:2,name:"chocolate"},{r:61,g:122,b:253,name:"lightish blue"},{r:61,g:153,b:115,name:"ocean green"},{r:62,g:130,b:252,name:"dodger blue"},{r:62,g:175,b:118,name:"dark seafoam green"},{r:63,g:1,b:44,name:"dark plum"},{r:63,g:130,b:157,name:"dirty blue"},{r:63,g:155,b:11,name:"grass green"},{r:64,g:163,b:104,name:"greenish"},{r:64,g:253,b:20,name:"poison green"},{r:65,g:2,b:0,name:"deep brown"},{r:65,g:25,b:0,name:"chocolate brown"},{r:65,g:156,b:3,name:"grassy green"},{r:65,g:253,b:254,name:"bright cyan"},{r:66,g:179,b:149,name:"greeny blue"},{r:67,g:5,b:65,name:"eggplant purple"},{r:67,g:107,b:173,name:"french blue"},{r:68,g:142,b:228,name:"dark sky blue"},{r:70,g:65,b:150,name:"blueberry"},{r:71,g:95,b:148,name:"dusky blue"},{r:72,g:192,b:114,name:"dark mint"},{r:73,g:6,b:72,name:"deep violet"},{r:73,g:117,b:156,name:"dull blue"},{r:73,g:132,b:184,name:"cool blue"},{r:74,g:1,b:0,name:"mahogany"},{r:75,g:0,b:110,name:"royal purple"},{r:75,g:1,b:1,name:"dried blood"},{r:75,g:87,b:219,name:"warm blue"},{r:75,g:93,b:22,name:"army green"},{r:75,g:97,b:19,name:"camouflage green"},{r:76,g:144,b:133,name:"dusty teal"},{r:77,g:164,b:9,name:"lawn green"},{r:78,g:5,b:80,name:"plum purple"},{r:78,g:81,b:139,name:"twilight"},{r:78,g:84,b:129,name:"dusk"},{r:78,g:116,b:150,name:"cadet blue"},{r:78,g:253,b:84,name:"light neon green"},{r:79,g:115,b:142,name:"metallic blue"},{r:79,g:145,b:83,name:"light forest green"},{r:80,g:123,b:156,name:"stormy blue"},{r:80,g:167,b:71,name:"mid green"},{r:81,g:10,b:201,name:"violet blue"},{r:81,g:101,b:114,name:"slate"},{r:81,g:112,b:215,name:"cornflower blue"},{r:81,g:183,b:59,name:"leafy green"},{r:82,g:101,b:37,name:"camo green"},{r:83,g:60,b:198,name:"blue with a hint of purple"},{r:83,g:98,b:103,name:"gunmetal"},{r:83,g:252,b:161,name:"sea green"},{r:83,g:254,b:92,name:"light bright green"},{r:84,g:78,b:3,name:"green brown"},{r:84,g:141,b:68,name:"fern green"},{r:84,g:172,b:104,name:"algae"},{r:85,g:57,b:204,name:"blurple"},{r:86,g:132,b:174,name:"off blue"},{r:86,g:174,b:87,name:"dark pastel green"},{r:86,g:252,b:162,name:"light green blue"},{r:87,g:41,b:206,name:"blue purple"},{r:88,g:15,b:65,name:"plum"},{r:88,g:188,b:8,name:"frog green"},{r:89,g:101,b:109,name:"slate grey"},{r:89,g:133,b:86,name:"dark sage"},{r:90,g:6,b:239,name:"blue purple"},{r:90,g:125,b:154,name:"steel blue"},{r:90,g:134,b:173,name:"dusty blue"},{r:91,g:124,b:153,name:"slate blue"},{r:92,g:139,b:21,name:"sap green"},{r:92,g:169,b:4,name:"leaf green"},{r:92,g:172,b:45,name:"grass"},{r:92,g:178,b:0,name:"kermit green"},{r:93,g:6,b:233,name:"blue violet"},{r:93,g:20,b:81,name:"grape purple"},{r:93,g:33,b:208,name:"purple blue"},{r:94,g:129,b:157,name:"greyish blue"},{r:94,g:155,b:138,name:"grey teal"},{r:94,g:220,b:31,name:"green apple"},{r:95,g:52,b:231,name:"purpley blue"},{r:95,g:158,b:143,name:"dull teal"},{r:95,g:160,b:82,name:"muted green"},{r:96,g:30,b:249,name:"purplish blue"},{r:96,g:70,b:15,name:"mud brown"},{r:96,g:102,b:2,name:"mud green"},{r:96,g:124,b:142,name:"blue grey"},{r:97,g:0,b:35,name:"burgundy"},{r:97,g:64,b:239,name:"purpleish blue"},{r:97,g:222,b:42,name:"toxic green"},{r:97,g:225,b:96,name:"lightish green"},{r:98,g:65,b:199,name:"bluey purple"},{r:98,g:88,b:196,name:"iris"},{r:99,g:45,b:233,name:"purple blue"},{r:99,g:139,b:39,name:"mossy green"},{r:99,g:169,b:80,name:"fern"},{r:99,g:179,b:101,name:"boring green"},{r:99,g:247,b:180,name:"light greenish blue"},{r:100,g:84,b:3,name:"olive brown"},{r:100,g:125,b:142,name:"grey blue"},{r:100,g:136,b:234,name:"soft blue"},{r:101,g:0,b:33,name:"maroon"},{r:101,g:55,b:0,name:"brown"},{r:101,g:116,b:50,name:"muddy green"},{r:101,g:139,b:56,name:"moss green"},{r:101,g:140,b:187,name:"faded blue"},{r:101,g:141,b:109,name:"slate green"},{r:101,g:171,b:124,name:"tea"},{r:101,g:254,b:8,name:"bright lime green"},{r:102,g:26,b:238,name:"purply blue"},{r:102,g:95,b:209,name:"dark periwinkle"},{r:102,g:124,b:62,name:"military green"},{r:102,g:126,b:44,name:"dirty green"},{r:103,g:58,b:63,name:"purple brown"},{r:103,g:122,b:4,name:"olive green"},{r:104,g:0,b:24,name:"claret"},{r:104,g:50,b:227,name:"burple"},{r:105,g:96,b:6,name:"greeny brown"},{r:105,g:97,b:18,name:"greenish brown"},{r:105,g:131,b:57,name:"swamp"},{r:105,g:157,b:76,name:"flat green"},{r:105,g:216,b:79,name:"fresh green"},{r:106,g:110,b:9,name:"brownish green"},{r:106,g:121,b:247,name:"cornflower"},{r:107,g:66,b:71,name:"purplish brown"},{r:107,g:124,b:133,name:"battleship grey"},{r:107,g:139,b:164,name:"grey blue"},{r:107,g:163,b:83,name:"off green"},{r:108,g:52,b:97,name:"grape"},{r:108,g:122,b:14,name:"murky green"},{r:109,g:90,b:207,name:"light indigo"},{r:109,g:237,b:253,name:"robins egg"},{r:110,g:16,b:5,name:"reddy brown"},{r:110,g:117,b:14,name:"olive"},{r:110,g:203,b:60,name:"apple"},{r:111,g:108,b:10,name:"browny green"},{r:111,g:118,b:50,name:"olive drab"},{r:111,g:124,b:0,name:"poop green"},{r:111,g:130,b:138,name:"steel grey"},{r:111,g:194,b:118,name:"soft green"},{r:112,g:59,b:231,name:"bluish purple"},{r:112,g:108,b:17,name:"brown green"},{r:112,g:178,b:63,name:"nasty green"},{r:113,g:159,b:145,name:"greyish teal"},{r:113,g:170,b:52,name:"leaf"},{r:114,g:0,b:88,name:"rich purple"},{r:114,g:134,b:57,name:"khaki green"},{r:114,g:143,b:2,name:"dark yellow green"},{r:115,g:0,b:57,name:"merlot"},{r:115,g:74,b:101,name:"dirty purple"},{r:115,g:92,b:18,name:"mud"},{r:115,g:133,b:149,name:"steel"},{r:116,g:40,b:2,name:"chestnut"},{r:116,g:133,b:0,name:"swamp green"},{r:116,g:139,b:151,name:"bluish grey"},{r:116,g:149,b:81,name:"drab green"},{r:116,g:166,b:98,name:"dull green"},{r:117,g:8,b:81,name:"velvet"},{r:117,g:25,b:115,name:"darkish purple"},{r:117,g:128,b:0,name:"shit green"},{r:117,g:141,b:163,name:"blue grey"},{r:117,g:184,b:79,name:"turtle green"},{r:117,g:187,b:253,name:"sky blue"},{r:117,g:253,b:99,name:"lighter green"},{r:118,g:66,b:78,name:"brownish purple"},{r:118,g:153,b:88,name:"moss"},{r:118,g:169,b:115,name:"dusty green"},{r:118,g:205,b:38,name:"apple green"},{r:118,g:253,b:168,name:"light bluish green"},{r:118,g:255,b:123,name:"lightgreen"},{r:119,g:0,b:1,name:"blood"},{r:119,g:146,b:111,name:"green grey"},{r:119,g:161,b:181,name:"greyblue"},{r:119,g:171,b:86,name:"asparagus"},{r:120,g:155,b:115,name:"grey green"},{r:120,g:209,b:182,name:"seafoam blue"},{r:122,g:89,b:1,name:"poop brown"},{r:122,g:104,b:127,name:"purplish grey"},{r:122,g:106,b:79,name:"greyish brown"},{r:122,g:151,b:3,name:"ugly green"},{r:122,g:249,b:171,name:"seafoam green"},{r:123,g:0,b:44,name:"bordeaux"},{r:123,g:3,b:35,name:"wine red"},{r:123,g:88,b:4,name:"shit brown"},{r:123,g:178,b:116,name:"faded green"},{r:123,g:200,b:246,name:"lightblue"},{r:123,g:242,b:218,name:"tiffany blue"},{r:123,g:253,b:199,name:"light aquamarine"},{r:125,g:113,b:3,name:"ugly brown"},{r:125,g:127,b:124,name:"medium grey"},{r:126,g:30,b:156,name:"purple"},{r:126,g:64,b:113,name:"bruise"},{r:126,g:160,b:122,name:"greeny grey"},{r:126,g:189,b:1,name:"dark lime green"},{r:126,g:244,b:204,name:"light turquoise"},{r:126,g:251,b:179,name:"light blue green"},{r:127,g:43,b:10,name:"reddish brown"},{r:127,g:78,b:30,name:"milk chocolate"},{r:127,g:81,b:18,name:"medium brown"},{r:127,g:94,b:0,name:"poop"},{r:127,g:95,b:0,name:"shit"},{r:127,g:104,b:78,name:"dark taupe"},{r:127,g:112,b:83,name:"grey brown"},{r:127,g:143,b:78,name:"camo"},{r:128,g:1,b:63,name:"wine"},{r:128,g:91,b:135,name:"muted purple"},{r:128,g:249,b:173,name:"seafoam"},{r:130,g:7,b:71,name:"red purple"},{r:130,g:95,b:135,name:"dusty purple"},{r:130,g:109,b:140,name:"grey purple"},{r:130,g:131,b:68,name:"drab"},{r:130,g:166,b:125,name:"greyish green"},{r:130,g:202,b:252,name:"sky"},{r:130,g:203,b:178,name:"pale teal"},{r:131,g:101,b:57,name:"dirt brown"},{r:132,g:0,b:0,name:"dark red"},{r:132,g:89,b:126,name:"dull purple"},{r:132,g:183,b:1,name:"dark lime"},{r:133,g:14,b:4,name:"indian red"},{r:133,g:103,b:152,name:"dark lavender"},{r:133,g:163,b:178,name:"bluegrey"},{r:134,g:111,b:133,name:"purple grey"},{r:134,g:119,b:95,name:"brownish grey"},{r:134,g:161,b:125,name:"grey green"},{r:135,g:76,b:98,name:"dark mauve"},{r:135,g:86,b:228,name:"purpley"},{r:135,g:95,b:66,name:"cocoa"},{r:135,g:110,b:75,name:"dull brown"},{r:135,g:169,b:34,name:"avocado green"},{r:135,g:174,b:115,name:"sage"},{r:135,g:253,b:5,name:"bright lime"},{r:136,g:95,b:1,name:"poo brown"},{r:136,g:104,b:6,name:"muddy brown"},{r:136,g:113,b:145,name:"greyish purple"},{r:136,g:151,b:23,name:"baby shit green"},{r:136,g:179,b:120,name:"sage green"},{r:137,g:69,b:133,name:"light eggplant"},{r:137,g:91,b:123,name:"dusky purple"},{r:137,g:160,b:176,name:"bluey grey"},{r:137,g:162,b:3,name:"vomit green"},{r:137,g:254,b:5,name:"lime green"},{r:138,g:110,b:69,name:"dirt"},{r:138,g:184,b:254,name:"carolina blue"},{r:138,g:241,b:254,name:"robin egg blue"},{r:139,g:46,b:22,name:"red brown"},{r:139,g:49,b:3,name:"rust brown"},{r:139,g:136,b:248,name:"lavender blue"},{r:140,g:0,b:15,name:"crimson"},{r:140,g:0,b:52,name:"red wine"},{r:140,g:253,b:126,name:"easter green"},{r:140,g:255,b:158,name:"baby green"},{r:140,g:255,b:219,name:"light aqua"},{r:141,g:94,b:183,name:"deep lavender"},{r:141,g:132,b:104,name:"brown grey"},{r:142,g:118,b:24,name:"hazel"},{r:142,g:130,b:254,name:"periwinkle"},{r:142,g:171,b:18,name:"pea green"},{r:142,g:229,b:63,name:"kiwi green"},{r:143,g:20,b:2,name:"brick red"},{r:143,g:115,b:3,name:"poo"},{r:143,g:140,b:231,name:"perrywinkle"},{r:143,g:152,b:5,name:"baby poop green"},{r:143,g:153,b:251,name:"periwinkle blue"},{r:143,g:174,b:34,name:"icky green"},{r:143,g:182,b:123,name:"lichen"},{r:143,g:254,b:9,name:"acid green"},{r:143,g:255,b:159,name:"mint green"},{r:144,g:177,b:52,name:"avocado"},{r:144,g:228,b:193,name:"light teal"},{r:144,g:253,b:169,name:"foam green"},{r:145,g:9,b:81,name:"reddish purple"},{r:145,g:110,b:153,name:"faded purple"},{r:146,g:10,b:78,name:"mulberry"},{r:146,g:43,b:5,name:"brown red"},{r:146,g:149,b:145,name:"grey"},{r:146,g:153,b:1,name:"pea soup"},{r:147,g:124,b:0,name:"baby poop"},{r:148,g:86,b:140,name:"purplish"},{r:148,g:119,b:6,name:"puke brown"},{r:148,g:126,b:148,name:"purpley grey"},{r:148,g:166,b:23,name:"pea soup green"},{r:148,g:172,b:2,name:"barf green"},{r:148,g:178,b:28,name:"sickly green"},{r:149,g:46,b:143,name:"warm purple"},{r:149,g:163,b:166,name:"cool grey"},{r:149,g:208,b:252,name:"light blue"},{r:150,g:0,b:86,name:"dark magenta"},{r:150,g:78,b:2,name:"warm brown"},{r:150,g:110,b:189,name:"deep lilac"},{r:150,g:174,b:141,name:"greenish grey"},{r:150,g:180,b:3,name:"booger green"},{r:150,g:249,b:123,name:"light green"},{r:151,g:138,b:132,name:"warm grey"},{r:152,g:0,b:2,name:"blood red"},{r:152,g:63,b:178,name:"purply"},{r:152,g:86,b:141,name:"purpleish"},{r:152,g:94,b:43,name:"sepia"},{r:152,g:239,b:249,name:"robins egg blue"},{r:152,g:246,b:176,name:"light sea green"},{r:153,g:0,b:250,name:"vivid purple"},{r:153,g:1,b:71,name:"purple red"},{r:153,g:15,b:75,name:"berry"},{r:153,g:117,b:112,name:"reddish grey"},{r:153,g:204,b:4,name:"slime green"},{r:154,g:2,b:0,name:"deep red"},{r:154,g:14,b:234,name:"violet"},{r:154,g:48,b:1,name:"auburn"},{r:154,g:98,b:0,name:"raw sienna"},{r:154,g:174,b:7,name:"puke green"},{r:154,g:247,b:100,name:"light grass green"},{r:155,g:95,b:192,name:"amethyst"},{r:155,g:122,b:1,name:"yellowish brown"},{r:155,g:143,b:85,name:"dark khaki"},{r:155,g:181,b:60,name:"booger"},{r:155,g:229,b:170,name:"hospital green"},{r:156,g:109,b:87,name:"brownish"},{r:156,g:109,b:165,name:"dark lilac"},{r:156,g:187,b:4,name:"bright olive"},{r:156,g:239,b:67,name:"kiwi"},{r:157,g:2,b:22,name:"carmine"},{r:157,g:7,b:89,name:"dark fuchsia"},{r:157,g:87,b:131,name:"light plum"},{r:157,g:118,b:81,name:"mocha"},{r:157,g:185,b:44,name:"sick green"},{r:157,g:188,b:212,name:"light grey blue"},{r:157,g:193,b:0,name:"snot green"},{r:157,g:255,b:0,name:"bright yellow green"},{r:158,g:0,b:58,name:"cranberry"},{r:158,g:1,b:104,name:"red violet"},{r:158,g:54,b:35,name:"brownish red"},{r:158,g:67,b:162,name:"medium purple"},{r:159,g:35,b:5,name:"burnt red"},{r:159,g:131,b:3,name:"diarrhea"},{r:159,g:254,b:176,name:"mint"},{r:160,g:2,b:92,name:"deep magenta"},{r:160,g:4,b:152,name:"barney purple"},{r:160,g:54,b:35,name:"brick"},{r:160,g:69,b:14,name:"burnt umber"},{r:160,g:191,b:22,name:"gross green"},{r:160,g:254,b:191,name:"light seafoam"},{r:161,g:57,b:5,name:"russet"},{r:162,g:72,b:87,name:"light maroon"},{r:162,g:101,b:62,name:"earth"},{r:162,g:164,b:21,name:"vomit"},{r:162,g:191,b:254,name:"pastel blue"},{r:162,g:207,b:254,name:"baby blue"},{r:164,g:66,b:160,name:"ugly purple"},{r:164,g:132,b:172,name:"heather"},{r:164,g:190,b:92,name:"light olive green"},{r:164,g:191,b:32,name:"pea"},{r:165,g:0,b:85,name:"violet red"},{r:165,g:82,b:230,name:"lightish purple"},{r:165,g:90,b:244,name:"lighter purple"},{r:165,g:126,b:82,name:"puce"},{r:165,g:163,b:145,name:"cement"},{r:165,g:165,b:2,name:"puke"},{r:165,g:251,b:213,name:"pale turquoise"},{r:166,g:111,b:181,name:"soft purple"},{r:166,g:129,b:76,name:"coffee"},{r:166,g:200,b:117,name:"light moss green"},{r:166,g:251,b:178,name:"light mint green"},{r:167,g:94,b:9,name:"raw umber"},{r:167,g:255,b:181,name:"light seafoam green"},{r:168,g:60,b:9,name:"rust"},{r:168,g:65,b:91,name:"light burgundy"},{r:168,g:121,b:0,name:"bronze"},{r:168,g:125,b:194,name:"wisteria"},{r:168,g:137,b:5,name:"dark mustard"},{r:168,g:143,b:89,name:"dark sand"},{r:168,g:164,b:149,name:"greyish"},{r:168,g:181,b:4,name:"mustard green"},{r:168,g:255,b:4,name:"electric lime"},{r:169,g:3,b:8,name:"darkish red"},{r:169,g:86,b:30,name:"sienna"},{r:169,g:190,b:112,name:"tan green"},{r:169,g:249,b:113,name:"spring green"},{r:170,g:35,b:255,name:"electric purple"},{r:170,g:39,b:4,name:"rust red"},{r:170,g:166,b:98,name:"khaki"},{r:170,g:255,b:50,name:"lime"},{r:171,g:18,b:57,name:"rouge"},{r:171,g:126,b:76,name:"tan brown"},{r:171,g:144,b:4,name:"baby poo"},{r:172,g:29,b:184,name:"barney"},{r:172,g:79,b:6,name:"cinnamon"},{r:172,g:116,b:52,name:"leather"},{r:172,g:126,b:4,name:"mustard brown"},{r:172,g:134,b:168,name:"dusty lavender"},{r:172,g:147,b:98,name:"dark beige"},{r:172,g:187,b:13,name:"snot"},{r:172,g:191,b:105,name:"light olive"},{r:172,g:194,b:217,name:"cloudy blue"},{r:172,g:255,b:252,name:"light cyan"},{r:173,g:3,b:222,name:"vibrant purple"},{r:173,g:10,b:253,name:"bright violet"},{r:173,g:129,b:80,name:"light brown"},{r:173,g:144,b:13,name:"baby shit brown"},{r:173,g:165,b:135,name:"stone"},{r:173,g:248,b:2,name:"lemon green"},{r:174,g:113,b:129,name:"mauve"},{r:174,g:139,b:12,name:"yellowy brown"},{r:174,g:253,b:108,name:"light lime"},{r:174,g:255,b:110,name:"key lime"},{r:175,g:47,b:13,name:"rusty red"},{r:175,g:111,b:9,name:"caramel"},{r:175,g:136,b:74,name:"dark tan"},{r:175,g:168,b:139,name:"bland"},{r:176,g:1,b:73,name:"raspberry"},{r:176,g:5,b:75,name:"purplish red"},{r:176,g:78,b:15,name:"burnt sienna"},{r:176,g:221,b:22,name:"yellowish green"},{r:176,g:255,b:157,name:"pastel green"},{r:177,g:96,b:2,name:"orangey brown"},{r:177,g:114,b:97,name:"pinkish brown"},{r:177,g:145,b:110,name:"pale brown"},{r:177,g:209,b:252,name:"powder blue"},{r:177,g:210,b:123,name:"pale olive green"},{r:177,g:252,b:153,name:"pale light green"},{r:177,g:255,b:101,name:"pale lime green"},{r:178,g:95,b:3,name:"orangish brown"},{r:178,g:100,b:0,name:"umber"},{r:178,g:113,b:61,name:"clay brown"},{r:178,g:122,b:1,name:"golden brown"},{r:178,g:151,b:5,name:"brown yellow"},{r:178,g:153,b:110,name:"dust"},{r:178,g:251,b:165,name:"light pastel green"},{r:179,g:111,b:246,name:"light urple"},{r:181,g:72,b:93,name:"dark rose"},{r:181,g:148,b:16,name:"dark gold"},{r:181,g:195,b:6,name:"bile"},{r:181,g:206,b:8,name:"green yellow"},{r:182,g:99,b:37,name:"copper"},{r:182,g:106,b:80,name:"clay"},{r:182,g:196,b:6,name:"baby puke green"},{r:182,g:255,b:187,name:"light mint"},{r:183,g:82,b:3,name:"burnt siena"},{r:183,g:144,b:212,name:"pale purple"},{r:183,g:148,b:0,name:"yellow brown"},{r:183,g:201,b:226,name:"light blue grey"},{r:183,g:225,b:161,name:"light grey green"},{r:183,g:255,b:250,name:"pale cyan"},{r:184,g:255,b:235,name:"pale aqua"},{r:185,g:72,b:78,name:"dusty red"},{r:185,g:105,b:2,name:"brown orange"},{r:185,g:162,b:129,name:"taupe"},{r:185,g:204,b:129,name:"pale olive"},{r:185,g:255,b:102,name:"light lime green"},{r:186,g:104,b:115,name:"dusky rose"},{r:186,g:158,b:136,name:"mushroom"},{r:187,g:63,b:63,name:"dull red"},{r:187,g:249,b:15,name:"yellowgreen"},{r:188,g:19,b:254,name:"neon purple"},{r:188,g:203,b:122,name:"greenish tan"},{r:188,g:236,b:172,name:"light sage"},{r:188,g:245,b:166,name:"washed out green"},{r:189,g:108,b:72,name:"adobe"},{r:189,g:246,b:254,name:"pale sky blue"},{r:189,g:248,b:163,name:"tea green"},{r:190,g:1,b:25,name:"scarlet"},{r:190,g:1,b:60,name:"rose red"},{r:190,g:3,b:253,name:"bright purple"},{r:190,g:100,b:0,name:"orange brown"},{r:190,g:174,b:138,name:"putty"},{r:190,g:253,b:115,name:"pale lime"},{r:190,g:253,b:183,name:"celadon"},{r:191,g:119,b:246,name:"light purple"},{r:191,g:144,b:5,name:"ochre"},{r:191,g:155,b:12,name:"ocher"},{r:191,g:172,b:5,name:"muddy yellow"},{r:191,g:241,b:40,name:"yellowy green"},{r:191,g:254,b:40,name:"lemon lime"},{r:192,g:2,b:47,name:"lipstick red"},{r:192,g:78,b:1,name:"burnt orange"},{r:192,g:113,b:254,name:"easter purple"},{r:192,g:115,b:122,name:"dusty rose"},{r:192,g:250,b:139,name:"pistachio"},{r:192,g:251,b:45,name:"yellow green"},{r:193,g:74,b:9,name:"brick orange"},{r:193,g:198,b:252,name:"light periwinkle"},{r:193,g:248,b:10,name:"chartreuse"},{r:193,g:253,b:149,name:"celery"},{r:194,g:0,b:120,name:"magenta"},{r:194,g:126,b:121,name:"brownish pink"},{r:194,g:146,b:161,name:"light mauve"},{r:194,g:183,b:9,name:"olive yellow"},{r:194,g:190,b:14,name:"puke yellow"},{r:194,g:255,b:137,name:"light yellowish green"},{r:195,g:144,b:155,name:"grey pink"},{r:195,g:251,b:244,name:"duck egg blue"},{r:196,g:66,b:64,name:"reddish"},{r:196,g:85,b:8,name:"rust orange"},{r:196,g:142,b:253,name:"liliac"},{r:196,g:166,b:97,name:"sandy brown"},{r:196,g:254,b:130,name:"light pea green"},{r:196,g:255,b:247,name:"eggshell blue"},{r:197,g:201,b:199,name:"silver"},{r:198,g:81,b:2,name:"dark orange"},{r:198,g:156,b:4,name:"ocre"},{r:198,g:159,b:89,name:"camel"},{r:198,g:248,b:8,name:"greeny yellow"},{r:198,g:252,b:255,name:"light sky blue"},{r:199,g:71,b:103,name:"deep rose"},{r:199,g:96,b:255,name:"bright lavender"},{r:199,g:121,b:134,name:"old pink"},{r:199,g:159,b:239,name:"lavender"},{r:199,g:172,b:125,name:"toupe"},{r:199,g:193,b:12,name:"vomit yellow"},{r:199,g:253,b:181,name:"pale green"},{r:200,g:60,b:185,name:"purpley pink"},{r:200,g:90,b:83,name:"dark salmon"},{r:200,g:117,b:196,name:"orchid"},{r:200,g:118,b:6,name:"dirty orange"},{r:200,g:127,b:137,name:"old rose"},{r:200,g:141,b:148,name:"greyish pink"},{r:200,g:172,b:169,name:"pinkish grey"},{r:200,g:253,b:61,name:"yellow green"},{r:200,g:255,b:176,name:"light light green"},{r:201,g:76,b:190,name:"pinky purple"},{r:201,g:94,b:251,name:"bright lilac"},{r:201,g:100,b:59,name:"terra cotta"},{r:201,g:174,b:116,name:"sandstone"},{r:201,g:176,b:3,name:"brownish yellow"},{r:201,g:209,b:121,name:"greenish beige"},{r:201,g:255,b:39,name:"green yellow"},{r:202,g:1,b:71,name:"ruby"},{r:202,g:102,b:65,name:"terracotta"},{r:202,g:107,b:2,name:"browny orange"},{r:202,g:123,b:128,name:"dirty pink"},{r:202,g:155,b:247,name:"baby purple"},{r:202,g:160,b:255,name:"pastel purple"},{r:202,g:255,b:251,name:"light light blue"},{r:203,g:0,b:245,name:"hot purple"},{r:203,g:1,b:98,name:"deep pink"},{r:203,g:65,b:107,name:"dark pink"},{r:203,g:104,b:67,name:"terracota"},{r:203,g:119,b:35,name:"brownish orange"},{r:203,g:157,b:6,name:"yellow ochre"},{r:203,g:165,b:96,name:"sand brown"},{r:203,g:248,b:95,name:"pear"},{r:204,g:122,b:139,name:"dusky pink"},{r:204,g:173,b:96,name:"desert"},{r:204,g:253,b:127,name:"light yellow green"},{r:205,g:89,b:9,name:"rusty orange"},{r:205,g:117,b:132,name:"ugly pink"},{r:205,g:197,b:10,name:"dirty yellow"},{r:205,g:253,b:2,name:"greenish yellow"},{r:206,g:93,b:174,name:"purplish pink"},{r:206,g:162,b:253,name:"lilac"},{r:206,g:174,b:250,name:"pale violet"},{r:206,g:179,b:1,name:"mustard"},{r:207,g:2,b:52,name:"cherry"},{r:207,g:82,b:78,name:"dark coral"},{r:207,g:98,b:117,name:"rose"},{r:207,g:175,b:123,name:"fawn"},{r:207,g:253,b:188,name:"very pale green"},{r:207,g:255,b:4,name:"neon yellow"},{r:208,g:193,b:1,name:"ugly yellow"},{r:208,g:228,b:41,name:"sickly yellow"},{r:208,g:254,b:29,name:"lime yellow"},{r:208,g:254,b:254,name:"pale blue"},{r:209,g:118,b:143,name:"muted pink"},{r:209,g:178,b:111,name:"tan"},{r:209,g:255,b:189,name:"very light green"},{r:210,g:189,b:10,name:"mustard yellow"},{r:211,g:73,b:78,name:"faded red"},{r:211,g:182,b:131,name:"very light brown"},{r:212,g:106,b:126,name:"pinkish"},{r:212,g:255,b:255,name:"really light blue"},{r:213,g:23,b:78,name:"lipstick"},{r:213,g:134,b:157,name:"dull pink"},{r:213,g:138,b:148,name:"dusty pink"},{r:213,g:171,b:9,name:"burnt yellow"},{r:213,g:182,b:10,name:"dark yellow"},{r:213,g:255,b:255,name:"very light blue"},{r:214,g:72,b:215,name:"pinkish purple"},{r:214,g:180,b:252,name:"light violet"},{r:214,g:255,b:250,name:"ice"},{r:214,g:255,b:254,name:"very pale blue"},{r:215,g:37,b:222,name:"purple pink"},{r:215,g:103,b:173,name:"pale magenta"},{r:215,g:255,b:254,name:"ice blue"},{r:216,g:134,b:59,name:"dull orange"},{r:216,g:220,b:214,name:"light grey"},{r:217,g:1,b:102,name:"dark hot pink"},{r:217,g:79,b:245,name:"heliotrope"},{r:217,g:84,b:77,name:"pale red"},{r:217,g:155,b:130,name:"pinkish tan"},{r:218,g:70,b:125,name:"darkish pink"},{r:219,g:75,b:218,name:"pink purple"},{r:219,g:88,b:86,name:"pastel red"},{r:219,g:180,b:12,name:"gold"},{r:220,g:77,b:1,name:"deep orange"},{r:221,g:133,b:215,name:"lavender pink"},{r:221,g:214,b:24,name:"piss yellow"},{r:222,g:12,b:98,name:"cerise"},{r:222,g:126,b:93,name:"dark peach"},{r:222,g:157,b:172,name:"faded pink"},{r:223,g:78,b:200,name:"purpleish pink"},{r:223,g:197,b:254,name:"light lavender"},{r:224,g:63,b:216,name:"purple pink"},{r:225,g:119,b:1,name:"pumpkin"},{r:226,g:202,b:118,name:"sand"},{r:228,g:203,b:255,name:"pale lilac"},{r:229,g:0,b:0,name:"red"},{r:230,g:218,b:166,name:"beige"},{r:230,g:242,b:162,name:"light khaki"},{r:231,g:142,b:165,name:"pig pink"},{r:236,g:45,b:1,name:"tomato red"},{r:237,g:13,b:217,name:"fuchsia"},{r:237,g:200,b:255,name:"light lilac"},{r:238,g:207,b:254,name:"pale lavender"},{r:238,g:220,b:91,name:"dull yellow"},{r:239,g:29,b:231,name:"pink purple"},{r:239,g:64,b:38,name:"tomato"},{r:239,g:180,b:53,name:"macaroni and cheese"},{r:239,g:192,b:254,name:"light lavendar"},{r:240,g:117,b:230,name:"purply pink"},{r:240,g:131,b:58,name:"dusty orange"},{r:240,g:148,b:77,name:"faded orange"},{r:241,g:12,b:69,name:"pinkish red"},{r:241,g:218,b:122,name:"sandy"},{r:241,g:243,b:63,name:"off yellow"},{r:242,g:158,b:142,name:"blush"},{r:242,g:171,b:21,name:"squash"},{r:243,g:97,b:150,name:"medium pink"},{r:244,g:50,b:12,name:"vermillion"},{r:244,g:54,b:5,name:"orangish red"},{r:244,g:208,b:84,name:"maize"},{r:245,g:4,b:201,name:"hot magenta"},{r:245,g:5,b:79,name:"pink red"},{r:245,g:191,b:3,name:"golden"},{r:246,g:104,b:142,name:"rosy pink"},{r:246,g:206,b:252,name:"very light purple"},{r:247,g:2,b:42,name:"cherry red"},{r:247,g:135,b:154,name:"rose pink"},{r:247,g:213,b:96,name:"light mustard"},{r:248,g:72,b:28,name:"reddish orange"},{r:249,g:115,b:6,name:"orange"},{r:249,g:188,b:8,name:"golden rod"},{r:250,g:42,b:85,name:"red pink"},{r:250,g:66,b:36,name:"orangey red"},{r:250,g:95,b:247,name:"light magenta"},{r:250,g:194,b:5,name:"goldenrod"},{r:250,g:238,b:102,name:"yellowish"},{r:250,g:254,b:75,name:"banana yellow"},{r:251,g:41,b:67,name:"strawberry"},{r:251,g:85,b:129,name:"warm pink"},{r:251,g:95,b:252,name:"violet pink"},{r:251,g:125,b:7,name:"pumpkin orange"},{r:251,g:221,b:126,name:"wheat"},{r:251,g:238,b:172,name:"light tan"},{r:252,g:38,b:71,name:"pinky red"},{r:252,g:90,b:80,name:"coral"},{r:252,g:130,b:74,name:"orangish"},{r:252,g:134,b:170,name:"pinky"},{r:252,g:176,b:1,name:"yellow orange"},{r:252,g:192,b:6,name:"marigold"},{r:252,g:225,b:102,name:"sand yellow"},{r:252,g:246,b:121,name:"straw"},{r:252,g:252,b:129,name:"yellowish tan"},{r:253,g:60,b:6,name:"red orange"},{r:253,g:65,b:30,name:"orange red"},{r:253,g:70,b:89,name:"watermelon"},{r:253,g:89,b:86,name:"grapefruit"},{r:253,g:121,b:143,name:"carnation"},{r:253,g:141,b:73,name:"orangeish"},{r:253,g:170,b:72,name:"light orange"},{r:253,g:176,b:192,name:"soft pink"},{r:253,g:177,b:71,name:"butterscotch"},{r:253,g:185,b:21,name:"orangey yellow"},{r:253,g:193,b:197,name:"pale rose"},{r:253,g:220,b:92,name:"light gold"},{r:253,g:222,b:108,name:"pale gold"},{r:253,g:238,b:115,name:"sandy yellow"},{r:253,g:253,b:254,name:"pale grey"},{r:253,g:255,b:56,name:"lemon yellow"},{r:253,g:255,b:82,name:"lemon"},{r:253,g:255,b:99,name:"canary"},{r:254,g:0,b:2,name:"fire engine red"},{r:254,g:1,b:154,name:"neon pink"},{r:254,g:1,b:177,name:"bright pink"},{r:254,g:2,b:162,name:"shocking pink"},{r:254,g:44,b:84,name:"reddish pink"},{r:254,g:47,b:74,name:"lightish red"},{r:254,g:66,b:15,name:"orangered"},{r:254,g:70,b:165,name:"barbie pink"},{r:254,g:75,b:3,name:"blood orange"},{r:254,g:123,b:124,name:"salmon pink"},{r:254,g:130,b:140,name:"blush pink"},{r:254,g:131,b:204,name:"bubblegum pink"},{r:254,g:134,b:164,name:"rosa"},{r:254,g:169,b:147,name:"light salmon"},{r:254,g:178,b:9,name:"saffron"},{r:254,g:179,b:8,name:"amber"},{r:254,g:198,b:21,name:"golden yellow"},{r:254,g:208,b:252,name:"pale mauve"},{r:254,g:223,b:8,name:"dandelion"},{r:254,g:246,b:158,name:"buff"},{r:254,g:252,b:175,name:"parchment"},{r:254,g:255,b:127,name:"faded yellow"},{r:254,g:255,b:202,name:"ecru"},{r:255,g:0,b:13,name:"bright red"},{r:255,g:2,b:141,name:"hot pink"},{r:255,g:4,b:144,name:"electric pink"},{r:255,g:7,b:58,name:"neon red"},{r:255,g:7,b:137,name:"strong pink"},{r:255,g:8,b:232,name:"bright magenta"},{r:255,g:71,b:76,name:"light red"},{r:255,g:91,b:0,name:"bright orange"},{r:255,g:97,b:99,name:"coral pink"},{r:255,g:99,b:233,name:"candy pink"},{r:255,g:105,b:175,name:"bubble gum pink"},{r:255,g:108,b:181,name:"bubblegum"},{r:255,g:111,b:82,name:"orange pink"},{r:255,g:114,b:76,name:"pinkish orange"},{r:255,g:120,b:85,name:"melon"},{r:255,g:121,b:108,name:"salmon"},{r:255,g:127,b:167,name:"carnation pink"},{r:255,g:129,b:192,name:"pink"},{r:255,g:148,b:8,name:"tangerine"},{r:255,g:150,b:79,name:"pastel orange"},{r:255,g:154,b:138,name:"peachy pink"},{r:255,g:166,b:43,name:"mango"},{r:255,g:167,b:86,name:"pale orange"},{r:255,g:171,b:15,name:"yellowish orange"},{r:255,g:173,b:1,name:"orange yellow"},{r:255,g:176,b:124,name:"peach"},{r:255,g:177,b:109,name:"apricot"},{r:255,g:177,b:154,name:"pale salmon"},{r:255,g:178,b:208,name:"powder pink"},{r:255,g:183,b:206,name:"baby pink"},{r:255,g:186,b:205,name:"pastel pink"},{r:255,g:197,b:18,name:"sunflower"},{r:255,g:197,b:203,name:"light rose"},{r:255,g:207,b:220,name:"pale pink"},{r:255,g:209,b:223,name:"light pink"},{r:255,g:216,b:177,name:"light peach"},{r:255,g:218,b:3,name:"sunflower yellow"},{r:255,g:223,b:34,name:"sun yellow"},{r:255,g:227,b:110,name:"yellow tan"},{r:255,g:229,b:173,name:"pale peach"},{r:255,g:243,b:154,name:"dark cream"},{r:255,g:244,b:242,name:"very light pink"},{r:255,g:249,b:23,name:"sunny yellow"},{r:255,g:249,b:208,name:"pale"},{r:255,g:250,b:134,name:"manilla"},{r:255,g:252,b:196,name:"egg shell"},{r:255,g:253,b:1,name:"bright yellow"},{r:255,g:253,b:55,name:"sunshine yellow"},{r:255,g:253,b:116,name:"butter yellow"},{r:255,g:253,b:120,name:"custard"},{r:255,g:254,b:64,name:"canary yellow"},{r:255,g:254,b:113,name:"pastel yellow"},{r:255,g:254,b:122,name:"light yellow"},{r:255,g:254,b:182,name:"light beige"},{r:255,g:255,b:20,name:"yellow"},{r:255,g:255,b:126,name:"banana"},{r:255,g:255,b:129,name:"butter"},{r:255,g:255,b:132,name:"pale yellow"},{r:255,g:255,b:182,name:"creme"},{r:255,g:255,b:194,name:"cream"},{r:255,g:255,b:203,name:"ivory"},{r:255,g:255,b:212,name:"eggshell"},{r:255,g:255,b:228,name:"off white"},{r:255,g:255,b:255,name:"white"}])},function(e,t,n){"use strict";var i,a,o=n(11),r=n(14),s=n(3),l=n(0),c=n(9),u=n(2),d=n(41),m=n(1),p=n.n(m),g=document.getElementById("currentUser"),h=document.getElementById("userMenu"),f=document.getElementById("emotarList"),b=document.getElementById("updatePlanButton"),y=document.getElementById("planChooserOverlay"),v=document.getElementById("notificationContainer"),j=document.getElementById("desktopNotificationsContainer"),S=document.getElementById("emailNotificationsContainer"),E=document.getElementById("logoutButton"),w=h.querySelector("section.usermenu"),L=h.querySelector("section.emotar"),C=document.getElementById("organizationProfiles"),D=document.getElementById("organizationProfileTemplate");function x(e){f.querySelector(".selected").classList.remove("selected"),(e.emotar?f.querySelector(".emotar[data-name='"+e.emotar+"']"):f.firstElementChild).classList.add("selected"),l.B(h.querySelector(".profileImage"),e),l.B(g.querySelector(".profileImage"),e),l.B(document.querySelector(".currentAvatar .profileImage"),e),l.B(document.querySelector("#emotarList .emotarImage"),e,!0);var t=document.querySelector('#organizations .organization[data-id="user"]');t&&l.B(t.querySelector(".organizationLogo"),e)}g.addEventListener("click",function(e){e.stopPropagation(),e.button===Zeplin.MOUSE_BUTTON.LEFT&&(window.Notification&&h.classList.contains("hidden")&&("granted"!==Notification.permission?(c.c.set("notificationStatus",!1),T(!1)):c.c.get("notificationStatus").then(function(e){T(e)})),v.classList.add("hidden"),window.ImportProgresses&&ImportProgresses.hideImportProgressesContainer(),h.classList.toggle("hidden"))}),h.addEventListener("click",function(e){e.stopPropagation()}),document.querySelector("#userInfo .avatarFrame").addEventListener("click",function(e){e.stopPropagation(),h.dataset.state="emotar"}),document.getElementById("emotarBackButton").addEventListener("click",function(e){h.dataset.state="usermenu"});var k;function q(e){p.a.render(p.a.h(d.a,{checked:e,onChange:_}),j,j.querySelector(".switch"))}function T(e){q(a=e)}function _(){a=!a,function(){if("denied"===Notification.permission)return T(!1),void s.a({message:"You need to enable notifications from browser settings."});if("default"===Notification.permission&&a)return void Notification.requestPermission(function(e){c.c.set("notificationStatus","granted"===e).then(function(e){T(e)})});"granted"===Notification.permission&&(c.c.set("notificationStatus",a),q(a))}()}function I(e){p.a.render(p.a.h(d.a,{checked:e,onChange:P}),S,S.querySelector(".switch"))}function O(e){I(i=e)}function P(){clearTimeout(k),I(i=!i),k=setTimeout(function(){fetch(Zeplin.urls.baseURL+"/users/emailNotifications",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({emailNotifications:i})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw u.a(e.status,t)});Zeplin.updateUser({emailNotifications:i})}).catch(function(e){O(!i),u.b(e)})},1e3)}function B(){Cookies.expire("userToken"),localStorage.removeItem("user"),Zeplin.requireLogin(!1)}function A(e){var t;t="emotar"===e?L.getBoundingClientRect():w.getBoundingClientRect(),h.style.height=t.height+"px",h.classList.toggle("scrolling","usermenu"===e&&h.offsetHeight<w.scrollHeight)}function N(){requestAnimationFrame(()=>{h.classList.toggle("scrolling",h.offsetHeight<w.scrollHeight)})}["sunglasses","thinking_face","heart_eyes","grin","sweat_smile","white_frowning_face","unamused","upside_down_face","relieved","nerd_face","weary","anguished","face_with_rolling_eyes","scream","smile","smirk","face_with_thermometer","face_with_head_bandage","panda_face","new_moon_with_face","tomato","full_moon_with_face","tennis","space_invader","monkey_face","tophat","lion_face","four_leaf_clover","shit","pig_nose","robot_face","mouse","mushroom","penguin","chestnut","koala","hamburger","jack_o_lantern","rabbit","lollipop","hamster","lemon","tv","gift","ghost","frog","eyes","dart","dark_sunglasses","chicken","cookie","grapes","bear","eggplant","alien","octopus","bread","dog","meat_on_bone","pizza"].forEach(function(e){var t=document.createElement("div"),n=document.createElement("img"),i=e.replace(/_\w/g,function(e){return e.charAt(1).toUpperCase()});i=l.H(i),t.classList.add("emotar"),t.dataset.name=e,n.src=Zeplin.urls.appURL+"/img/emotars/emotar"+i+".png",t.appendChild(n),f.appendChild(t)}),f.addEventListener("click",function(e){if(e.target.classList.contains("emotar")){var t=e.target.dataset.name;t="random"===t?null:t;var n=Object.assign({},Zeplin.user);n.emotar=t,x(n)}}),b.addEventListener("click",function(e){e.preventDefault(),h.classList.add("hidden"),y.classList.remove("hidden"),mixpanel.webapp.track("Opened pricing popup"),ga("legacyTracker.send","event","PAYMENT_EVENTS","opened-pricing-popup"),ga("send","pageview","/pricing-popup")}),E.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&(mixpanel.webapp.track("Logged out"),fetch(Zeplin.urls.baseURL+"/users/logout",{method:"POST",headers:Zeplin.headers}).then(B,B))});var R,U=new MutationObserver(function(e){e.forEach(function(e){if("class"===e.attributeName)if(e.target.classList.contains("hidden")){if(!e.oldValue||!e.oldValue.includes("hidden")){h.classList.remove("hasTransition"),h.dataset.state="usermenu",window.removeEventListener("resize",N);var t=f.querySelector(".selected").dataset.name;if(t="random"===t?null:t,Zeplin.user.emotar===t)return;o.e(t).then(function(){Zeplin.user.emotar=t,t?mixpanel.webapp.track("Updated emotar",{emoji:t}):mixpanel.webapp.track("Removed emotar")}).catch(function(e){x(Zeplin.user),u.b(e)})}}else e.oldValue&&e.oldValue.includes("hidden")&&(A(e.target.dataset.state),h.classList.add("hasTransition"),window.addEventListener("resize",N));else"data-state"===e.attributeName&&A(e.target.dataset.state)})});function F(e){return document.querySelector(".organizationProfile[data-id='"+e+"']")}function M(e){document.querySelector("li.userPlan").classList.toggle("hidden",!e)}function z(e){Object.assign(Zeplin.user,e),x(Zeplin.user)}function Z(e,t){e.parentElement.classList.add("loading"),t&&(e.addEventListener("load",function t(){e.removeEventListener("load",t),e.parentElement.classList.remove("loading")}),e.src=t)}function H(e){var t,n,i=document.importNode(D.content,!0);i.querySelector(".organizationProfile").dataset.id=e._id,i.querySelector("a").href=l.I("organization-dashboard",{url:{oid:e._id}}),i.querySelector(".organizationName").textContent=e.name,Z(i.querySelector(".organizationLogo"),e.logo),C.appendChild(i),t=e._id,n="private-organization@"+t,o.c.channel(n)||o.c.subscribe(n)}document.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&h.classList.add("hidden")}),document.addEventListener("keydown",function(e){e.keyCode===Zeplin.KEY_CODE.ESC&&h.classList.add("hidden")}),window.addEventListener("storage",function(e){if(e.storageArea===localStorage&&"user"===e.key){var t=JSON.parse(e.newValue);t&&"registered"===t.status&&(h.querySelector(".userStatus").textContent="Not verified yet.")}}),Cookies.get("userToken")&&(U.observe(h,{attributes:!0,attributeOldValue:!0,attributeFilter:["class","data-state"]}),x(Zeplin.user),g.title=Zeplin.user.username,h.querySelector(".username").textContent=Zeplin.user.username,h.querySelector(".email").textContent=Zeplin.user.email,O(void 0===Zeplin.user.emailNotifications||Zeplin.user.emailNotifications),"registered"===Zeplin.user.status&&(h.querySelector(".userStatus").textContent="Not verified yet.","dismissed"!==sessionStorage.getItem("verificationBannerStatus")&&r.b({content:"Your email is not verified yet. Please check your inbox.",group:"verification",closeCallback:function(){sessionStorage.setItem("verificationBannerStatus","dismissed")}})),fetch(Zeplin.urls.baseURL+"/organizations",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw u.a(e.status,t)})}).then(function(e){e.organizations.length&&(M(!1),e.organizations.forEach(H))}).catch(function(){}),window.Notification?c.c.get("notificationBannerStatus").then(function(e){"default"===Notification.permission&&e&&r.b({content:"Zeplin needs your permission to <a href='#'>enable desktop notifications</a>",contentType:"html",group:"notification",closeCallback:function(){c.c.set("notificationBannerStatus",!1)},bodyCallbacks:{a:function(e){e.preventDefault(),r.a("notification"),Notification.requestPermission(function(e){c.c.set("notificationStatus","granted"===e).then(function(e){T(e)})})}}})}):j.classList.add("hidden"),(R=o.g).bind("UpdateUsername",function(e){var t=e.body.username;g.title=t,h.querySelector(".username").textContent=t}),R.bind("UpdateEmail",function(e){h.querySelector(".email").textContent=e.body.email}),R.bind("UpdateUserEmotar",function(e){z(e.body)}),R.bind("UpdateUserAvatar",function(e){z(e.body)}),R.bind("VerifyUser",function(){h.querySelector(".userStatus").textContent=""}),R.bind("UpdateEmailNotifications",function(e){O(e.body.emailNotifications)}),R.bind("CreateOrganization",function(e){H(e.body),M(!1)}),R.bind("InviteOrganizationMembers",function(e){H(e.body),M(!1)}),o.c.bind("UpdateOrganizationLogo",function(e){var t=F(e.params.oid);t?Z(t.querySelector(".organizationLogo"),e.body.logo):o.c.unsubscribe("private-organization@"+e.params.oid)}),o.c.bind("UpdateOrganizationName",function(e){var t=F(e.params.oid);t?t.querySelector(".organizationName").textContent=e.body.name:o.c.unsubscribe("private-organization@"+e.params.oid)}),o.c.bind("RemoveMemberFromOrganization",function(e){if(e.params.mid===Zeplin.user._id){o.c.unsubscribe("private-organization@"+e.params.oid);var t=F(e.params.oid);t&&(t.previousElementSibling.remove(),t.remove(),M(!C.childElementCount))}}))},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(4),r=n(59);n.n(r);t.a=class extends a.a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){e.preventDefault(),e.stopPropagation(),this.props.onChange()}render(e){return a.a.h("div",{onClick:this.handleChange,class:Object(o.a)("switch",{switchOn:e.checked})},a.a.h("input",{type:"checkbox",checked:e.checked,class:"preferenceCheckbox"}),a.a.h("div",{class:"switchKnob"}))}}},function(e,t){},function(e,t,n){"use strict";var i=n(12),a=n(14),o=n(9),r=document.querySelector("main");function s(){o.c.set("windowsAppsNewReleasePointReminderOpen",!0).then(function(){a.b({group:"appUpdate",content:"New version of Zeplin is available. <a href='#'>Download</a> now to start using it!",contentType:"html",type:"info",bodyCallbacks:{a:function(e){e.preventDefault(),i.a.shell.openExternal("https://zpl.io/update-windows-64"),a.a("appUpdate"),i.a.ipcRenderer.send("remind-update-later"),Promise.all([o.c.set("windowsAppsNewReleasePointReminderOpen",!1),o.c.set("remindWindowsAppsNewReleasePoint",(new Date).getTime()+864e5)]).then(function(){setTimeout(s,86405e3)})}},bannerCloseText:"Remind me tomorrow",closeCallback:function(){i.a.ipcRenderer.send("remind-update-later"),Promise.all([o.c.set("windowsAppsNewReleasePointReminderOpen",!1),o.c.set("remindWindowsAppsNewReleasePoint",(new Date).getTime()+864e5)]).then(function(){setTimeout(s,86405e3)})},container:r,style:{zIndex:190}})})}!function(){if(i.a){var e=navigator.userAgent.match(/Zeplin( Windows v|\/)(\d+\.\d+\.\d+)/);if(e&&3===e.length&&-1!==["1.3.1","1.3.0","1.2.2","1.2.1","1.2.0","1.1.4","1.1.3","1.1.2","1.1.1","1.1.0","1.0.3","1.0.2","1.0.1","1.0.0","0.31.0","0.30.0","0.29.0","0.28.1","0.28.0","0.27.1","0.27.0","0.26.0","0.25.0"].indexOf(e[2]))return i.a&&i.a.features&&i.a.features.webviews&&i.a.ipcRenderer.on("active",function(e,t){t&&o.c.get("windowsAppsNewReleasePointReminderOpen").then(function(e){if(!e)return a.a("appUpdate"),o.c.set("windowsAppsNewReleasePointReminderOpen",!1),void o.c.get("remindWindowsAppsNewReleasePoint").then(function(e){var t=(new Date).getTime();e&&t<e&&setTimeout(s,e-t+5e3)});s()})}),i.a.ipcRenderer.on("close-all-banners",function(){a.a("appUpdate")}),void o.c.get("remindWindowsAppsNewReleasePoint").then(function(e){var t=(new Date).getTime();e&&t<e?setTimeout(s,e-t+5e3):s()});i.a.ipcRenderer.on("close-all-banners",function(){a.a("appUpdate"),a.a("pluginUpdate")}),i.a.ipcRenderer.on("app-update-downloaded",function(e,t){a.a("appUpdate"),a.b({group:"appUpdate",content:"New version of Zeplin, "+t+" is here. <a href='#'>Restart</a> now to start using it!",contentType:"html",type:"info",bodyCallbacks:{a:function(e){e.preventDefault(),a.a("appUpdate"),i.a.ipcRenderer.send("restart-app")}},bannerCloseText:"Remind me later",closeCallback:function(){i.a.ipcRenderer.send("remind-update-later",t)},container:r,style:{zIndex:190}})}),i.a.ipcRenderer.on("plugin-update-downloaded",function(e,t){var n;t.plugin&&t.panel?n="plugin ("+t.plugin.remote+") and panel ("+t.panel.remote+")":t.plugin?n="plugin ("+t.plugin.remote+")":t.panel&&(n="panel ("+t.panel.remote+")"),a.a("pluginUpdate"),a.b({group:"pluginUpdate",content:"New version of Photoshop "+n+" is here. <a href='#'>Install</a> now to start using it!",contentType:"html",type:"info",bodyCallbacks:{a:function(e){e.preventDefault(),a.a("pluginUpdate"),i.a.ipcRenderer.send("install-plugin-update",t)}},bannerCloseText:"Remind me later",closeCallback:function(){i.a.ipcRenderer.send("remind-plugin-install-later",t)},container:r,style:{zIndex:190}})})}}()},function(e,t,n){"use strict";n.d(t,"b",function(){return ce}),n.d(t,"e",function(){return ue}),n.d(t,"a",function(){return de}),n.d(t,"c",function(){return me}),n.d(t,"d",function(){return le});var i,a,o,r,s=n(62),l=(n.n(s),n(11)),c=n(3),u=n(0),d=n(2),m=[],p=new Set,g=new Set,h=[],f=new Set,b=new Set,y={},v={},j=new Set,S=document.getElementById("inviteUserPopup"),E=document.getElementById("inviteeHandle"),w=S.querySelector(".userList"),L=document.getElementById("inviteeTemplate"),C=document.getElementById("inviteNewUserTemplate"),D=document.getElementById("typedUserAlreadyAddedTemplate"),x=document.getElementById("inviteByTagTemplate"),k=document.querySelector(".organizationInviteeList"),q=document.querySelector(".tagList"),T=document.querySelector(".showRemainingTags"),_=document.querySelector(".memberList"),I=document.querySelector(".membersWithTagHeader"),O=document.querySelector(".membersWithTagList"),P=document.querySelector(".wildlingList"),B=!0,A=3;function N(e){if(e.classList.contains("newUser")){if(!E.checkValidity()&&!/^\w{3,30}$/.test(E.value))return u.K(E.parentElement),void(B=!0);S.querySelector(".inputArea img").classList.remove("hidden")}else e.classList.remove("inviteRetry"),e.classList.add("inviteSpinner");if(e.classList.contains("newUser"))ne(E.value,e);else if(e.classList.contains("user")){var t=h.find(function(t){return t._id===e.dataset.uid});ne(t.username||t.email,e)}else if(e.classList.contains("member")){var n=y.members.find(function(t){return t.user._id===e.dataset.mid});ne(n.user.username||n.user.email,e)}else if(e.classList.contains("wildling")){var i=y.wildlings.find(function(t){return t.user._id===e.dataset.wid});ne(i.user.username||i.user.email,e)}else e.classList.contains("inviteByTag")&&(o=e.dataset.tag,r=e,fetch(Zeplin.urls.baseURL+"/organizations/"+y._id+"/projects/"+a+"/users",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({tag:o})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw d.a(e.status,t)})}).then(function(e){ie(e,r)}).catch(function(){r.classList.remove("inviteSpinner"),r.classList.add("inviteRetry"),c.a({done:{cb:function(){u.o(E),B=!0}}})}));var o,r}function R(){S.classList.contains("organizationProject")?W():Y()}function U(e,t,n){var i=(n=n||{}).importance||1;return n.skipExactMatch||!1||e!==t?e.startsWith(t)?8*i:e.includes(t)?4*i:0:16}function F(e,t){e.parentElement.classList.toggle(t,!e.childElementCount)||Array.from(e.querySelectorAll(".invitee")).forEach(function(t){t.classList.remove("hidden","selected"),e.appendChild(t)})}function M(e){return q.querySelector("[data-tag='"+e+"']")}function z(e){return _.querySelector("[data-mid='"+e.user._id+"']")}function Z(e){return P.querySelector("[data-wid='"+e.user._id+"']")}function H(e,t,n,i){t.forEach(function(t){var i=n(t);i.classList.remove("hidden","selected"),e.appendChild(i)});for(var a=0;a<e.childElementCount-t.length;a++){var o=e.children[a];o.classList.add("hidden"),o.classList.remove("selected")}e.parentElement.classList.toggle(i,0===t.length)}function V(e,t,n){var i={},a=e.filter(function(e){if(b.has(e.user._id)){var a=n(e);if(!a)return!1;if(!a.classList.contains("inviteDone"))return!1}var o=0;return e.user.username&&(o+=U(e.user.username,t)),!!(o+=U(e.user.email,t,{skipExactMatch:!0,importance:.25}))&&(i[e.user._id]=o,!0)});return a.sort(function(e,t){return i[t.user._id]-i[e.user._id]}),a}function W(){X(".wildlingList .newUser"),X(".organizationInviteeList .userListTypedUserAlreadyAdded");var e,t,n=E.value.toLowerCase();if(S.classList.remove("noNewInvitees","noInvitees"),k.classList.remove("noTags","noMembers","hasMembersWithTag","noWildlings","writeAnEmailToInvite","showAddsToTheProjectOnlyInfo"),O.innerHTML="",E.placeholder="Invite with email/username",n){e=!!(t=f.has(n))||j.has(n);var i=Object.keys(v);i.sort();var a={},r=i.filter(function(e){var t=U(e.toLowerCase(),n);return!!t&&(a[e]=t,!0)}).sort(function(e,t){return a[t]-a[e]});H(q,r,M,"noTags");var s=V(y.members,n,z);H(_,s,z,"noMembers");var l=M(r[0]);k.classList.toggle("hasMembersWithTag",1===r.length&&(v[r[0]]>0||l&&l.classList.contains("inviteDone")))&&(I.textContent=r[0],O.innerHTML="",y.members.forEach(function(e){var t=z(e);if((!b.has(e.user._id)||t&&t.classList.contains("inviteDone"))&&e.tags.includes(r[0])){var n=J(e);n.querySelector(".invitee").classList.toggle("inviteDone",t&&t.classList.contains("inviteDone")),O.appendChild(n)}}));var c=V(y.wildlings,n,Z);if(H(P,c,Z,"noWildlings"),e||n.includes("@")){if(!e){k.classList.remove("noWildlings"),k.classList.add("showAddsToTheProjectOnlyInfo");var u=document.importNode(C.content,!0);u.querySelector(".invitee").classList.add("wildling"),u.querySelector(".inviteNewUserButtonText span").textContent=E.value,P.appendChild(u)}}else k.classList.add("writeAnEmailToInvite");if(t&&!k.querySelector(".invitee.inviteDone")){var d=document.importNode(D.content,!0);d.querySelector(".userListTypedUserAlreadyAdded").classList.add(n===Zeplin.user.username||n===Zeplin.user.email?"selfUser":"someUser"),d.querySelector("span").textContent=E.value,k.appendChild(d)}}else{if(F(q,"noTags"),T.textContent){var m=Array.from(q.querySelectorAll(".inviteByTag")).map(function(e){return e.dataset.tag});m.sort(),m.forEach(function(e){var t=M(e);q.appendChild(t)});for(var p=q.firstElementChild,g=A;g<q.childElementCount;g++){var h=q.children[g];h.classList.add("hidden"),q.insertBefore(h,p)}q.childElementCount-A>0?(T.textContent=q.childElementCount-A,T.classList.toggle("multiple",q.childElementCount-A>1)):T.textContent=""}F(_,"noMembers"),F(P,"noWildlings")}var w=k.querySelectorAll(".invitee:not(.hidden)");if(w.length)w[0].classList.add("selected");else if(!t&&!k.classList.contains("writeAnEmailToInvite")){var L=y.members.filter(function(e){return!b.has(e.user._id)}),x=y.wildlings.filter(function(e){return!b.has(e.user._id)});L.length+x.length===0&&o.length>1?S.classList.add("noNewInvitees"):1===o.length&&(S.classList.add("noInvitees"),E.placeholder="Invite with email")}}function Y(){X(".userList .user.newUser"),X(".userList .userListTypedUserAlreadyAdded"),w.classList.remove("writeAnEmailToInvite"),E.placeholder="Invite with email/username";var e,t,n=E.value.toLowerCase(),i=document.importNode(D.content,!0);if(n){e=!!(t=f.has(n))||g.has(n);var a={},o=h.filter(function(e){var t=0;return e.username&&(t+=U(e.username,n)),(t+=U(e.email,n,{skipExactMatch:!0,importance:.25}))>0&&(a[e._id]=t,!0)}).sort(function(e,t){return a[t._id]-a[e._id]});o.forEach(function(e){var t=K(e._id);t.classList.remove("hidden","selected"),w.appendChild(t)});for(var r=0;r<h.length-o.length;r++){var s=w.children[r].classList;s.add("hidden"),s.remove("selected")}}else h.forEach(function(e){var t=K(e._id);t.classList.remove("hidden","selected"),w.appendChild(t)});if(n){if(e||n.includes("@")){if(!e){var l=document.importNode(C.content,!0);l.querySelector(".invitee").classList.add("user"),l.querySelector(".inviteNewUserButtonText span").textContent=E.value,w.appendChild(l)}}else w.classList.add("writeAnEmailToInvite");t&&(i.querySelector(".userListTypedUserAlreadyAdded").classList.add(n===Zeplin.user.username||n===Zeplin.user.email?"selfUser":"someUser"),i.querySelector("span").textContent=E.value,w.appendChild(i))}S.classList.remove("noInvitees"),S.classList.remove("noNewInvitees");var c=w.querySelectorAll(".user:not(.hidden)");c.length?c[0].classList.add("selected"):t||w.classList.contains("writeAnEmailToInvite")||(m.length?S.classList.add("noNewInvitees"):(S.classList.add("noInvitees"),E.placeholder="Invite with email"))}function K(e){return w.querySelector(".invitee[data-uid='"+e+"']")}function X(e){var t=document.querySelector(e);t&&t.remove()}function $(e,t,n){var i=document.importNode(x.content,!0),a=i.querySelector(".inviteByTag"),o=i.querySelector(".tagName"),r=i.querySelector(".memberCount");return a.classList.toggle("hidden",!!n),a.dataset.tag=e,o.textContent=e,o.title=e,r.textContent=t+(t>1?" members":" member"),i}function J(e){var t=document.importNode(L.content,!0),n=t.querySelector(".invitee"),i=t.querySelector(".userImage"),a=t.querySelector(".username"),o=t.querySelector(".email"),r=t.querySelector(".organizationTags");n.classList.add("member"),n.dataset.mid=e.user._id,u.B(i,e.user),e.user.username?(a.textContent=e.user.username,a.title=e.user.username,o.textContent=e.user.email,o.title=e.user.email):(a.textContent=e.user.email,a.title=e.user.email,o.textContent="Pending Invitation");var s=e.tags.join(", ");return r.textContent=s,r.title=s,t}function G(e){var t=document.importNode(L.content,!0),n=t.querySelector(".invitee"),i=t.querySelector(".userImage"),a=t.querySelector(".username"),o=t.querySelector(".email"),r=t.querySelector(".inviteExtraInfo");return n.classList.add("wildling"),n.dataset.wid=e.user._id,u.B(i,e.user),a.textContent=e.user.username,a.title=e.user.username,o.textContent=e.user.email,o.title=e.user.email,e.user.username||(r.textContent="Pending Invitation"),t}function Q(e,t){var n=document.importNode(L.content,!0),i=n.querySelector(".invitee"),a=n.querySelector(".userImage"),o=n.querySelector(".username"),r=n.querySelector(".inviteExtraInfo"),s=e.username||e.email;(i.classList.add("user"),u.B(a,e),i.dataset.uid=e._id,o.textContent=s,o.title=s,e.username)?n.querySelector(".email").textContent=e.email:r.textContent="Pending invitation";return t&&i.classList.add("hidden"),n}function ee(e){p.has(e._id)||(m.push(e),p.add(e._id),e.username&&g.add(e.username),g.add(e.email))}function te(e){b.add(e._id),e.username&&f.add(e.username),f.add(e.email)}function ne(e,t){fetch(Zeplin.urls.baseURL+"/projects/"+a+"/users",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({handle:e})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw d.a(e.status,t)})}).then(function(e){ie(e,t)}).catch(function(e){S.querySelector(".inputArea img").classList.add("hidden"),me()||t.classList.contains("newUser")?(B=!1,d.b(e,{dialogCallback:function(){u.o(E),B=!0}})):(t.classList.remove("inviteSpinner"),t.classList.add("inviteRetry"),t.querySelector(".inviteExtraInfo").textContent=e.title)}).catch(function(){c.a({done:{cb:function(){u.o(E),B=!0}}})})}function ie(e,t){u.o(E),S.querySelector(".inputArea img").classList.add("hidden"),e.users?e.users.forEach(function(e){te(e.user)}):(te(e.user),t.classList.contains("user")&&ee(e.user));var n=e.users?e.users:[e];(mixpanel.master.track("Invited user"),i.dispatchEvent(new CustomEvent("usersInvited",{detail:{users:n}})),S.classList.contains("organizationProject"))&&((e.users?e.users:[e]).forEach(function(e){var t=y.members.find(function(t){return t.user._id===e.user._id});t&&t.tags.forEach(function(e){v[e]-=1})}),Object.keys(v).forEach(function(e){var t=v[e],n=M(e);0===t?n.classList.add("inviteDone"):n.querySelector(".memberCount").textContent=t+(t>1?" members":" member")}));if(t.classList.remove("inviteSpinner"),t.classList.add("inviteDone"),e.users&&e.users.forEach(function(e){Array.from(k.querySelectorAll(".member[data-mid='"+e.user._id+"']")).forEach(function(e){e.classList.add("inviteDone")})}),t.classList.contains("newUser"))if(t.remove(),t.classList.contains("user")){h.push(e.user);var a=Q(e.user);a.querySelector(".user").classList.add("inviteDone"),w.querySelector(".user.selected")||a.querySelector(".user").classList.add("selected"),oe(a)}else{y.wildlings.push({user:e.user}),j.add(e.user.email);var o=G(e);o.querySelector(".wildling").classList.add("inviteDone"),P.querySelector(".wildling.selected")||o.querySelector(".wildling").classList.add("selected"),P.appendChild(o)}}function ae(e){Array.from(e.querySelectorAll(".invitee.inviteDone:not(.newUser)")).forEach(function(e){e.remove()})}function oe(e){w.lastElementChild&&w.lastElementChild.classList.contains("user")?w.appendChild(e):w.insertBefore(e,w.lastElementChild)}function re(e){var t="private-project@"+e,n=l.c.channel(t)||l.c.subscribe(t);n.bind("InviteUser",function(e){!function(e,t){if(ee(t),!i)return;if(a===e)te(t),u.b(h,function(e){return e._id===t._id});else{var n=h.some(function(e){return e._id===t._id});n||h.push(t)}var o=E.value,r=K(t._id);if(a===e&&r){if(r.classList.contains("selected")&&w.querySelector(".user:not(.hidden)")&&(r.nextElementSibling&&r.nextElementSibling.classList.contains("user")?r.nextElementSibling.classList.add("selected"):r.previousElementSibling&&r.previousElementSibling.classList.contains("user")&&!r.previousElementSibling.classList.contains("hidden")&&r.previousElementSibling.classList.add("selected")),r.remove(),r.classList.contains("newUser")||!w.querySelector(".user:not(.hidden)")){var s=document.importNode(D.content,!0);s.querySelector(".userListTypedUserAlreadyAdded").classList.add(E.value===Zeplin.user.username||E.value===Zeplin.user.email?"selfUser":"someUser"),s.querySelector("span").textContent=E.value,w.appendChild(s)}}else a!==e&&(r?r.classList.contains("newUser")&&(w.appendChild(Q(t)),r.classList.contains("selected")&&(r.nextElementSibling&&r.nextElementSibling.classList.contains("user")?r.nextElementSibling.classList.add("selected"):r.previousElementSibling&&r.previousElementSibling.classList.contains("user")&&!r.previousElementSibling.classList.contains("hidden")&&r.previousElementSibling.classList.add("selected")),r.remove()):oe(Q(t,o&&!(t.username&&t.username.includes(o))&&!t.email.includes(o))))}(e.params.pid,e.body)}),n.bind("CreateUser",function(e){!function(e,t){var n=m.find(function(e){return e._id===t._id});if(!n)return;if(Object.assign(n,t),!i)return;var a=K(t._id);a&&(a.querySelector(".username").textContent=t.username,a.querySelector(".inviteExtraInfo").textContent="")}(e.params.pid,e.body)}),n.bind("RemoveUserFromProject",function(e){le(e.params.pid,e.params.mid)}),n.bind("DeleteUser",function(e){Zeplin.user._id!==e.params.uid&&function(e){var t=u.b(m,function(t){return t._id===e});if(!t)return;if(function(e){b.delete(e._id),p.delete(e._id),e.username&&(f.delete(e.username),g.delete(e.username)),f.delete(e.email),g.delete(e.email),u.b(h,function(t){return t._id===e._id})}(t),!i)return;var n=K(t._id);n&&(w.removeChild(n),n.classList.contains("selected")&&w.querySelector(".user:not(.hidden)")&&w.querySelector(".user:not(.hidden)").classList.add("selected"))}(e.params.uid)})}function se(e,t,n,i){var a=t(n),o=!(!E.value||n.user.username&&n.user.username.includes(E.value)||n.user.email.includes(E.value));a.querySelector(".invitee").classList.toggle("hidden",o),o?e.append(a):(e.insertBefore(a,e.querySelector(".invitee:not(.hidden)")),e.parentElement.classList.remove(i))}function le(e,t){if(a===e)if(S.classList.contains("organizationProject")){var n,o,r=y.members.find(function(e){return e.user._id===t});r?(n=r,o=z(r),r.tags.forEach(function(e){v[e]?v[e]+=1:v[e]=1;var t=M(e);if(t)t.querySelector(".memberCount").textContent=v[e]+(v[e]>1?" members":" member"),t.classList.remove("inviteDone");else{var n=$(e,v[e]);n.querySelector(".invitee").classList.toggle("hidden",!!E.value&&!e.includes(E.value))?q.appendChild(n):q.insertBefore($(e,v[e]),q.querySelector(".invitee:not(.hidden)"))}})):o=Z(n=y.wildlings.find(function(e){return e.user._id===t})),b.delete(t),f.delete(n.user.username),f.delete(n.user.email);var s=k.querySelector(".userListTypedUserAlreadyAdded");if(E.value===n.user.username&&s&&s.remove(),!i)return;o?o.classList.remove("inviteDone"):r?se(_,J,r,"noMembers"):se(P,G,n,"noWildlings")}else{var l=m.find(function(e){return e._id===t});if(function(e){b.delete(e._id),e.username&&(f.delete(e.username),g.add(e.username)),f.delete(e.email),g.add(e.email),h.some(function(t){return t._id===e._id})||h.push(e)}(l),!i)return;var c=E.value,u=K(l._id);u?u.classList.remove("inviteDone"):oe(Q(l,c&&!(l.username&&l.username.includes(c))&&!l.email.includes(c)))}}function ce(e,t){l.g.bind("InviteUser",function(e){e.params.pid,e.body.users.forEach(function(e){ee(e.user),i&&!b.has(e.user._id)&&(h.some(function(t){return t._id===e.user._id})||(h.push(e.user),oe(Q(e.user))))}),me()||R()}),e.forEach(re),t&&function(e){fetch(Zeplin.urls.baseURL+"/organizations/"+e+"/members",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t})}).then(function(e){(y=e).members.forEach(function(e){e.tags.forEach(function(e){v[e]?v[e]+=1:v[e]=1})})})}(t)}function ue(e,t,n,s){S.classList.toggle("organizationProject",!!s),s?function(e,t,n){if(t!==a){w.innerHTML="",q.innerHTML="",T.textContent="",_.innerHTML="",P.innerHTML="",f=new Set,b=new Set,j=new Set,i=e,a=t,(o=n).forEach(function(e){te(e.user)}),y.members.forEach(function(e){b.has(e.user._id)?e.tags.forEach(function(e){v[e]-=1,0===v[e]&&delete v[e]}):(j.add(e.user.username).add(e.user.email),_.appendChild(J(e)))}),k.classList.toggle("noMembers",!_.childElementCount);var s=Object.keys(v);s.sort(),s.forEach(function(e){q.appendChild($(e,v[e],!1))});var l=s.length-A;l>0&&(T.textContent=l,T.classList.toggle("multiple",l>1)),k.classList.toggle("noTags",!s.length),y.wildlings.forEach(function(e){b.has(e.user._id)||(j.add(e.user.username).add(e.user.email),P.appendChild(G(e)))}),k.classList.toggle("noWildlings",!P.childElementCount)}else Object.keys(v).forEach(function(e){0===v[e]&&delete v[e]}),r&&new Date-r>1e4&&(T.textContent=Object.keys(v).length-A,T.classList.toggle("multiple",Object.keys(v).length-A>1)),ae(q),ae(_),ae(P);r=0,e.appendChild(S),e.getBoundingClientRect().right+80>window.innerWidth&&S.classList.add("left");W(),S.classList.remove("hidden"),k.scrollTop=0,E.focus()}(e,t,n):function(e,t,n){t!==a?(w.innerHTML="",q.innerHTML="",T.textContent="",_.innerHTML="",P.innerHTML="",h=[],f=new Set,b=new Set,i=e,a=t,(o=n).forEach(function(e){te(e.user)}),m.forEach(function(e){b.has(e._id)||(h.push(e),e.username&&g.add(e.username),g.add(e.email))}),h.forEach(function(e){w.appendChild(Q(e))})):(ae(w),b.forEach(function(e){u.b(h,function(t){return t._id===e})}));e.appendChild(S),e.getBoundingClientRect().right+80>window.innerWidth&&S.classList.add("left");Y(),S.classList.remove("hidden"),w.scrollTop=0,E.focus()}(e,t,n)}function de(){S.classList.add("hidden"),S.classList.remove("left"),S.querySelector(".inputArea img").classList.add("hidden"),E.value="",E.dispatchEvent(new Event("input")),B=!0,r||(r=new Date)}function me(){return S.classList.contains("hidden")}fetch(Zeplin.urls.baseURL+"/users/acquaintances",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw d.a(e.status,t)})}).then(function(e){m=e.acquaintances,p=new Set(m.map(function(e){return e._id}))}).catch(function(){}),function(){function e(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var t=e.target.closest(".invitee");!t||t.classList.contains("inviteDone")||t.classList.contains("inviteSpinner")||!e.target.classList.contains("action")&&!e.target.closest(".inviteNewUserButton")||(e.stopPropagation(),N(t))}}var t,n;E.addEventListener("input",function(){E.parentElement.classList.toggle("typed",!!E.value),B=!0,R(),i&&i.dispatchEvent(new CustomEvent("listRefreshed"))}),S.addEventListener("click",function(e){e.stopPropagation()}),S.addEventListener("contextmenu",function(e){e.stopPropagation()}),w.addEventListener("click",e),k.addEventListener("click",e),S.addEventListener("mouseenter",function(e){t=e.clientX,n=e.clientY}),S.addEventListener("mousemove",function(e){if(e.stopPropagation(),t!==e.clientX||n!==e.clientY){var i=S.querySelector(".selected");i&&i.classList.remove("selected"),e.target.closest(".invitee")&&(e.target.closest(".invitee").classList.add("selected"),t=e.clientX,n=e.clientY)}}),document.addEventListener("keydown",function(e){switch(e.keyCode){case Zeplin.KEY_CODE.ESC:de();break;case Zeplin.KEY_CODE.ENTER:if(me()||!B)break;var t=S.querySelector(".selected");if(!t||t.classList.contains("inviteDone")||t.classList.contains("inviteSpinner"))break;B=!1,N(t);break;case Zeplin.KEY_CODE.ArrowUp:case Zeplin.KEY_CODE.ArrowDown:if(me())break;B=!0,e.preventDefault(),function(e){S.classList.contains("organizationProject")?function(e){var t=k.querySelector(".invitee.selected");if(t){var n,i=Array.from(k.querySelectorAll(".invitee:not(.hidden)")),a=i.findIndex(function(e){return e.classList.contains("selected")});if((n=e.keyCode===Zeplin.KEY_CODE.ArrowUp?a-1:a+1)>-1&&n<i.length){var o=i[n];t.classList.remove("selected"),o.classList.add("selected"),u.z(o,k)}}else{var r=k.querySelector(".invitee:not(.hidden)");r&&(r.classList.add("selected"),u.z(r,k))}}(e):function(e){var t=w.querySelector(".selected");if(t){var n=e.keyCode===Zeplin.KEY_CODE.ArrowUp?t.previousElementSibling:t.nextElementSibling;n&&n.classList.contains("user")&&!n.classList.contains("hidden")&&(t.classList.remove("selected"),n.classList.add("selected"),u.z(n))}else{var i=w.querySelector(".user:not(.hidden)");i&&(i.classList.add("selected"),u.z(i))}}(e)}(e)}}),T.addEventListener("click",function(e){e.stopPropagation(),T.textContent="",Array.from(q.querySelectorAll(".inviteByTag.hidden")).forEach(function(e){e.classList.remove("hidden"),q.appendChild(e)})})}()},function(e,t){function n(e){var t=parseInt(e.dataset.maxFontSize,10),n=parseInt(e.dataset.minFontSize,10),i=t,a=document.createElement("canvas").getContext("2d");e.addEventListener("input",function(){if(e.value){if(a.font=i+"px Roboto",a.measureText(e.value).width>e.clientWidth&&i>n)for(;a.measureText(e.value).width>e.clientWidth&&i>n;)i-=.2,a.font=i+"px Roboto";else if(a.measureText(e.value).width<=e.clientWidth&&i<t)for(;a.measureText(e.value).width<=e.clientWidth&&i<t;)i+=.2,a.font=i+"px Roboto"}else i=t;e.style.fontSize=i+"px"})}window.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("input[data-elastic-font-size]");Array.from(e).forEach(n)})},function(e,t,n){"use strict";var i=window.performance,a="JS_Timing",o="version:7.4.2;page:"+location.pathname.match(/\/(\w+)(.html)?/)[1],r=1;function s(e,t){(t=t||{}).end?i.measure(e,t.start,t.end):t.start?i.measure(e,t.start):i.measure(e);var n=i.getEntriesByName(e);if(n.length){var r,s,l,c=n[n.length-1],u=t.labels,d=t.minTime||0;u&&(u=Object.keys(u).map(function(e){return e+":"+u[e]},[]).join(";")),c.duration>d&&(r=e,s=Math.round(c.duration),l=(l=u)?l+";"+o:o,ga("legacyTracker.send","timing",a,r,s,l)),i.clearMeasures(e)}}var l=!1;function c(){l||(l=!0,s("page.timeToFirstInteraction"))}function u(){s("page.domContentLoaded",{start:"navigationStart",end:"domContentLoadedEventStart"})}var d,m,p,g,h=!1;function f(){}window.addEventListener("load",function(){h=!0}),i&&i.mark&&i.measure&&i.timing&&i.getEntriesByName?(d=function(){var e="_mark_"+r;return i.mark(e),r++,e},m=s,p=function(){h?u():window.addEventListener("load",u)},g=function(){document.addEventListener("click",function e(t){c(),document.removeEventListener("click",e,!0)},!0),document.addEventListener("scroll",function e(t){c(),document.removeEventListener("scroll",e,!0)},!0)}):(d=f,m=f,p=f,g=f),t.a={mark:d,measure:m,measurePageDefaults:p,measureFirstInteraction:g}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var i,a=n(3),o=document.getElementById("deleteProjectDialog"),r=document.getElementById("projectNameInput"),s=document.getElementById("deleteProjectDialogCancelButton"),l=document.getElementById("deleteProjectDialogDoneButton");function c(e){i=e}function u(e,t){o.dataset.pid=e,o.dataset.projectName=t,o.showModal()}a.b.registerDialog(o),r.addEventListener("input",function(){o.querySelector("button.done").disabled=r.value!==o.dataset.projectName,r.setCustomValidity(r.value===o.dataset.projectName?"":"Project name doesn't match provided value")}),s.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&o.close()}),o.addEventListener("close",function(){r.value="",r.setCustomValidity(""),r.parentElement.classList.remove("typed"),o.querySelector("button.done").disabled=!0}),r.addEventListener("keydown",function(e){switch(e.keyCode){case Zeplin.KEY_CODE.ENTER:e.preventDefault(),e.stopPropagation(),r.value===o.dataset.projectName&&(o.close(),i(o.dataset.pid))}}),l.addEventListener("click",function(){r.value===o.dataset.projectName&&(o.close(),i(o.dataset.pid))})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(150),a=n(151),o=n(152);function r(e){return e.serialize()}n.d(t,"b",function(){return o.a});class s{constructor(e){this._id=e._id,this._name=e.name,this._description=e.description,this._manifestURL=e.manifestURL,this._default=e.default,this._users=e.users,this._manifest=e.manifest,this._local=e.local,this._options={},this._project=null,this._loaded=!1}static loadManifest(e){return fetch(e).then(t=>{if(!t.ok)throw Error("Cannot load extension manifest: "+e);return t.json()})}static createLocal(e){const t=e.endsWith("manifest.json")?e:`${e.replace(/\/$/,"")}/manifest.json`;return s.loadManifest(t).then(e=>new s({_id:e.name,name:e.name,description:e.description,manifestURL:t,manifest:e,default:!1,users:[{user:{displayName:Zeplin.user.displayName||Zeplin.user.username},role:"owner"}],local:!0}))}workerLogger(e,t={}){this._local?(console.error(`Zeplin extension error (${this._name}):`,e),console.error("Data:",t)):Raven.captureException(e,{extra:Object.assign({extension:{name:this._name,id:this._id}},t)})}initWorker(e){const t=new i.a(new Worker(Zeplin.config.extensionWorkerPath),{errorLogger:this.workerLogger.bind(this),methods:["load","layer","comment","styleguideColors","styleguideTextStyles","exportStyleguideColors","exportStyleguideTextStyles"]});this._supervisor=t,this._supervisor.load(e)}initOptions(e,t,n){const i=n.reduce(function(e,t){return e[t.id]=t.default,e},{}),o=a.a.create(e,t,i);return o.getAll().then(e=>{this._storage=o,this._options=e})}load(e){const t=this._manifestURL;return this._project=e,(this._local?Promise.resolve(this._manifest):s.loadManifest(t)).then(n=>(this._manifest=n,this.initOptions(this._id,e.id,this.optionsSchema).then(()=>this.initWorker(new URL(n.moduleURL,t).toString())).then(()=>(this._loaded=!0,this)))).catch(()=>this)}reload(){if(this._loaded)return this._supervisor.load(new URL(this._manifest.moduleURL,this._manifestURL).toString())}get manifest(){return this._manifest}get id(){return this._id}get name(){return this._name}get description(){return this._description}get optionsSchema(){return this._manifest&&this._manifest.options||[]}get options(){return this._options}get default(){return this._default}get loaded(){return this._loaded}get author(){return{displayName:this._users.find(function(e){return"owner"===e.role}).user.displayName,url:this._manifest&&this._manifest.author&&this._manifest.author.url}}get repository(){return this._manifest&&this._manifest.repository}get local(){return this._local}terminate(){this._supervisor&&this._supervisor.terminate(),this._local&&a.a.clear(this._id)}setOption(e,t){this._options[e]=t,this._storage.set(e,t)}getOption(e){return this._options[e]}getContext(){return{model:"Context",data:{project:this._project.toObject(),options:this._options}}}styleguideColors(e){return this._supervisor.styleguideColors(this.getContext(),e.map(r))}styleguideTextStyles(e){return this._supervisor.styleguideTextStyles(this.getContext(),e.map(r))}layer(e){return this._supervisor.layer(this.getContext(),e.serialize())}comment(e){return this._supervisor.comment(this.getContext(),e)}exportStyleguideColors(e){return this._supervisor.exportStyleguideColors(this.getContext(),e.map(r))}exportStyleguideTextStyles(e){return this._supervisor.exportStyleguideTextStyles(this.getContext(),e.map(r))}}},function(e,t,n){"use strict";var i=n(1),a=(n.n(i),n(10)),o=n(11),r=n(0),s=n(24),l=n(67),c=n(34),u=n(4),d=n(69);n.n(d);const m=180;function p(e){const t=Math.floor(e.latestVersion.snapshot.height*m/e.latestVersion.snapshot.width);return preact.h(l.a,{sid:e._id,height:t,src:e.latestVersion.snapshot.url})}function g(e,t){if(!e||!e.length)return preact.h("div",{class:"projectUsersEmpty"},"No members in this project, be the first!");const n=function(e){return e.sort(r.D.role),e=e.map(({user:e})=>Object.assign({},e,{avatar:Object(r.n)(e).src,title:"invited"!==e.status?e.username:`Pending… (${e.email})`}))}(e),i=n.slice(0,t).map(e=>preact.h(c.a,{src:e.avatar,title:e.title,class:"userImageFrame",width:"36",height:"36"}));if(n.length===t+1)i.push(preact.h(c.a,{src:n[t].avatar,title:n[t].title,class:"userImageFrame",width:"36",height:"36"}));else if(n.length>t+1){const a=n.slice(t).map(e=>e.title).join("\n"),o=preact.h("div",{class:"remainingUsers",title:a},"+",e.length-t);i.push(o)}return preact.h("div",{class:"projectUsers"},i)}t.a=class extends i.Component{constructor(e){super(),this.centerScreensUsersHeader=this.centerScreensUsersHeader.bind(this),this.handleJoinClick=this.handleJoinClick.bind(this),this.state={usersLimit:5}}componentDidMount(){this.centerScreensUsersHeader(),window.addEventListener("resize",this.centerScreensUsersHeader)}componentWillUnmount(){window.removeEventListener("resize",this.centerScreensUsersHeader)}componentDidUpdate(e,t){!e.projectData&&this.props.projectData&&this.centerScreensUsersHeader()}centerScreensUsersHeader(){const e=Math.floor(this.base.getBoundingClientRect().width),t=m+24,{requiredMinimumPadding:n,defaultPadding:i,projectData:a}=this.props,o=Math.floor((e-n)/t),r=e-o*t;let s=i;a.screens.length&&(s=r/2),this.base.style=`padding-left: ${s}px; padding-right: ${s}px;`;const l=o*t-24-36,c=Math.floor(l/42);c!==this.state.usersLimit&&this.setState({usersLimit:c})}handleJoinClick(){this.props.onJoinClick(this.props.projectData._id)}render(e,t){const{projectData:n,loadingJoin:i=!1,hideJoinButton:r,headerSticky:l}=e,{usersLimit:c}=t,d=Object(u.a)("projectPreviewHeader",{sticky:l});return preact.h("div",{class:"projectPreview",key:n._id},preact.h("div",{class:d},preact.h("div",null,preact.h("h1",null,n.name),preact.h("h5",null,preact.h("span",{class:"projectPreviewType"},o.b[n.type]),"unknown"!==n.density&&preact.h("span",{class:"projectPreviewDensity"},n.density))),!r&&preact.h("button",{type:"button",class:"joinProject",onclick:this.handleJoinClick},i?preact.h("img",{src:a.a("img/icSpinnerWhite.svg"),class:"spinning"}):preact.h("span",null,"Join"),preact.h(s.a,{class:"peach"}))),g(n.users,c),(m=n.screens)&&m.length?preact.h("div",{class:"projectPreviewScreens"},m.map(p)):preact.h("div",{class:"projectPreviewScreensEmpty"},preact.h("h1",null,"No designs in this project yet!"),preact.h("h3",null,"Join and upload the first!")));var m}}},function(e,t,n){"use strict";var i=n(68);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=(n.n(i),n(4)),o=n(22),r=n(0);t.a=class extends i.Component{constructor(){super(),this.loadImg=this.loadImg.bind(this),this.handleLoad=this.handleLoad.bind(this),this.state={loading:!0}}loadImg(){r.x(this.nodeRefs.imgElement,{url:this.props.src},"url")}handleLoad(){this.setState({loading:!1})}componentWillReceiveProps(e){e.src===this.props.src&&e.srcset===this.props.srcset||this.setState({loading:!0})}componentDidMount(){this.loadImg(),this.state.loading&&this.nodeRefs.imgElement.src&&this.nodeRefs.imgElement.complete&&this.handleLoad()}componentDidUpdate(e){e.src===this.props.src&&e.srcset===this.props.srcset||this.loadImg(),this.state.loading&&this.nodeRefs.imgElement.src&&this.nodeRefs.imgElement.complete&&this.handleLoad()}render(e,t){const n=Object(a.a)({loading:t.loading},"projectPreviewScreen","noSelect");return preact.h("div",{class:n,style:{height:e.height}},preact.h("img",{ref:Object(o.a)(this,"imgElement"),onLoad:this.handleLoad}))}}},function(e,t){},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=Object.freeze(["normal","darken","multiply","color-burn","lighten","screen","color-dodge","overlay","soft-light","hard-light","difference","exclusion","hue","saturation","color","luminosity","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","dissolve","linear-burn","linear-dodge","darker-color","lighter-color","vivid-light","linear-light","pin-light","hard-mix","subtract","divide"])},function(e,t,n){"use strict";t.a=l;var i=n(72),a=n(23),o=n(111),r=n(18),s=["color","gradient"];function l(e,t,n){var r=Object.assign({},e);if(r.type=r.fillType,delete r.fillType,"color"===r.type)r.color=new a.a(r.color),delete r.gradient;else{if("gradient"!==r.type)throw new TypeError("Unknown fill type: '"+r.type+"'. Possible values: "+JSON.stringify(s));r.gradient=new o.a(r.gradient,t,n),delete r.color}Object.defineProperties(this,{type:{get:function(){return r.type},set:function(e){if(-1===s.indexOf(e))throw new TypeError("Unknown fill type: '"+e+"'. Possible values: "+JSON.stringify(s));r.type=e}},color:{get:function(){return r.color},set:function(e){r.type="color",r.color=new a.a(e),delete r.gradient}},gradient:{get:function(){return r.gradient},set:function(e){r.type="gradient",r.gradient=new o.a(e,t,n),delete r.color}},opacity:{get:function(){return r.opacity},set:function(e){if(e<0||e>1)throw new RangeError("Invalid opacity value: '"+e+"'. Valid range: [0, 1]");r.opacity=e}},blendMode:{get:function(){return r.blendMode},set:function(e){if(-1===i.a.indexOf(e))throw new TypeError("Unknown blend mode: '"+e+"'. Possible values: "+JSON.stringify(i.a));r.blendMode=e}},fill:{get:function(){return"color"===r.type?this.color:this.gradient},set:function(){}}})}l.prototype=Object.create(r.a.prototype),l.prototype.constructor=l,l.prototype.toObject=function(){var e={type:this.type,opacity:this.opacity,blendMode:this.blendMode,fill:this.fill.toObject()};return this.color?e.color=this.color.toObject():this.gradient&&(e.gradient=this.gradient.toObject()),e}},function(e,t,n){"use strict";var i=n(119),a=n(0);function o(e){return e=e.replace(/_/g," "),i.a.find(function(t){return t.aliases.includes(e)})}t.a={addCustomEmojis:function(e){var t={};Object.keys(e).forEach(function(n){var a=e[n];if(n=n.replace(/_/g," "),a.startsWith("alias:"))t[n]=a.substring(6);else{var r=o(n);r?r.aliases.push(n):i.a.push({emoji:a,aliases:[n],customEmoji:!0})}}),Object.keys(t).forEach(function(e){var n=o(t[e]);n&&n.aliases.push(e)})},getSuggestedEmojis:function(e){var t=[];return e=e.toLowerCase().replace(/_/g," ").trim(),i.a.forEach(function(n){for(var i=0;i<n.aliases.length;i++)if(Object(a.F)(n.aliases[i],e)||n.aliases[i].startsWith(e))return void t.push({emoji:n.emoji,alias:n.aliases[i],customEmoji:n.customEmoji})}),t},searchEmoji:o}},function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return g});var i,a,o,r,s,l,c=n(0),u=0,d=[],m=!1;function p(e){o&&!o.classList.contains("hidden")&&g(),l=e.cb.autoComplete,o=e.elements.suggestedListContainer,r=o.querySelector(".suggestedListBox"),s=e.elements.textContainer,u=e.index,d=e.list,i=0,a=0,o.classList.remove("hidden");var t=r.querySelector(".suggestedItem[data-index='"+u+"']");t.classList.add("selected"),c.z(t),m||(m=!0,r.addEventListener("mousemove",f),r.addEventListener("click",b),s.addEventListener("keydown",h,!0))}function g(){if(m&&(s.removeEventListener("keydown",h,!0),r.removeEventListener("mousemove",f),r.removeEventListener("click",h)),o&&!o.classList.contains("hidden")){var e=r.querySelector(".suggestedItem.selected");e&&e.classList.remove("selected"),o.classList.add("hidden"),o.innerHTML="",r.innerHTML="",s=null,m=!1,d=[],u=0}}function h(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ENTER:e.preventDefault(),l(d[r.querySelector(".suggestedItem.selected").dataset.index]);break;case Zeplin.KEY_CODE.ESC:e.preventDefault(),g();break;case Zeplin.KEY_CODE.ArrowDown:e.preventDefault(),u<d.length-1&&y(++u);break;case Zeplin.KEY_CODE.ArrowUp:e.preventDefault(),u>0&&y(--u)}}function f(e){if(e.stopPropagation(),i!==e.clientX||a!==e.clientY){var t=e.target.closest(".suggestedItem");t.classList.contains("selected")||y(t.dataset.index),i=e.clientX,a=e.clientY}}function b(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".suggestedItem");l(d[t.dataset.index])}function y(e){u=e;var t=r.querySelector(".suggestedItem.selected");t&&t.classList.remove("selected");var n=r.querySelector(".suggestedItem[data-index='"+u+"']");n&&(n.classList.add("selected"),c.z(n))}},function(e,t,n){"use strict";var i=n(138);t.a=i.a},function(e,t,n){"use strict";var i=n(140);t.a=i.a},function(e,t,n){"use strict";t.a=function(e){var t,n=new URL(e);switch(n.hostname){case"www.bitbucket.org":case"www.github.com":case"www.gitlab.com":case"bitbucket.org":case"github.com":case"gitlab.com":var i=n.hostname.split(".");t=i[i.length-2];break;case"www.twitter.com":case"twitter.com":t=n.pathname.split("/")[1]||e.replace(/https?:\/\//,"");break;default:t=e.replace(/https?:\/\//,"")}return{url:e,text:t}}},function(e,t,n){"use strict";var i=n(146);t.a=i.a},function(e,t,n){"use strict";var i=n(81),a=n(82),o=n(83),r=n(44),s=n(65);const l={loadExtensions(e,t,n){o.a.getEnabledExtensions(e.id).then(i=>{if(i)return i;let a;return n&&n.length>0?a=n:0===(a=t.filter(e=>e.default).map(e=>e.id)).length&&1===t.length&&(a=[t[0].id]),o.a.setEnabledExtensions(e.id,a),a}).then(n=>{a.a.dispatch({type:i.a.LOAD_EXTENSIONS,project:e,extensions:t,enabledExtensions:Array.from(n)})})},updateExtensionOption(e,t,n){a.a.dispatch({type:i.a.UPDATE_EXTENSION_OPTION,id:e,name:t,value:n})},enableExtension(e){a.a.dispatch({type:i.a.ENABLE_EXTENSION,id:e})},disableExtension(e){a.a.dispatch({type:i.a.DISABLE_EXTENSION,id:e})},removeExtension(e,t,n=!1){a.a.dispatch({type:i.a.REMOVE_EXTENSION_REQUESTED,pid:e,id:t}),(n?Promise.resolve():Object(r.m)(e,t)).then(()=>{a.a.dispatch({type:i.a.REMOVE_EXTENSION_SUCCESS,pid:e,id:t}),n||mixpanel.webapp.track("Removed extension",{extension:t})}).catch(n=>{a.a.dispatch({type:i.a.REMOVE_EXTENSION_FAIL,pid:e,id:t,error:n})})},addExtension(e,t){Object(r.a)(e.id,t).then(e=>{const t=s.a.create(e);a.a.dispatch({type:i.a.ADD_EXTENSION_REQUESTED,extension:t,local:!1})})},addLocalExtension(e){a.a.dispatch({type:i.a.ADD_EXTENSION_REQUESTED,extension:e,local:!0})},loadExtension(e,t){t.load(e).then(()=>{a.a.dispatch({type:i.a.LOAD_EXTENSION,extension:t})})},reloadLocalExtensions(){a.a.dispatch({type:i.a.RELOAD_LOCAL_EXTENSIONS})}};t.a=l},function(e,t,n){"use strict";t.a={LOAD_EXTENSIONS:"loadExtensions",ADD_EXTENSION_REQUESTED:"addExtensionRequested",ADD_EXTENSION:"addExtension",ADD_LOCAL_EXTENSION:"addLocalExtension",LOAD_EXTENSION:"loadExtension",RELOAD_LOCAL_EXTENSIONS:"reloadLocalExtensions",REMOVE_EXTENSION_REQUESTED:"removeExtensionRequested",REMOVE_EXTENSION_SUCCESS:"removeExtensionSuccess",REMOVE_EXTENSION_FAIL:"removeExtensionFail",ENABLE_EXTENSION:"enableExtension",DISABLE_EXTENSION:"disableExtension",UPDATE_EXTENSION_OPTION:"updateExtensionOption"}},function(e,t,n){"use strict";var i=n(149);n.n(i);t.a=new i.Dispatcher},function(e,t,n){"use strict";var i=n(9);t.a={disableExtension:function(e,t){return i.b.get(e,"extensions").then(function(n){const a=n.filter(e=>e!==t);return i.b.set(e,"extensions",a)})},enableExtension:function(e,t){return i.b.get(e,"extensions").then(n=>(n.push(t),i.b.set(e,"extensions",n)))},getEnabledExtensions:function(e){return i.b.get(e,"extensions")},setEnabledExtensions:function(e,t){return i.b.set(e,"extensions",t)}}},function(e,t,n){"use strict";var i=n(157);t.a=i.a},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(54),n(55),n(30),n(57),n(60);var i,a,o,r,s,l,c,u,d,m,p,g,h,f,b,y,v,j,S,E=n(11),w=n(14),L=n(3),C=n(102),D=n(0),x=n(9),k=n(2),q=n(61),T=n(12),_=n(21),I=n(106),O=n(107),P=n(23),B=n(33),A=n(108),N=n(63),R=n(114),U=n.n(R),F=n(115),M=n.n(F),z=n(5),Z=n.n(z),H=n(116),V=n(40),W=n(117),Y=n(118),K=n(120),X=n(121),$=n(122),J=n(74),G=n(64),Q=n(1),ee=n.n(Q),te=n(123),ne=n(129),ie=n(131),ae=n(133),oe=n(155),re=n(160),se=n(41),le=n(43),ce=n(65),ue=n(44),de=n(20),me=n(66),pe=document.getElementById("loading"),ge=document.getElementById("userMenu"),he=document.getElementById("notificationContainer"),fe=document.querySelector(".projectOverview"),be=document.getElementById("screenCount"),ye=document.getElementById("tags"),ve=document.getElementById("taglessProjectInfoLine"),je=document.getElementById("resetTags"),Se=document.getElementById("projectName"),Ee=document.getElementById("projectNameForm"),we=document.getElementById("projectType"),Le=document.getElementById("projectDensity"),Ce=document.getElementById("changeDensityButton"),De=document.getElementById("densityDialog"),xe=document.getElementById("densityDialogSubmitButton"),ke=document.getElementById("densityHelp"),qe=document.getElementById("densityTooltip"),Te=document.getElementById("projectLink"),_e=document.getElementById("copyProjectLinkButton"),Ie=document.querySelector("title"),Oe=document.getElementById("dashboardTab"),Pe=document.getElementById("styleguideTab"),Be=document.querySelector("header"),Ae=document.querySelector(".headerTitle"),Ne=document.getElementById("upLink"),Re=document.getElementById("arrowLeft"),Ue=document.getElementById("arrowRight"),Fe=document.getElementById("header"),Me=document.getElementById("headerExtra"),ze=document.getElementById("addUserButton"),Ze=document.getElementById("inviteUserPopup"),He=document.getElementById("inviteUserPopupAnchor"),Ve=document.getElementById("noOtherMembers"),We=document.getElementById("members"),Ye=document.getElementById("colorPalette"),Ke=document.getElementById("rightSidebar"),Xe=document.getElementById("screenDescription"),$e=new I.a(Xe,Yc),Je=document.getElementById("screenLastUpdated"),Ge=document.getElementById("screenTags"),Qe=document.getElementById("layoutGridInfoContainer"),et=document.getElementById("gridViz"),tt=document.getElementById("gridColumnWidth"),nt=document.getElementById("gridGutterWidth"),it=document.getElementById("gridColumnViz"),at=document.getElementById("verticalGutterViz"),ot=document.getElementById("gridRowHeight"),rt=document.getElementById("gridGutterHeight"),st=document.getElementById("gridTotalWidth"),lt=document.getElementById("gridNumberOfCols"),ct=document.getElementById("resourceTabs"),ut=document.getElementById("colorContent"),dt=document.getElementById("screenColors"),mt=document.getElementById("assetContent"),pt=document.getElementById("screenAssets"),gt=document.getElementById("screenAssetExports"),ht=document.getElementById("layerView"),ft=document.getElementById("textLayerInfo"),bt=document.getElementById("copyLayerContent"),yt=document.getElementById("layerContent"),vt=document.getElementById("layerFillContainer"),jt=document.getElementById("layerFills"),St=document.getElementById("layerBorderContainer"),Et=document.getElementById("layerBorders"),wt=document.getElementById("layerShadowContainer"),Lt=document.getElementById("layerShadows"),Ct=document.getElementById("layerBlurContainer"),Dt=document.getElementById("layerBlurType"),xt=document.getElementById("layerBlurRadius"),kt=document.getElementById("layerAssetContainer"),qt=document.getElementById("layerAssetPreview"),Tt=document.getElementById("layerAssetName"),_t=document.getElementById("layerAssetExports"),It=document.querySelector("input[type='checkbox'][name='showOptimizedSVG']"),Ot=document.querySelector("input[type='checkbox'][name='allAssetsShowOptimizedSVG']"),Pt=document.getElementById("generatorContainer"),Bt=document.getElementById("shareSceneDialog"),At=document.getElementById("zoomIn"),Nt=document.getElementById("zoomDropdownLabel"),Rt=document.getElementById("zoomDropdown"),Ut=document.getElementById("zoomOut"),Ft=document.getElementById("maymusCheckbox"),Mt=document.querySelector(".screenContent"),zt=document.getElementById("screenView"),Zt=document.getElementById("dotgrid"),Ht=document.getElementById("screenContainer"),Vt=document.getElementById("cursorImage"),Wt=document.getElementById("dots"),Yt=document.getElementById("dotPopup"),Kt=document.getElementById("dotPopupAnchor"),Xt=document.getElementById("dotColors"),$t=document.getElementById("dotComments"),Jt=document.getElementById("newComment"),Gt=document.getElementById("newCommentButtons"),Qt=document.getElementById("newCommentButton"),en=document.getElementById("newCommentMirror"),tn=document.getElementById("newCommentNote"),nn=document.getElementById("newCommentSendButton"),an=document.getElementById("newCommentArea"),on=document.getElementById("layers"),rn=document.getElementById("links"),sn=document.getElementById("rulers"),ln=document.getElementById("topRuler"),cn=document.getElementById("rightRuler"),un=document.getElementById("bottomRuler"),dn=document.getElementById("leftRuler"),mn=document.getElementById("leftDistance"),pn=document.getElementById("leftDistanceValue"),gn=document.getElementById("rightDistance"),hn=document.getElementById("rightDistanceValue"),fn=document.getElementById("topDistance"),bn=document.getElementById("topDistanceValue"),yn=document.getElementById("bottomDistance"),vn=document.getElementById("bottomDistanceValue"),jn=document.getElementById("layoutGridContainer"),Sn=document.getElementById("gridToggleContainer"),En=document.getElementById("fontBook"),wn=document.getElementById("screenImage"),Ln=document.getElementById("suggestedUsersContainer"),Cn=document.getElementById("suggestedEmojisContainer"),Dn=document.getElementById("searchScreenContainer"),xn=document.getElementById("screenSearchText"),kn=document.getElementById("suggestedScreensContainer"),qn=document.getElementById("jumpToScreen"),Tn=document.getElementById("searchPopup"),_n=document.getElementById("namingTip"),In=document.getElementById("slackButton"),On=document.getElementById("manageTagsContainer"),Pn=document.getElementById("createTagContainer"),Bn=Pn.querySelector("span"),An=document.getElementById("manageTagsPopup"),Nn=document.getElementById("selectTags"),Rn=document.getElementById("tagOfScreenTemplate"),Un=document.getElementById("tagSuggestionTemplate"),Fn=document.getElementById("tagsOfScreen"),Mn=document.getElementById("tagSuggestions"),zn=document.getElementById("manageTagsDone"),Zn=document.getElementById("tagSearchText"),Hn=document.getElementById("manageTagsButtonTemplate"),Vn=document.getElementById("tagMenuTemplate"),Wn=document.getElementById("projectInfoResizer"),Yn=document.getElementById("versionsSidebarResizer"),Kn=document.getElementById("rightSidebarResizer"),Xn=document.getElementById("generatorResizer"),$n=document.getElementById("projectInfo"),Jn=document.getElementById("projectInfoWrapper"),Gn=document.querySelector(".versionsSidebarWrapper"),Qn=document.getElementById("rightSidebarWrapper"),ei=document.getElementById("projectLinkRow"),ti=document.getElementById("shortLinkMenuTemplate"),ni=document.getElementById("openSceneDialogButton"),ii=document.getElementById("shareSceneMenuTemplate"),ai=document.getElementById("shareSceneButton"),oi=document.getElementById("cancelShareSceneButton"),ri=document.getElementById("shareSceneRow"),si=document.getElementById("sharedSceneContainer"),li=document.getElementById("unsharedSceneContainer"),ci=document.getElementById("sceneShortLink"),ui=document.getElementById("openSceneNewTab"),di=document.getElementById("copySceneShortLink"),mi=document.getElementById("dotListingTemplate"),pi=document.getElementById("dotListings"),gi=document.getElementById("dotListingsOptions"),hi=document.getElementById("dotContent"),fi=document.getElementById("otherAuthorAvatarFrameTemplate"),bi=document.getElementById("tabsTutorialCircle"),yi=document.getElementById("versionsTutorialCircle"),vi=document.getElementById("tabsTutorialPopup"),ji=document.getElementById("currentUser"),Si=document.getElementById("notificationsButton"),Ei=document.getElementById("importProgressesButton"),wi=document.getElementById("screenBgColor"),Li=document.getElementById("screenBgColorContainer"),Ci=document.getElementById("screenSearch"),Di=document.querySelector(".menuBar"),xi=document.querySelector(".searchArea"),ki=document.getElementById("popoutWidget"),qi=document.getElementById("sourceFile"),Ti=document.getElementById("sourceFileName"),_i=document.getElementById("sourceFilePath"),Ii=document.getElementById("sourceFileActions"),Oi=document.getElementById("slackContainer"),Pi=document.getElementById("slackIntegrationRow"),Bi=document.getElementById("screenLinks"),Ai=document.getElementById("allAssetsNamingConvention"),Ni=document.getElementById("assetNamingConvention"),Ri=document.getElementById("sortOptions"),Ui=document.getElementById("androidResFolderReminderDialog"),Fi=document.getElementById("androidResFolderReminderDoneButton"),Mi=document.getElementById("sectionTemplate"),zi=document.getElementById("sections"),Zi=document.getElementById("sectionDivider"),Hi=document.querySelector(".projectOverviewLoading"),Vi=document.querySelector(".screenGridLoading"),Wi=document.getElementById("screenStatusIndicator"),Yi=document.getElementById("projectStatusIndicator"),Ki=document.getElementById("integrations"),Xi=document.getElementById("noScreenAssetsRoot"),$i=document.querySelector(".noScreensElectronRoot"),Ji=document.getElementById("openExtensionDialogButton"),Gi=document.getElementById("styleguideCodeContainer"),Qi=document.querySelector(".layerCodeContainer"),ea={},ta=new Set,na={},ia="",aa=!1,oa=-2,ra=null,sa=null,la=null,ca=null,ua="",da=null,ma=[],pa=!1,ha=!1,fa=1,ba=null,ya=null,va=new RegExp("(?:"+[Zeplin.user.username,"everyone","all","tutti"].join("|")+")\\b"),ja=!1,Sa=[],Ea=!0,wa=!0,La=!1,Ca=!1,Da=6,xa={},ka=null,qa=null,Ta=eo(1100,Wi),_a=!0,Ia=!1,Oa=!1,Pa=!!T.a&&!!T.a.features&&"popout"in T.a.features,Ba=!!T.a&&!!T.a.features&&!!T.a.features.integrations&&T.a.features.integrations.slack,Aa=!!T.a&&!!T.a.features&&!!T.a.features.revampedMenu,Na=!!T.a&&!!T.a.features&&!!T.a.features.dashboardShortcutIsAltA,Ra=!!T.a&&!!T.a.features&&!!T.a.features.webviews,Ua=!Ra,Fa=!1,Ma=Pa&&T.a.features.popout,za=new H.a({mac:document.body.classList.contains("mac")}),Za=!1,Ha=eo(700,Yi);const Va=new de.a(me.a,document.querySelector(".overviewContent .previewContent"));let Wa;var Ya={jpg:"image/jpeg",js:"application/javascript",javascript:"application/javascript",pdf:"application/pdf",png:"image/png",svg:"image/svg+xml",xml:"application/xml"},Ka={fecf33:"yellow",f69833:"orange",ee6723:"peach",c8cf2d:"green","0dcfda":"turquoise"},Xa={yellow:{name:"yellow",r:254,g:207,b:51,a:1},orange:{name:"orange",r:246,g:152,b:51,a:1},peach:{name:"peach",r:238,g:103,b:35,a:1},green:{name:"green",r:200,g:207,b:45,a:1},turquoise:{name:"turquoise",r:13,g:207,b:218,a:1}},$a={ios:/([^a-zA-Z0-9])/g,osx:/([^a-zA-Z0-9])/g,web:/([^a-zA-Z0-9-_])/g,android:/([^a-z0-9_])/g},Ja={default:"Default",camelCase:"camelCase",snakeCase:"snake_case",kebabCase:"kebab-case",original:"Original"};function Ga(){var e=T.a.features.versions?{name:ra.name,width:sa.snapshot.width,height:sa.snapshot.height,url:sa.snapshot.url}:{name:ra.name,currentSnapshot:{width:sa.snapshot.width,height:sa.snapshot.height,url:sa.snapshot.url}};T.a.ipcRenderer.send("open-popout",e,i.id)}function Qa(){if(function(){if(!Aa||!Ua||!i)return;_.a.addRecentProject(i),_.a.bindProjectPreferences(i)}(),Ts(),qs(),Ua){var e=o?D.I("organization-projects",{url:{oid:o._id}}):D.I("projects");"dashboard"===ua&&"styleguide"===ua&&(Ne.href=e),T.a.ipcRenderer.send("preload-url",e)}}function eo(e,t){var n=Array.from(t.querySelectorAll(".loadingBar")),i=t.querySelector(".whiteBar"),a=1,o=!1,r=!0;function s(t){return a=(a+1)%9999,t.animate([{transform:"scaleX(0)",zIndex:a},{transform:"scaleX(1)",zIndex:a}],{duration:e,fill:"forwards",easing:"cubic-bezier(0.165, 0.84, 0.44, 1.0)"})}return{start:function(){r&&(o=!1,r=!1,function e(t){s(n[t]).addEventListener("finish",function(){o?r||(s(i),r=!0):e((t+1)%n.length)})}(0))},stop:function(){o||(o=!0)}}}function to(e,t){if(T.a)T.a.shell.openExternal(e);else{var n=!0;t&&"inNewTab"in t&&(n=t.inNewTab);var i=window.location;if(n){var a=window.open("","_blank");a.opener=null,i=a.location}i.assign(e)}}L.b.registerDialog(De),L.b.registerDialog(Bt),L.b.registerDialog(Ui),document.body.classList.contains("electron")&&ee.a.render(ee.a.h(ie.a,{photoshopAndFigma:!!T.a&&!!T.a.features&&!!T.a.features.figma}),$i),G.a(function(){pe.classList.remove("hidden"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){_o()}).catch(function(e){pe.classList.add("hidden"),k.b(e)})}),document.body.classList.toggle("features-popout",Pa)?Ma&&(ki.classList.remove("disabled"),ki.dataset.tooltip="Pop screen out",T.a.ipcRenderer.on("open-popout",Ga),ki.addEventListener("click",Ga)):ki&&ki.remove(),document.body.classList.toggle("features-integrations-slack",Ba),document.body.classList.toggle("windows-app-dashboard-shortcut-is-alt-a",Na),Aa&&(T.a.ipcRenderer.on("new-project",function(){location.assign(D.I("projects",{query:{newProject:"true"}}))}),T.a.ipcRenderer.on("leave-project",function(){L.a({message:'Leave "'+i.name+'"?',done:{name:"LEAVE",cb:function(){Tu(Zeplin.user._id)}},cancel:{name:"CANCEL"}})}),T.a.ipcRenderer.on("delete-project",function(){G.b(i.id,i.name)}),T.a.ipcRenderer.on("delete-screen",function(){L.a({message:'Delete "'+ra.name+'"?',done:{name:"DELETE SCREEN",cb:function(){Ou(ra._id).then(function(){Oo(i.id,yl())})}},cancel:{name:"CANCEL"}})}),T.a.ipcRenderer.on("set-as-thumbnail",function(){_u(ra._id).then(function(){Ts()})}),T.a.ipcRenderer.on("add-tag",function(){Xu(ra._id)}),T.a.ipcRenderer.on("manage-tags",function(){Xu(ra._id)}),T.a.ipcRenderer.on("dashboard",function(){Oo(i.id,yl())}),T.a.ipcRenderer.on("styleguide",function(){Po(i.id)}),T.a.ipcRenderer.on("zoom-in",_c),T.a.ipcRenderer.on("zoom-out",Ic),T.a.ipcRenderer.on("actual-size",function(){fa=1,Zt.classList.add("zooming"),ls()}),T.a.ipcRenderer.on("jump-to-screen",function(){Zi.classList.add("hidden"),i.screens&&i.screens.length&&Dn.classList.contains("hidden")&&ql()}),T.a.ipcRenderer.on("show-versions",is),T.a.ipcRenderer.on("hide-versions",as),Array.from(document.querySelectorAll("input.windows-app-pref-menu-item")).forEach(function(e){e.addEventListener("change",function(){var t=e.dataset.windowsAppPrefName||e.name,n="radio"===e.type?e.value:e.checked,i={};i[t]=n,_.a.updateProjectPreferences(i),Array.from(document.querySelectorAll(".sidebarOptionsButton")).forEach(Cd)})}),_.a.onOpenRecentProject=function(e){Io(D.I("project",{url:{pid:e}}))},_.a.onProjects=_o),document.body.classList.toggle("features-webviews",Ra)&&(T.a.ipcRenderer.on("load-url",function(e,t){i&&new URL(t).href.match(/\/project\/([0-9a-z]+)/)[1]===i.id||(Fa=!0),Io(t)}),T.a.ipcRenderer.on("projects",To),T.a.ipcRenderer.on("active",function(e,t){if(!(Ua=t))return i&&"dashboard"!==ua&&Oo(i.id,yl()),Sl(),void Kd();Fa||(Xd(),Qa())}));var no={king:"Owner",queen:"Admin",rook:"Editor",knight:"Member",pawn:"",owner:"Owner",admin:"Admin",user:""};function io(e){return"invited"===e.user.status?"Pending Invitation":no[e.role]||""}function ao(e,t){return"Your organization role is "+io(e)+" "+(n=e.role,n=D.H(n),"<img src='"+Zeplin.urls.appURL+"/img/ic"+n+".png' srcset='"+Zeplin.urls.appURL+"/img/ic"+n+"@2x.png 2x, "+Zeplin.urls.appURL+"/img/ic"+n+"@3x.png 3x' alt=''>")+", only "+no.rook+"s or higher can "+t;var n}function oo(e,t){var n=ao(e,t);return D.f("<p>"+n+"</p><p><a href='https://support.zeplin.io/pricing-and-plans/organization/assigning-roles-to-organization-members' target='_blank'>Learn more</a> about roles or contact organization Admins to update your role!</p>")}var ro=document.getElementById("memberTemplate");function so(e){var t=document.importNode(ro.content,!0),n=t.querySelector(".member");D.B(t.querySelector(".memberImage"),e.user),n.dataset.id=e.user._id,n.dataset.role=e.role,n.dataset.user=Zeplin.user._id===e.user._id?"own":"",n.dataset.status=e.user.status,t.querySelector(".memberName").textContent=e.user.username||e.user.email,t.querySelector(".memberName").title=e.user.username||e.user.email,t.querySelector(".memberRole").textContent=io(e),t.querySelector(".memberActionsButton").classList.toggle("hidden","owner"===e.role||D.v.isSuperior(e,a)),We.appendChild(t)}function lo(e){Ve.classList.toggle("lonely",1===e.length),m=new RegExp("@(?:everyone|all|tutti|"+e.filter(function(e){return e.user.username}).map(function(e){return e.user.username}).join("|")+")\\b","gi"),We.innerHTML="",e.forEach(so),K.checkStatus()}function co(e){var t=e.match(/\/project\/([0-9a-z]+)(?:\/screen\/([0-9a-z]+))?/i);if(t){var n={pid:decodeURIComponent(t[1])};return t[2]&&(n.sid=decodeURIComponent(t[2])),n}}var uo=(new TextDecoder).decode(new Uint8Array(Array.from(crypto.getRandomValues(new Uint8Array(16)),function(e){return e%94+33})));function mo(){localStorage.setItem("slackState",uo)}function po(e){if(e&&e.length&&ra&&ra.dots){var t=e.some(function(e){return"open"===Ro(e)});t&&"open"!==Dc()?xc("open",!0):t||"resolved"===Dc()||xc("resolved",!0);var n=Dc();e.forEach(function(e){var t=document.querySelector(".dot[data-id='"+e+"']");t&&Ro(e)===n&&t.classList.add("highlight")}),document.querySelector(".dot.highlight")||L.a({message:"Notes not available anymore."})}}function go(e){if(e&&e.length)if(Array.isArray(e)){var t,n=la.comments.length;if(e.forEach(function(e){var i=$t.querySelector(".comment[data-id='"+e+"']");i&&i.classList.add("highlight");var a=Array.from(i.parentElement.children).indexOf(i);a<n&&(n=a,t=i)}),t){var i=Yt.getBoundingClientRect().top,a=t.getBoundingClientRect().top-i;setTimeout(function(){"scrollBy"in Element.prototype?$t.scrollBy({top:a-24,behavior:"smooth"}):$t.scrollTop+=a-24},200)}else L.a({message:"Comments not available anymore."})}else{var o="string"==typeof e?$t.querySelector(".comment[data-id='"+e+"']"):e;if(!o)return void L.a({message:"Comment not available anymore."});o.classList.add("new"),o.scrollIntoView(),setTimeout(function(){o.classList.add("highlight"),setTimeout(function(){o.classList.remove("highlight"),o.addEventListener("transitionend",function e(){o.removeEventListener("transitionend",e),o.classList.remove("new")})},1e3)},150)}}function ho(){Array.from(zi.querySelectorAll(".screenLink.highlight")).forEach(function(e){e.classList.remove("highlight")})}function fo(){Array.from(Ye.querySelectorAll(".color.highlight")).forEach(function(e){e.classList.remove("highlight")})}In.addEventListener("click",function(){D.v.canUpdateProject(a)&&(Ba?T.a.ipcRenderer.send("add-to-slack",{id:i.id,name:i.name}):(mo(),to(b,{inNewTab:!1})))});var bo,yo=document.querySelector(".styleContainer");function vo(){Array.from(En.querySelectorAll(".font.highlight")).forEach(function(e){e.classList.remove("highlight")})}function jo(e,t){D.v.canManageColors(a)?(e.dataset.tooltip=t?"Delete color from Styleguide.":"Add color to Styleguide.",e.dataset.tooltipType="text"):"pawn"===a.role?(e.dataset.tooltip="Only organization members can "+(t?"delete":"add")+" colors.",e.dataset.tooltipType="text"):(e.dataset.tooltip=oo(a,(t?"delete":"add")+" colors."),e.dataset.tooltipType="html")}function So(e,t){D.v.canManageTextStyles(a)?(e.dataset.tooltip=t?"Delete text style from Styleguide.":"Add text style to Styleguide.",e.dataset.tooltipType="text"):"pawn"===a.role?(e.dataset.tooltip="Only organization members can "+(t?"delete":"add")+" text styles.",e.dataset.tooltipType="text"):(e.dataset.tooltip=oo(a,(t?"delete":"add")+" text styles."),e.dataset.tooltipType="html")}function Eo(){var e=D.v.canUpdateProject(a);Se.readOnly=!e,e?(Se.removeAttribute("data-tooltip"),Se.removeAttribute("data-tooltip-type")):(Se.dataset.tooltip=oo(a,"rename projects."),Se.dataset.tooltipType="html"),In.classList.toggle("disabled",!e),e?(In.removeAttribute("data-tooltip"),In.removeAttribute("data-tooltip-type")):(In.dataset.tooltip=oo(a,"add projects to Slack."),In.dataset.tooltipType="html"),Array.from(Oi.querySelectorAll(".slackSettingsButton")).forEach(function(t){t.classList.toggle("hidden",!e)}),Ce.classList.toggle("disabled",!e),e?(Ce.dataset.tooltip="Update project density.",Ce.dataset.tooltipType="text"):(Ce.dataset.tooltip=oo(a,"update project density."),Ce.dataset.tooltipType="html");var t=D.v.canManageScreens(a);$e.readOnly=!t,$e.placeholder=t?"Enter a short description here":"No description yet",Array.from(zi.querySelectorAll(".screen .screenName")).forEach(function(e){e.readOnly=!t}),Array.from(zi.querySelectorAll(".section .sectionName")).forEach(function(e){e.readOnly=!t}),Array.from(zi.querySelectorAll(".section .sectionDescription")).forEach(function(e){e.readOnly=!t}),document.body.classList.toggle("canManageScreens",t),ve.querySelector(".capableInfoLine").classList.toggle("hidden",!t);var n=ve.querySelector(".unableInfoLine");n.querySelector("span").textContent=no.rook,n.classList.toggle("hidden",t);var i=document.getElementById("manageTagsButton");i&&(i.classList.toggle("disabled",!t),t?(i.dataset.tooltip="Manage tags.",i.dataset.tooltipType="text"):(i.dataset.tooltip=oo(a,"organize screens using tags."),i.dataset.tooltipType="html"));var o=D.v.canManageColors(a);Array.from(Ye.querySelectorAll(".color")).forEach(function(e){e.querySelector(".colorName").readOnly=!o,e.querySelector(".colorHex").readOnly=!o,e.querySelector(".colorAlpha").readOnly=!o,o?(e.removeAttribute("data-tooltip"),e.removeAttribute("data-tooltip-type")):"pawn"===a.role?(e.dataset.tooltip="Only organization members can edit colors.",e.dataset.tooltipType="text"):(e.dataset.tooltip=oo(a,"edit colors."),e.dataset.tooltipType="html")}),Array.from(Ke.querySelectorAll(".color")).forEach(function(e){e.querySelector(".colorName").readOnly=!o;var t=e.querySelector(".addColor");t.classList.toggle("disabled",!o),jo(t,e.classList.contains("added"))});var r=D.v.canManageTextStyles(a);En.classList.toggle("editable",r),Array.from(En.querySelectorAll(".styleName")).forEach(function(e){e.readOnly=!r,r?(e.removeAttribute("data-tooltip"),e.removeAttribute("data-tooltip-type")):"pawn"===a.role?(e.dataset.tooltip="Only organization members can edit text styles.",e.dataset.tooltipType="text"):(e.dataset.tooltip=oo(a,"edit text styles."),e.dataset.tooltipType="html")}),Array.from(Ke.querySelectorAll(".textStyleWrapper")).forEach(function(e){e.querySelector(".textStyleName").readOnly=!r;var t=e.querySelector(".addTextStyle");t.classList.toggle("disabled",!r),So(t,e.classList.contains("added"))}),Yt.classList.toggle("canRemoveNotes",D.v.canRemoveNotes(a))}function wo(){D.v.canUpdateProject(a)&&$.a(i.id,i.integration.slacks.map(function(e){return e._id}))}function Lo(e){return Promise.all([Promise.all(e.extensions.map(t=>{return new ce.a(t).load(e)})),(t=e.id,x.b.get(t,"selectedExtension").then(function(e){return x.b.set(t,"extensionsMigrated",!0).then(function(){return e&&ce.b[e]||[]})}))]).then(t=>{var n=t[0],i=t[1];le.a.loadExtensions(e,n,i)}).catch(k.b);var t}function Co(){var e=le.b.getState(),t=e.extensions.filter(function(t){return e.enabledExtensions.includes(t.id)}).map(function(e){return e.name});if(t.length>2){var n=t.pop();t=`${t.join(", ")}, and ${n}`}else t=t.join(", ");document.querySelector("#extensionsRow .rowInfo").textContent=t||"—",document.querySelector("#extensionsRow .rowInfo").title=t}function Do(e){lo(e.users),e.screens.forEach(function(e){e.latestVersion.commit=e.latestVersion.commit||{},e.versions=[e.latestVersion],delete e.latestVersion}),function(e){var t=E.c.channel(f);function n(t){if(t.params.mid===Zeplin.user._id){if(t.params.uid===Zeplin.user._id)return void _o();var n=ur(t.params.uid,!0),i=n?n.user.username:"Anonymous";L.a({title:i+' removed you from "'+e.name+'".',message:"You won't be able to access its resources from now on.\nIf you think this is a mistake, please contact "+i},{defer:!0}),_o()}else e.removeUser(t.params.mid),lo(e.users)}t.bind("UpdateProjectDensity",function(e){bu(e.body.density)}),t.bind("UpdateProjectName",function(e){fu(e.body.name)}),t.bind("ArchiveProject",function(t){if(t.params.uid!==Zeplin.user._id){var n=ur(t.params.uid,!0),i=n?n.user.username:"Anonymous";L.a({title:i+' archived "'+e.name+'".',message:"You won't be able to access its resources from now on."+(n?"\nIf you think this is a mistake, please contact "+i:"")},{defer:!0})}_o()}),t.bind("DeleteProject",function(t){if(t.params.uid!==Zeplin.user._id){var n=ur(t.params.uid,!0),i=n?n.user.username:"Anonymous";L.a({title:i+' deleted "'+e.name+'".',message:"You won't be able to access its resources from now on."+(n?"\nIf you think this is a mistake, please contact "+i:"")},{defer:!0})}_o()}),t.bind("InviteUser",function(t){e.addUser(t.body),lo(e.users)}),t.bind("CreateUser",function(t){e.updateUserInfo(t.params.uid,{username:t.body.username,status:"registered"}),lo(e.users)}),t.bind("UpdateUsername",Ed),t.bind("UpdateEmail",Ed),t.bind("UpdateUserEmotar",Ed),t.bind("UpdateUserAvatar",Ed),t.bind("UpdateUserSubscription",function(t){var n=e.findUser(t.params.uid);n&&(Object.assign(n.user,t.body),"owner"===n.role&&E.a().then(function(t){var i=t.find(function(e){return e._id===n.user.paymentPlan}),a=e.allowedVersionCount;if(e.allowedVersionCount=i.allowedVersionCount,a>e.allowedVersionCount){if(e.screens.forEach(function(t){t.versions.length>e.allowedVersionCount&&(t.versions.length=e.allowedVersionCount)}),ra){var o=ra.versions.some(function(e){return e._id===sa._id});o||(Ke.classList.add("resourceView"),Ke.classList.remove("layerView"),sa=ra.versions[0],Mt.classList.remove("oldVersion"),Ds(ra),D.C("Displayed version is not available anymore.",document.querySelector("main"))),ra.versions.length===e.allowedVersionCount&&Mt.classList.contains("versionsShown")&&ns(ra)}}else a<e.allowedVersionCount&&(e.screens.forEach(function(e){e.totalVersionCount&&e.totalVersionCount>a&&delete e.totalVersionCount}),ra&&(!ra.totalVersionCount||ra.totalVersionCount>a)&&sr(ra).then(function(e){Mt.classList.contains("versionsShown")&&ns(e)}))}))}),t.bind("DeleteUser",function(t){Zeplin.user._id!==t.params.uid&&(e.removeUser(t.params.uid),lo())}),t.bind("CreateColor",function(e){Eu(e.body)}),t.bind("UpdateColor",function(e){Lu(e.params.cid,e.body)}),t.bind("DeleteColor",function(e){wu(e.params.cid)}),t.bind("UpdateScreen",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});Object.assign(n,t.body),"name"in t.body&&(ra===n&&(qo(),Fe.textContent=t.body.name,Fe.title=t.body.name),fl()),"description"in t.body&&ra===n&&($e.value=t.body.description)}),t.bind("UpdateSectionScreens",function(t){if(e.findSection(t.params.seid)){var n=t.body.screens.filter(function(t){return!!e.findScreen(t)});Bs(t.params.seid,n,t.body.index)}}),t.bind("UpdateSectionScreensOrder",function(t){var n=e.findScreenSection(t.body.screens[0]._id);n&&(t.body.screens.forEach(function(t){e.updateScreenOrder(n._id,t._id,t.to)}),Di.classList.contains("searching")||Di.querySelector('#sortOptions input[type="checkbox"]:checked')||fl())}),t.bind("UpdateScreensTags",function(t){t.body.screens.forEach(function(t){var n=e.screens.find(function(e){return e._id===t._id});if(n){switch(t.operation){case"add":n.tags=(n.tags||[]).concat(t.tags);break;case"remove":t.tags.forEach(function(e){n.tags.splice(n.tags.indexOf(e),1)})}ra===n&&(ts(ra),Ts()),On.classList.contains("hidden")||Yu(e.tags,Ku(On.dataset.sid).tags,Zn.value)}}),wr(),"dashboard"===ua?jl():fl()}),t.bind("DeleteScreen",function(t){var n=e.findScreenSection(t.params.sid);if(n){var i=e.removeScreen(n._id,t.params.sid);if(i&&(wr(),"dashboard"===ua?jl():fl(),ra===i)){var a=ur(t.params.uid,!0),o=a?a.user.username:"Anonymous";L.a({title:o+" deleted this screen",message:"You won't be able to access \""+i.name+'" from now on.'}),Oo(e.id,yl())}}}),t.bind("CreateSection",function(t){var n=Object.assign({},t.body);delete n.index,e.addSection(n,t.body.index),fl()}),t.bind("UpdateSectionsOrder",function(t){t.body.sections.forEach(function(t){e.updateSectionOrder(t._id,t.to)}),Di.classList.contains("searching")||Di.querySelector('#sortOptions input[type="checkbox"]:checked')||fl()}),t.bind("UpdateSection",function(t){var n=e.findSection(t.params.seid);n&&(Object.assign(n,t.body),fl())}),t.bind("DeleteSection",function(t){e.removeSection(t.params.seid),fl()}),t.bind("UpdateDot",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});if(n&&n.dots){var i=n.dots.find(function(e){return e._id===t.params.did}),a=document.querySelector(".dot[data-id='"+i._id+"']");if(Object.assign(i,t.body),"color"in t.body){var o=Ka[new P.a(t.body.color).hexBase()];la===i&&(Gr(Yt),Yt.classList.add(o)),a&&(Gr(a),a.classList.add(o),a.dataset.color=o)}"x"in t.body&&"y"in t.body&&a&&(Al(),cd(),a.addEventListener("transitionend",function e(){a.removeEventListener("transitionend",e),a.classList.remove("backToFuture")}),a.classList.add("backToFuture"),a.dataset.position=t.body.x<=.5?"left":"right",a.style.left="calc("+100*t.body.x+"% - 10px)",a.style.top="calc("+100*t.body.y+"% - 10px)"),"status"in t.body&&(la===i&&Yt.classList.contains(t.body.status)&&Pl(),a&&(Jr(a),a.classList.add(t.body.status))),gr(n.dots)}}),t.bind("DeleteDot",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});if(n&&n.dots){mu(n,t.params.did);var i=Vo(t.params.sid);if(i){var a=document.querySelector(".dot[data-id='"+t.params.did+"']");a&&(ba===a&&Pl(),a.remove()),gr(n.dots)}}}),t.bind("DeleteDotComment",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});if(n&&n.dots){var i,a=n.dots.find(function(e){return e._id===t.params.did});a&&1!==a.comments.length?(pu(a,t.params.cmid),i=document.querySelector(".comment[data-id='"+t.params.cmid+"']")):(mu(n,t.params.did),la===a&&Pl(),i=document.querySelector(".dot[data-id='"+t.params.did+"']")),i&&i.remove(),gr(n.dots)}}),t.bind("AuthSlack",Sd),t.bind("DeleteIntegration",function(t){if(e.removeIntegration("slacks",t.params.inid),e.integration.slacks.length){var n=Ki.querySelector(".integration[data-id='"+t.params.inid+"']");n&&n.remove()}else Ki.classList.add("hidden"),Pi.classList.remove("hidden")}),t.bind("CreateTextStyle",function(e){Mu(new B.a(e.body))}),t.bind("UpdateTextStyle",function(t){if(e.removeTextStyle(t.params.tsid),e.addTextStyle(t.body),"name"in t.body){var n=$l(t.params.tsid);n&&Jl(n,{name:t.body.name})}Cc(),jc(),Er()}),t.bind("DeleteTextStyle",function(e){gu(e.params.tsid)}),t.bind("UpdateProjectAccessibility",function(t){e.public=t.body.public,e.public&&au()}),t.bind("UpdateUserRole",function(t){e.changeUserRole(t.params.mid,t.body.role),lo(e.users),Eo(),Ts(),"pawn"!==a.role&&w.a("transition")}),t.bind("TransferOwnership",function(t){document.body.classList.toggle("organizationProject",!!t.params.oid),t.body.users.forEach(function(n){e.changeUserRole(n.user._id,n.role),n.user._id===a.user._id&&(Zeplin.user.paymentPlan=n.user.paymentPlan),n.user._id!==t.params.mid&&n.user._id!==t.params.uid||e.changeUserPaymentPlan(n.user._id,n.user.paymentPlan)}),lo(e.users),Eo(),t.params.oid?Fo(e.id).then(function(){"pawn"===a.role&&(o.transitionFinished&&e.screens.forEach(function(e){delete e.versions[0].snapshot.layers,delete e.versions[0].snapshot.assets}),"screen"===ua&&Ds(ra))}):(o&&"screen"===ua&&Ds(ra),w.a("transition"),o=null)}),t.bind("RemoveUserFromProject",n),t.bind("RemoveMemberFromOrganization",n),t.bind("CreateScreenV3",vd),t.bind("CreateScreenVersion",jd),t.bind("UpdateScreenVersionCommitColor",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});if(n){var i=n.versions.find(function(e){return e._id===t.params.vid});if(i&&(i.commit=i.commit||{},Object.assign(i.commit,t.body),ra===n&&Mt.classList.contains("versionsShown"))){var a=document.querySelector(".version[data-id='"+t.params.vid+"']");if(!a)return;var o=Ka[new P.a(i.commit.color).hexBase()];Gr(a),a.classList.add(o);var r=a.querySelector(".commitMessage");Gr(r),r.classList.add(o)}}}),t.bind("UpdateScreenVersionCommitMessage",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});if(n){var i=n.versions.find(function(e){return e._id===t.params.vid});if(i&&(i.commit=i.commit||{},Object.assign(i.commit,t.body),ra===n&&Mt.classList.contains("versionsShown"))){var a=document.querySelector(".version[data-id='"+t.params.vid+"']");if(!a)return;var o=Qo.get(a);o.value=i.commit.message}}}),t.bind("DeleteScreenVersion",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});if(n){var i=n.versions[0]._id;e.removeVersion(t.params.sid,t.params.vid),(!n.versions.length||n.versions.length<e.allowedVersionCount&&n.totalVersionCount>=e.allowedVersionCount?sr(n):Promise.resolve(n)).then(function(e){var a=Vo(t.params.sid);a&&i===t.params.vid&&D.x(a.querySelector(".screenImage"),n.versions[0].snapshot,"url"),ra===n&&(sa._id===t.params.vid&&(Ke.classList.add("resourceView"),Ke.classList.remove("layerView"),sa=e.versions[0],Ds(n,sa),D.C("Displayed version is not available anymore.",document.querySelector("main"))),Mt.classList.contains("versionsShown")?ns(e):ks(n))})}}),t.bind("CreateDotV2",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid});n&&n.dots&&(n.dots.push(t.body),ra===n&&Qr(t.body),gr(n.dots));var i=t.body.comments[0];t.params.uid!==Zeplin.user._id&&va.test(i.note)&&hu({title:i.author.username+" mentioned you",body:i.note,notifier:i.author,handler:function(){Io(D.I("project-screen",{url:{pid:t.params.pid,sid:t.params.sid},query:{did:t.body._id,cmid:i._id}}))}})}),t.bind("CreateDotCommentV2",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid}),i=t.params.uid!==Zeplin.user._id;if(n&&n.dots){var a=n.dots.find(function(e){return e._id===t.params.did});if(a){var o,r=a._id;a.comments.push(t.body),gr(n.dots),la===a&&(o=Jc(t.body,n._id,r)),i&&ra===n&&la===a&&(go(o),Uc(document.querySelector(".dot[data-id='"+r+"']")))}}i&&va.test(t.body.note)&&hu({title:t.body.author.username+" mentioned you",body:t.body.note,notifier:t.body.author,handler:function(){Io(D.I("project-screen",{url:{pid:t.params.pid,sid:t.params.sid},query:{did:t.params.did,cmid:t.body._id}}))}})}),t.bind("UpdateDotCommentNote",function(t){var n=e.screens.find(function(e){return e._id===t.params.sid}),i=t.params.uid!==Zeplin.user._id;if(n&&n.dots){var a=n.dots.find(function(e){return e._id===t.params.did});if(a){var o=a.comments.find(function(e){return e._id===t.params.cmid}),r=new Date(o.created),s=t.body.updated?new Date(t.body.updated):new Date;if(o.note=t.body.note,o.updated=s,gr(n.dots),i&&ra===n&&la===a){var l=document.querySelector(".comment[data-id='"+t.params.cmid+"']"),c=l.querySelector(".commentMirror");c.innerHTML=Kc(t.body.note),c.classList.toggle("jumboEmojis",lr(c,t.body.note)),l.querySelector(".commentEdited").setAttribute("datetime",s-r>3e5?s:""),go(l),Uc(document.querySelector(".dot[data-id='"+a._id+"']"))}}}if(i&&va.test(t.body.note)){var u=ur(t.params.uid,!0);if(!u)return;hu({title:u.user.username+" mentioned you",body:t.body.note,notifier:u.user,handler:function(){Io(D.I("project-screen",{url:{pid:t.params.pid,sid:t.params.sid},query:{did:t.params.did,cmid:t.params.cmid}}))}})}}),t.bind("UpdateProjectUpdated",function(t){e.id===t.params.pid&&(e.updated=t.body.updated)}),t.bind("RequestPaymentFail",function(e){var t={currentRole:a.role};Object.assign(t,e.params),e.params.oid||"owner"===a.role||(t.ownerEmail=e.body.email),E.d(t)}),t.bind("AddProjectExtension",function(t){yc(e,t.body._id,!1)}),t.bind("RemoveExtensionFromProject",function(t){le.a.removeExtension(e,t.params.eid,!0)})}(e),T.a&&function(){sd&&(T.a.ipcRenderer.removeAllListeners(sd.createScreen),T.a.ipcRenderer.removeAllListeners(sd.createVersion),T.a.ipcRenderer.removeAllListeners(sd.authSlack));if(!i||!i.id)return;e=i.id,sd={createScreen:"project:"+e+":createScreen",createVersion:"project:"+e+":createVersion",authSlack:"project:"+e+":authSlack"},T.a.ipcRenderer.on(sd.createScreen,function(){var e=arguments[arguments.length-1];if("string"==typeof e.body.latestVersion.creator){var t=ur(e.body.latestVersion.creator,!0);e.body.latestVersion.creator={_id:t.user._id,email:t.user.email,username:t.user.username,emotar:t.user.emotar,avatar:t.user.avatar}}if(e.body.latestVersion.commit=e.body.latestVersion.commit||{},"string"==typeof e.body.latestVersion.commit.author){var n=ur(e.body.latestVersion.commit.author,!0);e.body.latestVersion.commit.author={_id:n.user._id,email:n.user.email,username:n.user.username,emotar:n.user.emotar,avatar:n.user.avatar}}vd(e)}),T.a.ipcRenderer.on(sd.createVersion,function(){var e=arguments[arguments.length-1];if("string"==typeof e.body.creator){var t=ur(e.body.creator,!0);e.body.creator={_id:t.user._id,email:t.user.email,username:t.user.username,emotar:t.user.emotar,avatar:t.user.avatar}}if(e.body.commit=e.body.commit||{},"string"==typeof e.body.commit.author){var n=ur(e.body.commit.author,!0);e.body.commit.author={_id:n.user._id,email:n.user.email,username:n.user.username,emotar:n.user.emotar,avatar:n.user.avatar}}jd(e)}),T.a.ipcRenderer.on(sd.authSlack,Sd);var e}(),ra=null,la=null,ca=null,Rl(),ba=null,ya=null,Ma&&T.a.ipcRenderer.send("popout:menuitem:enabled",!1),document.body.dataset.projectType=e.type,x.b.get(na.pid,"showOptimizedSVG").then(function(e){It.checked=e,Ot.checked=e}),"android"!==e.type&&x.b.get(na.pid,"assetNamingConvention").then(function(e){Ai.querySelector("span").textContent=Ja[e],Ni.querySelector("span").textContent=Ja[e],document.querySelector("input[name='allAssetsNamingConvention'][value='"+e+"']").checked=!0,document.querySelector("input[name='assetNamingConvention'][value='"+e+"']").checked=!0}),Cc(),aa=!0,Fe.textContent=e.name,Fe.title=e.name,Se.value=e.name,we.textContent=E.b[e.type];if(_n.querySelector(".projectNaming").textContent={ios:'IOS developers usually prefer color names defined in "camel case", which looks like: brightRed',osx:'IOS developers usually prefer color names defined in "camel case", which looks like: brightRed',web:"Web developers usually use underscores or dashes while defining colors, which looks like: bright-red or bright_red",android:"Android developers define their color names using underscore, which look like: bright_red"}[e.type],b=function(e){var t={scope:"incoming-webhook,emoji:read,links:read,links:write",client_id:"2330702581.8730394641",redirect_uri:D.I("huggingSlack",{query:{pid:e.id}}),state:uo},n=[];for(var i in t)n.push(i+"="+encodeURIComponent(t[i]));return"https://slack.com/oauth/authorize?"+n.join("&")}(e),e.integration&&e.integration.slacks&&e.integration.slacks.length?(Bu(e.integration.slacks),wo()):(Ki.classList.add("hidden"),Pi.classList.remove("hidden")),Ji.addEventListener("click",function(t){t.stopPropagation(),vc(e.id)}),ko(e.density),wr(),ye.classList.remove("loading"),fl(),CSS.supports("grid-template-columns","repeat(auto-fill, 220px)")||hr(),Ye.innerHTML="",e.colors&&e.colors.length&&e.colors.forEach(Cr),e.textStyles&&e.textStyles.length&&Er(),x.b.get(na.pid,"projectInfoWidth").then(function(e){od(e,Jn),hl()}),x.b.get(na.pid,"generatorContainerWidth").then(function(e){od(e,Pt)}),x.b.get(na.pid,"rightSidebarWrapperWidth").then(function(e){od(e,Qn)}),x.b.get(na.pid,"versionsSidebarWrapperWidth").then(function(e){od(e,Gn),Gn.classList.add("collapsed")}),T.a&&T.a.features&&T.a.features.downloadAssets&&W.b(i.id,i.type),Eo(),o)"past_due"===o.subscriptionStatus&&E.d({oid:o._id,currentRole:a.role});else{var t=i.findOwner();"past_due"===t.user.subscriptionStatus&&E.d({currentRole:a.role,ownerEmail:t.user.email})}fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/integrations/slacks/emojis",{headers:Zeplin.headers}).then(function(e){if(e.ok)return e.json()}).catch(function(){}).then(function(e){e&&"emoji"in e&&J.a.addCustomEmojis(e.emoji)}).then(pd)}function xo(){var e;switch(i.type){case"android":e="android";break;case"ios":case"osx":e="iosx";break;case"web":default:e="web"}return e+"Density"}function ko(e){i.density=e,Le.textContent=e;var t=document.querySelector("input[name='"+xo()+"'][value='"+e+"']");t&&(t.checked=!0,t.dispatchEvent(new Event("change")))}function qo(){var e="";"dashboard"===ua?e="Dashboard - ":"styleguide"===ua?e="Styleguide - ":ra&&(e=ra.name+" - "),Ie.textContent=e+(i?i.name+" - ":"")+"Zeplin"}function To(){o?location.replace(D.I("organization-projects",{url:{oid:o._id}})):location.replace(D.I("projects"))}function _o(){var e;if(Ra)return Ua&&(e=JSON.parse(sessionStorage.getItem("deferredDialog")))&&sessionStorage.removeItem("deferredDialog"),void T.a.ipcRenderer.sendToHost("close-project-webview",o?D.I("organization-projects",{url:{oid:o._id}}):D.I("projects"),e);To()}function Io(e,t){switch((t=t||{}).navigationOperation){case"replace":za.history.replace(e,t);break;case"push":default:za.history.push(e,t)}}function Oo(e,t){t=t||{},Io(D.I("project-dashboard",{url:{pid:e},query:t}))}function Po(e){Io(D.I("project-styleguide",{url:{pid:e}}))}function Bo(e,t,n){Io(D.I("project-screen",{url:{pid:e,sid:t}}),n)}function Ao(){Al(),E.f("project-dashboard"),ua="dashboard",document.removeEventListener("keydown",Ll),document.removeEventListener("keyup",Cl),window.removeEventListener("blur",xl),document.addEventListener("keydown",Dl),oa=-2,ra=null,Ne.href=o?D.I("organization-projects",{url:{oid:o._id}}):D.I("projects"),Ne.querySelector("span").textContent="Projects",Be.dataset.selection="dashboard",Oe.checked=!0,fo(),vo(),Ju(),CSS.supports("grid-template-columns","repeat(auto-fill, 220px)")||(hr(),window.addEventListener("resize",fr)),window.addEventListener("resize",hl),!qs()&&Ma&&T.a.ipcRenderer.send("popout:menuitem:enabled",!1),Ts()}function No(){Al(),E.f("project-styleguide"),ua="styleguide",document.removeEventListener("keydown",Dl),document.removeEventListener("keydown",Ll),document.removeEventListener("keyup",Cl),window.removeEventListener("blur",xl),oa=-1,ra=null,Ne.href=o?D.I("organization-projects",{url:{oid:o._id}}):D.I("projects"),Ne.querySelector("span").textContent="Projects",Be.dataset.selection="styleguide",Pe.checked=!0,ho(),CSS.supports("grid-template-columns","repeat(auto-fill, 220px)")||(clearTimeout(bo),window.removeEventListener("resize",fr)),window.removeEventListener("resize",hl),!qs()&&Ma&&T.a.ipcRenderer.send("popout:menuitem:enabled",!1),Ts()}function Ro(e){if(e){var t=ra.dots.find(function(t){return t._id===e});if(t)return t.status}}function Uo(e){if("apiData"in Zeplin&&e in Zeplin.apiData){var t=Zeplin.apiData[e];return delete Zeplin.apiData[e],t}}function Fo(e){var t,n=Uo("projectOrganization");if(n)t=Promise.resolve(n);else{var r=N.a.mark();t=fetch(Zeplin.urls.baseURL+"/projects/"+e+"/organization",{method:"GET",headers:Zeplin.headers}).then(function(e){if(N.a.measure("api.getProjectOrganization",{start:r,minTime:50,labels:{status:e.status}}),e.ok)return e.json()})}return t.then(function(e){if(o=e)return o.transitionFinished=-1===e.transitionLeft,Ra&&T.a.ipcRenderer.send("preload-url",Ne.href=D.I("organization-projects",{url:{oid:o._id}})),"screen"!==ua&&(Ne.href=D.I("organization-projects",{url:{oid:o._id}})),"pawn"!==a.role||o.transitionFinished||function(e){if("dismissed"===sessionStorage.getItem("transitionBannerStatus"+i.id))return;w.b({content:"This project now belongs to an organization but looks like you're not a member yet. For "+(1===e?"a day":e+" days")+", you'll be able to access resources but if you're a designer or a developer, <a href='#'>request an invite</a> from admins.",type:"info",contentType:"html",group:"transition",closeCallback:function(){sessionStorage.setItem("transitionBannerStatus"+i.id,"dismissed")},bodyCallbacks:{a:function(e){e.preventDefault(),Ls(o._id,document.querySelector("main")),sessionStorage.setItem("transitionBannerStatus"+i.id,"dismissed"),w.a("transition")}}})}(Math.ceil(e.transitionLeft/1e3/60/60/24)),"pawn"!==a.role?function(e){var t=Uo("organizationMembers");if(t)return Promise.resolve(t);var n=N.a.mark();return fetch(Zeplin.urls.baseURL+"/organizations/"+e+"/members",{headers:Zeplin.headers}).then(function(e){return N.a.measure("api.getOrganizationMembers",{start:n,minTime:50,labels:{status:e.status}}),e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})})}(e._id).then(function(e){Object.assign(o,e)}):void 0}).catch(function(){})}function Mo(e){k.b(e,{clientErrorHandler:function(){L.a({title:e.title,message:e.message},{defer:!0}),_o()}})}function zo(e){ja||Kd();var t,n=Uo("project");if(n)t=Promise.resolve(n);else{var r=N.a.mark();t=fetch(Zeplin.urls.baseURL+"/v2/projects/"+e,{headers:Zeplin.headers}).then(function(e){return N.a.measure("api.getProject",{start:r,minTime:50,labels:{status:e.status}}),e.json().then(function(t){if(!e.ok)throw k.a(e.status,t);return 206===e.status&&(t.partial=!0),t})})}return t.then(t=>{if(function(e){const t="private-project@"+e;f!==t&&(f&&E.c.unsubscribe(f),f=t,E.c.subscribe(f))}(t._id),!t.partial)return ue.i(e).then(e=>(function(e){var t;i=new O.a(e),a=i.findUser(Zeplin.user._id),document.body.classList.toggle("organizationProject",D.r(i)),o=null,D.r(i)?t=Fo(i.id):(t=Promise.resolve(),Ra&&T.a.ipcRenderer.send("preload-url",Ne.href=D.I("projects")));return S=le.b.addListener(Co),Promise.all([t,E.a(),Lo(i)]).then(function(e){var t;Do(i),t=D.r(i)?o.paymentPlan:i.findOwner().user.paymentPlan;var n=e[1].find(function(e){return e._id===t});i.allowedVersionCount=n.allowedVersionCount,q.b([i.id],o&&"pawn"!==a.role&&o._id),Jn.addEventListener("usersInvited",Zo),function(e){var t=new URL(e.url);ou(t.toString()).then(function(t){var n=new URL(t);e.shortUrl=t,Te.textContent=n.host+n.pathname,Te.classList.remove("fetching")}).catch(function(){e.shortUrl=t.toString(),Te.textContent=t.host+t.pathname,Te.classList.remove("fetching")})}(i),i.public&&au(),ja=!1})})(Object.assign(t,e))).catch(e=>{ja?(ja=!1,navigator.onLine&&location.reload()):Mo(e)}).then(()=>{Ra?(Fa=!1,T.a.ipcRenderer.sendToHost("active")):Xd()},()=>{Ra?(Fa=!1,T.a.ipcRenderer.sendToHost("active")):Xd()});Wa=t,i=null,function(){Be.dataset.selection="preview",ua="preview",Ie.textContent="Zeplin - Project Preview",Fe.textContent=Wa.name+" Preview",Fe.title=Wa.name+" Preview",Fo(Wa._id),Ra&&Ne.addEventListener("click",em);Xd(),function(){const e=E.c.channel(f);e.bind("UpdateProjectName",Gd.onNameChange),e.bind("ArchiveProject",Gd.onProjectNotAvailable),e.bind("DeleteProject",Gd.onProjectNotAvailable),e.bind("InviteUser",Gd.onProjectChannelInviteUser),e.bind("CreateUser",Gd.onCreateUser),e.bind("UpdateUserEmotar",Gd.onUpdateUserProfile),e.bind("UpdateUserAvatar",Gd.onUpdateUserProfile),e.bind("RemoveUserFromProject",Gd.onRemoveUserFromProject),e.bind("DeleteUser",Gd.onDeleteUser),e.bind("UpdateProjectDensity",Gd.onUpdateProjectDensity),e.bind("CreateScreenV3",Gd.onCreateScreenV3),e.bind("CreateScreenVersion",Gd.onCreateScreenVersion),e.bind("DeleteScreen",Gd.onDeleteScreen),e.bind("UpdateSectionScreensOrder",Gd.onUpdateSectionScreensOrder)}(),Va.render({projectData:Wa,onJoinClick:Qd,requiredMinimumPadding:96,defaultPadding:108,hideJoinButton:!1,headerSticky:!0})}()}).catch(Mo)}function Zo(e){e.detail.users.forEach(function(e){i.addUser(e)}),lo(i.users)}function Ho(e){return zi.querySelector(".screen[data-view-index='"+e+"']")}function Vo(e){return zi.querySelector(".screen[data-id='"+e+"']")}function Wo(e,t){var n=(t=t||{}).padding||0,i=t.unit||0;return e*fa+n+i}function Yo(e,t){if(void 0===e||null===e)return"";if("%"===t)return D.y(100*e,1)+"%";var n="text"===t?i.textDimensionSuffix:i.dimensionSuffix;return D.y(e/i.densityDivisor,1)+n}function Ko(e,t){return 100*e/t+"%"}function Xo(){Ta.stop(),Be.classList.remove("online"),ut.classList.remove("loading")}function $o(e,t){if(!navigator.onLine)return Be.className="offline",Promise.resolve();if(!e||!t)return Promise.resolve();var n=N.a.mark();return fetch(Zeplin.urls.baseURL+"/v3/projects/"+i.id+"/screens/"+e._id+"/versions/"+t._id+"/snapshot",{headers:Zeplin.headers}).then(function(e){return N.a.measure("api.getSnapshot",{start:n,minTime:50,labels:{status:e.status}}),e.json().then(function(t){if(e.ok)return"string"==typeof t.snapshot?(n=t.snapshot,i=N.a.mark(),fetch(n).then(function(e){return N.a.measure("cdn.getSnapshot",{start:i,minTime:50,labels:{status:e.status}}),e.json().then(function(t){if(e.ok)return t.layers=t.layers||[],t;throw k.a(e.status)})})):t.snapshot;var n,i;throw k.a(e.status,t)})}).then(function(n){return n.layers.unshift(function(e,t){var n={_id:t._id,name:e,opacity:1,borderRadius:0,blendMode:"normal",rect:{x:0,y:0,width:t.width,height:t.height},type:"shape",fills:[],borders:[],shadows:[]};t.backgroundColor&&n.fills.push({fillType:"color",color:t.backgroundColor});return n}(e.name,n)),function e(t,n){for(var i=0;i<t.length;i++){var a=t[i];a.absoluteRect={x:a.rect.x+n.x,y:a.rect.y+n.y,width:a.rect.width,height:a.rect.height},"group"===a.type&&(Array.isArray(a.layers)?e(a.layers,a.absoluteRect):a.layers=[])}}(n.layers,{x:0,y:0}),Object.assign(t.snapshot,n)}).catch(function(e){return k.b(e),t.snapshot})}function Jo(e){e instanceof Date||(e=new Date(e));var t=new Date;if(t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()){if(t.getDate()===e.getDate())return"today";if(t.getDate()-e.getDate()==1)return"yesterday"}return D.h(e,{year:"numeric",month:"long",day:"numeric"})}Array.from(document.querySelectorAll("input[name='androidDensity']")).forEach(function(e){e.addEventListener("change",function(e){var t=document.querySelector("input[name='androidTabletDensity'][value='"+e.target.value+"']");t?t.checked=!0:(t=document.querySelector("input[name='androidTabletDensity']:checked"))&&(t.checked=!1)})}),Array.from(document.querySelectorAll("input[name='androidTabletDensity']")).forEach(function(e){e.addEventListener("change",function(e){document.querySelector("input[name='androidDensity'][value='"+e.target.value+"']").checked=!0})}),Ce.addEventListener("click",function(e){D.v.canUpdateProject(a)&&De.showModal()}),xe.addEventListener("click",function(){var e=document.querySelector("input[name='"+xo()+"']:checked");e&&e.value!==i.density&&function(e){if(D.v.canUpdateProject(a)){var t=i.density;Le.textContent=e,fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/density",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({density:e})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){bu(e)}).catch(function(e){Le.textContent=t,k.b(e)})}}(e.value)}),De.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&qe.classList.add("hidden")}),De.addEventListener("keydown",function(e){switch(e.keyCode){case Zeplin.KEY_CODE.ESC:qe.classList.contains("hidden")||(e.preventDefault(),e.stopPropagation(),qe.classList.add("hidden"));break;case Zeplin.KEY_CODE.SPACE:var t=De.querySelector("label:focus");t&&t.click();break;case Zeplin.KEY_CODE.ENTER:xe.click()}}),ke.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&(e.stopPropagation(),e.preventDefault(),qe.classList.toggle("hidden"))}),qe.addEventListener("click",function(e){e.stopPropagation()}),Array.from(document.querySelectorAll(".projectTab")).forEach(function(e){e.addEventListener("change",function(e){switch(e.target.value){case"styleguide":Po(i.id);break;case"dashboard":default:Oo(i.id,yl())}})}),ze.addEventListener("click",function(e){e.stopPropagation(),q.c()&&(yd(),q.e(Jn,i.id,i.users,o&&"pawn"!==a.role),function(){var e=(Ze.getBoundingClientRect().height-Ad)/2;qd=Bd-e>Id&&Bd+Ad+e<window.innerHeight-Od?e:Nd;Rd()}(),$n.addEventListener("scroll",Rd),Jn.addEventListener("listRefreshed",Ud),mixpanel.webapp.track("Showed invite user pop up",{type:"project"}))});var Go,Qo=new WeakMap,er=document.querySelector(".versions");function tr(e,t,n){var i=er.querySelector(".version.editing");if(i&&Qo.get(i).cancelEditing(),Mt.classList.contains("versionsShown")){var a=document.querySelector(".version.selected");a&&a.classList.remove("selected");var o=document.querySelector(".version[data-id='"+t._id+"']");o&&o.classList.add("selected"),o&&n&&n.scrollIfNecessary&&D.z(o)}Ds(e,sa=t),document.querySelector(".oldVersionWarning time").textContent=Jo(t.created),Mt.classList.toggle("oldVersion",e.versions[0]._id!==sa._id)}function nr(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&Go&&(e.target.closest(".openInFolder")?T.a.ipcRenderer.send("show-item-in-folder",Go):e.target.closest(".openInPhotoshop")&&T.a.ipcRenderer.send("open-item",Go))}var ir=document.getElementById("versionTemplate"),ar=document.getElementById("nodeColorChooserTemplate");function or(e,t,n,o){t.commit=t.commit||{},t.commit.message=t.commit.message||"",t.commit.color=t.commit.color||Xa.yellow;var r,s,l=new Date(e.created),c=new Date(t.created),u=l.getDate()!==c.getDate()||l.getMonth()!==c.getMonth()||l.getFullYear()!==c.getFullYear();u&&er.appendChild((r=c,(s=document.importNode(rr.content,!0)).querySelector(".versionHeaderText").textContent=Jo(r),s));var d=document.importNode(ir.content,!0),m=d.querySelector(".version"),p=m.querySelector(".versionNodeDot"),g=m.querySelector(".commitMessage"),h=new I.a(g,Yc);Qo.set(m,h),m.dataset.id=t._id;var f,b=Ka[new P.a(t.commit.color).hexBase()];return m.classList.add(b),g.classList.add(b),!u&&e.creator&&t.creator&&e.creator._id===t.creator._id?m.classList.add("sameCreator"):(D.B(m.querySelector(".versionAuthorImage"),t.creator),m.querySelector(".versionAuthorName").textContent=t.creator?t.creator.username:"Anonymous"),m.classList.toggle("canDelete",D.v.canManageScreens(a)),m.classList.toggle("versionOwner",t.creator&&t.creator._id===a.user._id),f=t.creator&&t.creator._id===Zeplin.user._id?1===o.length?"Got any notes?":"What has changed in this version?":"No commit message yet.",h.placeholder=f,t.commit.message?h.value=t.commit.message:m.classList.add("empty"),m.querySelector(".versionMetadata time").textContent=D.h(c,{hour:"numeric",minute:"numeric"}),p.addEventListener("mouseenter",function(){if(!Gn.classList.contains("collapsed")&&"pawn"!==a.role){var e=document.importNode(ar.content,!0),n=e.querySelector(".nodeColorChooser");n.classList.add(b),n.addEventListener("mouseleave",function(){n.addEventListener("transitionend",function(e){n.remove()})}),n.addEventListener("click",function(e){if(e.stopPropagation(),e.target.classList.contains("nodeColor")&&b!==e.target.dataset.color){var o=Xa[e.target.dataset.color];Gr(n),n.classList.add(o.name),Gr(m),m.classList.add(o.name),Gr(g),g.classList.add(o.name),function(e,t,n){if("pawn"===a.role)return Promise.reject(k.a(403,{title:"You’re not allowed to do this",message:"Please contact the organization admins."}));var o={color:n};return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+e._id+"/versions/"+t._id+"/commit/color",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(o)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){return mixpanel.webapp.track("Updated version color"),Object.assign(t.commit,o)})}(ra,t,o).then(function(e){b=e.color.name}).catch(function(e){var t=Xa[b];Gr(n),n.classList.add(t.name),Gr(m),m.classList.add(t.name),Gr(g),g.classList.add(t.name),k.b(e)})}}),p.appendChild(e)}}),m.addEventListener("click",function(){m.classList.contains("selected")||tr(ra,t)}),g.addEventListener("autocomplete",function(){var e=Y.manageSuggestedEmojis(g.querySelector("textarea"),g.querySelector(".mirror"));e&&(e.style.top=g.getBoundingClientRect().top+g.offsetHeight-90+"px",m.appendChild(e),Y.open())}),g.addEventListener("submit",function(){var e=h.value,n=Y.formatEmojiString(h.value.trim(),!0);h.value=n,m.classList.remove("editing"),Y.close(),t.commit.message!==n&&function(e,t,n){if(!D.v.canManageScreens(a))return Promise.reject(k.a(403,{title:"You’re not allowed to do this",message:"Please contact the organization admins."}));if(!t.creator||t.creator._id!==a.user._id)return Promise.reject(k.a(403,{title:"You can’t edit this commit",message:"You can only edit your own commits."}));var o={message:n};return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+e._id+"/versions/"+t._id+"/commit/message",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(o)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){return mixpanel.webapp.track("Updated version commit message"),Object.assign(t.commit,o)})}(ra,t,n).then(function(e){m.classList.toggle("empty",!n)}).catch(function(t){h.value=e,k.b(t,{clientErrorDialogCallback:function(){h.cancelEditing()},serverErrorDialogCallback:function(){h.startEditing()}})})}),g.addEventListener("cancel",function(){m.classList.remove("editing")}),Array.from(m.querySelectorAll(".commitMessageEditButton, .enterCommitMessageButton")).forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation(),tr(ra,t),m.classList.add("editing"),h.startEditing()})}),m.querySelector(".commitDeleteButton").addEventListener("click",function(e){e.stopPropagation(),1===ra.totalVersionCount?L.a({title:'Delete  "'+ra.name+'"?',message:"Deleted screens cannot be restored.",done:{name:"DELETE",cb:function(){Ou(ra._id),Oo(i.id,yl())}},cancel:{name:"CANCEL"}}):L.a({title:"Delete version?",message:"Deleted versions cannot be restored.",done:{name:"DELETE",cb:function(){var e,n,o=ra.versions[0]._id;(e=ra,n=t,D.v.canManageScreens(a)?fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+e._id+"/versions/"+n._id,{method:"DELETE",headers:Zeplin.headers}).then(function(){return mixpanel.webapp.track("Deleted version"),i.removeVersion(e._id,n._id)}):Promise.reject(k.a(403,{title:"You’re not allowed to do this",message:"Please contact the organization admins."}))).then(function(){return ra.versions.length<i.allowedVersionCount&&ra.totalVersionCount>=i.allowedVersionCount?sr(ra):ra}).then(function(){var e=ra.versions[0];o===t._id&&D.x(Vo(ra._id).querySelector(".screenImage"),e.snapshot,"url"),sa._id===t._id&&(Ke.classList.add("resourceView"),Ke.classList.remove("layerView"),Ds(ra,sa=e)),ns(ra)}).catch(k.b)}},cancel:{name:"CANCEL"}})}),er.appendChild(d),t}er.addEventListener("click",function(e){e.stopPropagation()});var rr=document.getElementById("versionHeaderTemplate");function sr(e){Gn.classList.add("loading");var t=Uo("versions");return(t?Promise.resolve(t):fetch(Zeplin.urls.baseURL+"/v2/projects/"+i.id+"/screens/"+e._id+"/versions",{headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})})).then(function(t){return e.versions.forEach(function(e){if("layers"in e.snapshot){var n=t.versions.find(function(t){return e._id===t._id});n&&Object.assign(n.snapshot,e.snapshot)}}),Object.assign(e,t)}).catch(function(t){return e})}function lr(e,t){var n=Y.replace(t.replace(D.e,""),!1,!0).trim();return(!n||"️"===n)&&(e.childElementCount>0&&e.childElementCount<=5)}function cr(e,t,n){var i,a=t.slice(0,t.length-n);return i=n===t.length?e.comments.length-2>1?e.comments.length-2+" more replies":"1 more reply":n>0?(i=(i=a.join(", "))?i+" and ":i)+n+" more also replied":(i=(i=a.slice(0,a.length-1).join(", "))?i+" and ":i)+a[a.length-1]+" also replied"}function ur(e,t){var n=i.findUser(e);return!n&&t&&o&&o.members?o.members.find(function(t){return t.user._id===e}):n}function dr(e){var t=document.importNode(mi.content,!0),n=t.querySelector(".dotListing");n.dataset.did=e._id,n.classList.add(Ka[new P.a(e.color).hexBase()]),n.classList.toggle("hasOtherReplies",e.comments&&e.comments.length>2),n.classList.toggle("hasLastReply",e.comments&&e.comments.length>1);var i=e.comments[0],a=e.comments[e.comments.length-1];D.B(t.querySelector(".avatarOfAuthor"),i.author),t.querySelector(".author").textContent=i.author?i.author.username:"Anonymous",t.querySelector("time").setAttribute("datetime",mr(e,0)),t.querySelector(".dotNumber").textContent=e.name;var o,r,s=t.querySelector(".commentContent");if(s.innerHTML=Kc(i.note),s.classList.toggle("jumboEmojis",lr(s,i.note)),e.comments.length>2&&((o=e.comments.slice(1,-1).filter(function(e){return!(i.author&&i.author._id===e.author._id||a.author&&a.author._id===e.author._id)}).map(function(e){return e.author})).length?(o.forEach(function(e,n){var i=document.importNode(fi.content,!0);i.querySelector(".avatarFrame").style.left=8*n+"px",D.B(i.querySelector(".avatarOfOtherReply"),e),t.querySelector(".avatarsOfOtherReplies").appendChild(i)}),r=8*((o=o.map(function(e){return e?e.username:"Anonymous"})).length-1)+16):(r=0,t.querySelector(".avatarsOfOtherReplies").classList.add("hidden")),t.querySelector(".avatarsOfOtherReplies").style.width=r+"px"),e.comments.length>1){var l=t.querySelector(".comment:last-child");n.dataset.cmid=a._id,D.B(l.querySelector(".avatarOfAuthor"),a.author),l.querySelector(".author").textContent=a.author?a.author.username:"Anonymous",l.querySelector("time").setAttribute("datetime",mr(e));var c=l.querySelector(".commentContent");c.innerHTML=Kc(a.note),c.classList.toggle("jumboEmojis",lr(c,a.note))}pi.appendChild(t);var u=pi.lastElementChild.querySelector(".otherRepliesAuthors");if(o&&o.length){var d=o.length;if((o=o.filter(function(e){return"Anonymous"!==e})).length){var m=d-o.length;if(m)for(var p=0;p<m;p++)o.push("Anonymous");var g=document.createElement("canvas").getContext("2d");g.font="italic 12px roboto";for(var h=Ke.offsetWidth-30-r,f=cr(e,o,m);g.measureText(f).width>h&&m<=o.length;)f=cr(e,o,++m);u.textContent=f}else e.comments.length-2>1?u.textContent=e.comments.length-2+" more replies":u.textContent="1 more reply"}else o&&!o.length&&(e.comments.length-2>1?u.textContent=e.comments.length-2+" more replies":u.textContent="1 more reply")}function mr(e,t){t=void 0!==t?t:e.comments.length-1;var n=e.comments[t],i=new Date(n.updated),a=new Date(n.created);return i-a>3e5?i:a}var pr={open:"noOpenDots",resolved:"noResolvedDots"};function gr(e){var t=Dc(),n=!e.length;hi.classList.toggle("noDots",n),e=e?e.filter(function(e){return e.status===t}):[],hi.classList.remove("noOpenDots","noResolvedDots"),hi.classList.toggle(pr[t],!n&&!e.length),hi.dataset.statusFilter=t,gi.querySelector("span").textContent=e.length,gi.classList.toggle("multiple",e.length>1),pi.innerHTML="",e.sort(function(e,t){var n=mr(e),i=mr(t);return n>i?-1:i>n?1:0}),e.forEach(dr),hi.classList.remove("loading")}function hr(){Array.from(zi.querySelectorAll(".screenGrid")).forEach(function(e){e.style.width=244*Math.floor(fe.clientWidth/244)+"px"}),bo=setTimeout(hr,1e3),hl()}function fr(){clearTimeout(bo),requestAnimationFrame(hr)}pi.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT&&"a"!==e.target.tagName.toLowerCase()){e.stopPropagation();var t=e.target.closest(".dotListing");Yl(t.dataset.did,t.dataset.cmid)}}),window.requestIdleCallback=window.requestIdleCallback||function(e,t){var n=4;return t&&"timeout"in t&&(n=t.timeout),setTimeout(e,n)},window.cancelIdleCallback=window.cancelIdleCallback||clearTimeout;var br={},yr=new IntersectionObserver(function(e,t){e.forEach(function(e){var n=e.target;if(0===e.intersectionRatio)return cancelIdleCallback(br[n.dataset.id]),void delete br[n.dataset.id];var a=i.findScreen(n.dataset.id);br[n.dataset.id]=requestIdleCallback(function(){t.unobserve(n),delete br[n.dataset.id],D.x(n.querySelector(".screenImage"),a.versions[0].snapshot,"url")},{timeout:300})})},{root:fe,threshold:[0,.01]}),vr=document.getElementById("screenTemplate");function jr(){Array.from(zi.querySelectorAll(".screenName")).forEach(function(e){e.parentNode.querySelector(".screenNameMirror").textContent=e.value})}var Sr=document.getElementById("textStyleTemplate");function Er(){if(i.textStyles&&i.textStyles.length){var e=!1;En.innerHTML="";for(var t=0;t<i.textStyles.length;t++){var n=document.importNode(Sr.content,!0),o=n.querySelector(".font"),r=n.querySelector(".styleName"),s=i.textStyles[t];o.dataset.id=s.id,o.dataset.index=t,r.value=s.name,r.style.fontSize=s.scaledFontSize+"px",r.style.fontWeight=s.fontWeight,r.style.fontStyle=s.fontStyle,r.tabIndex=t+1;var l=s.fontStretch.split("-"),c=D.H(s.weightText)+("normal"!==s.fontStyle?" "+D.H(s.fontStyle):"");if(l="normal"!==s.fontStretch?" "+D.H(l[0])+(l[1]||""):"",n.querySelector(".style").textContent=s.fontFamily+l+", "+c+", "+Yo(s.fontSize,"text"),s.color){var u=i.findColorEqual(s.color);n.querySelector(".color").textContent=u?"#"+u.name:s.color.toPlatformString(i.type),n.querySelector(".colorPreview").style.backgroundColor=s.color.toCSS()}else n.querySelector(".colorContainer").classList.add("hidden");var d,m=[];if(s.textAlign&&"left"!==s.textAlign&&m.push(D.H(s.textAlign)),s.lineHeight&&m.push("Line height: "+Yo(s.lineHeight,"text")),"number"==typeof s.letterSpacing)d="android"===i.type?D.y(s.letterSpacing/i.densityDivisor,2):Yo(s.letterSpacing,"text"),m.push("Letter spacing: "+d);n.querySelector(".subInfo").textContent=m.join(", "),e=e||!!m.length;var p=D.v.canManageTextStyles(a);r.readOnly=!p,p?(r.removeAttribute("data-tooltip"),r.removeAttribute("data-tooltip-type")):"pawn"===a.role?(r.dataset.tooltip="Only organization members can edit text styles.",r.dataset.tooltipType="text"):(r.dataset.tooltip=oo(a,"edit text styles."),r.dataset.tooltipType="html"),En.appendChild(n)}En.classList.toggle("hasAdditionalProp",e)}}function wr(){var e=Is(),t=Os()||"untagged"in na;if(ye.innerHTML="",i.screens&&i.screens.length&&(i.tags.forEach(function(t){var n=document.createElement("div");n.classList.add("tag"),n.classList.toggle("selected",-1!==e.indexOf(t)),n.dataset.tag=D.f(t),n.textContent=t,ye.appendChild(n)}),ye.childElementCount)){var n=document.createElement("div");n.classList.add("tag","untagged"),t&&n.classList.add("selected"),n.textContent="Untagged",ye.appendChild(n)}}var Lr=document.getElementById("guidelineColorTemplate");function Cr(e){var t=document.importNode(Lr.content,!0),n=t.querySelector(".color");n.dataset.id=e.id,t.querySelector(".colorPreview").style.backgroundColor=e.toCSS(),t.querySelector(".colorName").value=e.name,t.querySelector(".colorHex").value=e.hexBase(),t.querySelector(".colorAlpha").value=Math.round(100*e.a),t.querySelector(".colorRGB").textContent=e.toRGBAString();var i=D.v.canManageColors(a);t.querySelector(".colorName").readOnly=!i,t.querySelector(".colorHex").readOnly=!i,t.querySelector(".colorAlpha").readOnly=!i,i?(n.removeAttribute("data-tooltip"),n.removeAttribute("data-tooltip-type")):"pawn"===a.role?(n.dataset.tooltip="Only organization members can edit colors.",n.dataset.tooltipType="text"):(n.dataset.tooltip=oo(a,"edit colors."),n.dataset.tooltipType="html"),Ye.appendChild(t)}var Dr=document.getElementById("colorTemplate");function xr(e,t){var n=new P.a(e),o=document.importNode(Dr.content,!0),r=o.querySelector(".color"),s=r.querySelector(".addColor"),l=i.findColorEqual(n);l&&(r.classList.add("added"),r.dataset.id=l.id,r.querySelector(".colorName").value="#"+l.name),r.dataset.color=n.toHexString(),r.dataset.rgbcolor=JSON.stringify(e),r.querySelector(".colorPreview").style.backgroundColor=n.toCSS();var c=D.v.canManageColors(a);r.querySelector(".colorName").readOnly=!c,s.classList.toggle("disabled",!c),jo(s,!!l),r.querySelector(".colorValue").textContent=n.toPlatformString(i.type),t.appendChild(o)}function kr(e,t){var n=document.createElement("div");n.classList.add("gradient"),e.colorStops.forEach(function(e){xr(e.color,n)}),t.appendChild(n)}var qr=document.getElementById("layerShadowTemplate");function Tr(e){var t=document.importNode(qr.content,!0);t.querySelector(".shadowType").textContent=e.type,t.querySelector(".shadowOffsetX").textContent=Yo(e.offsetX),t.querySelector(".shadowOffsetY").textContent=Yo(e.offsetY),t.querySelector(".shadowBlurRadius").textContent=Yo(e.blurRadius),t.querySelector(".shadowSpread").textContent=Yo(e.spread),t.querySelector(".shadowBlurSpread").classList.toggle("hidden",!e.blurRadius&&!e.spread),Lt.appendChild(t),xr(e.color,Lt)}function _r(e,t){switch(e.format){case"jpg":case"png":return Vr(e,t)+("1x"===e.density?"":"@"+e.density);case"pdf":case"svg":return Vr(e,t)}}function Ir(e){return("svg"===e.format?x.b.get(i.id,"showOptimizedSVG"):Promise.resolve(!1)).then(function(t){return t&&Object.assign(e,e.optimized),e.url}).then(fetch).then(function(e){return e.arrayBuffer()}).then(function(t){return Object.assign({data:t},e)})}function Or(e,t){return e.contents.filter(function(e){return e.format===t}).map(function(t){return Object.assign({layerName:e.layerName,displayName:e.displayName},t)})}function Pr(e,t){var n;if("all"===e)n=[].concat.apply([],sa.snapshot.assets.map(function(e){return Or(e,t)}));else{var i=sa.snapshot.assets.find(function(t){return t._id===e});if(!i)return Promise.reject("Asset with id "+e+" not found.");n=Or(i,t)}return Promise.all(n.map(Ir))}function Br(e,t){t=t||function(e){return e.displayName};var n={},i=new M.a;return e.forEach(function(e){var a=t(e)+e.format;a in n||(n[a]=0);var o=++n[a];o>1&&((e=Object.assign({},e)).displayName+="_"+o,e.layerName+="_"+o),i.file(t(e)+"."+e.format,e.data)}),i}function Ar(e){var t=document.createElement("a");t.href=e.data,t.download=e.name||"assets.zip",t.classList.add("hidden"),document.body.appendChild(t),t.addEventListener("click",function(n){n.stopPropagation(),setTimeout(function(){URL.revokeObjectURL(e.data)},1500),t.remove()}),t.click()}function Nr(e,t,n){W.a({projectId:i.id,projectType:i.type,format:t,assets:e,namingConvention:n})}function Rr(e){if(document.body.classList.contains("canDownload")&&e.button===Zeplin.MOUSE_BUTTON.LEFT&&e.target.classList.contains("exportAssets")){e.stopPropagation();var t,n=e.target.parentElement.dataset.format,a=e.target.parentElement.dataset.aid;if(T.a&&T.a.features&&T.a.features.downloadAssets){var o;if(0===(o="all"===a?sa.snapshot.assets:[sa.snapshot.assets.find(function(e){return e._id===a})]).length)return;"android"===i.type?x.b.get(na.pid,"androidResFolderReminderSeen").then(function(e){e?Nr(o,n):(x.b.set(na.pid,"androidResFolderReminderSeen",!0),Fi.addEventListener("click",function(e){e.stopPropagation(),Nr(o,n)}),Ui.showModal())}):x.b.get(na.pid,"assetNamingConvention").then(function(e){Nr(o,n,e)})}else{switch(i.type){case"android":if("svg"!==n){t=function(e,t){var n;return Pr(e,t).then(function(t){return n="all"===e?"assets_"+ra.name:t[0].displayName,Br(t,function(e){return"drawable-"+e.density+"/"+e.displayName})}).then(function(e){return e.generateAsync({type:"blob"})}).then(function(e){return{data:URL.createObjectURL(e),name:n+"_"+(new Date).toISOString().substr(0,10)+".zip"}})}(a,n);break}case"ios":case"osx":case"web":default:t=function(e,t){var n;return Promise.all([Pr(e,t),x.b.get(na.pid,"assetNamingConvention")]).then(function(i){var a=i[0],o=i[1];if(1===a.length){var r=a[0];return n=_r(r,o)+"."+r.format,new Blob([r.data],{type:Ya[t]})}var s=(new Date).toISOString().substr(0,10),l=Br(a,function(e){return _r(e,o)});return n=("all"===e?"assets_"+ra.name:Vr(a[0],o))+"_"+s+".zip",l.generateAsync({type:"blob"})}).then(function(e){return{data:URL.createObjectURL(e),name:n}})}(a,n)}t.then(Ar)}}}function Ur(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){if(e.target.classList.contains("exportAssets"))return Rr(e);var t=e.target.closest(".asset");if(t){var n=t.nextElementSibling;n.style.height=t.classList.contains("expanded")?"0":Array.from(n.children).reduce(function(e,t){return e+t.getBoundingClientRect().height},0)+"px",t.classList.toggle("expanded")}}}function Fr(e){return new Promise(function(t,n){var a=document.createElement("img"),o=document.createElement("canvas").getContext("2d");a.addEventListener("load",function(){o.drawImage(a,0,0);for(var e,n,r,s=o.getImageData(0,0,a.width,a.height).data,l="light",c=0;c<s.length;c+=4)if(!(s[c+3]<45)&&(s[c]<"210"||s[c+1]<"210"||s[c+2]<"210")){l="dark";break}t({size:(e=a.width,n=a.height,r=i.dimensionSuffix,void 0===e||void 0===n?"":D.y(e,1)+"×"+D.y(n,1)+r),lightness:l})}),a.addEventListener("error",function(e){n(e)}),a.crossOrigin="anonymous",a.src=e.url})}function Mr(e){return e.find(function(e){return e.density===i.baseDensity&&"png"===e.format})}function zr(e){return e.filter(function(e){return"png"===e.format&&e.density!==i.baseDensity}).map(function(e){return e.url+" "+function(e){switch(e){case"mdpi":case"1x":case"web":case"unknown":default:return"1x";case"hdpi":return"1.5x";case"xhdpi":case"2x":return"2x";case"xxhdpi":case"3x":return"3x";case"xxxhdpi":case"4x":return"4x"}}(e.density)}).join(", ")}gt.addEventListener("click",Rr),pt.addEventListener("click",Ur),kt.addEventListener("click",Ur);var Zr=document.getElementById("assetExportTemplate");function Hr(e,t){var n=document.importNode(Zr.content,!0),a=n.querySelector(".assetExporter");if(a.dataset.aid=e.aid,a.dataset.format=e.format,a.querySelector(".assetType").textContent=e.format,a.querySelector(".assetCount").textContent=e.count,"jpg"===e.format||"png"===e.format)a.querySelector(".assetCount").title=Array.from(e.densities).join(", ");else if("svg"===e.format){var o=a.querySelector(".assetStats");e.percent>0&&(o.textContent=e.percent),x.b.get(i.id,"showOptimizedSVG").then(function(e){o.classList.toggle("hidden",!e)})}e.count>1&&a.querySelector(".assetCount").classList.add("plural"),t.appendChild(n)}function Vr(e,t){return"default"===t?e.displayName:"original"===t?e.layerName:Object(V.a)(e.layerName,t)}var Wr=document.getElementById("assetTemplate");function Yr(e){var t=new P.a(e).toHexString();ta.has(t)||(xr(e,dt),ta.add(t))}function Kr(e){"group"===e.type?("bottom"===e.interactionLevel&&$r(e),e.layers.forEach(function(e){Kr(e)}),"top"===e.interactionLevel&&$r(e)):$r(e)}var Xr=document.getElementById("layerTemplate");function $r(e){var t=document.importNode(Xr.content,!0),n=t.querySelector(".layer"),i=Wo(e.rect.width),a=Wo(e.rect.height),o=sa.snapshot.width,r=sa.snapshot.height;n.dataset.id=e._id,n.classList.toggle("wideEnough",i>120),n.classList.toggle("longEnough",a>120),n.classList.toggle("tooNarrow",i<3),n.classList.toggle("tooShort",a<3),n.style.width=Ko(e.rect.width,o),n.querySelector(".layerWidth").textContent=Yo(e.rect.width),n.style.height=Ko(e.rect.height,r),n.querySelector(".layerHeight").textContent=Yo(e.rect.height),n.style.left=Ko(e.absoluteRect.x,o),n.style.top=Ko(e.absoluteRect.y,r),on.appendChild(t),"text"===e.type&&e.textStyles&&e.textStyles.forEach(function(e){e.style.color&&Yr(e.style.color)}),e.fills.forEach(function(e){switch(e.fillType){case"color":Yr(e.color);break;case"gradient":e.gradient.colorStops.forEach(function(e){Yr(e.color)})}}),ut.classList.toggle("empty",!dt.childElementCount)}function Jr(e){e.classList.remove("open","resolved")}function Gr(e){e.classList.remove("yellow","orange","peach","green","turquoise")}function Qr(e){var t=document.createElement("div"),n=Ka[new P.a(e.color).hexBase()];return t.classList.add("dot",n,e.status||"open"),t.dataset.id=e._id,t.textContent=e.name||"?",t.dataset.color=n,t.dataset.position=e.x<=.5?"left":"right",t.style.left="calc("+100*e.x+"% - 13px)",t.style.top="calc("+100*e.y+"% - 13px)",Wt.appendChild(t),Wt.lastElementChild}function es(e,t){var n=Y.formatEmojiString(tn.value.trim(),!0);if(n){_a=!1;var a=e._id,o=Jc({author:{_id:Zeplin.user._id,email:Zeplin.user.email,username:Zeplin.user.username,emotar:Zeplin.user.emotar,avatar:Zeplin.user.avatar},note:n,created:Date.now(),updated:Date.now()},a);Uc(t),o.classList.add("loading"),Xc(),Jt.classList.remove("composing"),ya.comments=[{note:n}];var r=ya;delete r.name,fetch(Zeplin.urls.baseURL+"/v2/projects/"+i.id+"/screens/"+a+"/dots",{method:"POST",headers:Zeplin.headers,body:JSON.stringify(r)}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})}).then(function(n){la=n,x.b.set(na.pid,"lastNoteColorUsed",r.color.name),t.dataset.id=la._id,t.dataset.name=la.name,Yt.dataset.id=la._id,e.dots.push(la),gr(e.dots),en.innerHTML="&nbsp;",tn.value="",xa[a]&&xa[a].comment&&(xa[a].comment=null),o.dataset.id=la.comments[0]._id,o.querySelector(".commentLink").href=D.I("project-screen",{url:{pid:i.id,sid:a},query:{did:la._id,cmid:la.comments[0]._id}}),o.classList.remove("loading"),_a=!0,mixpanel.webapp.track("Created dot")}).catch(function(e){o.remove(),Jt.classList.add("composing"),tn.focus(),k.b(e)})}}function ts(e){Ge.innerHTML="",e.tags=e.tags||[],e.tags.sort().forEach(function(e){var t=document.createElement("a");t.classList.add("tag"),t.dataset.tag=D.f(e),t.textContent=e,t.href=D.I("project-dashboard",{url:{pid:i.id},query:{tag:[e]}}),t.dataset.linkType="inApp",Ge.appendChild(t)});var t=document.importNode(Hn.content,!0),n=D.v.canManageScreens(a),o=t.querySelector("#manageTagsButton");o.classList.toggle("disabled",!n),n?(o.dataset.tooltip="Manage tags.",o.dataset.tooltipType="text"):(o.dataset.tooltip=oo(a,"organize screens using tags."),o.dataset.tooltipType="html"),o.addEventListener("click",function(){Xu(e._id)}),Ge.appendChild(t)}function ns(e){if(e===ra){if(er.scrollTop=0,er.innerHTML="",e.versions.reduce(or,{}),sa){var t=document.querySelector(".version[data-id='"+sa._id+"']");t&&t.classList.add("selected")}Mt.classList.toggle("oldVersion",e.versions[0]._id!==sa._id);var n=e.totalVersionCount-i.allowedVersionCount;if(n>0){var a=document.importNode(document.getElementById("versionLimitExceeded").content,!0),o=a.querySelector(".versionLimitExceeded");o.classList.toggle("plural",n>1),o.querySelector(".remainingVersionCount").textContent=n,o.querySelector("a").addEventListener("click",function(){mixpanel.webapp.track("Clicked version limits learn more button")}),er.appendChild(a)}else{var r=document.importNode(document.getElementById("initialCommit").content,!0);er.appendChild(r)}Gn.classList.remove("loading")}}function is(){ra.totalVersionCount?ns(ra):sr(ra).then(ns),yi.classList.add("hidden"),x.c.set("versionsTutorialSeen",!0),document.querySelector(".versionsToggle").classList.remove("hasNewVersions"),x.b.set(i.id,ra._id,"versionsLastSeen",new Date(ra.versions[0].created)),Mt.classList.add("versionsShown"),Gn.classList.remove("collapsed"),qs()}function as(){Gn.classList.toggle("collapsed")?Mt.classList.contains("oldVersion")?Gn.classList.add("compact"):Mt.classList.remove("versionsShown"):Gn.classList.contains("compact")?Gn.classList.remove("compact"):Mt.classList.remove("versionsShown"),qs()}Xt.addEventListener("click",function(e){e.target.classList.contains("dotColor")&&function(e,t,n,a){var o=document.querySelector(".dot[data-id='"+t+"']"),r=o.dataset.color;if(Gr(o),o.classList.add(e),o.dataset.color=e,Gr(Yt),Yt.classList.add(e),"undefined"!==t){var s=n._id;fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+s+"/dots/"+t,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({color:Xa[e]})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){a.color=Xa[e],gr(n.dots),x.b.set(na.pid,"lastNoteColorUsed",e),mixpanel.webapp.track("Changed dot color")}).catch(function(e){Gr(o),o.classList.add(r),o.dataset.color=r,Gr(Yt),Yt.classList.add(r),k.b(e)})}else ya.color=Xa[e]}(e.target.dataset.color,Yt.dataset.id,ra,la)}),document.querySelector(".versionsToggle").addEventListener("click",is),document.querySelector(".versionsCollapser").addEventListener("click",as);var os,rs,ss=!1;function ls(e){var t=!("updateSelectedIndex"in(e=e||{}))||e.updateSelectedIndex,n=!("saveZoomLevel"in e)||e.saveZoomLevel;if(Nt.textContent=(100*fa).toFixed(),At.disabled=fa>=5,Ut.disabled=fa<=.25,wn.classList.toggle("pixelated",fa>=2),t){for(var i=0;i<Rt.childElementCount;i++){if(parseFloat(Rt.children[i].value)===fa){Rt.selectedIndex=i;break}}Rt.childElementCount===i&&(Rt.selectedIndex=-1)}ss||(requestAnimationFrame(function(){sa&&vs(sa.snapshot,"zoom"),Zt.classList.contains("zooming")?Ht.addEventListener("transitionend",function e(){Ht.removeEventListener("transitionend",e),Zt.classList.remove("zooming"),sa&&vs(sa.snapshot,"zoom"),Mc()}):Mc(),ss=!1}),ss=!0),n&&(clearTimeout(os),os=setTimeout(function(){x.b.set(na.pid,"zoomLevel",fa)},1e3))}function cs(e){ee.a.render(ee.a.h(se.a,{checked:e,onChange:us}),Sn,Sn.querySelector(".switch"))}function us(){var e;e=r=!r,jn.classList.toggle("hidden",!e),cs(e),clearTimeout(rs),rs=setTimeout(function(){x.b.set(na.pid,"layoutGridEnabled",e)},1e3)}function ds(e){if(Qe.classList.toggle("hidden",!e),e){if(e.vertical){var t=e.vertical,n=t.numberOfCols,i=t.columnWidth+t.gutterWidth,a=Math.min(230*t.columnWidth/i,206);it.style.width=Math.floor(a)+"px",at.style.width=Math.ceil(230-a)+"px",tt.textContent=Yo(t.columnWidth),nt.textContent=Yo(t.gutterWidth),st.textContent=Yo(n*t.columnWidth+(n-!t.guttersOnOutside)*t.gutterWidth),lt.textContent=""+n}else it.removeAttribute("style"),at.removeAttribute("style"),st.textContent="",lt.textContent="";if(e.horizontal){var o=e.horizontal,r=o.rowHeight+o.gutterHeight,s=Math.min(48*o.rowHeight/r,32);ot.style.height=Math.floor(s)+"px",rt.style.height=Math.ceil(48-s)+"px",ot.textContent=Yo(o.rowHeight),rt.textContent=Yo(o.gutterHeight)}et.classList.toggle("v",!!e.vertical),et.classList.toggle("h",!!e.horizontal)}}var ms=document.getElementById("gridCanvas");function ps(e){on.innerHTML="",rn.innerHTML="",sn.classList.add("hidden"),wn.width/fa===e.width&&wn.height/fa===e.height||(wn.src=""),wn.src=e.url}function gs(e){var t=20*fa;Zt.style.width=Wo(e.width,{padding:240,unit:"px"}),Zt.style.height=Wo(e.height,{padding:120,unit:"px"}),Zt.style.backgroundImage="linear-gradient(to bottom, transparent 0px, transparent "+2*fa+"px, #FFF "+2*fa+"px, #FFF "+t+"px), linear-gradient(to right, #C8C3C7 0, #C8C3C7 "+2*fa+"px, #FFF "+2*fa+"px, #FFF "+t+"px)",Zt.style.backgroundPosition=window.innerWidth/2-151-fa*e.width/2+"px "+(-3*t+58)+"px",Zt.style.backgroundSize=t+"px "+t+"px",Ht.style.width=Wo(e.width,{unit:"px"}),Ht.style.height=Wo(e.height,{unit:"px"}),wn.style.width=Wo(e.width,{unit:"px"}),wn.style.height=Wo(e.height,{unit:"px"})}function hs(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(a[t]===n)return a;if("group"===a.type){var o=hs(a.layers,t,n);if(o)return o}}return null}function fs(e){if(ta=new Set,dt.innerHTML="",wi.innerHTML="",on.innerHTML="",rn.innerHTML="",sn.classList.add("hidden"),e.layers&&(e.layers.forEach(Kr),u)){var t=hs(e.layers,"sourceId",u);u=null,t?(t=document.querySelector(".layer[data-id='"+t._id+"']"))&&fc(t):Rl()}e.links&&e.links.forEach(function(t){!function(e,t,n){let a;if("screen"===e.destination.type&&!(a=i.findScreenByName(e.destination.name)))return;const o=document.createElement("a");switch(o.classList.add("link"),o.dataset.id=e.sourceId,o.dataset.linkType="inApp",o.dataset.flowNav="",o.style.width=Ko(e.rect.width,t),o.style.height=Ko(e.rect.height,n),o.style.left=Ko(e.rect.x,t),o.style.top=Ko(e.rect.y,n),e.destination.type){case"previous":o.href="#",o.dataset.navOp="pop";break;case"screen":o.href=D.I("project-screen",{url:{pid:i.id,sid:a._id}});break;default:return}rn.appendChild(o)}(t,e.width,e.height)}),Li.classList.toggle("hidden",!e.backgroundColor),e.backgroundColor&&xr(e.backgroundColor,wi),function(e){var t=ms.getContext("2d");if(t.clearRect(0,0,ms.width,ms.height),e.grid){ms.width=Wo(e.width),ms.height=Wo(e.height);var n=e.grid,i="rgba(238, 103, 35, 0.3)";if(n.vertical){var a,o=n.vertical,r=Wo(o.columnWidth+o.gutterWidth),s=o.numberOfCols,l=Wo(n.horizontalOffset+(o.guttersOnOutside?o.gutterWidth/2:0));n.horizontal&&!n.horizontal.gutterHeight||!n.vertical.gutterWidth?(i="rgba(0, 255, 255, 0.7)",a=1):a=Wo(o.columnWidth),s=1===a?s+1:s,t.fillStyle=i;for(var c=l,u=0;u<s;u++)t.fillRect(c,0,a,ms.height),c+=r}if(n.horizontal){var d,m=n.horizontal,p=Wo(m.rowHeight+m.gutterHeight),g=Math.round(ms.height/p),h=0|Wo(n.horizontalOffset);n.vertical&&!n.vertical.gutterWidth||!n.horizontal.gutterHeight?(i="rgba(0, 255, 255, 0.7)",d=1):d=Wo(m.rowHeight),g=ms.height-g*p>p-d?g+1:g,t.fillStyle=i;for(var f=1===d?p:0,b=0;b<g;b++)t.fillRect(h,f,ms.width-2*h,d),f+=p}}}(e)}function bs(e){if(pt.innerHTML="",gt.innerHTML="",void 0===e.assets);else if(Array.isArray(e.assets)&&!e.assets.length)mt.classList.remove("loading"),mt.classList.add("empty"),ee.a.render(ee.a.h(ne.a,{source:ra.source}),Xi,document.querySelector(".noScreenAssets"));else{Ke.classList.toggle("densityMismatch",e.density!==i.density),mt.classList.add("loading"),mt.classList.remove("empty");var t={},n=new Set,a=[];for(var o in e.assets.forEach(function(e){var i=Mr(e.contents);i&&(a.push(function(e){for(var t={},n=new Set,i=0;i<e.contents.length;i++){var a=e.contents[i];a.format in t?t[a.format]++:t[a.format]=1,n.add(a.density)}if(!(!("jpg"in t)||"svg"in t||"pdf"in t||t.jpg!==t.png))return function(e,t){var n=0,i=0,a=0;return Promise.all(e.contents.map(bc)).then(function(o){t.forEach(function(e){var t=o.filter(function(t){return t.density===e}).reduce(function(e,t){return e[t.format]=t.length,e},{});i+=Number(t.jpg)/Number(t.png),a+=Number(t.png)/Number(t.jpg)}),i=Math.round(100-i/t.size*100),a=Math.round(100-a/t.size*100),i>=10?n={type:"jpg",diff:i}:a>=10&&(n={type:"png",diff:a}),n&&(e.percent=n)}).catch(function(){})}(e,n);if("svg"in t)return function(e){return e.optimized=Object.assign({},e,{url:Zeplin.urls.imgURL+"/svgo/"+encodeURIComponent(e.url)}),Promise.all([bc(e),bc(e.optimized)]).then(function(t){e.optimized.percent=Math.round((t[0].length-t[1].length)/t[0].length*100)})}(e.contents.find(function(e){return"svg"===e.format}));return Promise.resolve()}(e).then(function(){return function(e,t,n){var i=document.importNode(Wr.content,!0);return Promise.all([Fr(t),nc()]).then(function(a){var o=a[0],r=a[1],s=i.querySelector(".assetPreview img"),l=i.querySelector(".assetExports");i.querySelector(".asset").dataset.id=e._id,i.querySelector(".assetPreview").classList.add(o.lightness),i.querySelector(".assetSize").textContent=o.size,s.src=t.url,s.srcset=zr(e.contents),i.querySelector(".assetName").textContent=Vr(e,r);var c={},u=new Set;for(var d in e.contents.forEach(function(e){e.format in c?c[e.format]++:c[e.format]=1,u.add(e.density)}),l.innerHTML="",c){var m;"svg"===d&&(m=e.contents.find(function(e){return"svg"===e.format})),Hr({aid:e._id,format:d,count:c[d],densities:u,percent:m&&m.optimized.percent},l)}n.appendChild(i)}).catch(function(e){})}(e,i,pt)})),e.contents.forEach(function(e){e.format in t?t[e.format]++:t[e.format]=1,n.add(e.density)}))}),Promise.race(a).then(function(){mt.classList.remove("loading","empty")}),t)Hr({aid:"all",format:o,count:t[o],densities:n},gt)}}var ys={partial:[ps,gs],initial:[ps,gs,fs,bs],zoom:[gs],density:[gs,fs,bs],layers:[fs,bs]};function vs(e,t){ys[t=t||"layers"].forEach(function(t){t(e)})}var js,Ss,Es,ws=!1;function Ls(e,t){ws?D.C("Already sent!",t):(ws=!0,fetch(Zeplin.urls.baseURL+"/organizations/"+e+"/requests/join",{method:"POST",headers:Zeplin.headers}).then(function(){D.C("Invitation sent!",t)}).catch(function(){D.C("Invitation sent!",t)}))}function Cs(e){(e.totalVersionCount?Promise.resolve(e):sr(e)).then(function(e){Mt.classList.contains("versionsShown")?(ns(e),x.b.set(i.id,e._id,"versionsLastSeen",new Date(e.versions[0].created))):ks(e)})}function Ds(e,t){clearTimeout(Ss);var n,r=(t=t||e.versions[0]).snapshot,s=r?"layers":"initial";if(r&&sa._id===t._id&&vs(r,"partial"),"pawn"===a.role&&o&&o.transitionFinished)return r&&(delete r.layers,delete r.assets),vs(r,s),x.b.get(i.id,"noResourceInfoDismissed").then(function(e){var t=document.getElementById("infoContent");if(!e&&!t.querySelector(".noResourceInfo")){var n=C.a({content:"This project belongs to an organization but looks like you're not a member.If you're a developer or a designer and want to access these resources, please <a href='#'>request an invite</a> from admins!",type:"html",hideCallback:function(){x.b.set(i.id,"noResourceInfoDismissed",!0)},bodyCallbacks:{a:function(e){e.preventDefault(),Ls(o._id,Qn)}}});n.classList.add("noResourceInfo"),t.insertBefore(n,document.querySelector(".screenDescriptionContainer"))}}),ut.classList.remove("loading","empty"),ut.classList.add("restricted"),mt.classList.remove("loading","empty"),void mt.classList.add("restricted");n=t._id,T.a&&T.a.features&&T.a.features.openInPhotoshop&&(Ii.removeEventListener("click",nr),qi.classList.add("hidden"),T.a.ipcRenderer.removeAllListeners(n+":sourceFile"),T.a.ipcRenderer.once(n+":sourceFile",function(e,t){Go=t.file,Ti.title=t.name,Ti.textContent=t.name,_i.title=t.dir,_i.textContent=t.pathParts.join("▸"),x.c.get("hideSourceFileInfo").then(function(e){if(!e){var t=C.a({content:"This is only visible to you, to quickly jump to your design file.",hideCallback:function(){x.c.set("hideSourceFileInfo",!0)}});qi.appendChild(t)}}),Ii.addEventListener("click",nr),qi.classList.remove("hidden")}),T.a.ipcRenderer.send("query-source-file",n)),r&&"layers"in r?(ds(r.grid),vs(r,s),Xo()):Ss=setTimeout(function(){ut.classList.add("loading"),ut.classList.remove("empty","restricted"),mt.classList.add("loading"),mt.classList.remove("empty","restricted"),Ta.start(),$o(e,t).then(function(e){null!==ra&&e&&sa._id===t._id&&(ds(e.grid),vs(e,s),Xo())})},300)}function xs(e){var t;return Wt.innerHTML="","dots"in e?(e.dots.forEach(Qr),t=x.b.get(i.id,"dotListingsStatusFilter").then(function(t){"open"!==t&&"resolved"!==t&&(x.b.set(i.id,"dotListingsStatusFilter","open"),t="open"),document.querySelector('input[type="radio"][name="dotListingsStatusFilter"][value="'+t+'"]').checked=!0,Wt.dataset.statusFilter=t,gr(e.dots)})):t=new Promise(function(t){clearTimeout(Es),Es=setTimeout(function(){(function(e){if(e){hi.classList.add("loading"),hi.classList.remove("noDots","noOpenDots","noResolvedDots");var t,n=Uo("dots");if(n)t=Promise.resolve(n);else{var a=N.a.mark();t=fetch(Zeplin.urls.baseURL+"/v2/projects/"+i.id+"/screens/"+e._id+"/dots",{headers:Zeplin.headers}).then(function(e){return N.a.measure("api.getDots",{start:a,minTime:50,labels:{status:e.status}}),e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})})}return t.then(function(t){if(e.dots=t.dots,e.dots.forEach(function(e){e.status=e.status||"open"}),ra===e){var n;if(na.did&&1===na.did.length){var a=Ro(na.did[0]);n=a?Promise.resolve(a):x.b.get(i.id,"dotListingsStatusFilter")}else n=x.b.get(i.id,"dotListingsStatusFilter");return n.then(function(t){xc(t,!0),e.dots.forEach(Qr),na.did&&1===na.did.length?Yl(na.did[0],na.cmid):po(na.did)})}}).catch(function(t){ra===e&&k.b(t)})}})(e).then(function(){t()})},300)}),t}function ks(e){var t=document.querySelector(".versionsAuntie");t&&t.remove(),t=null,x.b.get(i.id,e._id,"versionsLastSeen").then(function(n){if(!n)return x.b.set(i.id,e._id,"versionsLastSeen",new Date(e.versions[0].created));var o=e.versions.filter(function(e){return new Date(e.created)>n});if(document.querySelector(".versionsToggle").classList.toggle("hasNewVersions",o.length),o.length){var r=o.filter(function(e){return e.creator&&e.creator._id===a.user._id}),s=r.find(function(e){return!e.commit||!e.commit.message}),l=o.length-r.length;s&&"dismissed"!==sessionStorage.getItem("versionsCommitAuntieStatus")?t=C.a({content:new Date-new Date(s.created)>36e5?"Looks like you uploaded a version <time is='time-ago' datetime='"+s.created+"'></time>. Add a commit message and share what has changed!":"New version! Add a commit message and share what has changed.",type:"html",buttonText:"Got it!",popover:!0,hideCallback:function(){sessionStorage.setItem("versionsCommitAuntieStatus","dismissed")}}):l&&"dismissed"!==sessionStorage.getItem("newVersionsAuntieStatus")&&(t=C.a({content:"There "+(l>1?"are ":"is ")+(l>1?l:"a")+" new version"+(l>1?"s":"")+" since you last visited!",buttonText:"Got it!",popover:!0,hideCallback:function(){sessionStorage.setItem("newVersionsAuntieStatus","dismissed")}})),t&&(t.classList.add("versionsAuntie"),document.body.appendChild(t))}})}function qs(){return!(!Aa||!Ua)&&("dashboard"===ua||"styleguide"===ua?_.a.setViewMenuContext(ua):Mt.classList.contains("versionsShown")?_.a.setViewMenuContext("screen-view",{versionsShown:!0}):_.a.setViewMenuContext("screen-view"),!0)}function Ts(){if(Aa&&Ua){var e=i.findUser(Zeplin.user._id),t=[],n=[];D.v.canDeleteProject(e)?t.push("deleteProject"):n.push("deleteProject"),D.v.canLeaveProject(e)?t.push("leaveProject"):n.push("leaveProject"),ra?(D.v.canManageScreens(e)&&(t.push("renameScreen","deleteScreen"),ra.tags.length?(t.push("manageTags"),n.push("addTag")):(n.push("manageTags"),t.push("addTag"))),!D.v.canUpdateProject(e)||i.thumbnail&&i.thumbnail===ra.versions[0].snapshot.url?n.push("setAsThumbnail"):t.push("setAsThumbnail")):n.push("renameScreen","deleteScreen","setAsThumbnail","addTag","manageTags"),_.a.updateEditCapabilities({on:t,off:n})}}function _s(e){CSS.supports("grid-template-columns","repeat(auto-fill, 220px)")||(clearTimeout(bo),window.removeEventListener("resize",fr)),window.removeEventListener("resize",hl);var t=Vo(e);if(!t&&(Is().length>0&&(bl(),fl(),t=Vo(e)),!t))return L.a({message:"Screen not available anymore.",defer:!0}),void Oo(i.id,yl());s=t,oa=parseInt(t.dataset.viewIndex,10),Al(),(ra=i.screens.find(function(e){return e._id===s.dataset.id})).description=ra.description||"",E.f("project-screen"),ua="screen",document.removeEventListener("keydown",Dl),document.addEventListener("keydown",Ll),document.addEventListener("keyup",Cl),window.addEventListener("blur",xl),Be.dataset.selection="screen",Re.disabled=0===oa,Ue.disabled=oa===ul()-1,$e.value=ra.description,function(e){var t,n=e._id,a=new URL(D.I("project-screen",{url:{pid:i.id,sid:n}}));t=e.url?Promise.resolve(e.url):ou(a.toString()).catch(function(){return a.toString()});t.then(function(t){var n=new URL(t);e.url=t,Bi.querySelector(".screenLink.web").classList.remove("fetching"),Bi.querySelector(".screenLink.web").textContent=n.host+n.pathname}),Bi.querySelector(".screenLink.app").classList.remove("fetching"),Bi.querySelector(".screenLink.app").textContent="zpl://screen?pid="+i.id+"&sid="+n,Bi.querySelector(".openInApp").href="zpl://screen?pid="+i.id+"&sid="+n}(ra),Je.setAttribute("datetime",ra.updated||i.updated),ts(ra);var n,a=yl();return Ci.value.length&&(a.q=Ci.value),Ne.href=D.I("project-dashboard",{url:{pid:i.id},query:a}),Ne.querySelector("span").textContent="Dashboard",Fe.textContent=ra.name,Fe.title=ra.name,ho(),fo(),vo(),sa=ra.versions[0],Ds(ra),n=ra,clearTimeout(js),js=setTimeout(Cs,300,n),!qs()&&Pa&&T.a.ipcRenderer.send("popout:menuitem:enabled",!0),Ts(),xs(ra).then(Wd)}function Is(){return Array.from(document.querySelectorAll(".tag.selected:not(.untagged)"),function(e){return D.G(e.dataset.tag)})}function Os(){return document.querySelector(".tag.untagged.selected")}function Ps(e){return Array.isArray(e)?function(t){return e.reduce(function(e,n){return e&&t.tags&&t.tags.includes(n)},!0)}:function(t){return t.tags&&t.tags.includes(e)}}function Bs(e,t,n){e&&D.v.canManageScreens(a)&&(i.addScreensToSection(e,t,n),fl())}function As(e,t,n){if(e){i.updateScreenOrder(e,t,n);var a=ol(e),o=a.querySelector(".screenGrid"),r=parseInt(a.dataset.viewIndexOffset,10);i.findSection(e).screens.forEach(function(e,t){var n=Vo(e);n.dataset.index=t,n.dataset.viewIndex=r+t,o.appendChild(n)})}}function Ns(){var e=document.querySelector(".screenMenu");e&&e.remove()}document.querySelector(".screenColorsRestricted a").addEventListener("click",function(e){e.preventDefault(),Ls(o._id,Qn)}),document.querySelector(".screenAssetsRestricted a").addEventListener("click",function(e){e.preventDefault(),Ls(o._id,Qn)});var Rs,Us,Fs,Ms,zs=document.getElementById("sectionMenuTemplate"),Zs=document.getElementById("screenMenuTemplate"),Hs=document.getElementById("moveCubuk");function Vs(e,t){if(e){var n=i.removeSection(e);return fl(),function(e){if(e)return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/sections/"+e,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})})}(e).catch(function(e){k.b(e),i.addSection(n,t),fl()})}}function Ws(){var e=i.id,t=i.type,n=i.density,a=o?o._id:null;function r(i){return i.filter(function(i){var a=i._id!==e&&i.type===t&&("unknown"===i.density||i.density===n),o="active"===i.status,r=!0;if(D.r(i)){var s=i.users.find(function(e){return e.user._id===Zeplin.user._id});r=s&&D.v.canManageScreens(s)}return a&&o&&r}).sort(D.D.name)}return Promise.all([function(e){return"user"!==(e=e||"user")?Promise.resolve(null):ue.j().then(function(e){return r(e)})}(a),function(e){return e=e||"user",ue.g().then(function(t){return t.filter(function(t){return"active"===t.status&&("user"===e||e===t._id)})}).then(function(e){return Promise.all(e.map(function(e){return ue.f(e._id,Zeplin.user._id)})).then(function(t){return e.filter(function(e,n){return D.v.canMoveScreens(t[n])}).sort(D.D.name)})}).then(function(e){return Promise.all(e.map(function(e){return ue.j(e._id)})).then(function(t){return t.map(function(t,n){var i=r(t);return[e[n],i]})})})}(a)]).then(function(e){var t=e[0],n=e[1],i=[];return t&&(i.push({type:"header",content:"Personal Projects"},{type:"create",oid:"user"}),i=i.concat(t.map(function(e){return{type:"project",pid:e._id,name:e.name,density:e.density}}))),i=i.concat(n.reduce(function(e,t){var n=t[0],i=t[1];return e.push({type:"header",content:n.name+"'s Projects"},{type:"create",oid:n._id}),e.concat(i.map(function(e){return{type:"project",pid:e._id,name:e.name,density:e.density}}))},[]))})}function Ys(e){k.b(e,{clientErrorHandler:{402:function(){L.a({title:"Please upgrade your plan first",message:"Looks like you reached your project limit, upgrade now to create more!",cancel:{name:"CANCEL"},done:{name:"SEE PLANS",cb:function(){Ra?location.replace(D.I("profile-billing",{query:{period:"annual"}})):(document.getElementById("planChooserOverlay").classList.remove("hidden"),mixpanel.webapp.track("Opened pricing popup"),ga("legacyTracker.send","event","PAYMENT_EVENTS","opened-pricing-popup"),ga("send","pageview","/pricing-popup"))}}})},default:k.b}})}function Ks(e,t,n,a,o,r){var s,l,c=i.density,u=i.type;function d(t){var n=t._id||t.pid;return s=n,("unknown"===t.density?ue.n(n,c):Promise.resolve()).then(function(){return ue.l(i.id,n,e.screens)})}function m(t){var n=t.pid,a=t.seid;return ue.l(i.id,n,e.screens).then(function(){return{tseid:a,tpid:n}})}function p(t){var n=t.tseid,i=t.tpid;return l=n,ue.o(i,n,0,e.screens)}function g(){return ue.e(i.id,e._id)}var h="create"===t.type?"a new project":'"'+t.name+'"';L.a({message:'Move selected section from "'+i.name+'" to '+h+"?",done:{name:"MOVE",cb:function(){switch(a(n),t.type){case"create":ue.b(t.oid,u,D.l(),c,e.name).then(d).then(g).then(function(){return r(s,l)}).catch(Ys);break;case"project":(i=t,h=i._id||i.pid,s=h,o="unknown"===i.density?ue.n(h,c):Promise.resolve(),e.index=1,o.then(function(){return ue.c(h,e)})).then(m).then(p).then(g).then(function(){return r(s,l)}).catch(k.b)}var i,o,h}},cancel:{name:"KEEP",cb:function(){o&&o()}}})}function Xs(e,t,n){e&&function(e,t,n){var a=i.findSection(t),o=e.querySelector(".sectionHeader"),r=ee.a.h(te.a,{top:n.top,left:n.left,density:i.density,projectType:i.type,projectsLoader:Ws,onOpen:function(){fe.classList.add("noScroll"),o.classList.add("moveToProjectPopupOpen")},onMove:function(e,t,n,i,o){Ks(a,e,t,n,o,function(e,t){mixpanel.webapp.track("Moved section to project"),location.assign(D.I("project",{url:{pid:e},query:{seid:t}}))})},onClose:function(){fe.classList.remove("noScroll"),o.classList.remove("moveToProjectPopupOpen")}});ee.a.render(r,document.body)}(t,e,{top:n.top+n.height/2,left:n.right-320})}function $s(e,t,n){n=void 0===n||n;var a="collapse"===t;e.classList.toggle("collapsed",a);var o=e.dataset.id;o&&n&&(ea[o]=a,x.b.set(i.id,"sectionsCollapseState",ea))}function Js(e,t){$s(e,"collapse",t)}function Gs(e,t){$s(e,"expand",t)}function Qs(e){if(D.v.canManageScreens(a)&&!document.querySelector(".tag.selected")&&!Ci.value.toLowerCase().trim()&&!Ri.querySelector("input:checked"))if(e.target.classList.contains("screen")){var t,n=e.target.getBoundingClientRect();if(e.clientX<=n.left)Zi.style.left=n.left-24+"px",t=e.target.dataset.id;else{if(!(e.clientX>=n.right))return;Zi.style.left=n.right+"px",t=Ho(parseInt(e.target.dataset.viewIndex,10)+1).dataset.id}Zi.dataset.nextScreenId=t,Zi.style.top=fe.scrollTop+n.top-30+"px",Zi.classList.remove("hidden")}else Zi.classList.add("hidden")}function el(e,t){return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/sections/",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({name:e.name,screens:e.screens,index:t})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})})}function tl(e,t){if(e)return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/sections/"+e,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(t)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})})}function nl(e){var t=e.querySelector(".screenGrid"),n=e.querySelector(".sectionHeader");n.addEventListener("click",function(t){if(t.target.matches(".sectionDescriptionForm .mirror")){var o=t.target.closest(".sectionDescriptionForm"),r=t.target.nextElementSibling;return rl(r),o.classList.add("editing"),o.querySelector(".counter").textContent=r.maxLength-r.value.length,void r.focus()}var s=t.target.closest("button[data-action]");if(!s)return e.classList.contains("collapsed")&&(Gs(e),t.stopPropagation()),void yd();switch(t.stopPropagation(),s.dataset.action){case"open-menu":n.classList.contains("moveToProjectPopupOpen")||(yd(),function(e,t){var n=e.querySelector(".sectionHeader"),o=document.importNode(zs.content,!0),r=o.querySelector(".sectionMenu");r.classList.add("open");var s=n.querySelector(".sectionActions");s.parentElement.insertBefore(o,s);var l=i.findSection(e.dataset.id),c=D.v.canMoveScreens(a)&&l.screens.length>0;r.querySelector(".menuitem[data-action='move-section-screens']").classList.toggle("hidden",!c);var u=r.getBoundingClientRect(),d=n.querySelector("div:first-child");if(u.bottom+12>window.innerHeight){var m=window.innerHeight-s.getBoundingClientRect().top-12;r.style.top=m-r.clientHeight+"px"}else if(u.top-Be.clientHeight-12<0){var p=12+Be.clientHeight-d.getBoundingClientRect().top;r.style.top=p+"px"}r.addEventListener("click",function(t){if(t.button===Zeplin.MOUSE_BUTTON.LEFT){var n=t.target.closest(".menuitem");if(n){var a=t.target.closest(".section");switch(a.classList.contains("collapsed")&&Gs(a),yd(),n.dataset.action){case"edit-description":var o=a.querySelector(".sectionHeader .sectionDescription"),r=o.closest(".sectionDescriptionForm");a.classList.contains("hasDescription")||(sl(o,"A sweet, short description"),a.classList.add("hasDescription")),r.classList.add("editing"),r.querySelector(".counter").textContent=o.maxLength-o.value.length,D.o(o);break;case"rename":D.o(a.querySelector(".sectionHeader .sectionName"));break;case"delete":Vs(a.dataset.id,a.dataset.index);break;case"copy-app-uri":var s="zpl://project?pid="+i.id+"&seid="+e.dataset.id;D.d({content:s,toastContainer:document.querySelector(".overviewContent")});break;case"download-screen-images":ad(l.screens,l.name+".zip");break;case"copy-web-link":var c=D.I("project",{url:{pid:i.id},query:{seid:e.dataset.id}});D.d({content:c,toastContainer:document.querySelector(".overviewContent")});break;case"move-section-screens":Xs(a.dataset.id,a,u)}}}})}(e));break;case"collapse":yd(),e.classList.contains("collapsed")?Gs(e):Js(e)}}),n.addEventListener("blur",function(t){if(D.v.canManageScreens(a)&&"input"===t.target.tagName.toLowerCase()){t.preventDefault();var n=e.dataset.id,o=i.findSection(n);if(o)if(t.target.classList.contains("sectionName")){var r=t.target.value.trim();if(!0===o.new&&delete o.new,r===o.name)return;r?(sl(t.target,r),function(e,t){if(e._id){var n=e.name;e.name=t,tl(e._id,{name:t}).catch(function(t){e.name=n,fl().then(function(){k.b(t,{dialogCallback:function(){var t=ol(e._id);D.o(t.querySelector(".sectionName"))}})})})}}(o,r)):sl(t.target,o.name)}else if(t.target.classList.contains("sectionDescription")){var s=t.target.value.trim();if(e.classList.toggle("hasDescription",s.length>0),t.target.closest(".sectionDescriptionForm").classList.remove("editing"),sl(t.target,s),s===o.description)return;!function(e,t){if(e._id){var n=e.description;e.description=t,tl(e._id,{description:t}).catch(function(t){e.description=n,fl().then(function(){k.b(t,{dialogCallback:function(){var t=ol(e._id);D.o(t.querySelector(".sectionDescription"))}})})})}}(o,s)}}},!0),n.addEventListener("submit",function(e){if(D.v.canManageScreens(a)){e.preventDefault();var t=e.target.querySelector("input");t&&t.blur()}}),n.addEventListener("keydown",function(t){if(D.v.canManageScreens(a)){t.stopPropagation();var n=t.target.closest("input");if(n&&-1!==["sectionName","sectionDescription"].indexOf(n.name))switch(t.keyCode){case Zeplin.KEY_CODE.ESC:var o=i.findSection(e.dataset.id);if(!o)return;if(!0===o.new)return void Vs(o._id,parseInt(e.dataset.index,10));sl(n,o["sectionName"===n.name?"name":"description"]),n.blur()}}});var o=n.querySelector(".sectionDescriptionForm .counter");n.addEventListener("input",function(e){rl(e.target),e.target.classList.contains("sectionDescription")&&(o.textContent=e.target.maxLength-e.target.value.length)}),t.addEventListener("mouseover",Qs),t.addEventListener("mouseover",function(e){var t=e.target.closest(".screenLink");t&&(t.classList.add("hover"),t.classList.remove("highlight"))}),t.addEventListener("mouseout",function(e){var t=e.target.closest(".screenLink");t&&t.classList.remove("hover")}),t.addEventListener("keydown",function(e){if(D.v.canManageScreens(a)&&(e.stopPropagation(),e.target.classList.contains("screenName")))switch(e.keyCode){case Zeplin.KEY_CODE.ESC:var t=e.target.closest(".screen").dataset.id;e.target.value=i.screens.find(function(e){return e._id===t}).name,e.target.blur()}}),t.addEventListener("submit",function(e){D.v.canManageScreens(a)&&(e.preventDefault(),e.target.querySelector(".screenName").blur())}),t.addEventListener("blur",function(e){if(D.v.canManageScreens(a)&&(e.preventDefault(),e.target.classList.contains("screenName"))){var t=e.target.closest(".screen").dataset.id,n=i.screens.find(function(e){return e._id===t}),o=e.target.closest(".screen").querySelector(".screenNameMirror");if(!e.target.value)return o.classList.remove("hidden"),void(e.target.value=n.name);if(n.name!==e.target.value){o.classList.add("hidden");var r=n.name;n.name=e.target.value,fl(),function(e,t,n){if(!D.v.canManageScreens(a))return;fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+e,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({name:t})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).catch(function(t){i.screens.find(function(t){return t._id===e}).name=n,fl().then(function(){k.b(t,{dialogCallback:function(){var t=Vo(e);t.querySelector(".screenNameMirror").classList.add("hidden"),D.o(t.querySelector(".screenName"))}})})})}(t,n.name,r)}else o.classList.remove("hidden")}},!0),t.addEventListener("contextmenu",function(e){yd();var t=e.target.closest(".screenLink");if(t){var n=t.parentElement;e.preventDefault();var o=document.importNode(Zs.content,!0),r=o.querySelector(".screenMenu");r.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var t=e.target.closest(".menuitem");if(t){switch(e.stopPropagation(),t.dataset.action){case"thumbnail":_u(n.dataset.id);break;case"delete":L.a({title:'Delete  "'+n.querySelector(".screenName").value+'"?',message:"Deleted screens cannot be restored.",done:{name:"DELETE",cb:function(){n.classList.remove("menuOpen"),Ou(n.dataset.id).then(function(){wr(),vl(Is())})}},cancel:{name:"CANCEL"}});break;case"manageTags":Xu(n.dataset.id);break;case"download":!function(e){if(document.body.classList.contains("canDownload"))Iu(e).then(function(e){return Ar({data:URL.createObjectURL(e.blob),name:e.name})});else{var t=Ku(e).versions[0].snapshot.url;t.includes("raven-warehouse")||(t="https://cdn.zeplin.io"+new URL(t).pathname),to(t)}}(n.dataset.id);break;case"copy-web-link":D.d({content:i.shortUrl,toastContainer:document.querySelector(".overviewContent")});break;case"copy-app-uri":D.d({content:"zpl://project?pid="+i.id,toastContainer:document.querySelector(".overviewContent")});break;case"move-screen":!function(e){if(!e)return;var t=e.getBoundingClientRect(),n={top:t.top+t.height/2,left:t.left+172};!function(e,t){var n=ee.a.h(te.a,{top:t.top,left:t.left,density:i.density,projectType:i.type,projectsLoader:Ws,onOpen:function(){fe.classList.add("noScroll")},onMove:function(t,n,a,o,r){!function(e,t,n,a,o,r,s){var l=i.density;function c(t){var n=t._id||t.pid;return("unknown"===t.density?ue.n(n,l):Promise.resolve()).then(function(){return ue.l(i.id,n,[e])})}var u="create"===t.type?"a new project":'"'+t.name+'"';L.a({message:'Move selected screen from "'+i.name+'" to '+u+"?",done:{name:"MOVE",cb:function(){var e,r;switch(a(n),t.type){case"create":e=ue.b(t.oid,i.type,D.l(),l),r=Ys;break;case"project":e=Promise.resolve(t),r=function(e){!function(e,t){k.b(e,{clientErrorHandler:{402:function(){L.a({title:"Can't move screens to “"+t+"”",message:e.message})},default:k.b}})}(e,t.name)}}e.then(c).then(s).catch(r).then(o,o)}},cancel:{name:"KEEP",cb:function(){r&&r()}}})}(e.dataset.id,t,n,a,o,r,function(){mixpanel.webapp.track("Moved screens to project");var t=i.findScreenSection(e.dataset.id);i.removeScreen(t._id,e.dataset.id),wr(),vl(Is())})},onClose:function(){e.classList.remove("menuOpen"),fe.classList.remove("noScroll")}});ee.a.render(n,document.body)}(e,n)}(n)}setTimeout(function(){Ns()},80)}}});var s=D.v.canUpdateProject(a),l=D.v.canManageScreens(a),c=D.v.canMoveScreens(a);r.querySelector(".menuitem[data-action='thumbnail']").classList.toggle("hidden",!s),r.querySelector(".menuitem[data-action='manageTags']").classList.toggle("hidden",!l),r.querySelector(".menuitem[data-action='delete']").classList.toggle("hidden",!l),r.querySelector(".menuitem[data-action='move-screen']").classList.toggle("hidden",!c);var u=Ku(n.dataset.id);r.classList.toggle("taglessScreen",!u.tags||0===u.tags.length),n.appendChild(o),Ld(r,$n,n,e)}})}function il(e){return{screens:e,type:"default"}}function al(e){if((e=e||{}).searchTerm){var t={},n=i.screens.filter(function(n){var i=D.c(e.searchTerm,n.name);return t[n._id]=i.score,n.hasFuzzyMatch=i.hasFuzzyMatch,i.score>0}).sort(function(e,n){return t[e._id]<t[n._id]?1:t[e._id]>t[n._id]?-1:0});return n.length>0?[il(n)]:[]}var a,o,r,s,l;return e.sortBy?"lastUpdated"===e.sortBy?(r=i.screens.sort(D.D[e.sortBy]),s=[],l={},r.forEach(function(e){var t,n=D.m(new Date(e.updated));n in l?t=l[n]:(s.push(n),t=[],l[n]=t),t.push(e)},{}),a=s.map(function(e){return{name:D.H(e),screens:l[e],type:"timeline"}})):a=[il(i.screens.sort(D.D[e.sortBy]))]:((o=i.sections.map(function(e){return(e=Object.assign({},e)).screens=e.screens.map(function(e){return i.findScreen(e)}),e.type="user",e}))[0].screens.length>0?o[0].type="default":o.splice(0,1),a=o),e.tagFilter&&(a=function(e,t){var n;return t?("tags"in t?n=Ps(t.tags):"untagged"in t&&(n=function(e){return!e.tags||!e.tags.length}),e.map(function(e){return Object.assign(e,{screens:e.screens.filter(n)})}).filter(function(e){return!!e.screens.length})):e}(a,e.tagFilter)),a}function ol(e){return zi.querySelector(".section[data-id='"+e+"']")}function rl(e,t){var n=e.parentElement.querySelector(".mirror");t?n.innerHTML=Wc(e.value.replace(/ /g," ")):n.textContent=e.value.replace(/ /g," ")}function sl(e,t){e.value=t||"",rl(e,!0)}function ll(e,t,n){var o,r=document.importNode(Mi.content,!0),s=r.querySelector(".section"),l=r.querySelector(".screenGrid"),c=r.querySelector(".sectionName"),u=r.querySelector(".sectionDescription"),d=r.querySelector(".screenCount"),m=D.v.canManageScreens(a);sl(c,e.name),e._id&&(s.dataset.id=e._id),"user"===e.type&&(c.readOnly=!m,u.readOnly=!m,e.description&&e.description.length&&(sl(u,e.description),s.classList.add("hasDescription")),e.screens.length>1&&(d.textContent=e.screens.length),s.classList.toggle("empty",0===e.screens.length)),(o=e._id)&&ea[o]&&!s.classList.contains("empty")?Js(s,!1):Gs(s,!1),s.classList.add(e.type),s.dataset.index=t,s.dataset.viewIndexOffset=n,e.screens.forEach(function(e,t){!function(e,t,n,o){var r=document.importNode(vr.content,!0),s=r.querySelector(".screen"),l=r.querySelector(".screenName"),c=r.querySelector(".screenNameMirror"),u=r.querySelector(".screenLink"),d=D.v.canManageScreens(a);s.dataset.id=t._id,s.dataset.index=n,s.dataset.viewIndex=o+n,u.href=D.I("project-screen",{url:{pid:na.pid,sid:t._id}}),r.querySelector(".screenLastUpdated").setAttribute("datetime",t.updated||i.updated),s.classList.toggle("thumbnail",i.thumbnail===t.versions[0].snapshot.url),l.value=t.name,l.readOnly=!d;var m=Ci.value.toLowerCase().trim();m&&D.p(c,t.name,m,t.hasFuzzyMatch);var p=s.querySelector(".screenImage"),g=t.versions[0].snapshot;g[Symbol.for("thumbnail")]?Object.assign(p,g[Symbol.for("thumbnail")]):(u.classList.add("loading"),p.addEventListener("load",function e(t){t.target.removeEventListener("load",e),t.target.parentElement.classList.remove("loading")}),yr.observe(s)),e.appendChild(r)}(l,e,t,n)}),zi.appendChild(r),nl(s)}function cl(){var e={};Ci.value&&(e.searchTerm=Ci.value.toLowerCase().trim());var t=Ri.querySelector("input:checked");t&&(e.sortBy=t.name);var n=Is();return n.length?e.tagFilter={tags:n}:Os()&&(e.tagFilter={untagged:!0}),e}function ul(){return zi.querySelectorAll(".screen").length}function dl(e,t){var n=e.getBoundingClientRect();Hs.style.top=fe.scrollTop+n.top-30+"px",Hs.style.left=t?n.right+11+"px":n.left-13+"px",Hs.classList.remove("hidden")}function ml(){Array.from(zi.querySelectorAll(".screenGrid")).forEach(function(e){X.a.disable(e.dataset.dragId)}),zi.innerHTML="",Zi.classList.add("hidden");var e=!i.screens||!i.screens.length;if(qn.disabled=e,e&&1===i.sections.length)document.querySelector(".projectOverview").classList.add("empty");else{document.querySelector(".projectOverview").classList.remove("empty"),document.querySelector(".noIntersection").removeAttribute("data-empty-for");var t=cl(),n=al(t);"tagFilter"in t&&!n.length&&(document.querySelector(".noIntersection").dataset.emptyFor=Os()?"untagged":"tagged"),zi.classList.toggle("locked","sortBy"in t);var o=0;n.forEach(function(e,t){ll(e,t,o),o+=e.screens.length}),X.a.enable({containers:Array.from(zi.querySelectorAll(".screenGrid")),dropTargets:Array.from(zi.querySelectorAll(".section")),root:fe,canGrab:function(){return D.v.canManageScreens(a)},onGrab:function(e,t){t.style.height="",jr();var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();Us=parseInt(e.dataset.index,10),Rs=e.closest(".section").dataset.id,dl(e,i.left>n.left),document.body.classList.add("dragging")},onDrop:function(e,t,n){Hs.classList.add("hidden"),document.body.classList.remove("dragging");var o=t.dataset.id,r=t.closest(".section").dataset.id;if(Rs&&r){if(r===Rs){var s=parseInt(t.dataset.index,10);if(s===Us)return;var l={screens:[{_id:o,to:parseInt(Us,10)}]};As(Rs,o,Us),function(e,t,n,o){e&&D.v.canManageScreens(a)&&fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/sections/"+e+"/screens/order",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(n)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).catch(function(n){k.b(n),As(e,t,o)})}(Rs,o,l,s)}else!function(e,t,n){if(e&&D.v.canManageScreens(a)){var o=JSON.parse(JSON.stringify(i.sections));Bs(e,t,n),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/sections/"+e+"/screens",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({index:n,screens:t})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).catch(function(e){i.sections=o,fl(),k.b(e)})}}(Rs,[o],Us);Rs=null,Us=null}},onMove:function(e,t,n,i,a){var o;if("sortBy"in cl()?o="Unselect sort option to reorder":document.querySelector(".tag.selected")?o="Unselect tags to reorder":Ci.value.toLowerCase().trim()&&(o="Reset search to reorder"),o)document.querySelector(".toastContainer")||D.C(o,document.querySelector("main"));else{Array.from(zi.querySelectorAll(".section.dropTarget")).forEach(function(e){e.classList.remove("dropTarget")});var r=a.getBoundingClientRect();if(i){var s=i.getBoundingClientRect(),l=parseInt(i.dataset.index,10),c=parseInt(t.dataset.index,10),u=r.left>s.left,d=0;n===e?d=u?l<c?1:0:l<=c?0:-1:u&&(d=1),Us=l+d,Rs=n.closest(".section").dataset.id,dl(i,u)}else if(n){var m=n.querySelectorAll(".screen").length-1;if(n.classList.contains("section")&&(n.classList.contains("empty")||n.classList.contains("collapsed")))return Rs=n.dataset.id,Us=n.classList.contains("collapsed")?m+1:0,Hs.classList.add("hidden"),void n.classList.add("dropTarget");var p=n.querySelector('.screen[data-index="'+m+'"]'),g=p.getBoundingClientRect();r.bottom>g.top&&r.left>g.left&&(Rs=n.closest(".section").dataset.id,Us=m,n!==e&&(Us+=1),dl(p,!0))}}}}),function(){var e=ul(),t=Is(),n=(e||"No")+" screen"+(1===e?"":"s");if(Di.classList.remove("showHint"),t.length)if(n+=" with ",1===t.length)n+=t,Di.classList.add("showHint");else{var i=t.pop();n+=t.join(", ")+", and "+i}else Os()&&(n=(e||"No")+" untagged screen"+(1===e?"":"s")+" ");be.textContent=n,be.title=n}(),hl()}}Zi.addEventListener("click",function(){var e=Zi.dataset.nextScreenId,t=Vo(e),n=i.findScreenSection(e);Zi.classList.add("hidden"),n&&D.v.canManageScreens(a)&&function(e,t){if(e){var n=JSON.parse(JSON.stringify(i.sections)),a=i.splitSection(e,t,"Untitled section");a.new=!0,fl().then(function(){var t=ol(e),o=t?t.nextElementSibling:zi.firstElementChild,r=i.sections.findIndex(function(t){return t._id===e})+1;D.o(o.querySelector(".sectionName")),el(a,r).then(function(e){a._id=e._id,o.dataset.id=e._id}).catch(function(e){i.sections=n,fl(),k.b(e)})})}}(n._id,t.dataset.index)}),fe.addEventListener("scroll",function(){Fs||(Fs=!0,Zi.classList.add("hidden"),clearTimeout(Ms),Ms=setTimeout(function(){Fs=!1},200))}),zi.addEventListener("dragstart",function(e){e.target.closest(".screenLink")&&e.preventDefault()});var pl,gl="36px";function hl(){var e=zi.querySelector(".section:not(.collapsed) .screenLink");if(e){var t=e.getBoundingClientRect();gl=Math.max(36,t.left)+"px"}Array.from(zi.querySelectorAll(".sectionHeader")).forEach(function(e){e.style.paddingLeft=gl,e.style.paddingRight=gl})}function fl(e){var t=!0;return e&&"immediate"in e&&(t=e.immediate),new Promise(function(e,n){t?(ml(),e()):(clearTimeout(pl),pl=setTimeout(function(){ml(),e()},300))})}function bl(){ia="",Array.from(document.querySelectorAll(".tag.selected")).forEach(function(e){e.classList.remove("selected")})}function yl(){return Os()?{untagged:"true"}:ia||{}}function vl(e){bl(),e&&(ia={tag:e},(e=[].concat(e).filter(function(e){return i.tags.indexOf(e)>-1})).forEach(function(e){document.querySelector(".tag[data-tag='"+decodeURIComponent(D.f(e)+"']")).classList.add("selected")})),fl()}function jl(){var e=Is();ia=e.length?{tag:e}:{},Os()?na.untagged="true":delete na.untagged,Oo(i.id,yl())}function Sl(){Al(),Rl(),Pc(),ju(),yd(),$e.submitEdits(),$u()}X.a.enable({containers:zi,root:fe,allowX:!1,canGrab:function(e,t){return!!(D.v.canManageScreens(a)&&e.classList.contains("user")&&t.closest(".sectionHeader"))},onGrab:function(e,t){e.classList.contains("collapsed")||(Js(e,!1),t.classList.add("collapsed")),jr(),document.body.classList.add("dragging"),t.classList.add("grabbed")},onDrop:function(e,t,n,a,o){return new Promise(function(e){var n=t.getBoundingClientRect(),a=o.getBoundingClientRect(),r=n.left-a.left,s=n.top-a.top,l=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),c=150*Math.max(Math.sqrt(l/n.height),1);o.classList.remove("grabbed"),o.style.transition="transform "+c+"ms ease-out, box-shadow "+c+"ms ease-in",o.style.transform="translate("+r+"px, "+s+"px)",o.style.boxShadow="none",o.addEventListener("transitionend",function n(){o.removeEventListener("transitionend",n);var a=parseInt(t.dataset.index,10),r=Array.prototype.indexOf.call(t.parentNode.children,t);zi.firstElementChild.classList.contains("default")||(a++,r++),r!==a&&function(e,t,n){if(e)i.updateSectionOrder(e,t),fl(),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/sections/order",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({sections:[{_id:e,to:parseInt(t,10)}]})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).catch(function(t){i.updateSectionOrder(e,n),fl(),k.b(t)})}(t.dataset.id,r,a),document.body.classList.remove("dragging"),e()})})},onMove:function(e,t,n,i,a){if(n){var o=t.getBoundingClientRect();if(n!==e){var r=n.getBoundingClientRect();t.remove(),o.bottom>r.bottom?n.appendChild(t):n.insertBefore(t,n.firstElementChild)}else if(i&&i!==t){if(i.classList.contains("default"))return;var s=i.getBoundingClientRect(),l=a.getBoundingClientRect();o.top>=s.bottom?l.height<=s.top&&l.top<s.top+s.height/2&&(t.remove(),n.insertBefore(t,i)):l.bottom>s.top+s.height/2&&s.bottom<=window.innerHeight&&(t.remove(),n.insertBefore(t,i.nextElementSibling))}}}}),ye.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&e.target.classList.contains("tag")&&!Di.classList.contains("searching")&&(e.target.classList.contains("selected")?e.target.classList.remove("selected"):(e.target.classList.contains("untagged")?bl():((document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)||bl(),document.querySelector(".tag.untagged").classList.remove("selected")),e.target.classList.add("selected")),jl())}),je.addEventListener("click",function(){bl(),jl()}),ji.addEventListener("click",Sl),Ei.addEventListener("click",Sl),Si.addEventListener("click",Sl);var El={};function wl(){Oa=!1,Ia?(Vt.src=Zeplin.urls.appURL+"/img/grab.svg",document.body.classList.contains("mac")||(Zt.classList.remove("panMode"),Zt.classList.add("holdingSpace"))):Zt.classList.remove("panMode"),document.removeEventListener("mouseup",wl)}function Ll(e){if(q.c()&&Yt.classList.contains("hidden")&&Dn.classList.contains("hidden")&&On.classList.contains("hidden")&&!xi.classList.contains("focus")&&!document.querySelector(".optionsOpen")&&!ha){if(e.keyCode===Zeplin.KEY_CODE.ArrowLeft)e.preventDefault(),Sl(),window.ImportProgresses&&ImportProgresses.hideImportProgressesContainer(),oa-1>=0&&(oa--,Bo(i.id,Ho(oa).dataset.id));else if(e.keyCode===Zeplin.KEY_CODE.ArrowRight)e.preventDefault(),Sl(),window.ImportProgresses&&ImportProgresses.hideImportProgressesContainer(),oa>=0&&oa+1<ul()&&(oa++,Bo(i.id,Ho(oa).dataset.id));else if(e.keyCode===Zeplin.KEY_CODE.ArrowUp){if(!Mt.classList.contains("versionsShown"))return;e.preventDefault(),Sl(),(t=ra.versions.findIndex(function(e){return e._id===sa._id})-1)>=0&&tr(ra,ra.versions[t],{scrollIfNecessary:!0})}else if(e.keyCode===Zeplin.KEY_CODE.ArrowDown){if(!Mt.classList.contains("versionsShown"))return;var t;e.preventDefault(),Sl(),(t=ra.versions.findIndex(function(e){return e._id===sa._id})+1)<ra.versions.length&&tr(ra,ra.versions[t],{scrollIfNecessary:!0})}else if(e.keyCode===Zeplin.KEY_CODE.SPACE)e.preventDefault(),Ia||(Ia=!0,document.body.classList.contains("mac")?(Zt.classList.add("panMode"),Vt.src=Oa?Zeplin.urls.appURL+"/img/grabbing.svg":Zeplin.urls.appURL+"/img/grab.svg",Vt.classList.remove("hidden"),Vt.style.transform="translate("+(El.x-8+zt.scrollLeft)+"px, "+(El.y-68+zt.scrollTop)+"px)"):Oa?Zt.classList.add("panMode"):Zt.classList.add("holdingSpace"));else if(e.altKey)switch(e.keyCode){case Zeplin.KEY_CODE.KeyEqualGecko:case Zeplin.KEY_CODE.KeyEqualWebkit:e.preventDefault(),e.stopPropagation(),_c();break;case Zeplin.KEY_CODE.KeyMinusGecko:case Zeplin.KEY_CODE.KeyMinusWebkit:e.preventDefault(),e.stopPropagation(),Ic();break;case Zeplin.KEY_CODE.Digit0:e.preventDefault(),e.stopPropagation(),fa=1,Zt.classList.add("zooming"),ls();break;case Zeplin.KEY_CODE.KeyT:e.preventDefault(),e.stopPropagation(),i&&i.screens&&ra&&Xu(ra._id)}e.shiftKey&&(e.altKey||e.ctrlKey||e.metaKey?hc():gc())}}function Cl(e){e.shiftKey?!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||gc():hc()}function Dl(e){(document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)&&e.keyCode===Zeplin.KEY_CODE.KeyF&&(e.preventDefault(),Zi.classList.add("hidden"),fe.scrollTop=0,xi.classList.add("focus"),setTimeout(function(){D.o(Ci)},500))}function xl(e){hc()}Zt.addEventListener("mousedown",function(e){Oa=!0,El={x:e.clientX,y:e.clientY},document.addEventListener("mouseup",wl),Ia&&(Zt.classList.remove("holdingSpace"),Zt.classList.add("panMode"),Vt.src=Zeplin.urls.appURL+"/img/grabbing.svg")}),Zt.addEventListener("mousemove",function(e){if(e.preventDefault(),Ia&&Oa){Pc();var t=zt.scrollTop-e.clientY+El.y;t=t>0?t:0;var n=zt.scrollLeft-e.clientX+El.x;n=n>0?n:0,zt.scrollTop=t,zt.scrollLeft=n}Vt.style.transform="translate("+(e.clientX-8+zt.scrollLeft)+"px, "+(e.clientY-68+zt.scrollTop)+"px)",El={x:e.clientX,y:e.clientY}}),document.addEventListener("keyup",function(e){e.keyCode===Zeplin.KEY_CODE.SPACE&&(e.preventDefault(),Ia=!1,Zt.classList.remove("panMode","holdingSpace"),Vt.classList.add("hidden"))}),document.addEventListener("keydown",function(e){if(e.keyCode===Zeplin.KEY_CODE.ESC)Sl();else if(e.altKey)switch(e.keyCode){case Zeplin.KEY_CODE.KeyD:document.body.classList.contains("electron")&&!Na&&(e.preventDefault(),e.stopPropagation(),Oo(i.id,yl()));break;case Zeplin.KEY_CODE.KeyA:e.preventDefault(),e.stopPropagation(),Oo(i.id,yl());break;case Zeplin.KEY_CODE.KeyV:e.preventDefault(),e.stopPropagation(),Gn.classList.contains("collapsed")?is():as();break;case Zeplin.KEY_CODE.KeyS:e.preventDefault(),e.stopPropagation(),Po(i.id);break;case Zeplin.KEY_CODE.KeyG:e.preventDefault(),e.stopPropagation(),us();break;case Zeplin.KEY_CODE.KeyJ:e.preventDefault(),e.stopPropagation(),Zi.classList.add("hidden"),i&&i.screens&&i.screens.length&&Dn.classList.contains("hidden")&&ql();break;case Zeplin.KEY_CODE.KeyR:e.shiftKey&&(e.preventDefault(),e.stopPropagation(),le.a.reloadLocalExtensions())}});var kl=0;function ql(){(Al(),yd(),kl=0,g=0,h=0,Dn.classList.remove("hidden"),xn.value="",xn.focus(),Object.assign(Sa,i.screens),Sa.sort(D.D.name),Tn.classList.toggle("noScreen",!Sa.length),kn.innerHTML="",Sa.forEach(vu),Sa.length)&&(p=Sa[0],kn.querySelector(".screenSuggestion[data-id='"+p._id+"']").classList.add("selected"))}function Tl(){if(ju(),!Vo(p._id))return bl(),Ci.value="",Di.classList.remove("searching"),xi.classList.remove("focus"),void fl();Bo(i.id,p._id)}function _l(e){var t;document.querySelector(".screenSuggestion.selected").classList.remove("selected"),kl=e,p=Sa[e],(t=document.querySelector(".screenSuggestion[data-id='"+p._id+"']")).classList.add("selected"),D.z(t)}function Il(){Fe.style.width=getComputedStyle(Fe).width,Ae.addEventListener("mouseleave",Ol)}function Ol(){Ae.removeEventListener("mouseleave",Ol),Fe.removeAttribute("style")}function Pl(){K.close(),Y.close(),ba&&!la&&_a&&(ba.remove(),ya=null),zt.removeEventListener("scroll",Mc),la=null,ba=null,$t.innerHTML="",$t.scrollTop=0,Yt.classList.add("hidden")}function Bl(){!Yt.classList.contains("hidden")&&ra&&(xa[ra._id]=xa[ra._id]||{},la?(xa[ra._id].reply=xa[ra._id].reply||{},xa[ra._id].reply[la._id]=tn.value):xa[ra._id].comment=tn.value)}function Al(){Bl(),Pl()}function Nl(){if(ba){var e=ba;Pl(),Yl(e)}}function Rl(e){e=e||{},Ul(),sn.classList.add("hidden"),e.willReselect||(Ke.classList.add("resourceView"),Ke.classList.remove("layerView")),Ht.removeEventListener("mouseover",Zl),document.removeEventListener("keydown",Hl),document.removeEventListener("keyup",Hl),document.removeEventListener("keydown",Vl),Zt.removeEventListener("mousemove",Wl),pa=!1,Ht.classList.remove("measuring"),da&&(da.classList.remove("selected"),da=null,c=null,l=null,ka=null,qa=null)}function Ul(){mn.classList.add("hidden"),gn.classList.add("hidden"),fn.classList.add("hidden"),yn.classList.add("hidden")}function Fl(e,t){if(!t)return[e];var n={left:Math.min(e.absoluteRect.x,t.absoluteRect.x),top:Math.min(e.absoluteRect.y,t.absoluteRect.y),right:Math.max(e.absoluteRect.x+e.rect.width,t.absoluteRect.x+t.rect.width),bottom:Math.max(e.absoluteRect.y+e.rect.height,t.absoluteRect.y+t.rect.height)},i=function e(t,n){for(var i=[],a=0;a<t.length;a++){var o=t[a],r=o.absoluteRect.x+o.rect.width,s=o.absoluteRect.y+o.rect.height;o.absoluteRect.x<=n.left&&o.absoluteRect.y<=n.top&&r>=n.right&&s>=n.bottom&&(("group"!==o.type||["bottom","top"].includes(o.interactionLevel))&&i.push(o),"group"===o.type&&(i=i.concat(e(o.layers,n))))}return i}(sa.snapshot.layers,n);return e===t&&(i=i.filter(function(t){return!function(e,t){return e.absoluteRect.x===t.absoluteRect.x&&e.absoluteRect.y===t.absoluteRect.y&&e.rect.width===t.rect.width&&e.rect.height===t.rect.height}(t,e)})),i.length?i.sort(function(e,t){return e.rect.width*e.rect.height-t.rect.width*t.rect.height}):[sa.snapshot.layers[0]]}Tn.addEventListener("click",function(e){e.stopPropagation(),e.target.classList.contains("screenSuggestion")&&(p=Sa[e.target.dataset.index],Tl())}),kn.addEventListener("mousemove",function(e){if(e.stopPropagation(),g!==e.clientX||h!==e.clientY){var t=kn.querySelector(".selected");t&&t.classList.remove("selected"),e.target.classList.add("selected"),kl=parseInt(e.target.dataset.index,10),p=Sa[e.target.dataset.index],g=e.clientX,h=e.clientY}}),Tn.addEventListener("keydown",function(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ArrowDown:e.preventDefault(),Sa.length&&kl<Sa.length-1&&_l(kl+1);break;case Zeplin.KEY_CODE.ArrowUp:e.preventDefault(),Sa.length&&kl>0&&_l(kl-1);break;case Zeplin.KEY_CODE.ENTER:e.preventDefault(),Tl();break;case Zeplin.KEY_CODE.ESC:e.preventDefault(),ju()}}),xn.addEventListener("input",function(e){e.preventDefault(),function(e){e=e.toLowerCase();var t,n=[],a=[],o=[],r=[];if(i.screens.forEach(function(i){var s=i.name.toLowerCase();s.startsWith(e)?n.push(i):D.F(s,e)?a.push(i):(t=function(e,t){return e.tags&&e.tags.find(function(e){return e.toLowerCase().includes(t)})}(i,e))?o.push(Object.assign({filterTag:t},i)):s.includes(e)&&r.push(i)}),Sa=n.sort(D.D.name).concat(a.sort(D.D.name)).concat(o.sort(D.D.name)).concat(r.sort(D.D.name)),Tn.classList.toggle("noScreen",!Sa.length),kn.innerHTML="",Sa.forEach(vu),Sa.length){p=Sa[0];var s=kn.querySelector(".screenSuggestion[data-id='"+p._id+"']");s.classList.add("selected")}}(e.target.value)}),qn.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),i.screens&&i.screens.length&&Dn.classList.contains("hidden")&&ql()}),Re.addEventListener("click",function(){oa-1>=0&&(Il(),oa--,Bo(i.id,Ho(oa).dataset.id))}),Ue.addEventListener("click",function(){oa+1<i.screens.length&&(Il(),oa++,Bo(i.id,Ho(oa).dataset.id))}),document.addEventListener("click",function(e){e.button!==Zeplin.MOUSE_BUTTON.LEFT||La||Sl(),La=!1}),document.getElementById("closeLayerView").addEventListener("click",function(){Pl(),Rl()});var Ml=0;function zl(e,t,n){Ul();var i=document.querySelector(".parent");i&&i.classList.remove("parent"),e&&t&&(e&&t&&e===t&&(da.querySelector(".layerWidth").textContent=ha?Yo(e.rect.width/n.rect.width,"%"):Yo(e.rect.width),da.querySelector(".layerHeight").textContent=ha?Yo(e.rect.height/n.rect.height,"%"):Yo(e.rect.height)),n&&function(e){var t=document.querySelector(".parent");t&&t.classList.remove("parent"),(t=e?document.querySelector(".layer[data-id='"+e+"']"):Ht)&&t.classList.add("parent")}(n._id),function(e,t,n){var i=sa.snapshot.width,a=e.absoluteRect,o=a.x,r=o+a.width,s=t.absoluteRect,l=s.x,c=l+s.width,u=!1,d=-1,m=-1;c<o?(d=o-c,mn.style.left=Ko(c,i)):l<o&&c>r?(d=o-l,mn.style.left=Ko(l,i),m=c-r,gn.style.left=Ko(r,i),fn.style.left=Ko((o+r)/2,i),yn.style.left=Ko((o+r)/2,i),u=!0):l>o&&c<r?(d=l-o,mn.style.left=Ko(o,i),m=r-c,gn.style.left=Ko(c,i)):c>o&&c<r?(d=o-l,mn.style.left=Ko(l,i),c-o>7&&(fn.style.left=Ko((c+o)/2,i),yn.style.left=Ko((c+o)/2,i),u=!0)):l>o&&l<r?(d=l-o,mn.style.left=Ko(o,i),r-l>7&&(fn.style.left=Ko((l+r)/2,i),yn.style.left=Ko((l+r)/2,i),u=!0)):l>r&&(m=l-r,gn.style.left=Ko(r,i));-1!==d&&(mn.style.width=Ko(d,i),pn.textContent=ha?Yo(d/n.rect.width,"%"):Yo(d),mn.classList.remove("hidden")),-1!==m&&(gn.style.width=Ko(m,i),hn.textContent=ha?Yo(m/n.rect.width,"%"):Yo(m),gn.classList.remove("hidden")),u||(fn.style.left=Ko((l+c)/2,i),yn.style.left=Ko((l+c)/2,i))}(e,t,n),function(e,t,n){var i=sa.snapshot.height,a=e.absoluteRect,o=a.y,r=o+a.height,s=t.absoluteRect,l=s.y,c=l+s.height,u=!1,d=-1,m=-1;c<o?(d=o-c,fn.style.top=Ko(c,i)):l<o&&c>r?(d=o-l,fn.style.top=Ko(l,i),m=c-r,yn.style.top=Ko(r,i),mn.style.top=Ko((o+r)/2,i),gn.style.top=Ko((o+r)/2,i),u=!0):l>o&&c<r?(d=l-o,fn.style.top=Ko(o,i),m=r-c,yn.style.top=Ko(c,i)):c>o&&c<r?(d=o-l,fn.style.top=Ko(l,i),c-o>7&&(mn.style.top=Ko((c+o)/2,i),gn.style.top=Ko((c+o)/2,i),u=!0)):l>o&&l<r?(d=l-o,fn.style.top=Ko(o,i),r-l>7&&(mn.style.top=Ko((l+r)/2,i),gn.style.top=Ko((l+r)/2,i),u=!0)):l>r&&(m=l-r,yn.style.top=Ko(r,i));-1!==d&&(fn.style.height=Ko(d,i),bn.textContent=ha?Yo(d/n.rect.height,"%"):Yo(d),fn.classList.remove("hidden")),-1!==m&&(yn.style.height=Ko(m,i),vn.textContent=ha?Yo(m/n.rect.height,"%"):Yo(m),yn.classList.remove("hidden")),u||(mn.style.top=Ko((l+c)/2,i),gn.style.top=Ko((l+c)/2,i))}(e,t,n))}function Zl(e){if(e.stopPropagation(),ha=e.altKey,c=null,Ul(),Ht.classList.remove("measuring"),e.target.classList.contains("layer")){if(e.target.classList.contains("selected")||Ht.classList.add("measuring"),c=hs(sa.snapshot.layers,"_id",e.target.dataset.id),ha){var t=Fl(l,c);D.a(ma,t,function(e,t){return e===t})||(ma=t,Ml=0)}else ma=[],Ml=0;zl(l,c,ma[Ml])}else{var n=document.querySelector(".parent");n&&n.classList.remove("parent")}}function Hl(e){var t;e.keyCode!==Zeplin.KEY_CODE.ALT||e.shiftKey||(e.preventDefault(),ha=e.altKey,pa&&d?Wl(d):(ha?t=(ma=Fl(l,c))[Ml]:(ma=[],Ml=0),zl(l,c,t)))}function Vl(e){e.keyCode===Zeplin.KEY_CODE.ArrowUp?(e.preventDefault(),Ml=(Ml+1)%ma.length,zl(l,c,ma[Ml])):e.keyCode===Zeplin.KEY_CODE.ArrowDown&&(e.preventDefault(),Ml=(Ml-1+ma.length)%ma.length,zl(l,c,ma[Ml]))}function Wl(e){var t=Ht.getBoundingClientRect(),n=sa.snapshot.width,i=sa.snapshot.height,a=l.absoluteRect.x,o=a+l.rect.width,r=l.absoluteRect.y,s=r+l.rect.height;e!==d&&(ha=e.altKey),Ul(),c=null,d=e,e.clientX<t.left&&(mn.style.left=0,mn.style.width=Ko(a,n),pn.textContent=ha?Yo(a/n,"%"):Yo(a),mn.style.top=Ko((r+s)/2,i),mn.classList.remove("hidden")),e.clientY<t.top&&(fn.style.top=0,fn.style.height=Ko(r,i),bn.textContent=ha?Yo(r/i,"%"):Yo(r),fn.style.left=Ko((a+o)/2,n),fn.classList.remove("hidden")),e.clientX>t.right&&(gn.style.left=Ko(o,n),gn.style.width=Ko(n-o,n),hn.textContent=ha?Yo((n-o)/n,"%"):Yo(n-o),gn.style.top=Ko((r+s)/2,i),gn.classList.remove("hidden")),e.clientY>t.bottom&&(yn.style.top=Ko(s,i),yn.style.height=Ko(i-s,i),vn.textContent=ha?Yo((i-s)/i,"%"):Yo(i-s),yn.style.left=Ko((a+o)/2,n),yn.classList.remove("hidden"))}function Yl(e,t){if(e&&i.users){Array.isArray(t)&&1===t.length&&(t=t[0]);var n="string"==typeof e?document.querySelector(".dot[data-id='"+e+"']"):e;n?n!==ba?(Ft.checked=!0,Wt.classList.remove("invisible"),Pl(),n.classList.remove("hover"),ba=n,Gr(Yt),Jr(Yt),Yt.classList.remove("left","right"),Yt.classList.add(Ka[new P.a(Xa[ba.dataset.color]).hexBase()],ba.dataset.position),Yt.classList.toggle("canRemoveNotes",D.v.canRemoveNotes(a)),en.innerHTML="&nbsp;",tn.value="",Jt.classList.remove("hidden"),"undefined"===ba.dataset.id?(Yt.classList.add("open"),Yt.dataset.id="undefined",Jt.classList.add("composing"),xa[ra._id]&&xa[ra._id].comment&&(en.innerHTML=D.f(xa[ra._id].comment)+"&nbsp;",tn.value=xa[ra._id].comment),setTimeout(function(){tn.focus(),tn.setSelectionRange(tn.value.length,tn.value.length)},4)):(la=ra.dots.find(function(e){return e._id===ba.dataset.id}),Yt.classList.add(la.status),ba.classList.remove("highlight"),la.comments.forEach(function(e){Jc(e,ra._id,la._id)}),go(t),Yt.dataset.id=la._id,xa[ra._id]&&xa[ra._id].reply&&xa[ra._id].reply[la._id]?(Jt.classList.add("composing"),en.innerHTML=D.f(xa[ra._id].reply[la._id])+"&nbsp;",tn.value=xa[ra._id].reply[la._id],setTimeout(function(){tn.focus(),tn.setSelectionRange(tn.value.length,tn.value.length)},4)):(Xc(),Jt.classList.remove("composing"))),"undefined"!==ba.dataset.id?setTimeout(function(){!function(e){if(D.q(e,zt))zc();else{var n=e.getBoundingClientRect(),i=zt.scrollLeft,a=zt.scrollTop;n.left<0?i=zt.scrollLeft+n.left-60:n.right>zt.offsetWidth&&(i=n.right-zt.offsetWidth+60),n.top<92?a=zt.scrollTop+n.top-60-Rc-60:n.bottom>window.innerHeight&&(a=zt.scrollTop+(n.bottom-window.innerHeight)+60),"scrollTo"in Element.prototype?(zt.scrollTo({left:i,top:a,behavior:"smooth"}),setTimeout(function(){zc()},450)):(zt.scrollLeft=i,zt.scrollTop=a,zc())}t?go(t):$t.lastElementChild.scrollIntoView()}(ba)},200):zc()):go(t):L.a({message:"Note not available anymore."})}}var Kl=document.getElementById("layerBorderTemplate");function Xl(e){var t=document.importNode(Kl.content,!0);switch(t.querySelector(".borderPosition").textContent=e.position,t.querySelector(".borderThickness").textContent=Yo(e.thickness),Et.appendChild(t),e.fillType){case"color":xr(e.color,Et);break;case"gradient":kr(e.gradient,Et)}}function $l(e){if(l){var t=new A.a(l),n=Array.from(ft.children);if("text"===t.type){if("string"==typeof e)return ft.querySelector('.textStyleWrapper[data-id="'+e+'"]');if("object"==typeof e){var i=new B.a(e);return n.find(function(e){var n=t.textStyles[e.dataset.index];return n&&i.equals(n.font)})}}}}function Jl(e,t){function n(e,t){e.textContent=Yo(t,"text")}var a={name:{selector:".layerTextStyle .textStyleName",cb:function(e,t){e.value=t}},fontFace:{selector:".layerFontFace .fontFace"},fontSize:{selector:".layerFontSize",cb:n},textAlign:{selector:".layerTextAlign",cb:function(e,t){e.textContent=t?D.H(t):""}},lineHeight:{selector:".layerLineHeight",cb:n},letterSpacing:{selector:".layerLetterSpacing",cb:function(e,t){"number"==typeof t&&(e.textContent="android"===i.type?D.y(t/i.densityDivisor,2):Yo(t,"text"))}},color:{selector:".layerTextColor",cb:function(e,t){e.innerHTML="",t&&xr(t,e)}},header:{selector:".typefaceHeader > h2 > span:nth-child(2)"}};Object.keys(t).forEach(function(n){var i=a[n];if(i&&i.selector){var o=e.querySelector(i.selector);i.cb?i.cb(o,t[n]):o.textContent=t[n]}})}function Gl(e){return["turquoise","cornflower-blue","light-green","yellow","peach"][parseInt(e,10)]||"warm-gray-"+e}function Ql(e,t){if(!t.length)return e;var n="",i=0;return t.forEach(function(t){var a,o=t.range,r=e.substring(o.start,o.end);if(o.start>i)n+=D.f(e.substring(i,o.start));else if(o.start<i)return;-1===t.groupId?n+=D.f(r):n+=(a=r,'<span class="highlightedLayerContent" data-color-group="'+Gl(t.groupId)+'">'+D.f(a)+"</span>"),i=o.end}),n+=D.f(e.substring(i,e.length))}function ec(e){function t(t,n,o){var r=function(e){var t=document.getElementById("layerTextStyleTemplate"),n=document.importNode(t.content,!0).querySelector(".textStyleWrapper"),o=n.querySelector(".addTextStyle"),r=i.getMostConformingTextStyle(e);r&&(n.classList.add("added"),n.dataset.id=r.id,e.name=r.name),Jl(n,e);var s=D.v.canManageTextStyles(a);return n.querySelector(".textStyleName").readOnly=!s,o.classList.toggle("disabled",!s),So(o,!!r),n}(t);return r.dataset.index=e.textStyles.findIndex(function(e){return e.font.equals(t)}),n>-1&&(Jl(r,{header:o}),r.dataset.colorGroup=Gl(n)),ft.appendChild(r),r}var n=function(e){var t,n=e.getDefaultTextStyle(),i=[],a=0;return e.textStyles.forEach(function(e){if(n&&n.equals(e.font))t=-1;else{var o=i.find(function(t){return t.font.equals(e.font)});o?t=o.groupId:(t=a,a+=1)}i.push(Object.assign({},e,{groupId:t}))}),i}(e),o=[];ft.innerHTML="",n.sort(function(e,t){return e.range.start-t.range.start}).forEach(function(n,i){if(!(o.indexOf(n.groupId)>-1)){var a=n.range,r=e.content.substring(a.start,a.end);t(n.font,n.groupId,r),o.push(n.groupId)}}),yt.innerHTML=Ql(e.content,n)}function tc(e,t,n,a){if(e){Fr(t).then(function(e){qt.className=e.lightness}),qt.src=t.url,qt.srcset=zr(n.contents),qt.style.height=Math.min(e.rect.height/i.densityDivisor+4,160)+"px",Tt.textContent=Vr(n,a),Tt.title=Vr(n,a);for(var o={},r=new Set,s=0;s<n.contents.length;s++){var l=n.contents[s];l.format in o?o[l.format]++:o[l.format]=1,r.add(l.density)}for(var c in _t.innerHTML="",o){if("svg"===c)var u=n.contents.find(function(e){return"svg"===e.format});Hr({aid:n._id,format:c,count:o[c],densities:r,percent:u&&u.optimized.percent},_t)}if(kt.classList.remove("hidden"),"jpg"in o&&!("svg"in o)&&!("pdf"in o)){if(n.percent)kt.querySelector(".assetExporter[data-format='"+n.percent.type+"'][data-aid='"+n._id+"']").querySelector(".assetStats").textContent=n.percent.diff;x.c.get("hideNoVectorAssetInfo").then(function(e){if(!e){var t=C.a({content:"This layer contains bitmap images, so no vector assets were generated.",hideCallback:function(){x.c.set("hideNoVectorAssetInfo",!0)}});_t.appendChild(t)}})}}}function nc(){return"android"===i.type?Promise.resolve("snakeCase"):x.b.get(na.pid,"assetNamingConvention")}ft.addEventListener("mouseover",function(e){var t=e.target.closest(".textStyleWrapper");if(t&&(!e.relatedTarget||e.relatedTarget.closest(".textStyleWrapper")!==t)){var n=yt.querySelectorAll('span[data-color-group="'+t.dataset.colorGroup+'"]');Array.from(n).forEach(function(e){e.classList.add("hovered")})}}),ft.addEventListener("mouseout",function(e){var t=e.target.closest(".textStyleWrapper");if(t&&(!e.relatedTarget||e.relatedTarget.closest(".textStyleWrapper")!==t)){var n=yt.querySelectorAll('span[data-color-group="'+t.dataset.colorGroup+'"]');Array.from(n).forEach(function(e){e.classList.remove("hovered")})}});const ic=document.getElementById("layerName"),ac=document.getElementById("layerPositionX"),oc=document.getElementById("layerPositionY"),rc=document.getElementById("layerWidth"),sc=document.getElementById("layerHeight"),lc=document.getElementById("layerRotation"),cc=document.getElementById("layerOpacity"),uc=document.getElementById("layerRadius"),dc=document.getElementById("layerBlendMode"),mc=document.getElementById("layerLink"),pc=document.getElementById("layerLinkRowTemplate");function gc(){rn.classList.remove("invisible"),on.classList.add("invisible"),Wt.classList.add("invisible")}function hc(){rn.classList.add("invisible"),on.classList.remove("invisible"),Wt.classList.toggle("invisible",!Ft.checked)}function fc(e){if(getSelection().removeAllRanges(),Ia||e===da)return;if(Ul(),Ht.classList.remove("measuring"),da&&da.classList.remove("selected"),da=null,!sa.snapshot.layers)return;if(!(l=hs(sa.snapshot.layers,"_id",e.dataset.id)))return;da=e,c=l,u=l.sourceId;var t=l.rect.width,n=l.rect.height,a=l.absoluteRect.x,o=l.absoluteRect.y,r=l.rotation,s=l.opacity,d=l.borderRadius,m=l.blendMode;da.classList.add("selected"),ln.style.top=Ko(o,sa.snapshot.height),un.style.top="calc("+Ko(o+n,sa.snapshot.height)+" - 1px)",dn.style.left=Ko(a,sa.snapshot.width),cn.style.left="calc("+Ko(a+t,sa.snapshot.width)+" - 1px)",sn.classList.remove("hidden"),Ht.addEventListener("mouseover",Zl),document.addEventListener("keydown",Hl),document.addEventListener("keydown",Vl),document.addEventListener("keyup",Hl),ic.textContent=l.name,ac.textContent=Yo(a),oc.textContent=Yo(o),rc.textContent=Yo(t),sc.textContent=Yo(n),lc.textContent=r||"",cc.textContent=1===s?"":Math.round(100*s)+"%",uc.textContent=Yo(0===d?null:d),dc.textContent="normal"===m?"":m;const p=function(e){if(sa.snapshot.links)return sa.snapshot.links.find(function(t){return D.w(t.rect,e)})}(l.absoluteRect);if(p){mc.innerHTML="";const e=document.importNode(pc.content,!0).querySelector("div"),t=e.querySelector(".layerLinkName"),n=e.querySelector(".layerLinkButton");let a,o;switch(p.destination.type){case"previous":t.textContent="previous screen",t.removeAttribute("href"),n.removeAttribute("href");break;case"screen":t.textContent=p.destination.name,(a=i.findScreenByName(p.destination.name))?(o=D.I("project-screen",{url:{pid:i.id,sid:a._id}}),t.href=o,t.addEventListener("click",Rl),n.href=o,n.addEventListener("click",Rl)):(t.removeAttribute("href"),n.removeAttribute("href"))}mc.appendChild(e),x.c.get("flowLinkInfoDismissed").then(function(e){if(e||ht.querySelector(".flowLinkInfo"))return;const t=C.a({content:"This area is linked to another screen. To quickly view links and navigate to linked screens, hold down <strong>Shift</strong>.",type:"html",padBottom:!0,hideCallback:function(){x.c.set("flowLinkInfoDismissed",!0)}});t.classList.add("flowLinkInfo"),ht.insertBefore(t,mc.nextElementSibling)})}else{mc.innerHTML="";const e=ht.querySelector(".flowLinkInfo");e&&e.remove()}var g;(Et.innerHTML="",l.borders.forEach(Xl),St.classList.toggle("hidden",!l.borders.length),Lt.innerHTML="",l.shadows.forEach(Tr),wt.classList.toggle("hidden",!l.shadows.length),l.blur?(Dt.textContent=l.blur.type,xt.textContent=Yo(l.blur.radius),Ct.classList.remove("hidden")):Ct.classList.add("hidden"),"text"===l.type)&&ec(new A.a(l));ht.classList.toggle("textLayer","text"===l.type);var h=!0;if(l.exportable&&(g=sa.snapshot.assets.find(function(e){return e.layerId?e.layerId===l.sourceId:e.layerName===l.name}))){var f=Mr(g.contents);f&&(h=!1,nc().then(function(e){tc(l,f,g,e)}))}kt.classList.toggle("hidden",h),l.fills.length?(jt.innerHTML="",l.fills.forEach(function(e){!function(e,t){switch(e.fillType){case"color":xr(e.color,t);break;case"gradient":kr(e.gradient,t)}}(e,jt)}),vt.classList.remove("hidden")):vt.classList.add("hidden"),jc(g),Ke.classList.remove("resourceView"),Ke.classList.add("layerView")}function bc(e){return fetch(e.url,{method:"HEAD"}).then(function(t){return{format:e.format,density:e.density,length:t.headers.get("Content-Length")}})}function yc(e,t,n=!0){var i=e.extensions.find(function(e){return e._id===t});if(i||le.a.addExtension(e,t),n)if(i)vc(e.id,t);else var a=le.b.addListener(function(){le.b.getState().extensions.find(function(e){return e.id===t})&&(vc(e.id,t),a.remove())})}function vc(e,t){document.querySelector(".extensionDialog")||ee.a.render(ee.a.h(ae.a,{projectId:e,selectedExtensionId:t,canRemoveExtensions:D.v.canRemoveExtensions(a)}),document.body)}function jc(e){if(l){var t=new A.a(Object.assign({},l,{asset:e}));ee.a.render(ee.a.h(re.a,{layer:t,copyEnabled:document.queryCommandSupported("copy"),onCopyClick:ru,onSettingsClick:vc.bind(null,i.id)}),Qi,Qi.lastChild)}}var Sc,Ec={android:"light_orange",ios:"lightOrange",osx:"lightOrange",web:"light-orange"},wc=[new P.a({r:254,g:207,b:51,a:1,name:"yellow"}),new P.a({r:253,g:189,b:57,a:1,name:"lightOrange"}),new P.a({r:238,g:103,b:35,a:1,name:"peach"})],Lc=Object.freeze({android:[new B.a({name:"header",fontFace:"Roboto-Regular",fontSize:24,color:{r:87,g:71,b:81}})],ios:[new B.a({name:"header",fontFace:"SFUIDisplay-Regular",fontSize:24,color:{r:87,g:71,b:81}})],osx:[new B.a({name:"header",fontFace:"SFUIDisplay-Regular",fontSize:24,color:{r:87,g:71,b:81}})],web:[new B.a({name:"header",fontFace:"system-ui",fontSize:24,color:{r:87,g:71,b:81}})]});function Cc(){wc[1].name=Ec[i.type],document.querySelector(".sampleColors .color:nth-child(2) .colorName").textContent=Ec[i.type];var e,t="color palette";i.colors&&i.colors.length?e=i.colors:(e=wc,t="sample "+t);var n,a="text styles";i.textStyles&&i.textStyles.length?n=i.textStyles:(n=Lc[i.type],a="sample "+a);var o=vc.bind(null,i.id);ee.a.render(ee.a.h(oe.a,{colorTitle:D.H(t),colors:e,textStyleTitle:D.H(a),textStyles:n,onExportClick:du,onSettingsClick:o,onManageExtensionsClick:o}),Gi,Gi.lastChild)}function Dc(){return document.querySelector('input[type="radio"][name="dotListingsStatusFilter"]:checked').value}function xc(e,t){!e||"open"!==e&&"resolved"!==e||(t&&(document.querySelector('input[type="radio"][name="dotListingsStatusFilter"][value="'+e+'"]').checked=!0),Wt.dataset.statusFilter=e,gr(ra.dots),x.b.set(na.pid,"dotListingsStatusFilter",e))}Array.from(document.querySelectorAll('input[type="radio"][name="dotListingsStatusFilter"]')).forEach(function(e){e.addEventListener("change",function(e){xc(e.target.value)})}),Array.from(document.querySelectorAll(".sidebarOptionsButton[data-menu-id]")).forEach(function(e){e.addEventListener("click",function(t){t.stopPropagation(),Al(),yd();var n=e.closest(".sidebarOptionRealm"),i=document.getElementById(e.dataset.menuId);if(n.classList.contains("optionsOpen"))Cd(e);else{var a=D.k(e)||n;yd(),n.classList.add("optionsOpen"),a.classList.add("optionsOpen"),i.classList.add("open"),function(e,t){if(null===t.querySelector(".subMenu"))return;var n=t.getBoundingClientRect().width;e.offsetWidth>=n+56+120?(t.classList.remove("toLeft"),t.classList.add("toRight")):(t.classList.remove("toRight"),t.classList.add("toLeft"))}(a,i),function(e,t){var n,i,a=parseInt(e.dataset.menuOffsetX,10),o=parseInt(e.dataset.menuOffsetY,10),r=e.closest(".sidebarOptionRealm").getBoundingClientRect(),s=e.getBoundingClientRect(),l=t.getBoundingClientRect(),c=s.bottom-60-o,u=s.right-r.left-a;i=c<12?12:c+l.height+12>window.innerHeight-60?window.innerHeight-l.height-12-60:c;n=u+l.width+12>r.width?r.width-l.width-12:u;t.style.transform="translate3d("+n+"px, "+i+"px, 0)"}(e,i)}})}),It.addEventListener("change",function(){clearTimeout(Sc),Sc=setTimeout(function(){Ot.checked=It.checked,x.b.set(na.pid,"showOptimizedSVG",It.checked).then(function(){Array.from(document.querySelectorAll(".assetExporter[data-format='svg']")).forEach(function(e){e.querySelector(".assetStats").classList.toggle("hidden",!It.checked)})})})}),Ot.addEventListener("change",function(){clearTimeout(Sc),Sc=setTimeout(function(){It.checked=Ot.checked,x.b.set(na.pid,"showOptimizedSVG",Ot.checked).then(function(){Array.from(document.querySelectorAll(".assetExporter[data-format='svg']")).forEach(function(e){e.querySelector(".assetStats").classList.toggle("hidden",!Ot.checked)})})})});var kc,qc,Tc=!1;function _c(){for(var e=0;e<Rt.childElementCount;e++){var t=parseFloat(Rt.children[e].value);if(t>fa){fa=t;break}}Zt.classList.add("zooming"),ls()}function Ic(){for(var e=Rt.childElementCount-1;e>=0;e--){var t=parseFloat(Rt.children[e].value);if(t<fa){fa=t;break}}Zt.classList.add("zooming"),ls()}(Ht.addEventListener("click",function(e){if(yd(),Ca)Ca=!1;else{var t=!1;if(e.target.classList.contains("dot"))e.stopPropagation(),t=!0,Bl(),Yl(e.target);else if(Tc||(document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)){e.stopPropagation(),t=!0,Pc(),Ft.checked=!0,Wt.classList.remove("invisible"),x.b.set(na.pid,"noteVisibility",!0),Bl(),Pl(),xc("open",!0);var n=Wt.getBoundingClientRect(),i=ra.dots&&ra.dots.length?""+(parseInt(ra.dots[ra.dots.length-1].name,10)+1):"1";la=null,x.b.get(na.pid,"lastNoteColorUsed").then(function(t){Yl(Qr(ya={name:i,x:Math.max(0,Math.min((e.clientX-n.left)/n.width,1)),y:Math.max(0,Math.min((e.clientY-n.top)/n.height,1)),color:Xa[t]}))})}else if(e.target.classList.contains("layer")){e.stopPropagation(),t=!0,Al();var a=e.target;if(document.elementsFromPoint){var o=document.elementsFromPoint(e.clientX,e.clientY).filter(function(e){return e.classList.contains("layer")});if(ka&&qa){var r=document.elementsFromPoint(ka,qa).filter(function(e){return e.classList.contains("layer")});if(Math.hypot(ka-e.clientX,qa-e.clientY)>40||!D.a(o,r,function(e,t){if(e.dataset.index===t.dataset.index)return!0}))a=o[0];else a=o[(o.findIndex(function(e){return e.classList.contains("selected")})+1)%o.length]}else a=o[0];ka=e.clientX,qa=e.clientY}fc(a)}t&&(ge.classList.add("hidden"),he.classList.add("hidden"),$e.submitEdits())}}),Ht.addEventListener("mouseleave",function(){if(da){Zt.addEventListener("mousemove",Wl),Ht.classList.add("measuring"),pa=!0;var e=document.querySelector(".parent");e&&e.classList.remove("parent")}}),Ht.addEventListener("mouseenter",function(e){Zt.removeEventListener("mousemove",Wl),pa=!1}),Zt.addEventListener("mouseenter",function(){Ia&&document.body.classList.contains("mac")&&Vt.classList.remove("hidden"),Ht.classList.add("measuring"),pa=!0}),Zt.addEventListener("mouseleave",function(){Vt.classList.add("hidden"),pa=!1,Ht.classList.remove("measuring"),Ul()}),At.addEventListener("click",function(e){e.stopPropagation(),_c()}),Ut.addEventListener("click",function(e){e.stopPropagation(),Ic()}),Rt.addEventListener("click",function(e){e.stopPropagation()}),Rt.addEventListener("change",function(){fa=parseFloat(Rt.value),Zt.classList.add("zooming"),ls({updateSelectedIndex:!1})}),Zt.addEventListener("wheel",function(e){e.ctrlKey&&(e.preventDefault(),fa=Math.max(.25,Math.min(fa-e.deltaY/100,5)),ls())}),"GestureEvent"in window)&&(Zt.addEventListener("gesturestart",function(e){e.preventDefault(),kc=fa}),Zt.addEventListener("gesturechange",function(e){e.preventDefault(),fa=Math.max(.25,Math.min(kc*e.scale,5)),ls()}));function Oc(){Ft.checked=!0,Wt.classList.remove("invisible"),Wt.addEventListener("transitionend",function e(){Wt.removeEventListener("transitionend",e),setTimeout(function(){Wt.classList.remove("flashing")},200)}),Wt.classList.add("flashing"),Zt.classList.add("noteMode"),Tc=!0}function Pc(){Zt.classList.remove("noteMode"),Tc=!1}Ft.addEventListener("change",function(){Wt.classList.toggle("invisible",!Ft.checked),clearTimeout(qc),qc=setTimeout(function(){x.b.set(na.pid,"noteVisibility",Ft.checked)},1e3)}),document.getElementById("addNoteButton").addEventListener("click",function(e){e.stopPropagation(),Oc()}),Array.from(document.querySelectorAll(".addFirstNoteButton")).forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation(),Oc()})});var Bc=6,Ac=13,Nc=26,Rc=29;function Uc(e){var t=e.getBoundingClientRect(),n=Yt.getBoundingClientRect(),i=Bc,a=Bc,o=Rc,r=!1;t.right<=0?(r=!0,i=Bc):t.left>=zt.offsetWidth?(r=!0,i=zt.offsetWidth-Bc-n.width):t.left<=n.width+Bc+Ac?(Yt.classList.remove("left"),Yt.classList.add("right"),i=t.right+Ac):t.right+Ac+n.width+Bc>=zt.offsetWidth?(Yt.classList.remove("right"),Yt.classList.add("left"),i=t.left-Ac-n.width):(Yt.classList.remove("left","right"),Yt.classList.add(e.dataset.position),i="left"===e.dataset.position?t.left-Ac-n.width:t.right+Ac),t.top<=zt.offsetTop+Nc+Bc?(r=!0,a=zt.offsetTop+Bc):t.bottom>=window.innerHeight-Nc?(r=!0,a=window.innerHeight-n.height-Bc):t.top>=window.innerHeight-n.height+Nc-Bc?(a=window.innerHeight-n.height-Bc,o=t.top-a+Bc):t.top+n.height-Rc>window.innerHeight?(r=!0,a=window.innerHeight-n.height-Bc):a=t.top-Nc,Yt.classList.toggle("overflown",r),Yt.style.transform="translate("+i.toFixed()+"px, "+a.toFixed()+"px)",Kt.style.top=o+"px"}var Fc=!1;function Mc(){ba&&!Fc&&(requestAnimationFrame(function(){Uc(ba),Fc=!1}),Fc=!0)}function zc(){Yt.classList.remove("hidden"),Uc(ba),zt.addEventListener("scroll",Mc)}function Zc(e){const t=function(e){var t=(e=new URL(e)).origin===location.origin,n="zpl:"===e.protocol;if(t||n){var i={query:{}};if(e.hash||n){var a=(n?e.search||e.href.substring(e.href.indexOf("?")):e.hash).replace("&amp;","&").substring(1),o=D.u(a);if(!("pid"in o))return;return i.url={pid:o.pid[0]},"sid"in o?i.url.sid=o.sid[0]:t&&"styleguide"in o||n&&(e.pathname.startsWith("//styleguide")||e.pathname.startsWith("//guideline"))?i.subpage="styleguide":i.subpage="dashboard",i}var r=co(e.pathname);if(r){Object.assign(i,{url:r});var s=e.pathname.match(/\/(dashboard|styleguide)$/);if(s&&(i.subpage=s[1]),e.search){var l=D.u(e.search.replace(/&amp;/g,"&"));Object.assign(i,{query:l})}return i}}}(e);if(!(t&&"pid"in t.url&&t.url.pid===i.id))return;let n="project-dashboard",a="Dashboard",o=["link"];if("sid"in t.url){n="project-screen";const e=i.screens.find(function(e){return e._id===t.url.sid}),r=e?e.name:"unknown";if("did"in t.query)if(t.query.did.length>1)a=`Notes on ${r}`;else{const n=e.dots&&e.dots.find(function(e){return e._id===t.query.did[0]}),i=`Note${n?` #${n.name}`:""}`;a="cmid"in t.query?`Comment${t.query.cmid.length>1?"s":""} on ${i}, ${r}`:`${i}, ${r}`}else o.push("screenLink"),a=r}return"subpage"in t&&"styleguide"===t.subpage&&(n="project-styleguide",a="Styleguide",delete t.subpage),{anchorText:a,classList:o,url:D.I(n,t)}}function Hc(e){return e.replace(/#([\w-]+)/g,function(e,t){var n=i.findColorByName(t);return n?'<span class="color">'+e+'<span class="colorPreview" style="background-color:'+n.toCSS()+'"></span></span>':/#[\da-f]{6}/i.test(e)?(n=i.findColorByHexAndAlpha({hex:e}))?'<span class="color">#'+n.name+'<span class="colorPreview" style="background-color:'+e+'"></span></span>':'<span class="color">'+e+'<span class="colorPreview" style="background-color:'+e+'"></span></span>':e})}function Vc(e){return e.replace(m,function(e){return'<span class="user'+(va.test(e)?" self":"")+'">'+e+"</span>"})}function Wc(e,t){var n=[],i=new U.a({stripPrefix:!1,className:"link",phone:!1,twitter:!1,hashtag:!1,replaceFn:function(e){return function(t){switch(t.getType()){case"url":{if(t.protocolRelativeMatch)return!1;const n=Zc(t.getUrl());if(n){const{anchorText:t,classList:i,url:a}=n;return e.push(`<a href="${a}" class="${i.join(" ")}" data-link-type="inApp">${t}</a>`),`{{link:${e.length-1}}}`}const i=t.buildTag();return i.setAttr("rel","nofollow external noopener noreferrer"),e.push(i.toAnchorString()),`{{link:${e.length-1}}}`}case"email":return e.push(t.buildTag().toAnchorString()),"{{link:"+(e.length-1)+"}}";default:return!1}}}(n)});return(t=t||[]).reduce(function(e,t){return t(e)},i.link(D.f(e))).replace(/{{link:(\d+)}}/g,function(e,t){return n[parseInt(t,10)]})}function Yc(e){return Wc(e,[Y.formatEmojiString,D.E])}function Kc(e){return Wc(e,[Hc,Vc,Y.formatEmojiString,D.E])}function Xc(){Qt.textContent=$t.lastElementChild.classList.contains("commentOwner")?"POST":"REPLY"}var $c=document.getElementById("commentTemplate");function Jc(e,t,n){delete e.status;var i=document.importNode($c.content,!0);Gc(i.querySelector(".comment"),e,t,n),$t.appendChild(i);var a=$t.lastElementChild,o=a.querySelector(".commentNote"),r=a.querySelector(".commentMirror");return o.addEventListener("input",function(){nu(o,r,a)}),o.addEventListener("keyup",function(e){switch(e.keyCode){case Zeplin.KEY_CODE.ArrowLeft:case Zeplin.KEY_CODE.ArrowRight:nu(o,r,a)}}),a}function Gc(e,t,n,a){D.B(e.querySelector(".commentAuthorImage"),t.author),e.querySelector(".commentAuthorName").textContent=t.author?t.author.username:"Anonymous",e.dataset.id=t._id,e.classList.toggle("commentOwner",t.author&&t.author._id===Zeplin.user._id);var o=new Date(t.created),r=new Date(t.updated);e.querySelector(".commentLink").href=D.I("project-screen",{url:{pid:i.id,sid:n},query:{did:a,cmid:t._id}}),e.querySelector(".commentCreated").setAttribute("datetime",o);var s=e.querySelector(".commentMirror");s.innerHTML=Kc(t.note),s.classList.toggle("jumboEmojis",lr(s,t.note)),e.querySelector(".commentEdited").setAttribute("datetime",r-o>3e5?r:"")}function Qc(e,t,n){var a=Y.formatEmojiString(tn.value.trim(),!0);if(Y.close(),K.close(),a){var o=e._id,r=t._id,s=Jc({author:{_id:Zeplin.user._id,email:Zeplin.user.email,username:Zeplin.user.username,emotar:Zeplin.user.emotar,avatar:Zeplin.user.avatar},note:a,created:Date.now(),updated:Date.now()},o,r);Uc(document.querySelector(".dot[data-id='"+r+"']")),s.classList.add("loading"),D.z(s),Xc(),Jt.classList.remove("composing"),fetch(Zeplin.urls.baseURL+"/v2/projects/"+i.id+"/screens/"+o+"/dots/"+r+"/comments",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({note:a})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})}).then(function(i){t.comments.push(i),gr(e.dots),en.innerHTML="&nbsp;",tn.value="",s.dataset.id=i._id,s.classList.remove("loading"),n?mixpanel.webapp.track("Created comment with reaction",{reaction:a}):mixpanel.webapp.track("Created comment")}).catch(function(e){s.remove(),Jt.classList.add("composing"),tn.focus(),k.b(e)})}}function eu(e,t,n,a){var o=e.querySelector(".commentMirror"),r=e.querySelector(".commentNote"),s=Y.formatEmojiString(r.value.trim(),!0);if(Y.close(),K.close(),s&&(o.innerHTML=Kc(s),o.classList.toggle("jumboEmojis",lr(o,s)),e.classList.remove("editing"),Jt.classList.remove("hidden"),Uc(ba),a.note!==s)){var l=t._id,c=n._id,u=e.dataset.id;e.classList.add("loading"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+l+"/dots/"+c+"/comments/"+u+"/note",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({note:s})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){a.note=s,gr(t.dots),Gc(e,a,l,c),e.classList.remove("loading"),mixpanel.webapp.track("Edited comment")}).catch(function(t){e.classList.remove("loading","jumboEmojis"),e.classList.add("editing"),Jt.classList.add("hidden"),r.focus(),k.b(t)})}}Yt.addEventListener("click",function(e){if(e.stopPropagation(),"A"!==e.target.tagName){var t=ra.dots.find(function(e){return e._id===Yt.dataset.id});if(e.target.classList.contains("dotResolveButton"))dd(Yt.dataset.id,"resolved");else if(e.target.classList.contains("dotReopenButton"))dd(Yt.dataset.id,"open");else if(e.target.classList.contains("commentEditButton")){var n=Yt.querySelector(".comment.editing");if(n){var a=n.querySelector(".commentMirror");a.innerHTML=Kc(ca.note),a.classList.toggle("jumboEmojis",lr(a,ca.note)),n.classList.remove("editing")}K.close(),Y.close(),Jt.classList.add("hidden"),Jt.classList.remove("composing"),en.innerHTML="&nbsp;",tn.value="";var o=(u=e.target.closest(".comment")).querySelector(".commentMirror"),r=u.querySelector(".commentNote"),s=u.dataset.id;ca=t.comments.find(function(e){return e._id===s}),o.innerHTML=D.f(ca.note)+"&nbsp",o.classList.remove("jumboEmojis"),r.value=ca.note,u.classList.add("editing"),r.setSelectionRange(ca.note.length,ca.note.length),r.focus(),Uc(ba)}else if(e.target.classList.contains("commentDeleteButton")){s=(u=e.target.closest(".comment")).dataset.id;var l,c=t.comments.find(function(e){return e._id===s});l=c.author?c.author._id===Zeplin.user._id?"Delete your comment?":"Delete "+c.author.username+"'s comment?":"Delete Anonymous's comment?",L.a({title:l,message:"Deleted comments cannot be restored.",done:{name:"DELETE",cb:function(){!function(e,t,n){var a=t._id,o=n._id,r=e.dataset.id,s=Wt.querySelector(".dot[data-id='"+o+"']");1===n.comments.length?(Pl(),s.classList.add("hidden")):(e.style.height=getComputedStyle(e).height,e.style.height=0,e.style.padding="0 6px 0 12px"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+a+"/dots/"+o+"/comments/"+r,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){1===n.comments.length?(mu(t,o),s.remove(),la=null,ba=null,$t.innerHTML="",$t.scrollTop=0):(pu(n,r),e.remove(),Xc(),Uc(s)),gr(t.dots),mixpanel.webapp.track("Deleted comment")}).catch(function(t){1===n.comments.length?(Yt.classList.remove("hidden"),s.classList.remove("hidden")):e.removeAttribute("style"),k.b(t)})}(u,ra,t)}},cancel:{name:"CANCEL",cb:function(){Pl()}}})}else if(e.target.classList.contains("commentDoneButton")){var u;eu(u=e.target.closest(".comment"),ra,t,ca)}}}),Yt.addEventListener("keydown",function(e){if(e.target.classList.contains("commentNote")){e.stopPropagation();var t=e.target.closest(".comment"),n=ra.dots.find(function(e){return e._id===Yt.dataset.id});switch(e.keyCode){case Zeplin.KEY_CODE.ENTER:(document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)&&eu(t,ra,n,ca);break;case Zeplin.KEY_CODE.ESC:K.close(),Y.close(),t.classList.remove("editing"),Jt.classList.remove("hidden");var i=t.querySelector(".commentMirror");i.innerHTML=Kc(ca.note),i.classList.toggle("jumboEmojis",lr(i,ca.note)),e.target.blur(),Uc(ba)}}});var tu={positive:"👍",neutral:"🤔",negative:"😩"};function nu(e,t,n){if(t.innerHTML=D.f(e.value)+"&nbsp;",e.selectionStart===e.selectionEnd){var a=D.j(e.value.substring(0,e.selectionStart),!0),o=e.value.charAt(a);if("@"===o){var r=K.manageSuggestedUsers(e,t,i);r&&iu(r,n,K)}else if(":"===o){var s=Y.manageSuggestedEmojis(e,t);s&&iu(s,n,Y)}else K.close(),Y.close()}}function iu(e,t,n){e.style.top="",e.style.bottom="",t.appendChild(e),n.open(),e.getBoundingClientRect().bottom+12>=window.innerHeight?(e.style.bottom=Yt.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom+t.offsetHeight+"px",e.style.top=""):(e.style.top=t.getBoundingClientRect().top-Yt.getBoundingClientRect().top+t.offsetHeight+"px",e.style.bottom="")}function au(){ou(i.sceneUrl,"scene").then(function(e){i.sceneUrl=e,ci.textContent=e,ui.href=e}).then(function(){ai.classList.remove("loading"),oi.disabled=!1,li.classList.add("hidden"),si.classList.remove("hidden")})}function ou(e,t){var n=Zeplin.urls.baseURL+"/urls"+(t?"?path="+t:"");return fetch(n,{method:"POST",headers:Zeplin.headers,body:JSON.stringify({url:e})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})}).then(function(e){return e.url}).catch(function(e){throw k.b(e),e})}function ru(e,t){D.d({content:e,toastContainer:Ke}),mixpanel.webapp.track("Copied extension snippet",{from:"layer",extension:t}),zd(i.type)}function su(e){var t="#text"===e.target.nodeName?e.target.nextElementSibling?e.target.nextElementSibling:e.target.parentElement:e.target,n=(t.id?t.id:t.className).replace(/[A-Z]/g,function(e){return" "+e.toLowerCase()}).replace(/^./,function(e){return e.toUpperCase()}).replace(/ with label$/,"");n&&-1===["Sidebar row","No border","No screen colors","No screen assets","No color message"].indexOf(n)&&mixpanel.webapp.track("Copied something from "+e.currentTarget.id.replace(/[A-Z]/g,function(e){return" "+e.toLowerCase()}),{type:n})}function lu(e){mixpanel.webapp.track("Selected asset naming convention",{projectType:i.type,convention:e})}Gt.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){if(Yt.classList.contains("resolved")){var t=document.querySelector("#dotPopup .comment:first-child .commentButtons");return t.classList.add("flashing"),void(t.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:1e3,easing:"ease-in-out"}).onfinish=function(){t.classList.remove("flashing")})}if(e.target.closest("#newCommentButton"))return Jt.classList.add("composing"),void tn.focus();var n=e.target.closest(".newCommentReaction"),i=ra.dots.find(function(e){return e._id===Yt.dataset.id}),a=i.comments[i.comments.length-1];if(!a.author||a.author._id!==Zeplin.user._id||a.note!==tu[n.dataset.reaction]){var o=tn.value;tn.value=tu[n.dataset.reaction],Qc(ra,i,!0),tn.value=o}}}),tn.addEventListener("input",function(){nu(tn,en,an)}),document.body.classList.contains("safari")&&(tn.addEventListener("beforeinput",function(e){var t=e.data||"";tn.value.length+t.length>tn.maxLength&&e.preventDefault()}),Yt.addEventListener("beforeinput",function(e){var t=e.target,n=e.data||"";t.value.length+n.length>t.maxLength&&e.preventDefault()})),tn.addEventListener("click",function(e){e.stopPropagation(),nu(tn,en,an)}),nn.addEventListener("click",function(){la?Qc(ra,la):es(ra,ba)}),tn.addEventListener("keyup",function(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ArrowLeft:case Zeplin.KEY_CODE.ArrowRight:nu(tn,en,an)}}),tn.addEventListener("keydown",function(e){if(e.stopPropagation(),Ln.classList.contains("hidden")&&Cn.classList.contains("hidden"))switch(e.keyCode){case Zeplin.KEY_CODE.ENTER:(document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)&&(la?Qc(ra,la):es(ra,ba));break;case Zeplin.KEY_CODE.ESC:xa[ra._id]&&(la?xa[ra._id].reply&&(xa[ra._id].reply[la._id]=null):xa[ra._id].comment=null),Jt.classList.remove("composing"),en.innerHTML="&nbsp;",tn.value="",la||Pl()}}),$t.addEventListener("mouseover",function(e){e.target!==$t&&e.target.closest(".comment").classList.remove("highlight")}),Bi.querySelector(".screenLink.app").addEventListener("mouseleave",function(e){e.target.scrollLeft=0}),document.queryCommandSupported("copy")?(bt.addEventListener("click",function(){l&&D.d({content:l.content,toastContainer:Ke})}),yt.addEventListener("focus",function(){l&&(D.d({content:l.content,toastContainer:Ke}),setTimeout(function(){D.A(yt)},40))}),Te.addEventListener("focus",function(){D.d({content:i.shortUrl,toastContainer:$n}),setTimeout(function(){D.A(Te)},40)}),di.addEventListener("click",function(e){e.stopPropagation(),D.d({content:i.sceneUrl,toastContainer:$n,container:si}),di.classList.add("copied")}),_e.addEventListener("click",function(e){!function(e){e.stopPropagation(),yd();var t,n,a=document.importNode(ti.content,!0).querySelector(".shortLinkMenu");t=i.shortUrl,n="zpl://project?pid="+i.id,ei.classList.add("menuOpen"),a.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var i=e.target.closest(".menuitem");if(i){var a;switch(e.stopPropagation(),i.dataset.action){case"copy-app-uri":a=n;break;case"copy-web-link":a=t}D.d({content:a,toastContainer:$n}),setTimeout(function(){gd()},80)}}}),ei.appendChild(a)}(e)}),Bi.addEventListener("click",function(e){var t;if(e.button===Zeplin.MOUSE_BUTTON.LEFT&&(t=e.target.closest(".copyLink"))){var n=t.classList.contains("web")?ra.url:Bi.querySelector(".screenLink.app").textContent;D.d({content:n,toastContainer:Ke})}}),Bi.querySelector(".screenLink.web").addEventListener("focus",function(e){D.d({content:ra.url,toastContainer:Ke}),setTimeout(function(){D.A(e.target)},4)}),Bi.querySelector(".screenLink.app").addEventListener("focus",function(e){D.d({content:e.target.textContent,toastContainer:Ke}),setTimeout(function(){D.A(e.target)},4)})):(_e.remove(),bt.remove(),di.remove(),Array.from(Bi.querySelectorAll(".copyLink")).forEach(function(e){e.remove()}),Array.from(Bi.querySelectorAll(".screenLink")).forEach(function(e){e.addEventListener("click",function(e){D.A(e.target)}),e.parentElement.dataset.tooltip="Click to select all",e.parentElement.dataset.tooltipType="text"})),Ke.addEventListener("click",function(e){if(e.stopPropagation(),yd(),Al(),e.target.classList.contains("addColor"))Ea&&(Ea=!1,function(e){e.target.parentElement.classList.contains("added")?Su(e.target.parentElement):function(e){if(!D.v.canManageColors(a))return;var t=e.target.parentElement,n=new P.a(JSON.parse(t.dataset.rgbcolor)),o={r:n.r,g:n.g,b:n.b,a:n.a,name:i.getColorName(n)};t.querySelector(".colorName").value="#"+o.name,t.classList.add("added"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/colors",{method:"POST",headers:Zeplin.headers,body:JSON.stringify(o)}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})}).then(function(e){Ea=!0,o._id=e._id,Eu(o),D.C("Added to Styleguide!",Ke)}).catch(function(e){k.b(e),Ea=!0,t.querySelector(".colorName").value="",t.classList.remove("added")})}(e)}(e));else if(e.target.classList.contains("addTextStyle")){if(!wa)return;var t=e.target.closest(".textStyleWrapper");if(!t)return;t.classList.contains("added")?function(e){wa=!1,e.classList.remove("added");var t=e.dataset.id,n=i.findTextStyleById(t);gu(t);var a=new A.a(l);ec(a),zu(t).then(function(){wa=!0}).catch(function(t){k.b(t),e.classList.add("added"),wa=!0,Mu(n),ec(a)})}(t):function(e){if(!D.v.canManageTextStyles(a))return;var t=new A.a(l).textStyles[e.dataset.index],n=t&&t.font;n.name=i.getTextStyleName(),wa=!1,e.classList.add("added"),Jl(e,{name:n.name}),function(e){var t,n;if(D.v.canManageTextStyles(a))return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/textStyles",{method:"POST",headers:Zeplin.headers,body:JSON.stringify((t=e,n={},["name","fontFace","fontSize","lineHeight","letterSpacing","textAlign","color"].forEach(function(e){n[e]=t[e]}),n))}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})}).then(function(t){e._id=t._id,Mu(e)})}(n).then(function(e){wa=!0,D.C("Added to Styleguide!",Ke),jc()}).catch(function(t){k.b(t),wa=!0,e.classList.remove("added"),Jl(e,{name:""})})}(t)}window.ImportProgresses&&ImportProgresses.hideImportProgressesContainer(),ge.classList.add("hidden"),he.classList.add("hidden"),$e.submitEdits(),yd()}),Ke.addEventListener("contextmenu",function(e){e.stopPropagation()}),Ke.addEventListener("blur",function(e){if(e.preventDefault(),e.target.classList.contains("textStyleName")){if(!D.v.canManageTextStyles(a))return;var t=e.target.closest(".textStyleWrapper");t&&Ru(t.dataset.id,e.target)}else if(e.target.classList.contains("colorName")){if(!D.v.canManageColors(a))return;var n=e.target.closest(".color");if(!n)return;var o=i.findColorById(n.dataset.id);Uu(e.target.value.substr(1),o,n)}},!0),Ke.addEventListener("submit",function(e){e.preventDefault(),e.target.classList.contains("textStyleNameForm")?e.target.querySelector(".textStyleName").blur():e.target.classList.contains("colorNameForm")&&e.target.querySelector(".colorName").blur()}),Ke.addEventListener("keydown",function(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ESC:if(e.target.classList.contains("textStyleName")){var t=e.target.closest(".textStyleWrapper");if(t){var n=i.findTextStyleById(t.dataset.id);e.target.value=n.name,e.target.blur()}}else if(e.target.classList.contains("colorName")){var a=e.target.closest(".color");if(!a)return;var o=i.findColorById(a.dataset.id);e.target.value="#"+o.name,e.target.blur()}}}),Ke.addEventListener("input",function(e){if(e.preventDefault(),e.target.classList.contains("colorName")){var t=e.target.selectionStart,n=e.target.selectionEnd;"#"!==e.target.value.charAt(0)&&(t+=1,n+=1);var a=e.target.value;e.target.value="#"+e.target.value.replace($a[i.type],"");var o=a.length-e.target.value.length;o>0&&(t-=o,n-=o),e.target.setSelectionRange(t,n)}}),Xe.addEventListener("autocomplete",function(){var e=Y.manageSuggestedEmojis(Xe.querySelector("textarea"),Xe.querySelector(".mirror"));e&&(e.style.top=Xe.getBoundingClientRect().top+Xe.offsetHeight-90+"px",Ke.appendChild(e),Y.open())}),Ke.addEventListener("copy",su),Ye.addEventListener("copy",su);var cu=document.getElementById("colorMenuTemplate");function uu(){var e=document.querySelector(".colorMenu");e&&e.remove()}function du(e,t,n){var a;if(a="color"===e?"colors_"+i.name+".zip":"textstyles_"+i.name+".zip",Array.isArray(t)){var o=new M.a;t.forEach(function(e){o.file(e.filename,e.code)}),o.generateAsync({type:"blob"}).then(function(e){Ar({data:URL.createObjectURL(e),name:a})})}else Ar({data:URL.createObjectURL(new Blob([t.code],{type:Ya[t.language]})),name:t.filename});zd("osx"===i.type?"mac":i.type),mixpanel.webapp.track("Exported extension file",{type:e,extension:n})}function mu(e,t){return D.b(e.dots,function(e){return e._id===t})}function pu(e,t){return D.b(e.comments,function(e){return e._id===t})}function gu(e){i.removeTextStyle(e);var t=$l(e);if(t&&(t.removeAttribute("data-id"),t.classList.remove("added"),Jl(t,{name:""}),So(t.querySelector(".addTextStyle"),!1)),i.textStyles.length){var n=En.querySelector(".font[data-id='"+e+"']");n&&n.remove()}else En.innerHTML="";Cc(),jc(),Er()}function hu(e){window.Notification&&"granted"===Notification.permission&&x.c.get("notificationStatus").then(function(t){if(t){var n=new Notification(e.title,{body:e.body,icon:"https://secure.gravatar.com/avatar/"+Z()(e.notifier.email)+"?s=160",name:0});n.addEventListener("show",function(){setTimeout(n.close.bind(n),5e3)}),"handler"in e&&n.addEventListener("click",e.handler)}})}function fu(e){i.name=e,qo(),Se.value=e}function bu(e){ko(e),ra&&(vs(sa.snapshot,"density"),ds(sa.snapshot.grid)),jc(),Cc(),Er()}Ye.addEventListener("contextmenu",function(e){if(D.v.canManageColors(a)){yd();var t=e.target.closest(".color");if(t){e.preventDefault();var n=t.querySelector(".colorName").value,i=document.importNode(cu.content,!0),o=i.querySelector(".colorMenu");Array.from(o.querySelectorAll(".actionSubject")).forEach(function(e){e.textContent=n}),o.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var n=e.target.closest(".menuitem");if(n){switch(e.stopPropagation(),n.dataset.action){case"delete":Su(t)}setTimeout(function(){uu()},80)}}}),t.appendChild(i),Ld(o,Pt,t,e)}}}),Ye.addEventListener("mouseover",function(e){e.target!==Ye&&e.target.closest(".color").classList.remove("highlight")}),Ye.addEventListener("input",function(e){var t=e.target.selectionStart,n=e.target.selectionEnd,a=e.target.value;if(e.preventDefault(),e.target.classList.contains("colorName"))e.target.value=e.target.value.replace($a[i.type],"");else if(e.target.classList.contains("colorHex"))e.target.value=e.target.value.replace(/([^a-fA-F0-9])/g,"");else{if(!e.target.classList.contains("colorAlpha"))return;e.target.value=e.target.value.replace(/([^0-9])/g,"")}t-=a.length-e.target.value.length,n-=a.length-e.target.value.length,e.target.setSelectionRange(t,n)}),Ye.addEventListener("submit",function(e){e.target.classList.contains("colorInfoForm")&&e.target.checkValidity()&&(e.preventDefault(),e.target.querySelector("input[type='text']").blur())}),Ye.addEventListener("blur",function(e){if(D.v.canManageColors(a)){e.preventDefault();var t=e.target.closest(".color");if(t){var n,o=t.dataset.id,r=e.target,s=e.target.value,l=i.findColorById(o);if(r.classList.contains("colorName"))Uu(s,l,t);else if(r.classList.contains("colorHex")){if(l.hexBase()===s)return;if(!s||!/^[\da-f]{6}$/i.test(s))return void(e.target.value=l.hexBase());if(n=i.checkDuplicateColorHex(s,l))L.a({title:"This color already exists: "+n.name,message:"Please check the values and try again!",done:{name:"GOT IT"}}),e.target.value=l.hexBase();else{var c=P.a.fromHex(s);Cu({r:c.r,g:c.g,b:c.b},l,t)}}else if(r.classList.contains("colorAlpha")){if(100*l.a===s)return;if(!s||/\D/.test(s)||s/100>1)return void(e.target.value=Math.round(100*l.a));(n=i.checkDuplicateColorAlpha(s,l))?(L.a({title:"This color already exists: "+n.name,message:"Please check the values and try again!",done:{name:"GOT IT"}}),e.target.value=Math.round(100*l.a)):Cu({a:s/100},l,t)}}}},!0),Ye.addEventListener("keydown",function(e){e.stopPropagation();var t=e.target.closest(".color");if(t)switch(e.keyCode){case Zeplin.KEY_CODE.ESC:var n=i.findColorById(t.dataset.id);e.target.classList.contains("colorName")?e.target.value=n.name:e.target.classList.contains("colorHex")?e.target.value=n.hexBase():e.target.classList.contains("colorAlpha")&&(e.target.value=Math.round(100*n.a)),e.target.blur()}else e.target.blur()}),window.addEventListener("offline",function(){"screen"===Be.dataset.selection&&(Me.textContent="Looks like there is a problem with the connection.",Be.className="offline")});var yu=document.getElementById("screenSuggestionTemplate");function vu(e,t){var n=document.importNode(yu.content,!0),i=n.querySelector(".screenSuggestion");i.dataset.id=e._id,i.dataset.index=t,n.querySelector(".screenName").textContent=e.name,n.querySelector(".tagName").textContent=e.filterTag||"",kn.appendChild(n)}function ju(){xn.value="",xn.blur(),kn.innerHTML="",Dn.classList.add("hidden")}function Su(e){if(D.v.canManageColors(a)){var t=e.dataset.id;"colorPalette"===e.parentElement.id?e.classList.add("hidden"):e.classList.remove("added"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/colors/"+t,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){Ea=!0,wu(e.dataset.id)}).catch(function(t){k.b(t),Ea=!0,"colorPalette"===e.parentElement.id?e.classList.remove("hidden"):(e.querySelector(".colorName").classList.remove("hidden"),e.classList.add("added"))})}}function Eu(e){var t=new P.a(e);i.addColor(t),Cr(t);var n=document.querySelectorAll(".color[data-color='"+t.toHexString()+"']");Array.from(n).forEach(function(e){e.dataset.id=t.id,e.querySelector(".colorName").value="#"+t.name,e.querySelector(".colorName").classList.remove("hidden"),e.classList.add("added"),jo(e.querySelector(".addColor"),!0)}),jc(),Cc(),Er(),Nl()}function wu(e){i.removeColor(e);var t=Ke.querySelectorAll(".color[data-id='"+e+"']");if(Array.from(t).forEach(function(e){e.querySelector(".colorName").value="",e.classList.remove("added"),jo(e.querySelector(".addColor"),!1)}),i.colors.length){var n=Ye.querySelector(".color[data-id='"+e+"']");n&&n.remove()}else Ye.innerHTML="";jc(),Cc(),Er(),Nl()}function Lu(e,t){i.updateColor(e,t);var n=Ye.querySelector(".color[data-id='"+e+"']");if("name"in t){var a=Ke.querySelectorAll(".color[data-id='"+e+"'] .colorName");Array.from(a).forEach(function(e){e.value="#"+t.name}),n.querySelector(".colorName").value=t.name}if("r"in t||"g"in t||"b"in t||"a"in t){var o=i.findColorById(e),r=Ke.querySelectorAll(".color[data-id='"+e+"']");Array.from(r).forEach(function(e){e.querySelector(".colorName").textContent="",e.classList.remove("added"),e.removeAttribute("data-id"),jo(e.querySelector(".addColor"),!1)}),r=Ke.querySelectorAll(".color[data-color='"+o.toHexString()+"']"),Array.from(r).forEach(function(t){t.querySelector(".colorName").value="#"+o.name,t.classList.add("added"),t.dataset.id=e,jo(t.querySelector(".addColor"),!0)}),n.querySelector(".colorPreview").style.backgroundColor=o.toCSS(),n.querySelector(".colorHex").value=o.hexBase(),n.querySelector(".colorAlpha").value=Math.round(100*o.a),n.querySelector(".colorRGB").textContent=o.toRGBAString()}jc(),Cc(),Er(),Nl()}function Cu(e,t,n){if(D.v.canManageColors(a)){var o=n.dataset.id;fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/colors/"+o,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(e)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){Lu(o,e)}).catch(function(e){k.b(e),n.querySelector(".colorName").value=(n.querySelector(".colorNameForm")?"#":"")+t.name,n.querySelector(".colorHex").value=t.hexBase(),n.querySelector(".colorAlpha").value=t.a?100*t.a:100})}}var Du=document.getElementById("memberMenuTemplate");function xu(e){yd();var t=document.importNode(Du.content,!0),n=t.querySelector(".memberMenu"),o=e.dataset.id;n.addEventListener("click",function(t){if(t.button===Zeplin.MOUSE_BUTTON.LEFT){var n=t.target.closest(".menuitem");if(n){switch(t.stopPropagation(),n.dataset.action){case"assign":qu(o,"admin",e);break;case"unassign":qu(o,"user",e);break;case"transfer":L.a({message:'Transfer ownership of "'+i.name+'" to '+e.querySelector(".memberName").textContent+"?",done:{name:"TRANSFER",cb:function(){!function(e){fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/users/"+e+"/ownership",{method:"POST",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){i.changeUserRole(Zeplin.user._id,"admin"),i.changeUserRole(e,"owner"),lo(i.users)}).catch(k.b)}(o)}},cancel:{name:"CANCEL"}});break;case"remove":var a,r;o===Zeplin.user._id?(a='Leave "'+i.name+'"?',r="LEAVE"):(a='Remove "'+e.querySelector(".memberName").textContent+'" ?',r="REMOVE"),L.a({message:a,done:{name:r,cb:function(){Tu(o)}},cancel:{name:"CANCEL"}})}setTimeout(function(){ku()},80)}}});var r=ur(o);D.r(i)?(n.querySelector(".menuitem[data-action='assign']").classList.add("hidden"),n.querySelector(".menuitem[data-action='unassign']").classList.add("hidden"),n.querySelector(".menuitem[data-action='transfer']").classList.add("hidden")):(n.querySelector(".menuitem[data-action='assign']").classList.toggle("hidden","user"===a.role||"user"!==r.role),n.querySelector(".menuitem[data-action='unassign']").classList.toggle("hidden","user"===a.role||"admin"!==r.role),n.querySelector(".menuitem[data-action='transfer']").classList.toggle("hidden",!D.v.canTransferOwnership(a))),n.querySelector(".menuitem[data-action='remove']").classList.toggle("hidden","owner"===r.role||D.v.isSuperior(r,a)),e.classList.add("memberMenuOpen"),e.appendChild(t)}function ku(){var e=document.querySelector(".memberMenu");e&&(e.parentElement.classList.remove("memberMenuOpen"),e.remove())}function qu(e,t,n){fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/users/"+e+"/role",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({role:t})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){n.dataset.role=t,i.changeUserRole(e,t),lo(i.users)}).catch(k.b)}function Tu(e){fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/users/"+e,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){i.removeUser(e),e===Zeplin.user._id?(Pl(),_o()):(lo(i.users),q.d(i.id,e))}).catch(k.b)}function _u(e){if(D.v.canUpdateProject(a)){var t=Ku(e),n=Vo(e),o=zi.querySelector(".screen.thumbnail");return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/thumbnail",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({thumbnail:t.versions[0].snapshot.url})}).then(function(){i.thumbnail=t.versions[0].snapshot.url,o&&o.classList.remove("thumbnail"),n&&n.classList.add("thumbnail")})}}function Iu(e){var t=Ku(e);return Ir(t.versions[0].snapshot).then(function(e){var n=new Blob([e.data],{type:Ya.png});return{name:t.name+".png",blob:n}})}function Ou(e){var t=Vo(e),n=i.findScreenSection(e);return t&&t.classList.add("hidden"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+e,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){i.removeScreen(n._id,e)},function(e){k.b(e),t&&t.classList.remove("hidden")})}We.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest(".memberActionsButton"),n=t&&t.parentElement;t&&!n.classList.contains("memberMenuOpen")&&(e.stopPropagation(),xu(n))}),Se.addEventListener("keydown",function(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ESC:e.target.value=i.name,e.target.blur()}}),Se.addEventListener("blur",function(e){e.preventDefault(),e.target.value!==i.name&&function(e){if(!D.v.canUpdateProject(a))return;fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/name",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({name:e})}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw k.a(e.status,t)})}).then(function(e){fu(e.name)}).catch(function(e){k.b(e,{dialogCallback:function(){D.o(Se)}})})}(e.target.value)}),Ee.addEventListener("submit",function(e){e.preventDefault(),Se.blur()});var Pu=document.getElementById("slackSettingsMenuTemplate");function Bu(e){Ki.innerHTML="",e.reverse().forEach(Nu),Pi.classList.add("hidden"),Ki.classList.remove("hidden")}Oi.addEventListener("click",function(e){if(e.stopPropagation(),yd(),e.target.classList.contains("slackSettingsButton")&&!e.target.classList.contains("disabled")){var t=e.target.closest(".integration"),n=i.integration.slacks.find(function(e){return e._id===t.dataset.id}),a=document.importNode(Pu.content,!0).querySelector(".slackSettingsMenu");a.querySelector("a").href=n.incomingWebHook.configurationURL,a.addEventListener("click",function(e){switch(e.target.dataset.action){case"add":if(Ba)return void T.a.ipcRenderer.send("add-to-slack",{id:i.id,name:i.name});mo(),to(b,{inNewTab:!1});break;case"preferences":$.b(t.dataset.id,n.incomingWebHook.channel);break;case"remove":!function(e,t){var n=Ki.querySelector(".integration[data-id='"+t+"']");n&&n.classList.add("hidden"),ue.d(i.id,e,t).then(function(){n&&n.remove(),i.removeIntegration(e,t),i.integration[e].length||(Ki.classList.add("hidden"),Pi.classList.remove("hidden"))}).catch(function(e){k.b(e),n&&n.classList.remove("hidden")})}("slacks",t.dataset.id)}}),t.classList.add("slackMenuOpen"),t.appendChild(a)}});var Au=document.getElementById("slackIntegrationTemplate");function Nu(e){var t=document.importNode(Au.content,!0).querySelector(".integration"),n=t.querySelector(".slackChannel"),i=new URL(e.incomingWebHook.configurationURL),o=t.querySelector(".slackSettingsButton"),r=D.v.canUpdateProject(a);o.classList.toggle("disabled",!r),r?(o.removeAttribute("data-tooltip"),o.removeAttribute("data-tooltip-type")):(o.dataset.tooltip=oo(a,"update Slack integration."),o.dataset.tooltipType="html"),n.textContent=e.incomingWebHook.channel,n.href=i.origin+"/messages/"+(e.incomingWebHook.channelId||e.incomingWebHook.channel.replace("#","")),t.dataset.id=e._id,Ki.appendChild(t)}function Ru(e,t){t.value=t.value.trim();var n=i.findTextStyleById(e),a=t.value;a.length?n.name!==a&&Hu(e,{name:a}):t.value=n.name}function Uu(e,t,n){if(t.name!==e){var a=(n.querySelector(".colorNameForm")?"#":"")+t.name;e&&!$a[i.type].test(e)?i.checkDuplicateColorName(e,t)?(L.a({title:e+" already exists",message:"Please enter another name for this color.",done:{name:"GOT IT"}}),n.querySelector(".colorName").value=a):Cu({name:e},t,n):n.querySelector(".colorName").value=a}}En.addEventListener("mouseover",function(e){e.target!==En&&e.target.closest(".font").classList.remove("highlight")}),En.addEventListener("submit",function(e){e.preventDefault(),e.target.querySelector(".styleName").blur()}),En.addEventListener("blur",function(e){if(D.v.canManageTextStyles(a)){e.stopPropagation();var t=e.target.closest(".font");if(t)e.target.selectionEnd-e.target.selectionStart&&e.target.setSelectionRange(0,0),Ru(t.dataset.id,e.target)}},!0),En.addEventListener("keydown",function(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ESC:var t=e.target.closest(".font").dataset.id,n=i.findTextStyleById(t);e.target.value=n.name,e.target.blur()}}),En.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var t=e.target.closest(".font");t&&(e.target.classList.contains("deleteTextStyle")?L.a({title:'Delete "'+t.querySelector(".styleName").value+'"?',message:"Deleted text styles cannot be restored.",done:{name:"DELETE",cb:function(){Zu(t.dataset.id)}},cancel:{name:"CANCEL"}}):e.target.classList.contains("deleteTSColor")&&L.a({message:'Delete color of "'+t.querySelector(".styleName").value+'"?',done:{name:"DELETE",cb:function(){e.target.parentElement.classList.add("hidden"),Hu(t.dataset.id,{color:null})}},cancel:{name:"CANCEL"}}))}});var Fu=document.getElementById("textStyleMenuTemplate");function Mu(e){i.addTextStyle(e),Cc(),jc(),Er();var t=$l(e);t&&(t.classList.add("added"),Jl(t,{name:e.name}),t.dataset.id=e._id,So(t.querySelector(".addTextStyle"),!0))}function zu(e){if(D.v.canManageTextStyles(a))return fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/textStyles/"+e,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})})}function Zu(e){var t=i.findTextStyleById(e);return gu(e),zu(e).catch(function(e){k.b(e),Mu(t)})}function Hu(e,t){D.v.canManageTextStyles(a)&&fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/textStyles/"+e,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(t)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){i.updateTextStyle(e,t),Cc(),jc(),Er()}).catch(function(n){k.b(n);var i=document.querySelector(".font[data-id='"+e+"']");"name"in t&&D.o(i.querySelector(".styleName")),"color"in t&&i.querySelector(".colorContainer").classList.remove("hidden")})}function Vu(){var e=document.querySelector(".textStyleMenu");e&&e.remove()}En.addEventListener("contextmenu",function(e){if(D.v.canManageTextStyles(a)){yd();var t=e.target.closest(".font");if(t){e.preventDefault();var n=t.querySelector(".styleName").value,i=document.importNode(Fu.content,!0),o=i.querySelector(".textStyleMenu");Array.from(o.querySelectorAll(".actionSubject")).forEach(function(e){e.textContent=n}),o.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var i=e.target.closest(".menuitem");if(i){switch(e.stopPropagation(),i.dataset.action){case"rename":D.o(t.querySelector(".styleName"));break;case"delete":L.a({title:'Delete "'+n+'"?',message:"Deleted text styles cannot be restored.",done:{name:"DELETE",cb:function(){Zu(t.dataset.id),Vu()}},cancel:{name:"CANCEL"}})}setTimeout(function(){Vu()},80)}}}),t.appendChild(i),Ld(o,Pt,t,e)}}});var Wu=0;function Yu(e,t,n){if(!On.classList.toggle("taglessProject",0===e.length&&!n)){t=t||[],Mn.innerHTML="";var i=0;Wu=0,e.forEach(function(e){if(-1===t.indexOf(e)&&(!n||-1!==e.toLowerCase().indexOf(n.toLowerCase()))){var a=document.importNode(Un.content,!0);0===Mn.childElementCount&&a.querySelector(".tagSuggestion").classList.add("selected"),a.querySelector(".tagSuggestion").dataset.tag=D.f(e),a.querySelector(".tagSuggestion").dataset.suggestionIndex=i,i++,a.querySelector(".tagSuggestion .tagSuggestionText").textContent=e,Mn.appendChild(a)}}),!n||function(e,t){for(var n=0;n<e.length;n++)if(e[n].toLowerCase()===t.toLowerCase())return!0;return!1}(e,n)?(Pn.classList.add("hidden"),Pn.classList.remove("selected")):(Pn.classList.remove("hidden"),Pn.dataset.suggestionIndex=i,Pn.dataset.tag=D.f(n),Bn.textContent=n,Pn.classList.toggle("selected",0===Mn.childElementCount)),On.classList.toggle("taglessScreen",0===t.length)||(Fn.innerHTML="",t.forEach(function(e){var t=document.importNode(Rn.content,!0);t.querySelector(".tagOfScreen").dataset.tag=D.f(e),t.querySelector(".tagButtonText").textContent=e,Fn.appendChild(t)}))}}function Ku(e){if(i.screens)return i.screens.find(function(t){return t._id===e})}function Xu(e){D.v.canManageScreens(a)&&(g=0,h=0,Al(),yd(),On.classList.remove("hidden"),On.dataset.sid=e,Zn.value="",Zn.focus(),Yu(i.tags,Ku(e).tags))}function $u(){Zn.value="",Zn.blur(),On.classList.add("hidden")}function Ju(e){ra&&ts(Ku(ra._id)),wr(),e&&("dashboard"===ua?jl():fl()),On.classList.contains("hidden")||Yu(i.tags,Ku(On.dataset.sid).tags,Zn.value)}function Gu(e){D.v.canManageScreens(a)&&fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/tags",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({screens:e})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).catch(function(t){k.b(t),e.forEach(function(e){var t=Ku(e._id);"add"===e.operation?t.tags=t.tags.filter(function(t){return-1===e.tags.indexOf(t)}):t.tags=t.tags.concat(e.tags),Ts()}),Ju()})}function Qu(e,t,n){D.v.canManageScreens(a)&&(Zn.value="",Gu([{_id:e._id,operation:n,tags:[t]}]),"add"===n?(e.tags=e.tags||[],e.tags.push(t)):e.tags=e.tags.filter(function(e){return e!==t}),Ts(),Ju(Os()||"remove"===n&&!!ye.querySelector(".tag.selected[data-tag='"+D.f(t)+"']")))}function ed(e){var t=Nn.querySelector(".tagSuggestion[data-suggestion-index='"+e+"']");t&&(Nn.querySelector(".tagSuggestion.selected").classList.remove("selected"),t.classList.add("selected"),D.z(t),Wu=e)}function td(e){D.v.canManageScreens(a)&&(Gu(i.deleteTag(e)),Ju(Os()||!!ye.querySelector(".tag.selected[data-tag='"+D.f(e)+"']")))}function nd(){var e=document.querySelector(".tagMenu");e&&e.remove()}function id(e){var t=i.screens.filter(Ps([e]));return 0!==t.length&&t.every(function(e){var t=i.findScreenSection(e._id);return i.isDefaultSection(t._id)})}function ad(e,t){var n=new M.a,i=e.map(Iu),a=[];Promise.all(i).then(function(e){if(1===e.length){var i=e[0];return t=i.name,i.blob}return e.forEach(function(e){var t=e.name,i=e.blob;if(a[t]>0){var o=a[t];a[t]++,t=t.replace(/(.*)\.(.*$)/,"$1 ("+o+").$2")}else a[t]=1;n.file(t,i)}),n.generateAsync({type:"blob"})}).then(function(e){return{data:URL.createObjectURL(e),name:t}}).then(Ar)}function od(e,t,n,i){var a=parseInt(t.dataset.minWidth,10);if(t.classList.contains("collapsed")){if(!(e>a/2))return;t.classList.remove("collapsed"),i&&i(t)}t.style.width=e+"px",e<a?(document.body.classList.add("minResizing"),t.classList.toggle("collapsed",e<a/2)&&n&&n(t)):e>t.clientWidth?(t.classList.add("maxSizebar"),document.body.classList.add("maxResizing")):(t.classList.remove("maxSizebar"),document.body.classList.remove("maxResizing","minResizing"))}function rd(e,t,n){var i;function a(t){t.preventDefault&&t.preventDefault(),od(i="left"===e.dataset.side?t.clientX||t.changedTouches[0].clientX:window.innerWidth-(t.clientX||t.changedTouches[0].clientX),e,n.onCollapse,n.onExpand),n.onResize&&n.onResize()}n=n||{},document.body.classList.add("resizing","resizing"+e.dataset.side),e.classList.add("resizing"),document.addEventListener(v,a),document.addEventListener(j,function n(){e.style.width=e.clientWidth+"px",x.b.set(na.pid,t,i),document.body.classList.remove("resizing","resizing"+e.dataset.side,"maxResizing","minResizing"),e.classList.remove("resizing"),document.removeEventListener(v,a),document.removeEventListener(j,n)})}Nn.addEventListener("click",function(e){e.stopPropagation(),Zn.focus();var t=Ku(On.dataset.sid);if(e.target.classList.contains("removeTag"))Qu(t,D.G(e.target.parentElement.dataset.tag),"remove");else{var n=e.target.closest(".tagSuggestion");if(!n)return;Qu(t,D.G(n.dataset.tag),"add")}}),An.addEventListener("click",function(e){Zn.focus(),e.stopPropagation()}),An.addEventListener("keydown",function(e){e.stopPropagation();var t=Mn.querySelectorAll(".tagSuggestion");switch(e.keyCode){case Zeplin.KEY_CODE.ENTER:e.preventDefault();var n=Nn.querySelector(".tagSuggestion.selected");n&&Qu(Ku(On.dataset.sid),D.G(n.dataset.tag),"add"),(document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)&&$u();break;case Zeplin.KEY_CODE.ArrowDown:e.preventDefault(),t.length&&Wu<t.length-1&&ed(Wu+1);break;case Zeplin.KEY_CODE.ArrowUp:e.preventDefault(),t.length&&Wu>0&&ed(Wu-1);break;case Zeplin.KEY_CODE.ESC:e.preventDefault(),$u()}}),Nn.addEventListener("mousemove",function(e){if(e.stopPropagation(),g!==e.clientX||h!==e.clientY){Zn.focus();var t=e.target.closest(".tagSuggestion");t&&(ed(parseInt(t.dataset.suggestionIndex,10)),g=e.clientX,h=e.clientY)}}),zn.addEventListener("click",$u),Zn.addEventListener("input",function(e){Yu(i.tags,Ku(On.dataset.sid).tags,e.target.value)}),ye.addEventListener("contextmenu",function(e){if(D.v.canManageScreens(a)&&(yd(),e.target.classList.contains("tag")&&!e.target.classList.contains("untagged"))){e.preventDefault();var t,n=document.importNode(Vn.content,!0),o=n.querySelector(".tagMenu"),r=D.G(e.target.dataset.tag),s=D.I("project-dashboard",{url:{pid:i.id},query:{tag:[r]}});ou(s).then(function(e){t=e}),o.querySelector('.menuitem[data-action="create-section"]').classList.toggle("hidden",!id(r)),o.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var n=e.target.closest(".menuitem");if(n){switch(e.stopPropagation(),n.dataset.action){case"copy-web-link":D.d({content:t||s,toastContainer:document.querySelector(".projectOverview")});break;case"copy-app-uri":D.d({content:"zpl://project?pid="+i.id+"&tag="+encodeURI(r),toastContainer:document.querySelector(".projectOverview")});break;case"download-screen-images":ad((a=r,i.screens.filter(Ps(a)).map(function(e){return e._id})),r+".zip");break;case"create-section":!function(e){if(id(e)){var t=Is(),n=JSON.parse(JSON.stringify(i.sections)),a={name:e,screens:i.screens.filter(Ps([e])).map(function(e){return e._id})};i.addSection(a,1),t.length>0&&(bl(),jl()),Promise.all([fl().then(function(){var e=zi.querySelector(".section:not(.default)");return e&&D.o(e.querySelector(".sectionName")),e}),el(a,1)]).then(function(t){var n=t[0],i=t[1];a._id=i._id,n&&(n.dataset.id=i._id),td(e)}).catch(function(e){i.sections=n,Oo(i.id,t.length>0?{tag:t}:{}),k.b(e)})}}(r);break;case"delete":td(r)}var a;setTimeout(function(){nd()},80)}}}),ye.appendChild(n),Ld(o,Jn,ye,e)}}),"PointerEvent"in window?(y="pointerdown",v="pointermove",j="pointerup"):"ontouchstart"in document?(y="touchstart",v="touchmove",j="touchend"):(y="mousedown",v="mousemove",j="mouseup"),Wn.addEventListener(y,function(e){e.preventDefault(),rd(Jn,"projectInfoWidth",{onResize:hl})}),Yn.addEventListener(y,function(e){e.preventDefault(),La=!0,Al(),yd(),rd(Gn,"versionsSidebarWrapperWidth",{location:"left",onCollapse:function(){Mt.classList.contains("oldVersion")?Gn.classList.add("compact"):Mt.classList.remove("versionsShown")},onExpand:function(){Gn.classList.remove("compact"),Mt.classList.add("versionsShown")}})}),Kn.addEventListener(y,function(e){e.preventDefault(),La=!0,Al(),yd(),rd(Qn,"rightSidebarWrapperWidth")}),Xn.addEventListener(y,function(e){e.preventDefault(),rd(Pt,"generatorContainerWidth")});var sd,ld=document.getElementById("dotMenuTemplate");function cd(){var e=document.querySelector(".dotMenu"),t=document.querySelector(".dot.menuOpen");e&&(e.remove(),t&&t.classList.remove("menuOpen"))}function ud(e){var t=ct.lastElementChild.getBoundingClientRect();e.style.left=t.left-233+"px",e.style.top=t.top+32+"px",e.style.bottom="initial"}function dd(e,t){var n=ra.dots.find(function(t){return t._id===e}),a=n.status;n.status=t;var o=document.querySelector(".dot[data-id='"+e+"']");Yt.dataset.id===e&&Pl(),Jr(o),o.classList.add(t),gr(ra.dots),x.c.get("resolvedDotsTutorialSeen").then(function(e){var n,i;!e&&"resolved"===t&&Ke.classList.contains("resourceView")&&"dot"!==ct.dataset.selection&&(Qn.classList.contains("collapsed")&&od(300,Qn),i=new MutationObserver(function(e){e.forEach(function(e){ud(n)})}),ud(n=C.a({content:"Ping ping! You can access the resolved notes from this tab.",popover:!0,anchor:"top",noControls:!0,hideCallback:function(){i.disconnect(),x.c.set("resolvedDotsTutorialSeen",!0)}})),i.observe(Qn,{attributes:!0,attributeFilter:["style"]}),document.body.appendChild(n),setTimeout(function(){i.disconnect(),n.remove(),x.c.set("resolvedDotsTutorialSeen",!0)},1e4))}),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+ra._id+"/dots/"+e,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({status:t})}).then(function(e){if(!e.ok)return e.json().then(function(t){return k.a(e.status,t)});mixpanel.webapp.track("Re"+("open"===t?"open":"solv")+"ed dot")}).catch(function(e){n.status=a,o.classList.remove(t),o.classList.add(a),gr(ra.dots),k.b(e)})}function md(e){if(document.elementsFromPoint){for(var t=e.getBoundingClientRect(),n=document.elementsFromPoint(t.left+13,t.top+13),i=0;i<n.length;i++)if(n[i].classList.contains("dot")&&n[i]!==e)return!0;return!1}return function(e){for(var t=e.getBoundingClientRect(),n=document.querySelectorAll(".dot"),i=t.left+13,a=t.top+13,o=0;o<n.length;o++){var r=n[o].getBoundingClientRect();if(n[o]!==e&&i>r.left&&i<r.right&&a>r.top&&a<r.bottom)return!0}return!1}(e)}function pd(){const e=document.querySelectorAll(".customEmojiPlainText");Array.prototype.forEach.call(e,e=>{const t=D.f(e.innerText.trim()),n=Y.formatEmojiString(t);e.outerHTML=n})}function gd(){var e=document.querySelector(".shortLinkMenu");e&&e.remove(),ei.classList.remove("menuOpen")}function hd(e){fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/public",{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({public:e})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){i.public=e,e?au():D.C("Unshared the Scene link.",$n)}).catch(k.b)}function fd(){var e=document.querySelector(".shareSceneMenu");e&&e.remove()}function bd(){var e=document.querySelector(".moveToProjectPopup");e&&ee.a.render(null,e.parentElement,e)}function yd(){var e,t;Array.from(document.querySelectorAll(".sidebarOptionsButton")).forEach(Cd),Array.from(document.querySelectorAll(".optionsOpen")).forEach(function(e){e.classList.remove("optionsOpen")}),q.a(),$n.removeEventListener("scroll",Rd),Jn.removeEventListener("listRefreshed",Ud),uu(),Vu(),Ns(),nd(),ku(),cd(),gd(),fd(),function(){if(vi.classList.contains("hidden"))return;x.c.set("tabTutorialSeen",!0),vi.classList.add("hidden")}(),(e=document.querySelector(".slackSettingsMenu"))&&(e.parentElement.classList.remove("slackMenuOpen"),e.remove()),(t=document.querySelector(".sectionMenu"))&&t.remove(),bd(),K.close(),Y.close()}function vd(e){i.screens.find(function(t){return t._id===e.body._id})||(e.body.dots=e.body.dots||[],e.body.tags=e.body.tags||[],e.body.versions=[e.body.latestVersion],delete e.body.latestVersion,delete e.body.versions[0].snapshot.layers,i.addScreen(e.body),fl(),"dashboard"!==ua||CSS.supports("grid-template-columns","repeat(auto-fill, 220px)")||hr())}function jd(e){var t=i.screens.find(function(t){return t._id===e.params.sid});if(t&&!t.versions.find(function(t){return t._id===e.body._id})){var n=t.versions[0]._id,a=i.addVersion(e.params.sid,e.body),o=t.versions[0],r=Vo(e.params.sid);r&&(D.x(r.querySelector(".screenImage"),e.body.snapshot,"url"),r.querySelector(".screenLastUpdated").setAttribute("datetime",t.updated),ra===t&&(Je.setAttribute("datetime",t.updated),(sa._id===n||a&&a._id===sa._id)&&(Ke.classList.add("resourceView"),Ke.classList.remove("layerView"),sa=o,Ds(t),a&&a._id===sa._id&&D.C("Displayed version is not available anymore.",document.querySelector("main"))),Mt.classList.contains("versionsShown")?(ns(t),x.b.set(i.id,t._id,"versionsLastSeen",new Date(o.created))):ks(t)))}}function Sd(){var e=arguments[arguments.length-1].body.integration.slacks.filter(function(e){return!i.integration.slacks.find(function(t){return t._id===e._id})});e.length&&(e.forEach(function(e){i.addIntegration("slacks",e)},i),Bu(i.integration.slacks),wo())}function Ed(e){i.updateUserInfo(e.params.uid,e.body),lo(i.users),Nl(),ra&&(gr(ra.dots),ns(ra))}function wd(){Array.from(document.querySelectorAll(".mainMenu.subMenuOpen")).forEach(function(e){e.classList.remove("subMenuOpen")}),Array.from(document.querySelectorAll(".subMenu.open")).forEach(function(e){e.classList.remove("open")})}function Ld(e,t,n,i){var a=n.getBoundingClientRect();e.style.top=i.clientY-a.top+2+"px",e.style.left=i.clientX-a.left+2+"px",i.clientX+t.getBoundingClientRect().width+e.offsetWidth>window.innerWidth&&e.classList.add("toLeft"),i.clientY+e.offsetHeight>window.innerHeight&&e.classList.add("toTop")}function Cd(e){var t=e.closest(".sidebarOptionRealm");if(t.classList.contains("optionsOpen")&&(t.classList.remove("optionsOpen"),"menuId"in e.dataset)){var n=document.getElementById(e.dataset.menuId);n.classList.remove("open"),n.dataset.submenu="",n.style.transform="",wd();var i=t.closest(".optionsOpen");i||(i=t),i.classList.remove("optionsOpen")}}Ht.addEventListener("contextmenu",function(e){if(!Ca&&(yd(),Al(),e.target.classList.contains("dot")&&"undefined"!==e.target.dataset.id)){e.preventDefault();var t=document.importNode(ld.content,!0).querySelector(".dotMenu"),n=e.target,o=ra.dots.find(function(e){return e._id===n.dataset.id});t.style.zIndex=Da+1,document.queryCommandSupported("copy")||t.querySelector("button[data-action='copy-link']").remove(),n.classList.contains("open")?t.querySelector("button[data-action='reopen']").remove():t.querySelector("button[data-action='resolve']").remove(),n.classList.add("menuOpen"),n.classList.remove("hover"),t.addEventListener("click",function(e){var t=e.target.closest(".menuitem");if(t){switch(e.stopPropagation(),t.dataset.action){case"reopen":dd(o._id,"open");break;case"resolve":dd(o._id,"resolved");break;case"copy-link":D.d({content:D.I("project-screen",{url:{pid:i.id,sid:ra._id},query:{did:o._id}}),toastContainer:zt});break;case"delete":var a;a=o.creator?o.creator._id===Zeplin.user._id?"Delete your note?":"Delete "+o.creator.username+"'s note?":"Delete Anonymous's note?",L.a({title:a,message:"Deleted notes cannot be restored.",done:{name:"DELETE",cb:function(){!function(e,t){var n=t.dataset.id;t.classList.add("hidden"),fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+e._id+"/dots/"+n,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){mu(e,n),gr(e.dots),t.remove(),mixpanel.webapp.track("Deleted dot")}).catch(function(e){t.classList.remove("hidden"),k.b(e)})}(ra,n)}},cancel:{name:"CANCEL"}})}setTimeout(function(){cd()},80)}}),t.querySelector(".menuitem[data-action='delete']").classList.toggle("hidden",!(o.creator&&o.creator._id===Zeplin.user._id||D.v.canRemoveNotes(a))),Wt.appendChild(t),Ld(t,Qn,Wt,e)}}),Ht.addEventListener("mousedown",function(e){e.target.classList.contains("dot")&&e.button===Zeplin.MOUSE_BUTTON.LEFT&&"undefined"!==e.target.dataset.id&&function(e){var t,n={},a=12,o={},r=!1;cd();var s=ra.dots.find(function(t){return t._id===e.dataset.id});function l(n){var i=e.getBoundingClientRect();if(r){n.preventDefault();var l=Wt.getBoundingClientRect();Pl(),e.classList.add("moving"),e.style.zIndex=Da+5,Ca=!0,s.x=Math.max(0,Math.min((n.clientX-l.left)/l.width,1)),s.y=Math.max(0,Math.min((n.clientY-l.top)/l.height,1)),e.dataset.position=s.x<=.5?"left":"right",e.style.left="calc("+100*s.x+"% - 13px)",e.style.top="calc("+100*s.y+"% - 13px)",t=requestAnimationFrame(function(){e.classList.toggle("overlap",md(e))})}else o={x:Math.abs(n.clientX-i.left+13),y:Math.abs(n.clientY-i.top+13)},Math.hypot(o.x,o.y)>a&&(r=!0)}n.x=s.x,n.y=s.y,document.addEventListener("mousemove",l),document.addEventListener("mouseup",function a(o){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a),r?(cancelAnimationFrame(t),r=!1,o.target.classList&&o.target.classList.contains("dot")||(Ca=!1),e.classList.remove("moving","overlap"),e.style.zIndex=++Da,md(e)?(e.addEventListener("transitionend",function t(){e.removeEventListener("transitionend",t),e.classList.remove("backToFuture")}),e.classList.remove("hover"),e.classList.add("backToFuture"),e.dataset.position=n.x<=.5?"left":"right",e.style.left="calc("+100*n.x+"% - 13px)",e.style.top="calc("+100*n.y+"% - 13px)",s.x=n.x,s.y=n.y):n.x===s.x&&n.y===s.y||function(e,t,n){fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+ra._id+"/dots/"+n.dataset.id,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify(e)}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){mixpanel.webapp.track("Moved dot",{distance:Math.hypot(Ht.offsetWidth*(e.x-t.x),Ht.offsetHeight*(e.y-t.y))/fa})}).catch(function(e){n.dataset.position=t.x<=.5?"left":"right",n.style.left="calc("+100*t.x+"% - 13px)",n.style.top="calc("+100*t.y+"% - 13px)",k.b(e)})}({x:s.x,y:s.y},n,e),n=null):Yt.classList.remove("hidden")})}(e.target)}),Ht.addEventListener("mouseenter",function(e){e.target.classList.contains("dot")&&e.target.classList.add("hover")},!0),Ht.addEventListener("mouseout",function(e){e.target.classList.contains("dot")&&e.target.classList.remove("hover")}),Xe.addEventListener("submit",function(){if(D.v.canManageScreens(a)){Y.close();var e=Y.formatEmojiString($e.value.trim(),!0);if($e.value=e,ra&&ra.description!==e){var t=ra;fetch(Zeplin.urls.baseURL+"/projects/"+i.id+"/screens/"+t._id,{method:"PUT",headers:Zeplin.headers,body:JSON.stringify({description:e})}).then(function(e){if(!e.ok)return e.json().then(function(t){throw k.a(e.status,t)})}).then(function(){t.description=e}).catch(function(e){k.b(e,{dialogCallback:function(){$e.startEditing()}})})}}}),Bt.querySelector(".organizationRules .minRole").textContent=no.rook,ni.addEventListener("click",function(e){ai.disabled=!1,di.classList.remove("copied");var t=D.v.canChangeProjectAccesibility(a);if(i.public){if(e.stopPropagation(),yd(),!t&&!document.queryCommandSupported("copy"))return void to(i.sceneUrl);var n=document.importNode(ii.content,!0),o=n.querySelector(".shareSceneMenu");o.querySelector("button[data-action='copy-scene-link'] > span").textContent=document.queryCommandSupported("copy")?"Copy link":"Open in new tab",o.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var t=e.target.closest(".menuitem");if(t){switch(e.stopPropagation(),t.dataset.action){case"unshare":hd(!1);break;case"copy-scene-link":document.queryCommandSupported("copy")?D.d({content:i.sceneUrl,toastContainer:$n}):to(i.sceneUrl)}setTimeout(function(){fd()},80)}}}),n.querySelector(".menuitem[data-action='unshare']").classList.toggle("hidden",!t),ri.appendChild(n)}else ai.disabled=!t,si.classList.add("hidden"),li.classList.remove("hidden"),Bt.showModal()}),ai.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),ai.classList.contains("loading")||(ai.classList.add("loading"),oi.disabled=!0,hd(!0))}),oi.addEventListener("click",function(e){ai.classList.contains("loading")&&(e.preventDefault(),e.stopPropagation())}),ci.addEventListener("click",function(){D.A(ci)}),ui.addEventListener("click",function(){Bt.close()}),vi.addEventListener("click",function(e){e.stopPropagation()}),Array.from(document.querySelectorAll(".sidebarMenu")).forEach(function(e){e.addEventListener("mouseenter",function(e){e.target.closest(".sidebarMenuItems")&&function(e){if(wd(),!e)return;e.classList.add("subMenuOpen");var t=e.closest(".sidebarMenu").getBoundingClientRect().top,n=e.getBoundingClientRect().top,i=document.querySelector(".subMenu."+e.id+"s");i.style.transform="translateY("+(n-t)+"px)",i.classList.add("open")}(e.target.closest(".mainMenu"))},!0),e.addEventListener("click",function(t){t.button===Zeplin.MOUSE_BUTTON.LEFT&&(t.stopPropagation(),t.target.closest(".mainMenu")||Cd(document.querySelector(".sidebarOptionsButton[data-menu-id='"+e.id+"']")))})});var Dd,xd=document.getElementById("invitePopupContainer"),kd=new MutationObserver(function(e){e.forEach(function(e){if(e.oldValue&&e.oldValue.includes("sticky")||!e.target.classList.contains("sticky"))e.oldValue.includes("sticky")&&!e.target.classList.contains("sticky")&&(xd.style.right=0);else{var t=xd.clientWidth-Dd;xd.style.right=t?t+"px":0}})});CSS.supports("position","sticky")||(kd.observe($n,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]}),$n.addEventListener("scroll",function(){Dd=xd.offsetWidth,$n.classList.toggle("sticky",$n.scrollTop>=242+Oi.offsetHeight)}));var qd,Td,_d=60,Id=108,Od=12,Pd=12,Bd=359,Ad=26,Nd=Bd-Id;function Rd(){var e=ze.getBoundingClientRect(),t=Math.max(e.top-qd,Pd)-_d;Ze.style.transform="translate3d(0, "+t+"px, 0)",Ud()}function Ud(){var e=Ze.getBoundingClientRect(),t=ze.getBoundingClientRect(),n=t.top+t.height/2-e.top-11;He.classList.toggle("hidden",e.bottom<t.bottom)||(He.style.top=n+"px")}function Fd(){xi.classList.remove("focus"),Di.classList.toggle("searching",!!Ci.value.length)}function Md(e){Array.from(pt.querySelectorAll(".asset")).forEach(function(t){var n=sa.snapshot.assets.find(function(e){return e._id===t.dataset.id});t.querySelector(".assetName").textContent=Vr(n,e)})}function zd(e){fetch(Zeplin.urls.baseURL+"/intercom/users/tags",{method:"POST",headers:Zeplin.headers,body:JSON.stringify({name:{web:"Web developer",android:"Android developer",ios:"iOS developer",mac:"macOS developer"}[e]})})}function Zd(e){if(!e||!D.J(e,"project"))return L.a({title:"Invalid project link",message:"There might be a typo, please try again."},{defer:!0}),void _o();var t=Promise.resolve(i);return i&&i.id===e||(x.b.get(e,"layoutGridEnabled").then(function(e){jn.classList.toggle("hidden",!e),cs(r=e)}),x.b.get(e,"zoomLevel").then(function(e){fa=e,Nt.textContent=(100*fa).toFixed(),At.disabled=5===fa,Ut.disabled=.25===fa,ls({saveZoomLevel:!1})}),x.b.get(e,"noteVisibility").then(function(e){Ft.checked=e,Wt.classList.toggle("invisible",!e)}),x.b.get(e,"sectionsCollapseState").then(function(e){ea=e}),Gi.innerHTML="",Qi.innerHTML="",bd(),S&&S.remove(),t=zo(e)),t}Ci.addEventListener("search",function(e){Di.classList.toggle("searching",!!Ci.value.length),fl({immediate:!1})}),Ci.addEventListener("input",function(){bl(),Di.classList.toggle("searching",!!Ci.value.length),clearTimeout(Td),Td=setTimeout(function(){if(Di.classList.toggle("searching",!!Ci.value.length),!Ci.value)return delete na.q,void Oo(i.id);var e="q"in na?"replace":"push";Io(D.I("project-dashboard",{url:{pid:na.pid},query:{q:Ci.value}}),{navigationOperation:e})},200)}),Ci.addEventListener("keydown",function(e){e.keyCode===Zeplin.KEY_CODE.ESC&&(e.preventDefault(),e.stopPropagation(),Ci.value.trim()?(Ci.value="",Di.classList.remove("searching"),Oo(i.id)):Fd())}),Ci.addEventListener("focus",function(e){e.preventDefault(),xi.classList.add("focus"),Di.classList.toggle("searching",!!Ci.value.length)}),Ci.addEventListener("blur",Fd),Array.from(Ri.querySelectorAll('input[type="checkbox"]')).forEach(function(e){e.addEventListener("change",function(e){var t="lastUpdated"===e.target.name?"name":"lastUpdated";document.querySelector('#sortOptions input[name="'+t+'"]').checked=!1,fl(),e.target.checked&&e.preventDefault()})}),Array.from(document.querySelectorAll("input[name='allAssetsNamingConvention']")).forEach(function(e){e.addEventListener("change",function(e){Ni.querySelector("span").textContent=Ja[e.target.value],Ai.querySelector("span").textContent=Ja[e.target.value],document.querySelector("input[name='assetNamingConvention'][value='"+e.target.value+"']").checked=!0,lu(e.target.value),Md(e.target.value),x.b.set(na.pid,"assetNamingConvention",e.target.value)})}),Array.from(document.querySelectorAll("input[name='assetNamingConvention']")).forEach(function(e){e.addEventListener("change",function(e){Ni.querySelector("span").textContent=Ja[e.target.value],Ai.querySelector("span").textContent=Ja[e.target.value],document.querySelector("input[name='allAssetsNamingConvention'][value='"+e.target.value+"']").checked=!0,lu(e.target.value),Md(e.target.value);var t=sa.snapshot.assets.find(function(e){return e.layerId?e.layerId===l.sourceId:e.layerName===l.name});if(t){var n=Mr(t.contents);n&&tc(l,n,t,e.target.value)}x.b.set(na.pid,"assetNamingConvention",e.target.value)})});var Hd,Vd=!1;function Wd(){Vd||(Vd=!0,N.a.measure("page.interactive"),N.a.measureFirstInteraction())}function Yd(){Vi.style.width=244*Math.floor(Hi.clientWidth/244)+"px",Hd=setTimeout(Yd,1e3)}function Kd(){Za||(Za=!0,document.body.classList.add("loading"),Ha.start(),CSS.supports("grid-template-columns","repeat(auto-fill, 220px)")||Yd())}function Xd(){Za=!1,clearTimeout(Hd),document.body.classList.remove("loading"),Ha.stop()}function $d(e,t,n){n=n||{};var a=Zd(e);a&&a.then(function(){var e;i&&("sid"in n?("dashboard"!==ua&&Ao(),Is().length&&(bl(),fl()),function(e){if(e&&aa){ho();var t,n=i.screens.length;if(e.forEach(function(e){var i=Vo(e);if(i){i.querySelector(".screenLink").classList.add("highlight");var a=parseInt(i.dataset.index,10);a<n&&(n=a,t=i)}}),Array.from(new Set(e)).map(function(e){return i.findScreenSection(e)}).filter(function(e){return!!e}).forEach(function(e){Gs(ol(e._id),!1)}),t){var a=t.getBoundingClientRect().top;setTimeout(function(){"scrollBy"in Element.prototype?fe.scrollBy({top:a-150,behavior:"smooth"}):fe.scrollTop+=a-150},200)}else L.a({message:"Screens not available anymore."})}}(n.sid)):"seid"in n?("dashboard"!==ua&&Ao(),function(e){if(e&&aa){var t=ol(e);if(t){t.classList.contains("collapsed")&&Gs(t);var n=t.getBoundingClientRect().top;t.classList.add("highlight"),setTimeout(function(){"scrollBy"in Element.prototype?fe.scrollBy({top:n-150,behavior:"smooth"}):fe.scrollTop+=n-150,setTimeout(function(){t.classList.remove("highlight")},1e3)},200)}else L.a({message:"Section not available anymore."})}}(n.seid)):"eid"in n?("dashboard"!==ua&&Ao(),yc(i,n.eid[0])):"dashboard"===t?("dashboard"!==ua&&Ao(),"tag"in n?vl(n.tag):(bl(),"untagged"in n&&ye.childElementCount&&document.querySelector(".tag.untagged").classList.add("selected"),"q"in n?(Ci.value=n.q||"",Di.classList.toggle("searching",!!Ci.value.length)):(Ci.value="",Di.classList.remove("searching")),fl())):"cid"in n?("styleguide"!==ua&&No(),(e=n.cid)&&(Array.isArray(e)||(e=[e]),fo(),e.forEach(function(e){var t=Ye.querySelector(".color[data-id='"+e+"']");t&&t.classList.add("highlight")}))):"tsid"in n?("styleguide"!==ua&&No(),function(e){if(e){Array.isArray(e)||(e=[e]),vo();var t,n=i.textStyles.length;if(e.forEach(function(e){var i=En.querySelector(".font[data-id='"+e+"']");if(i){i.classList.add("highlight");var a=parseInt(i.dataset.index,10);a<n&&(n=a,t=i)}}),t){var a=t.getBoundingClientRect().top;setTimeout(function(){"scrollBy"in Element.prototype?yo.scrollBy({top:a-150,behavior:"smooth"}):yo.scrollTop+=a-150},200)}}}(n.tsid)):"styleguide"===t&&"styleguide"!==ua&&No(),x.c.get("slackReconnectionAuntieSeen").then(function(e){if(!e){var t=Ki.querySelector(".hideableInfo");t&&ee.a.render(null,t.parentElement,t);var n,a=i.integration.slacks.filter(function(e){return!e.scope.includes("emoji")});0!==a.length&&(n=a.length>1?C.a({content:"You can now use your custom Slack emojis in Zeplin! Remove an existing integration and re-add it to get started.",hideCallback:function(){x.c.set("slackReconnectionAuntieSeen",!0)}}):C.a({content:"You can now use your custom Slack emojis in Zeplin! Reconnect Slack to get started.",actionButton:{text:"Reconnect",callback:function(){if(x.c.set("slackReconnectionAuntieSeen",!0),!(0===i.integration.slacks.length||i.integration.slacks.length>1)){var e=i.integration.slacks[0]._id;ue.d(i.id,"slacks",e).then(function(){Ba?T.a.ipcRenderer.send("add-to-slack",{id:i.id,name:i.name}):(mo(),to(b,{inNewTab:!1}))}).catch(k.b)}}},hideCallback:function(){x.c.set("slackReconnectionAuntieSeen",!0)}}),Ki.appendChild(n))}}),qo(),Wd())})}function Jd(e){ua="dashboard",Be.dataset.selection=ua,function(){const e=E.c.channel(f);e.unbind("UpdateProjectName",Gd.onNameChange),e.unbind("ArchiveProject",Gd.onProjectNotAvailable),e.unbind("DeleteProject",Gd.onProjectNotAvailable),e.unbind("InviteUser",Gd.onProjectChannelInviteUser),e.unbind("CreateUser",Gd.onCreateUser),e.unbind("UpdateUserEmotar",Gd.onUpdateUserProfile),e.unbind("UpdateUserAvatar",Gd.onUpdateUserProfile),e.unbind("RemoveUserFromProject",Gd.onRemoveUserFromProject),e.unbind("DeleteUser",Gd.onDeleteUser),e.unbind("UpdateProjectDensity",Gd.onUpdateProjectDensity),e.unbind("CreateScreenV3",Gd.onCreateScreenV3),e.unbind("CreateScreenVersion",Gd.onCreateScreenVersion),e.unbind("DeleteScreen",Gd.onDeleteScreen),e.unbind("UpdateSectionScreensOrder",Gd.onUpdateSectionScreensOrder)}(),Va.remove(),Wa={},$d(e,ua)}const Gd={onNameChange(e){Wa.name=e.body.name,Va.update({projectData:Wa})},onProjectChannelInviteUser(e){const t=e.body;t.user._id!==Zeplin.user._id?(Wa.users.push(t),Va.update({projectData:Wa})):Jd(Wa._id)},onDeleteScreen(e){D.b(Wa.screens,t=>t._id===e.params.sid),Va.update({projectData:Wa})},onUpdateSectionScreensOrder(e){const t=e.body.screens.sort((e,t)=>e.to-t.to).map(e=>D.b(Wa.screens,t=>t._id===e._id)).filter(Boolean);Array.prototype.splice.apply(Wa.screens,[e.body.screens[0].to,0].concat(t)),Va.update({projectData:Wa})},onCreateUser(e){const t=Wa.users.find(t=>t.user._id===e.body._id);t&&(Object.assign(t.user,{username:e.body.username,status:"registered"}),Va.update({projectData:Wa}))},onUpdateUserProfile(e){const t=Wa.users.find(t=>t.user._id===e.params.uid);t&&(Object.assign(t.user,e.body),Va.update({projectData:Wa}))},onRemoveUserFromProject(e){D.b(Wa.users,t=>t.user._id===e.params.mid),Va.update({projectData:Wa})},onDeleteUser(e){D.b(Wa.users,t=>t.user._id===e.params.uid),Va.update({projectData:Wa})},onUpdateProjectDensity(e){Object.assign(Wa,{density:e.body.density}),Va.update({projectData:Wa})},onCreateScreenV3(e){const t={_id:e.body._id,latestVersion:{_id:e.body.latestVersion._id,snapshot:{_id:e.body.latestVersion.snapshot._id,width:e.body.latestVersion.snapshot.width,height:e.body.latestVersion.snapshot.height,url:e.body.latestVersion.snapshot.url}}};Wa.screens.push(t),Va.update({projectData:Wa})},onCreateScreenVersion(e){const t=Wa.screens.find(t=>t._id===e.params.sid);t&&(t.latestVersion={_id:e.body._id,snapshot:{_id:e.body.snapshot._id,width:e.body.snapshot.width,height:e.body.snapshot.height,url:e.body.snapshot.url}},Va.update({projectData:Wa}))},onProjectNotAvailable(e){pe.classList.remove("hidden"),_o()}};function Qd(e){Va.update({loadingJoin:!0}),ue.k(e).then(()=>{Jd(e)}).catch(e=>{Va.update({loadingJoin:!1}),k.b(e)})}function em(){Be.dataset.selection="dashboard",ua="dashboard"}function tm(){setTimeout(function(){Be.classList.remove("online")},1e4)}za.route(/\/project\/([0-9a-z]+)\/screen\/([0-9a-z]+)/i,function(e){ga("set","location",location.href),ga("set","title","Screen - Zeplin"),ga("send","pageview");var t=e.match[0],n=e.match[1];na=Object.assign({pid:t,sid:n},e.query);var a=Zd(t);a&&a.then(function(){if(i){if(D.J(n,"screen")){if(!ra||ra._id!==n)return _s(n)}else L.a({title:"Invalid screen link",message:"There might be a typo, please try again."}),Oo(i.id,yl());return Promise.resolve()}}).then(function(){if(ra){if(qo(),!("dots"in ra))return;e.query.did&&1===e.query.did.length?(xc(Ro(e.query.did[0]),!0),Yl(e.query.did[0],e.query.cmid)):po(e.query.did)}})}),za.route(/\/project\/([0-9a-z]+)(?:\/(dashboard|styleguide))?/i,function(e){const[t,n="dashboard"]=e.match;ga("set","location",location.href),ga("set","title",D.H(n)+" - Zeplin"),ga("send","pageview"),na=Object.assign({pid:t},e.query),$d(t,n,e.query)}),za.start(document.body,function(){N.a.measurePageDefaults(),N.a.measure("page.start"),Kd(),window.addEventListener("online",function(){var e;Cookies.get("userToken")&&((e=co(location.pathname))||_o(),na=e,location.search&&Object.assign(na,D.u(location.search)),"screen"===Be.dataset.selection&&(Me.textContent="Keep working! Connection is back…",Be.className="online",document.hidden?document.addEventListener("visibilitychange",function e(){document.removeEventListener("visibilitychange",e),tm()}):tm()),ja=!0,setTimeout(function(){zo(na.pid).then(function(){"sid"in na&&_s(na.sid)})},1e3))}),ct.dataset.selection=document.querySelector(".resourceTab:checked").value,Array.from(document.querySelectorAll(".resourceTab")).forEach(function(e){e.addEventListener("change",function(e){ct.dataset.selection=e.target.value})}),x.c.get("tabTutorialSeen").then(function(e){e||(bi.classList.remove("hidden"),bi.addEventListener("click",function(e){e.stopPropagation(),bi.classList.add("hidden"),vi.classList.remove("hidden")}))}),x.c.get("versionsTutorialSeen").then(function(e){e||(yi.classList.remove("hidden"),yi.addEventListener("click",function(e){e.stopPropagation(),yi.classList.add("hidden");var t=C.a({content:"Ping ping! Versions of screens are listed here.",popover:!0,noControls:!0,hideCallback:function(){x.c.set("versionsTutorialSeen",!0)}});document.body.appendChild(t)}))})})},function(e,t,n){"use strict";t.a=function(e){var t=a.a.h(o.a,e);return a.a.render(t,document.body)};var i=n(1),a=n.n(i),o=n(103)},function(e,t,n){"use strict";var i=n(104);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(4),r=n(10),s=n(105);n.n(s);class l extends a.a.Component{constructor(e){super(e),this.closePopup=this.closePopup.bind(this),this.closeHandler=this.closeHandler.bind(this),this.handleButtonClick=this.handleButtonClick.bind(this),this.handleActionButtonClick=this.handleActionButtonClick.bind(this)}static stopPropagation(e){e.stopPropagation()}closePopup(){a.a.render(null,this.base.parentElement,this.base)}closeHandler(){(this.props.noControls||this.props.popover)&&(this.props.noControls&&this.props.hideCallback&&this.props.hideCallback(),this.closePopup())}handleActionButtonClick(){this.props.actionButton.callback&&this.props.actionButton.callback()}handleButtonClick(){this.props.noControls||(this.props.hideCallback&&this.props.hideCallback(),this.closePopup())}componentDidMount(){document.addEventListener("click",this.closeHandler),this.props.bodyCallbacks&&Object.keys(this.props.bodyCallbacks).forEach(e=>{this.base.querySelector(e).addEventListener("click",this.props.bodyCallbacks[e])})}componentWillUnmount(){document.removeEventListener("click",this.closeHandler)}render(e,t){const n=Object(o.a)("hideableInfo",{popover:e.popover,padBottom:e.padBottom});let i;i="html"===e.type?a.a.h("div",{dangerouslySetInnerHTML:{__html:e.content},class:"infoText"}):a.a.h("div",{class:"infoText"},e.content);let s=null;e.actionButton&&e.actionButton.text&&e.actionButton.callback&&(s=a.a.h("button",{class:"infoActionButton",onClick:this.handleActionButtonClick},e.actionButton.text));let c=null;return e.noControls||(c=a.a.h("div",{class:"infoButtons"},a.a.h("button",{class:"infoHideButton",onClick:this.handleButtonClick},a.a.h("div",null,a.a.h("img",{src:r.a("img/icGuidelineRemove.svg"),alt:"×"}),a.a.h("span",{class:"infoHideButtonText"},e.buttonText?e.buttonText:"OK, hide it!"))),s)),a.a.h("div",{class:n,onClick:l.stopPropagation},a.a.h("img",{width:"20",height:"20",src:r.a("img/icTip.png"),srcset:`${r.a("img/icTip@2x.png")} 2x, ${r.a("img/icTip@3x.png")} 3x`,alt:"💁"}),a.a.h("div",{class:"infoBody"},i,c),a.a.h("div",{class:`anchor ${e.anchor?e.anchor:"bottom"}`}))}}t.a=l},function(e,t){},function(e,t,n){"use strict";t.a=a;var i=n(0);function a(e,t){var n=this,a=e,o=a.querySelector(".formattedText"),r=a.querySelector(".mirror"),s=a.querySelector("textarea"),l=a.querySelector(".counter"),c=s.maxLength,u=s.value;Object.defineProperties(this,{root:{value:a},textarea:{value:s},counter:{value:l},mirror:{value:r},placeholder:{get:function(){return s.placeholder},set:function(e){r.innerHTML=i.f(e)+"&nbsp;",o.dataset.placeholder=i.f(e),s.placeholder=e}},maxLength:{get:function(){return c},set:function(e){c=e,this._setMaxLength()}},readOnly:{get:function(){return s.readOnly},set:function(e){s.readOnly=e}},_originalValue:{value:u,writable:!0},value:{get:function(){return s.value},set:function(e){r.innerHTML=i.f(e||s.placeholder)+"&nbsp;",o.innerHTML=t(e),s.value=e,this._setMaxLength()}}}),-1!==c&&this._setMaxLength(),a.classList.add("zplTextarea"),r.innerHTML="&nbsp;",a.classList.contains("autoedit")&&(a.addEventListener("click",function(e){e.stopPropagation()}),o.addEventListener("click",function(e){e.target.closest("a")||(e.stopPropagation(),n.startEditing())})),a.classList.contains("autosubmit")&&s.addEventListener("blur",function(){document.querySelector("#suggestedEmojisContainer.hidden")&&n.submitEdits()}),s.addEventListener("keydown",function(e){if(!s.readOnly)switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ESC:n.cancelEditing();break;case Zeplin.KEY_CODE.ENTER:(document.body.classList.contains("mac")?e.metaKey:e.ctrlKey)&&n.submitEdits()}}),s.addEventListener("keyup",function(e){switch(e.keyCode){case Zeplin.KEY_CODE.ArrowLeft:case Zeplin.KEY_CODE.ArrowRight:n.checkAutoComplete()}}),s.addEventListener("input",function(e){s.readOnly||(n._setMaxLength(),l.textContent=c-s.value.length,r.innerHTML=i.f(s.value)+"&nbsp;",o.innerHTML=t(s.value),n.checkAutoComplete())}),s.addEventListener("drop",function(){s.readOnly||setTimeout(function(){s.focus()},4)}),s.addEventListener("click",function(e){e.stopPropagation(),n.checkAutoComplete()}),a.querySelector("button").addEventListener("click",function(e){e.stopPropagation(),n.submitEdits()})}a.prototype._setMaxLength=function(){document.body.classList.contains("safari")&&(this.textarea.maxLength=this.maxLength+(this.value.match(/\n/g)||[]).length)},a.prototype.startEditing=function(){if(!this.readOnly){this._originalValue=this.value,this.counter.textContent=this.maxLength-this.value.length,this.root.classList.add("editing");var e=this;setTimeout(function(){e.textarea.focus(),e.textarea.setSelectionRange(e.value.length,e.value.length)},4)}},a.prototype.submitEdits=function(){this.root.classList.contains("editing")&&(this.textarea.blur(),this.root.classList.remove("editing"),this.root.dispatchEvent(new CustomEvent("submit")))},a.prototype.cancelEditing=function(){this.value=this._originalValue,this.textarea.blur(),this.root.classList.remove("editing"),this.root.dispatchEvent(new CustomEvent("cancel"))},a.prototype.checkAutoComplete=function(){this.root.dispatchEvent(new CustomEvent("autocomplete"))}},function(e,t,n){"use strict";t.a=Project;var i=n(0),a=n(23),o=n(33),r=n(18);function s(e,t){let n,i;if("unknown"===e)n="px",i="px";else switch(t){case"android":n="dp",i="sp";break;case"ios":case"osx":n="pt",i="pt";break;case"web":default:n="px",i="px"}return{textDimensionSuffix:i,dimensionSuffix:n}}const l=Object.freeze({mdpi:1,"1x":1,web:1,unknown:1,undefined:1,hdpi:1.5,xhdpi:2,"2x":2,xxhdpi:3,"3x":3,xxxhdpi:4,"4x":4});function c(e){return l[e]}function u(e,t){if(e.length){var n=e[0].fontSize/t,i=e[e.length-1].fontSize/t;if(n<=36&&i>=14)e.forEach(function(e){e.scaledFontSize=e.fontSize/t});else{var a,o;n<14?(a=24,o=14):i>36?(a=36,o=24):(a=Math.min(36,n),o=Math.max(14,i));var r=n===i?0:(a-o)/(n-i);e[0].scaledFontSize=Math.round(a);for(var s=1;s<e.length;s++){var l=e[s-1].fontSize/t,c=e[s].fontSize/t;e[s].scaledFontSize=Math.round(e[s-1].scaledFontSize-(l-c)*r)}}}}function d(e,t,n){let i;switch(n){case"ios":case"osx":i=t.replace(/\s+/g,"");break;case"android":i="_"+t.replace(/\s+/g,"_").toLowerCase();break;case"web":default:i="-"+t.replace(/\s+/g,"-").toLowerCase()}return e+i}function m(e){var t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];if(e>19){var n=e%10;return["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"][Math.floor(e/10)]+(n?" "+t[n]:"")}return t[e]}function Project(e){var t,n,r,l,d=Object.assign({},e);d.users.sort(i.D.role),d.integration&&d.integration.slacks||(d.integration={slacks:[]}),n="https://scene.zeplin.io/project/"+d._id,l=d.colors.map(function(e){return new a.a(e)}),(t=d.textStyles.map(function(e){return new o.a(e)})).sort(i.g),u(t,c(d.density)),delete d.textStyles,delete d.colors;var m=d.screens.map(function(e){return e._id});d.sections.forEach(function(e){e.screens=e.screens.filter(function(e){return m.includes(e)})}),Object.defineProperties(this,{id:{value:d._id},type:{value:d.type},name:{get:function(){return d.name},set:function(e){d.name=e}},colors:{get:function(){return l}},density:{get:function(){return d.density},set:function(e){d.density=e}},extensions:{get:function(){return d.extensions},set:function(e){d.extensions=e}},icon:{value:d.icon},integration:{get:function(){return d.integration},set:function(e){d.integration=e}},prefix:{get:function(){return d.prefix},set:function(e){d.prefix=e}},public:{get:function(){return d.public},set:function(e){d.public=e}},allowedVersionCount:{value:3,writable:!0},screens:{get:function(){return d.screens},set:function(e){d.screens=e}},sections:{get:function(){return d.sections},set:function(e){d.sections=e}},status:{get:function(){return d.status},set:function(e){d.status=e}},textStyles:{get:function(){return t}},thumbnail:{get:function(){return d.thumbnail},set:function(e){d.thumbnail=e}},users:{get:function(){return d.users}},url:{value:i.I("project",{url:{pid:d._id}})},shortUrl:{get:function(){return r},set:function(e){r=e}},sceneUrl:{get:function(){return n},set:function(e){n=e}},slackTeamId:{get:function(){if(d.integration.slacks.length)return d.integration.slacks[0].teamId}},tags:{get:function(){var e=[];return new Set(d.screens.reduce(function(e,t){return e.concat(t.tags||[])},[])).forEach(function(t){e.push(t)}),e.sort(i.D.naturally)}},baseDensity:{value:"android"===d.type?"mdpi":"1x"},densityDivisor:{get:function(){return c(d.density)}},dimensionSuffix:{get:function(){return s(d.density,d.type).dimensionSuffix}},textDimensionSuffix:{get:function(){return s(d.density,d.type).textDimensionSuffix}},updated:{get:function(){return d.updated},set:function(e){d.updated=e}},componentSections:{get:function(){return d.componentSections},set:function(e){d.componentSections=e}}})}Project.prototype=Object.create(r.a.prototype),Project.prototype.constructor=Project,Project.prototype.toObject=function(){return{type:this.type,name:this.name,colors:this.colors.map(function(e){return e.toObject()}),textStyles:this.textStyles.map(function(e){return e.toObject()}),density:this.density,densityDivisor:this.densityDivisor,lengthUnit:this.dimensionSuffix,textLengthUnit:this.textDimensionSuffix}},Project.prototype.addTextStyle=function(e){this.textStyles.push(new o.a(e)),this.textStyles.sort(i.g),u(this.textStyles,this.densityDivisor)},Project.prototype.updateTextStyle=function(e,t){var n=this.textStyles.find(function(t){return t.id===e});n&&(Object.assign(n,t),this.textStyles.sort(i.g),u(this.textStyles,this.densityDivisor))},Project.prototype.removeTextStyle=function(e){var t=i.b(this.textStyles,function(t){return t.id===e});return u(this.textStyles,this.densityDivisor),t},Project.prototype.findTextStyleById=function(e){return this.textStyles.find(function(t){return t.id===e})},Project.prototype.findTextStyleByName=function(e){return this.textStyles.find(function(t){return t.name===e})},Project.prototype.findTextStyleEqual=function(e){return this.textStyles.find(function(t){return e.equals(t)})},Project.prototype.getMostConformingTextStyle=function(e){return this.textStyles.reduce(function(t,n){if(!e.conforms(n))return t;const i=Object.keys(n).filter(e=>void 0!==n[e]).length;return i>t.score?{textStyle:n,score:i}:t},{textStyle:null,score:0}).textStyle},Project.prototype.getTextStyleName=function(){if(!this.textStyles.length)return"Text Style";for(var e="Text Style",t=1;this.findTextStyleByName(e);)e="Text Style "+ ++t;return e},Project.prototype.findUser=function(e){return this.users.find(function(t){return t.user._id===e})},Project.prototype.findOwner=function(){return this.users.find(function(e){return"owner"===e.role})},Project.prototype.addUser=function(e){this.users.push(e),this.users.sort(i.D.role)},Project.prototype.changeUserRole=function(e,t){var n=this.findUser(e);n&&(n.role=t,this.users.sort(i.D.role))},Project.prototype.removeUser=function(e){return i.b(this.users,function(t){return t.user._id===e})},Project.prototype.updateUserInfo=function(e,t){var n=this.findUser(e);n&&(Object.assign(n.user,t),this.users.sort(i.D.role)),this.screens.forEach(function(n){n.dots&&n.dots.forEach(function(n){n.creator&&n.creator._id===e&&Object.assign(n.creator,t),n.comments.forEach(function(n){n.author&&n.author._id===e&&Object.assign(n.author,t)})}),n.versions.forEach(function(n){n.creator&&n.creator._id===e&&Object.assign(n.creator,t),n.commit.author&&n.commit.author._id===e&&Object.assign(n.commit.author,t)})})},Project.prototype.changeUserPaymentPlan=function(e,t){var n=this.findUser(e);n&&(n.user.paymentPlan=t)},Project.prototype.addColor=function(e){this.colors.push(new a.a(e))},Project.prototype.removeColor=function(e){return i.b(this.colors,function(t){return t.id===e})},Project.prototype.updateColor=function(e,t){var n=this.colors.find(function(t){return t.id===e});Object.assign(n,t)},Project.prototype.findColorById=function(e){return this.colors.find(function(t){return t.id===e})},Project.prototype.findColorByName=function(e){return this.colors.find(function(t){return t.name===e})},Project.prototype.findColorEqual=function(e){return this.colors.find(function(t){return e.equals(t)})},Project.prototype.findColorByHexAndAlpha=function(e){return this.colors.find(function(t){var n=void 0===e.alpha||t.a===e.alpha;return(void 0===e.hex||t.hexBase()===e.hex.toLowerCase())&&n})},Project.prototype.checkDuplicateColorHex=function(e,t){var n=this.findColorByHexAndAlpha({hex:e,alpha:t.a});return n&&n.id!==t.id?n:null},Project.prototype.checkDuplicateColorAlpha=function(e,t){var n=this.findColorByHexAndAlpha({hex:t.hexBase(),alpha:parseInt(e,10)/100});return n&&n.id!==t.id?n:null},Project.prototype.checkDuplicateColorName=function(e,t){var n=this.findColorByName(e);return n&&n.id!==t.id?n:null},Project.prototype._checkProjectColors=function(e){for(var t,n=0;n<this.colors.length;n++){var i=this.colors[n];if(i.hexBase()===e.hexBase()){var a=i.name.length,o=parseInt(i.name.substr(a-2),10);t=o&&o===Math.round(100*i.a)?i.name.substr(0,a-2):i.name;break}}return t||(t=e.generateName(this.type)),this._checkProjectColorNames(d(t,Math.round(100*e.a).toString(),this.type))},Project.prototype._checkProjectColorNames=function(e){for(var t=e,n=1;this.findColorByName(t);)t=d(e,m(++n),this.type);return t},Project.prototype.getColorName=function(e){return e.a<1?this._checkProjectColors(e):this._checkProjectColorNames(e.generateName(this.type))},Project.prototype.deleteTag=function(e){return this.screens.reduce(function(t,n){var i;return n.tags&&-1!==(i=n.tags.indexOf(e))?(n.tags.splice(i,1),t.concat({_id:n._id,operation:"remove",tags:[e]})):t},[])},Project.prototype.addSection=function(e,t){var n=this;return e.screens.forEach(function(e){var t=n.findScreenSection(e);t&&i.b(t.screens,function(t){return t===e})}),this.sections.splice(t,0,e),e},Project.prototype.splitSection=function(e,t,n){var i=this.findSection(e);if(i){var a=this.sections.findIndex(function(t){return e===t._id}),o=i.screens.splice(t,i.screens.length-t);return this.sections.splice(a+1,0,{name:n,screens:o}),this.sections[a+1]}},Project.prototype.findSection=function(e){return e?this.sections.find(function(t){return t._id===e}):null},Project.prototype.removeSection=function(e){var t=this.findSection(e);if(t){var n=this.sections.findIndex(function(t){return t._id===e});return this.sections[n-1].screens=this.sections[n-1].screens.concat(t.screens),i.b(this.sections,function(t){return t._id===e})}},Project.prototype.updateSectionOrder=function(e,t){var n=this,a=[].concat(e).map(function(e){return i.b(n.sections,function(t){return t._id===e})}).filter(function(e){return e});Array.prototype.splice.apply(this.sections,[t,0].concat(a))},Project.prototype.isDefaultSection=function(e){return 0===this.sections.findIndex(function(t){return t._id===e})},Project.prototype.findScreenSection=function(e){return this.sections.find(function(t){return t.screens.includes(e)})},Project.prototype.addScreensToSection=function(e,t,n){var a=this,o=this.findSection(e);o&&(t.forEach(function(e){var t=a.findScreenSection(e);t&&i.b(t.screens,function(t){return t===e})}),Array.prototype.splice.apply(o.screens,[n,0].concat(t)))},Project.prototype.addScreen=function(e,t){this.screens.push(e);var n=this.sections[0];void 0===t&&(t=n.screens.length),this.addScreensToSection(n._id,[e._id],t)},Project.prototype.findScreen=function(e){return this.screens.find(function(t){return t._id===e})},Project.prototype.findScreenByName=function(e){return this.screens.find(function(t){return t.name===e})},Project.prototype.removeScreen=function(e,t){var n=this.findSection(e);if(n&&i.b(n.screens,function(e){return e===t}))return i.b(this.screens,function(e){return e._id===t})},Project.prototype.updateScreenOrder=function(e,t,n){var a=this.findSection(e);a&&(t=[].concat(t).map(function(e){return i.b(a.screens,function(t){return t===e})}).filter(function(e){return e}),Array.prototype.splice.apply(a.screens,[n,0].concat(t)))},Project.prototype.addVersion=function(e,t){var n=this.findScreen(e);if(n)return n.updated=(new Date).toISOString(),n.versions.unshift(t),n.totalVersionCount&&n.totalVersionCount++,n.versions.length>this.allowedVersionCount?n.versions.pop():void 0},Project.prototype.removeVersion=function(e,t){var n=this.findScreen(e);if(n){var a=i.b(n.versions,function(e){return e._id===t});return n.totalVersionCount&&n.totalVersionCount--,a}},Project.prototype.addIntegration=function(e,t){this.integration[e].push(t)},Project.prototype.removeIntegration=function(e,t){return i.b(this.integration[e],function(e){return e._id===t})},Project.prototype.getColorMapByFormat=function(e){var t={};if(this.colors)return this.colors.forEach(function(n){var i=new a.a(n),o=i.toCSS(e);t[o]=i.name}),t},Project.prototype.removeExtension=function(e){return i.b(this.extensions,function(t){return t._id===e})}},function(e,t,n){"use strict";t.a=Layer;var i=n(72),a=n(109),o=n(110),r=n(73),s=n(33),l=n(18),c=n(113),u=["text","shape","group"];function Layer(e){var t=Object.assign({},e);t.blur&&(t.blur=new a.a(t.blur)),t.borders=t.borders.map(function(e){return new o.a(e,t.rect.width,t.rect.height)}),t.fills=t.fills.map(function(e){return new r.a(e,t.rect.width,t.rect.height)}).reverse(),t.shadows=t.shadows.map(function(e){return new c.a(e)}),t.textStyles=(t.textStyles||[]).map(function(e){var t=parseInt(e.range.location,10);return{range:{start:t,end:t+parseInt(e.range.length,10)},font:new s.a(e.style)}}),t.asset?t.assets=t.asset.contents.map(function(e){return{density:e.density,format:e.format}}):t.assets=[],Object.defineProperties(this,{id:{value:t._id,enumerable:!0},type:{get:function(){return t.type},set:function(e){if(-1===u.indexOf(e))throw new TypeError("Unknown layer type: '"+e+"'. Possible values: "+JSON.stringify(u));t.type=e}},name:{get:function(){return t.name},set:function(e){t.name=e}},exportable:{value:t.exportable},rotation:{get:function(){return t.rotation},set:function(e){t.rotation=e}},opacity:{get:function(){return t.opacity},set:function(e){if(e<0||e>1)throw new RangeError("Invalid opacity value: '"+e+"'. Valid range: [0, 1]");t.opacity=e}},blendMode:{get:function(){return t.blendMode},set:function(e){if(-1===i.a.indexOf(e))throw new TypeError("Unknown blend mode: '"+e+"'. Possible values: "+JSON.stringify(i.a));t.blendMode=e}},borderRadius:{get:function(){return t.borderRadius},set:function(e){if(e<0)throw new RangeError("Invalid radius value: '"+e+"'. Valid range: [0, ∞)");t.borderRadius=e}},blur:{get:function(){return t.blur},set:function(e){t.blur=new a.a(e)}},rect:{get:function(){return t.rect},set:function(e){t.rect=e}},content:{get:function(){return"text"===t.type&&t.content||""},set:function(e){"text"===t.type&&(t.content=e)}},textStyles:{get:function(){return t.textStyles}},borders:{value:t.borders},fills:{value:t.fills},shadows:{value:t.shadows},assets:{value:t.assets}})}Layer.prototype=Object.create(l.a.prototype),Layer.prototype.constructor=Layer,Layer.prototype.toObject=function(){var e={type:this.type,name:this.name,exportable:this.exportable,rotation:this.rotation,opacity:this.opacity,blendMode:this.blendMode,borderRadius:this.borderRadius,rect:this.rect,content:this.content,borders:this.borders.map(function(e){return e.toObject()}),fills:this.fills.map(function(e){return e.toObject()}),shadows:this.shadows.map(function(e){return e.toObject()}),textStyles:this.textStyles.map(function(e){var t=e.range;return{range:{location:t.start,length:t.end-t.start},style:e.font.toObject()}}),assets:this.assets};return this.blur&&(e.blur=this.blur.toObject()),e},Layer.prototype.hasGradient=function(){return this.fills.some(function(e){return"gradient"===e.type})},Layer.prototype.hasBlendMode=function(){return this.fills.some(function(e){return e.blendMode&&"normal"!==e.blendMode})},Layer.prototype.getDefaultTextStyle=function(){if("text"===this.type&&this.textStyles.length){var e,t=[],n=0;return this.textStyles.forEach(function(i){var a=t.find(function(e){return e.font.equals(i.font)}),o=i.range.end-i.range.start;a||(a={font:i.font,totalLength:0},t.push(a)),a.totalLength+=o,a.totalLength>n&&(n=a.totalLength,e=a)}),e&&e.font}}},function(e,t,n){"use strict";t.a=o;var i=n(18),a=["gaussian","background"];function o(e){var t=Object.assign({},e);Object.defineProperties(this,{type:{get:function(){return t.type},set:function(e){if(-1===a.indexOf(e))throw new TypeError("Unknown blur type: '"+e+"'. Possible values: "+JSON.stringify(a));t.type=e}},radius:{get:function(){return t.radius},set:function(e){if(e<0)throw new RangeError("Invalid radius value: '"+e+"'. Valid range: [0, ∞)");t.radius=e}}})}o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.toObject=function(){return{type:this.type,radius:this.radius}}},function(e,t,n){"use strict";t.a=o;var i=n(73),a=n(18);function o(e,t,n){var a=Object.assign({},e);a.fill=new i.a({fillType:a.fillType,color:a.color,gradient:a.gradient,opacity:a.opacity,blendMode:a.blendMode},t,n),delete a.fillType,delete a.color,delete a.gradient,delete a.opacity,delete a.blendMode,Object.defineProperties(this,{position:{get:function(){return a.position},set:function(e){a.position=e}},thickness:{get:function(){return a.thickness},set:function(e){a.thickness=e}},fill:{get:function(){return a.fill},set:function(e){a.fill=e}}})}o.prototype=Object.create(a.a.prototype),o.prototype.constructor=o,o.prototype.toObject=function(){return{position:this.position,thickness:this.thickness,fill:this.fill.toObject()}}},function(e,t,n){"use strict";t.a=r;var i=n(112),a=n(18),o=["linear","radial","angular"];function r(e,t,n){var a=Object.assign({},e);a.colorStops=a.colorStops.map(function(e){return new i.a(e)}),Object.defineProperties(this,{type:{get:function(){return a.type},set:function(e){if(-1===o.indexOf(e))throw new TypeError("Unknown gradient type: '"+e+"'. Possible values: "+JSON.stringify(o));a.type=e},enumerable:!0},from:{get:function(){return a.from},set:function(e){a.from=e},enumerable:!0},to:{get:function(){return a.to},set:function(e){a.to=e},enumerable:!0},angle:{get:function(){return a.angle},set:function(e){a.angle=e},enumerable:!0},scale:{get:function(){return a.scale},set:function(e){a.scale=e},enumerable:!0},colorStops:{value:a.colorStops,enumerable:!0}})}r.prototype=Object.create(a.a.prototype),r.prototype.constructor=r,r.prototype.toObject=function(){const e={type:this.type,from:this.from,to:this.to,scale:this.scale,colorStops:this.colorStops.map(function(e){return e.toObject()})};return void 0!==this.angle&&(e.angle=this.angle),e}},function(e,t,n){"use strict";t.a=o;var i=n(23),a=n(18);function o(e){var t=Object.assign({},e);t.color=new i.a(t.color),Object.defineProperties(this,{color:{get:function(){return t.color},set:function(e){t.color=new i.a(e)}},position:{get:function(){return t.position},set:function(e){if(e<0||e>1)throw new RangeError("Invalid position value: '"+e+"'. Valid range: [0, 1]");t.position=e}}})}o.prototype=Object.create(a.a.prototype),o.prototype.constructor=o,o.prototype.toObject=function(){return{color:this.color.toObject(),position:this.position}}},function(e,t,n){"use strict";t.a=r;var i=n(23),a=n(18),o=["outer","inner"];function r(e){var t=Object.assign({},e);t.color=new i.a(t.color),Object.defineProperties(this,{type:{get:function(){return t.type},set:function(e){if(-1===o.indexOf(e))throw new TypeError("Unknown shadow type: '"+e+"'. Possible values: "+JSON.stringify(o));t.type=e}},offsetX:{get:function(){return t.offsetX},set:function(e){t.offsetX=e}},offsetY:{get:function(){return t.offsetY},set:function(e){t.offsetY=e}},blurRadius:{get:function(){return t.blurRadius},set:function(e){t.blurRadius=e}},spread:{get:function(){return t.spread},set:function(e){t.spread=e}},color:{get:function(){return t.color},set:function(e){t.color=new i.a(e)}}})}r.prototype=Object.create(a.a.prototype),r.prototype.constructor=r,r.prototype.toObject=function(){return{type:this.type,offsetX:this.offsetX,offsetY:this.offsetY,blurRadius:this.blurRadius,spread:this.spread,color:this.color.toObject()}}},function(e,t){e.exports=Autolinker},function(e,t){e.exports=JSZip},function(e,t,n){"use strict";var i=n(0);function a(e){this._isMac=e&&e.mac,this._routes=[],this._history=new o,this._history.attach(function(e){this._handle(e.url)}.bind(this))}function o(){this._history=window.history,this._listeners={},this._listenerCount=0,this._flowNavigationStack=[],window.addEventListener("popstate",this._handlePopState.bind(this))}function r(e,t){this._element=e,this._router=t,this._element.addEventListener("click",this._clickHandler.bind(this))}Object.defineProperties(a.prototype,{isMac:{get:function(){return this._isMac}},history:{get:function(){return this._history}},match:{value:function(e){return e=this._getUrl(e),!!this._findRoute(e)}},route:{value:function(e,t){return this._register({regex:e,handler:t}),this}},start:{value:function(e,t,n){var i=Promise.resolve();return this._hookAppLinks(e),t&&(i=i.then(t)),i=i.then(function(){this._handle(window.location.href)}.bind(this)),n&&i.then(n),this}},_createLink:{value:function(e){return new r(e,this)}},_register:{value:function(e){this._routes.push(e)}},_getUrl:{value:function(e){return"string"==typeof e?(e.startsWith("/")&&(e=window.location.origin+e),new URL(e)):e}},_findRoute:{value:function(e){return this._routes.find(function(t){return t.regex.test(e.href)})}},_handle:{value:function(e){e=this._getUrl(e);var t=this._findRoute(e);if(t)return t.handler({url:e,match:e.href.match(t.regex).slice(1),query:Object(i.u)(e.search.substr(1))})}},_searchAppLinks:{value:function(e){var t=this;return e.nodeType!==Node.ELEMENT_NODE?[]:e.hasAttribute("data-link-type")&&"inApp"===e.dataset.linkType?[e]:Array.from(e.childNodes).reduce(function(e,n){return e.concat(t._searchAppLinks(n))},[])}},_hookAppLinks:{value:function(e){var t=this,n=e.querySelectorAll('[data-link-type="inApp"]');Array.from(n).forEach(function(e){t._createLink(e)});new MutationObserver(function(e){e.forEach(function(e){switch(e.type){case"attributes":"inApp"===e.target.dataset.linkType&&t._createLink(e.target);break;case"childList":Array.from(e.addedNodes).forEach(function(e){t._searchAppLinks(e).forEach(function(e){t._createLink(e)})})}})}).observe(e,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["data-link-type"]})}}}),Object.defineProperties(o.prototype,{actions:{value:{PUSH_STATE:"PUSH_STATE",POP_STATE:"POP_STATE",REPLACE_STATE:"REPLACE_STATE"}},attach:{value:function(e){var t=this._listenerCount;return this._listeners[t]=e,this._listenerCount++,t}},detach:{value:function(e){delete this._listeners[e]}},push:{value:function(e,{state:t,flowNavigation:n}={}){n?this._flowNavigationStack.push({url:location.href,state:this._history.state}):this._flowNavigationStack.length=0,this._history.pushState(t,null,e),this._notifyListeners({action:this.actions.PUSH_STATE,state:t,url:e})}},replace:{value:function(e,{state:t,flowNavigation:n}={}){n?this._flowNavigationStack.push({url:location.href,state:this._history.state}):this._flowNavigationStack.length=0,this._history.replaceState(t,null,e),this._notifyListeners({action:this.actions.REPLACE_STATE,state:t,url:e})}},pop:{value:function(){if(!this._flowNavigationStack.length)return;const{state:e,url:t}=this._flowNavigationStack.pop();this._history.pushState(e,null,t),this._notifyListeners({action:this.actions.PUSH_STATE,state:e,url:window.location.toString()})}},_notifyListeners:{value:function(e){Object.keys(this._listeners).forEach(function(t){this._listeners[t](e)},this)}},_handlePopState:{value:function(e){this._notifyListeners({action:this.actions.POP_STATE,state:e.state,url:window.location.toString()})}}}),Object.defineProperties(r.prototype,{element:{get:function(){return this._element}},navigationOperation:{get:function(){return this._element.dataset.navOp}},_clickHandler:{value:function(e){if("#"!==this._element.href&&(!this._router.match(this._element.href)||(this._router.isMac?e.metaKey:e.ctrlKey)))return;e.preventDefault();const t={};switch("flowNav"in this._element.dataset&&(t.flowNavigation=!0),this.navigationOperation){case"replace":this._router.history.replace(this._element.href,t);break;case"pop":this._router.history.pop();break;case"push":default:this._router.history.push(this._element.href,t)}}}}),t.a=a},function(e,t,n){"use strict";t.b=function(e,t){o=t,m(e),r.a.ipcRenderer.send("query-asset-download-target",e)},t.a=function(e){m(e.projectId,!0),r.a.ipcRenderer.removeAllListeners("assets-downloaded"),r.a.ipcRenderer.once("assets-downloaded",p),r.a.ipcRenderer.send("download-assets",e)};var i,a,o,r=n(12),s=n(0),l=Array.from(document.querySelectorAll(".assetExportTargetProject")),c=document.querySelector("main");function u(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&i&&(e.target.classList.contains("assetExportTargetProjectFolder")?(m(a,!0),r.a.ipcRenderer.send("change-asset-download-target",{projectId:a,projectType:o})):e.target.classList.contains("openInExplorer")&&r.a.ipcRenderer.send("open-item",i))}function d(e,t){t?l.forEach(function(e){var n=e.querySelector(".assetExportTargetProjectName span"),a=e.querySelector(".assetExportTargetProjectFolder");i=t.projectFolder,n.title=t.projectName,n.textContent=t.projectName,a.title=t.projectFolder,a.textContent=t.projectFolderPathParts.join("▸"),e.classList.remove("android","custom","hidden"),e.classList.add(t.projectFolderType)}):l.forEach(function(e){e.classList.add("hidden"),e.classList.remove("android","custom")})}function m(e,t){a=e,l.forEach(function(e){t||(e.classList.add("hidden"),e.classList.remove("android","custom"))}),r.a.ipcRenderer.removeAllListeners(e+":asset-download-target"),r.a.ipcRenderer.once(e+":asset-download-target",d)}function p(e,t){s.C("Exported to "+t.projectName,c),"android"===o&&mixpanel.webapp.track("Exported assets",{folderType:t.projectFolderType,projectType:o})}l.forEach(function(e){e.addEventListener("click",u)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"manageSuggestedEmojis",function(){return j}),n.d(t,"open",function(){return E}),n.d(t,"close",function(){return w}),n.d(t,"formatEmojiString",function(){return S}),n.d(t,"replace",function(){return v});var i,a,o,r,s=n(0),l=n(74),c=n(75),u=document.getElementById("suggestedEmojisContainer"),d=u.querySelector(".suggestedListBox"),m=document.getElementById("suggestedEmojiTemplate"),p=0,g=[],h=/:(\S+?):/g;function f(e){return e?(r=e,(g=l.a.getSuggestedEmojis(e)).length?(g.forEach(b),u.appendChild(d),i&&(t=i,g.some(function(e){return e.emoji===t.emoji}))?p=u.querySelector(".suggestedItem[data-emoji='"+i.emoji+"']").dataset.index:(p=0,i=g[0]),u):void(i=null)):(i=null,p=0,void w());var t}function b(e,t){var n=document.importNode(m.content,!0),i=n.querySelector(".suggestedItem"),a=e.alias.replace(/\s/gi,"_");i.dataset.index=t,i.dataset.emoji=e.emoji,e.customEmoji?(i.querySelector(".emojiImg").src=e.emoji,i.classList.add("customEmoji")):i.querySelector(".emojiChar").textContent=e.emoji,i.querySelector(".emojiAlias").textContent=a,i.querySelector(".emojiAlias").title=a,d.appendChild(n)}function y(e){var t=a.selectionStart,n=a.value.substring(0,t),i=n.length-n.split("").reverse().join("").search(/:/)-1,l=a.value.substring(i,t),c=e.alias.replace(/\s/g,"_");a.value=a.value.substring(0,i)+l.replace(r,c+": ")+a.value.substring(t),o.innerHTML=Object(s.f)(a.value)+"&nbsp;";var u=t-r.length+c.length+2;a.focus(),a.setSelectionRange(u,u),w()}function v(e,t,n){return e.replace(h,function(e,i){var a=l.a.searchEmoji(i);if(a){if(n)return"";if(!a.customEmoji)return a.emoji;if(!t)return'<img class="customEmoji" src="'+a.emoji+'" title="'+i+'">'}return t?e:`<span class="customEmojiPlainText">${e}</span>`})}function j(e,t){if(a=e,o=t,!u.classList.contains("hidden")){var n=u.querySelector(".suggestedItem.selected");n&&(i=g[n.dataset.index])}var s=e.value.substring(0,e.selectionStart),c=s.lastIndexOf(":"),d=e.value.substring(c,e.selectionStart).match(/^:(.+)/);if(d){var m=d[0].substring(1);if(r===m&&!u.classList.contains("hidden"))return;w();var b=s.substring(0,c).lastIndexOf(":"),y=s.substring(b,c+1).match(h);if(y&&l.a.searchEmoji(y[0].substring(1,y[0].length-1)))return;return f(m)}p=0,i=null,w()}function S(e,t){return v(e,t)}function E(){var e={elements:{textContainer:a,suggestedListContainer:u},cb:{autoComplete:y},index:p,list:g};c.b(e)}function w(){c.a()}},function(e,t,n){"use strict";t.a=[{emoji:"😀",aliases:["grinning"]},{emoji:"😃",aliases:["smiley"]},{emoji:"😄",aliases:["smile"]},{emoji:"😁",aliases:["grin"]},{emoji:"😆",aliases:["laughing","satisfied"]},{emoji:"😅",aliases:["sweat smile"]},{emoji:"😂",aliases:["joy"]},{emoji:"🤣",aliases:["rofl"]},{emoji:"☺️",aliases:["relaxed"]},{emoji:"😊",aliases:["blush"]},{emoji:"😇",aliases:["innocent"]},{emoji:"🙂",aliases:["slightly smiling face"]},{emoji:"🙃",aliases:["upside down face"]},{emoji:"😉",aliases:["wink"]},{emoji:"😌",aliases:["relieved"]},{emoji:"😍",aliases:["heart eyes"]},{emoji:"😘",aliases:["kissing heart"]},{emoji:"😗",aliases:["kissing"]},{emoji:"😙",aliases:["kissing smiling eyes"]},{emoji:"😚",aliases:["kissing closed eyes"]},{emoji:"😋",aliases:["yum"]},{emoji:"😜",aliases:["stuck out tongue winking eye"]},{emoji:"😝",aliases:["stuck out tongue closed eyes"]},{emoji:"😛",aliases:["stuck out tongue"]},{emoji:"🤑",aliases:["money mouth face"]},{emoji:"🤗",aliases:["hugs"]},{emoji:"🤓",aliases:["nerd face"]},{emoji:"😎",aliases:["sunglasses"]},{emoji:"🤡",aliases:["clown face"]},{emoji:"🤠",aliases:["cowboy hat face"]},{emoji:"😏",aliases:["smirk"]},{emoji:"😒",aliases:["unamused"]},{emoji:"😞",aliases:["disappointed"]},{emoji:"😔",aliases:["pensive"]},{emoji:"😟",aliases:["worried"]},{emoji:"😕",aliases:["confused"]},{emoji:"🙁",aliases:["slightly frowning face"]},{emoji:"☹️",aliases:["frowning face"]},{emoji:"😣",aliases:["persevere"]},{emoji:"😖",aliases:["confounded"]},{emoji:"😫",aliases:["tired face"]},{emoji:"😩",aliases:["weary"]},{emoji:"😤",aliases:["triumph"]},{emoji:"😠",aliases:["angry"]},{emoji:"😡",aliases:["rage","pout"]},{emoji:"😶",aliases:["no mouth"]},{emoji:"😐",aliases:["neutral face"]},{emoji:"😑",aliases:["expressionless"]},{emoji:"😯",aliases:["hushed"]},{emoji:"😦",aliases:["frowning"]},{emoji:"😧",aliases:["anguished"]},{emoji:"😮",aliases:["open mouth"]},{emoji:"😲",aliases:["astonished"]},{emoji:"😵",aliases:["dizzy face"]},{emoji:"😳",aliases:["flushed"]},{emoji:"😱",aliases:["scream"]},{emoji:"😨",aliases:["fearful"]},{emoji:"😰",aliases:["cold sweat"]},{emoji:"😢",aliases:["cry"]},{emoji:"😥",aliases:["disappointed relieved"]},{emoji:"🤤",aliases:["drooling face"]},{emoji:"😭",aliases:["sob"]},{emoji:"😓",aliases:["sweat"]},{emoji:"😪",aliases:["sleepy"]},{emoji:"😴",aliases:["sleeping"]},{emoji:"🙄",aliases:["roll eyes"]},{emoji:"🤔",aliases:["thinking"]},{emoji:"🤥",aliases:["lying face"]},{emoji:"😬",aliases:["grimacing"]},{emoji:"🤐",aliases:["zipper mouth face"]},{emoji:"🤢",aliases:["nauseated face"]},{emoji:"🤧",aliases:["sneezing face"]},{emoji:"😷",aliases:["mask"]},{emoji:"🤒",aliases:["face with thermometer"]},{emoji:"🤕",aliases:["face with head bandage"]},{emoji:"😈",aliases:["smiling imp"]},{emoji:"👿",aliases:["imp"]},{emoji:"👹",aliases:["japanese ogre"]},{emoji:"👺",aliases:["japanese goblin"]},{emoji:"💩",aliases:["hankey","poop","shit"]},{emoji:"👻",aliases:["ghost"]},{emoji:"💀",aliases:["skull"]},{emoji:"☠️",aliases:["skull and crossbones"]},{emoji:"👽",aliases:["alien"]},{emoji:"👾",aliases:["space invader"]},{emoji:"🤖",aliases:["robot"]},{emoji:"🎃",aliases:["jack o lantern"]},{emoji:"😺",aliases:["smiley cat"]},{emoji:"😸",aliases:["smile cat"]},{emoji:"😹",aliases:["joy cat"]},{emoji:"😻",aliases:["heart eyes cat"]},{emoji:"😼",aliases:["smirk cat"]},{emoji:"😽",aliases:["kissing cat"]},{emoji:"🙀",aliases:["scream cat"]},{emoji:"😿",aliases:["crying cat face"]},{emoji:"😾",aliases:["pouting cat"]},{emoji:"👐",aliases:["open hands"]},{emoji:"🙌",aliases:["raised hands"]},{emoji:"👏",aliases:["clap"]},{emoji:"🙏",aliases:["pray"]},{emoji:"🤝",aliases:["handshake"]},{emoji:"👍",aliases:["+1","thumbsup"]},{emoji:"👎",aliases:["-1","thumbsdown"]},{emoji:"👊",aliases:["fist oncoming","facepunch","punch"]},{emoji:"✊",aliases:["fist raised","fist"]},{emoji:"🤛",aliases:["fist left"]},{emoji:"🤜",aliases:["fist right"]},{emoji:"🤞",aliases:["crossed fingers"]},{emoji:"✌️",aliases:["v"]},{emoji:"🤘",aliases:["metal"]},{emoji:"👌",aliases:["ok hand"]},{emoji:"👈",aliases:["point left"]},{emoji:"👉",aliases:["point right"]},{emoji:"👆",aliases:["point up 2"]},{emoji:"👇",aliases:["point down"]},{emoji:"☝️",aliases:["point up"]},{emoji:"✋",aliases:["hand","raised hand"]},{emoji:"🤚",aliases:["raised back of hand"]},{emoji:"🖐",aliases:["raised hand with fingers splayed"]},{emoji:"🖖",aliases:["vulcan salute"]},{emoji:"👋",aliases:["wave"]},{emoji:"🤙",aliases:["call me hand"]},{emoji:"💪",aliases:["muscle"]},{emoji:"🖕",aliases:["middle finger","fu"]},{emoji:"✍️",aliases:["writing hand"]},{emoji:"🤳",aliases:["selfie"]},{emoji:"💅",aliases:["nail care"]},{emoji:"💍",aliases:["ring"]},{emoji:"💄",aliases:["lipstick"]},{emoji:"💋",aliases:["kiss"]},{emoji:"👄",aliases:["lips"]},{emoji:"👅",aliases:["tongue"]},{emoji:"👂",aliases:["ear"]},{emoji:"👃",aliases:["nose"]},{emoji:"👣",aliases:["footprints"]},{emoji:"👁",aliases:["eye"]},{emoji:"👀",aliases:["eyes"]},{emoji:"🗣",aliases:["speaking head"]},{emoji:"👤",aliases:["bust in silhouette"]},{emoji:"👥",aliases:["busts in silhouette"]},{emoji:"👶",aliases:["baby"]},{emoji:"👦",aliases:["boy"]},{emoji:"👧",aliases:["girl"]},{emoji:"👨",aliases:["man"]},{emoji:"👩",aliases:["woman"]},{emoji:"👱‍♀️‍",aliases:["blonde woman"]},{emoji:"👱",aliases:["blonde man","person with blond hair"]},{emoji:"👴",aliases:["older man"]},{emoji:"👵",aliases:["older woman"]},{emoji:"👲",aliases:["man with gua pi mao"]},{emoji:"👳‍♀️",aliases:["woman with turban"]},{emoji:"👳",aliases:["man with turban"]},{emoji:"👮‍♀️",aliases:["policewoman"]},{emoji:"👮",aliases:["policeman","cop"]},{emoji:"👷‍♀️",aliases:["construction worker woman"]},{emoji:"👷",aliases:["construction worker man","construction worker"]},{emoji:"💂‍♀️",aliases:["guardswoman"]},{emoji:"💂",aliases:["guardsman"]},{emoji:"🕵️‍♀️",aliases:["female detective"]},{emoji:"🕵",aliases:["male detective","detective"]},{emoji:"👩‍⚕️",aliases:["woman health worker"]},{emoji:"👨‍⚕️",aliases:["man health worker"]},{emoji:"👩‍🌾",aliases:["woman farmer"]},{emoji:"👨‍🌾",aliases:["man farmer"]},{emoji:"👩‍🍳",aliases:["woman cook"]},{emoji:"👨‍🍳",aliases:["man cook"]},{emoji:"👩‍🎓",aliases:["woman student"]},{emoji:"👨‍🎓",aliases:["man student"]},{emoji:"👩‍🎤",aliases:["woman singer"]},{emoji:"👨‍🎤",aliases:["man singer"]},{emoji:"👩‍🏫",aliases:["woman teacher"]},{emoji:"👨‍🏫",aliases:["man teacher"]},{emoji:"👩‍🏭",aliases:["woman factory worker"]},{emoji:"👨‍🏭",aliases:["man factory worker"]},{emoji:"👩‍💻",aliases:["woman technologist"]},{emoji:"👨‍💻",aliases:["man technologist"]},{emoji:"👩‍💼",aliases:["woman office worker"]},{emoji:"👨‍💼",aliases:["man office worker"]},{emoji:"👩‍🔧",aliases:["woman mechanic"]},{emoji:"👨‍🔧",aliases:["man mechanic"]},{emoji:"👩‍🔬",aliases:["woman scientist"]},{emoji:"👨‍🔬",aliases:["man scientist"]},{emoji:"👩‍🎨",aliases:["woman artist"]},{emoji:"👨‍🎨",aliases:["man artist"]},{emoji:"👩‍🚒",aliases:["woman firefighter"]},{emoji:"👨‍🚒",aliases:["man firefighter"]},{emoji:"👩‍✈️",aliases:["woman pilot"]},{emoji:"👨‍✈️",aliases:["man pilot"]},{emoji:"👩‍🚀",aliases:["woman astronaut"]},{emoji:"👨‍🚀",aliases:["man astronaut"]},{emoji:"👩‍⚖️",aliases:["woman judge"]},{emoji:"👨‍⚖️",aliases:["man judge"]},{emoji:"🤶",aliases:["mrs claus"]},{emoji:"🎅",aliases:["santa"]},{emoji:"👸",aliases:["princess"]},{emoji:"🤴",aliases:["prince"]},{emoji:"👰",aliases:["bride with veil"]},{emoji:"🤵",aliases:["man in tuxedo"]},{emoji:"👼",aliases:["angel"]},{emoji:"🤰",aliases:["pregnant woman"]},{emoji:"🙇‍♀️",aliases:["bowing woman"]},{emoji:"🙇",aliases:["bowing man","bow"]},{emoji:"💁",aliases:["tipping hand woman","information desk person","sassy woman"]},{emoji:"💁‍♂️",aliases:["tipping hand man","sassy man"]},{emoji:"🙅",aliases:["no good woman","no good","ng woman"]},{emoji:"🙅‍♂️",aliases:["no good man","ng man"]},{emoji:"🙆",aliases:["ok woman"]},{emoji:"🙆‍♂️",aliases:["ok man"]},{emoji:"🙋",aliases:["raising hand woman","raising hand"]},{emoji:"🙋‍♂️",aliases:["raising hand man"]},{emoji:"🤦‍♀️",aliases:["woman facepalming"]},{emoji:"🤦‍♂️",aliases:["man facepalming"]},{emoji:"🤷‍♀️",aliases:["woman shrugging"]},{emoji:"🤷‍♂️",aliases:["man shrugging"]},{emoji:"🙎",aliases:["pouting woman","person with pouting face"]},{emoji:"🙎‍♂️",aliases:["pouting man"]},{emoji:"🙍",aliases:["frowning woman","person frowning"]},{emoji:"🙍‍♂️",aliases:["frowning man"]},{emoji:"💇",aliases:["haircut woman","haircut"]},{emoji:"💇‍♂️",aliases:["haircut man"]},{emoji:"💆",aliases:["massage woman","massage"]},{emoji:"💆‍♂️",aliases:["massage man"]},{emoji:"🕴",aliases:["business suit levitating"]},{emoji:"💃",aliases:["dancer"]},{emoji:"🕺",aliases:["man dancing"]},{emoji:"👯",aliases:["dancing women","dancers"]},{emoji:"👯‍♂️",aliases:["dancing men"]},{emoji:"🚶‍♀️",aliases:["walking woman"]},{emoji:"🚶",aliases:["walking man","walking"]},{emoji:"🏃‍♀️",aliases:["running woman"]},{emoji:"🏃",aliases:["running man","runner","running"]},{emoji:"👫",aliases:["couple"]},{emoji:"👭",aliases:["two women holding hands"]},{emoji:"👬",aliases:["two men holding hands"]},{emoji:"💑",aliases:["couple with heart woman man","couple with heart"]},{emoji:"👩‍❤️‍👩",aliases:["couple with heart woman woman"]},{emoji:"👨‍❤️‍👨",aliases:["couple with heart man man"]},{emoji:"💏",aliases:["couplekiss man woman"]},{emoji:"👩‍❤️‍💋‍👩",aliases:["couplekiss woman woman"]},{emoji:"👨‍❤️‍💋‍👨",aliases:["couplekiss man man"]},{emoji:"👪",aliases:["family man woman boy","family"]},{emoji:"👨‍👩‍👧",aliases:["family man woman girl"]},{emoji:"👨‍👩‍👧‍👦",aliases:["family man woman girl boy"]},{emoji:"👨‍👩‍👦‍👦",aliases:["family man woman boy boy"]},{emoji:"👨‍👩‍👧‍👧",aliases:["family man woman girl girl"]},{emoji:"👩‍👩‍👦",aliases:["family woman woman boy"]},{emoji:"👩‍👩‍👧",aliases:["family woman woman girl"]},{emoji:"👩‍👩‍👧‍👦",aliases:["family woman woman girl boy"]},{emoji:"👩‍👩‍👦‍👦",aliases:["family woman woman boy boy"]},{emoji:"👩‍👩‍👧‍👧",aliases:["family woman woman girl girl"]},{emoji:"👨‍👨‍👦",aliases:["family man man boy"]},{emoji:"👨‍👨‍👧",aliases:["family man man girl"]},{emoji:"👨‍👨‍👧‍👦",aliases:["family man man girl boy"]},{emoji:"👨‍👨‍👦‍👦",aliases:["family man man boy boy"]},{emoji:"👨‍👨‍👧‍👧",aliases:["family man man girl girl"]},{emoji:"👩‍👦",aliases:["family woman boy"]},{emoji:"👩‍👧",aliases:["family woman girl"]},{emoji:"👩‍👧‍👦",aliases:["family woman girl boy"]},{emoji:"👩‍👦‍👦",aliases:["family woman boy boy"]},{emoji:"👩‍👧‍👧",aliases:["family woman girl girl"]},{emoji:"👨‍👦",aliases:["family man boy"]},{emoji:"👨‍👧",aliases:["family man girl"]},{emoji:"👨‍👧‍👦",aliases:["family man girl boy"]},{emoji:"👨‍👦‍👦",aliases:["family man boy boy"]},{emoji:"👨‍👧‍👧",aliases:["family man girl girl"]},{emoji:"👚",aliases:["womans clothes"]},{emoji:"👕",aliases:["shirt","tshirt"]},{emoji:"👖",aliases:["jeans"]},{emoji:"👔",aliases:["necktie"]},{emoji:"👗",aliases:["dress"]},{emoji:"👙",aliases:["bikini"]},{emoji:"👘",aliases:["kimono"]},{emoji:"👠",aliases:["high heel"]},{emoji:"👡",aliases:["sandal"]},{emoji:"👢",aliases:["boot"]},{emoji:"👞",aliases:["mans shoe","shoe"]},{emoji:"👟",aliases:["athletic shoe"]},{emoji:"👒",aliases:["womans hat"]},{emoji:"🎩",aliases:["tophat"]},{emoji:"🎓",aliases:["mortar board"]},{emoji:"👑",aliases:["crown"]},{emoji:"⛑",aliases:["rescue worker helmet"]},{emoji:"🎒",aliases:["school satchel"]},{emoji:"👝",aliases:["pouch"]},{emoji:"👛",aliases:["purse"]},{emoji:"👜",aliases:["handbag"]},{emoji:"💼",aliases:["briefcase"]},{emoji:"👓",aliases:["eyeglasses"]},{emoji:"🕶",aliases:["dark sunglasses"]},{emoji:"🌂",aliases:["closed umbrella"]},{emoji:"☂️",aliases:["open umbrella"]},{emoji:"🐶",aliases:["dog"]},{emoji:"🐱",aliases:["cat"]},{emoji:"🐭",aliases:["mouse"]},{emoji:"🐹",aliases:["hamster"]},{emoji:"🐰",aliases:["rabbit"]},{emoji:"🦊",aliases:["fox face"]},{emoji:"🐻",aliases:["bear"]},{emoji:"🐼",aliases:["panda face"]},{emoji:"🐨",aliases:["koala"]},{emoji:"🐯",aliases:["tiger"]},{emoji:"🦁",aliases:["lion"]},{emoji:"🐮",aliases:["cow"]},{emoji:"🐷",aliases:["pig"]},{emoji:"🐽",aliases:["pig nose"]},{emoji:"🐸",aliases:["frog"]},{emoji:"🐵",aliases:["monkey face"]},{emoji:"🙈",aliases:["see no evil"]},{emoji:"🙉",aliases:["hear no evil"]},{emoji:"🙊",aliases:["speak no evil"]},{emoji:"🐒",aliases:["monkey"]},{emoji:"🐔",aliases:["chicken"]},{emoji:"🐧",aliases:["penguin"]},{emoji:"🐦",aliases:["bird"]},{emoji:"🐤",aliases:["baby chick"]},{emoji:"🐣",aliases:["hatching chick"]},{emoji:"🐥",aliases:["hatched chick"]},{emoji:"🦆",aliases:["duck"]},{emoji:"🦅",aliases:["eagle"]},{emoji:"🦉",aliases:["owl"]},{emoji:"🦇",aliases:["bat"]},{emoji:"🐺",aliases:["wolf"]},{emoji:"🐗",aliases:["boar"]},{emoji:"🐴",aliases:["horse"]},{emoji:"🦄",aliases:["unicorn"]},{emoji:"🐝",aliases:["bee","honeybee"]},{emoji:"🐛",aliases:["bug"]},{emoji:"🦋",aliases:["butterfly"]},{emoji:"🐌",aliases:["snail"]},{emoji:"🐚",aliases:["shell"]},{emoji:"🐞",aliases:["beetle"]},{emoji:"🐜",aliases:["ant"]},{emoji:"🕷",aliases:["spider"]},{emoji:"🕸",aliases:["spider web"]},{emoji:"🐢",aliases:["turtle"]},{emoji:"🐍",aliases:["snake"]},{emoji:"🦎",aliases:["lizard"]},{emoji:"🦂",aliases:["scorpion"]},{emoji:"🦀",aliases:["crab"]},{emoji:"🦑",aliases:["squid"]},{emoji:"🐙",aliases:["octopus"]},{emoji:"🦐",aliases:["shrimp"]},{emoji:"🐠",aliases:["tropical fish"]},{emoji:"🐟",aliases:["fish"]},{emoji:"🐡",aliases:["blowfish"]},{emoji:"🐬",aliases:["dolphin","flipper"]},{emoji:"🦈",aliases:["shark"]},{emoji:"🐳",aliases:["whale"]},{emoji:"🐋",aliases:["whale2"]},{emoji:"🐊",aliases:["crocodile"]},{emoji:"🐆",aliases:["leopard"]},{emoji:"🐅",aliases:["tiger2"]},{emoji:"🐃",aliases:["water buffalo"]},{emoji:"🐂",aliases:["ox"]},{emoji:"🐄",aliases:["cow2"]},{emoji:"🦌",aliases:["deer"]},{emoji:"🐪",aliases:["dromedary camel"]},{emoji:"🐫",aliases:["camel"]},{emoji:"🐘",aliases:["elephant"]},{emoji:"🦏",aliases:["rhinoceros"]},{emoji:"🦍",aliases:["gorilla"]},{emoji:"🐎",aliases:["racehorse"]},{emoji:"🐖",aliases:["pig2"]},{emoji:"🐐",aliases:["goat"]},{emoji:"🐏",aliases:["ram"]},{emoji:"🐑",aliases:["sheep"]},{emoji:"🐕",aliases:["dog2"]},{emoji:"🐩",aliases:["poodle"]},{emoji:"🐈",aliases:["cat2"]},{emoji:"🐓",aliases:["rooster"]},{emoji:"🦃",aliases:["turkey"]},{emoji:"🕊",aliases:["dove"]},{emoji:"🐇",aliases:["rabbit2"]},{emoji:"🐁",aliases:["mouse2"]},{emoji:"🐀",aliases:["rat"]},{emoji:"🐿",aliases:["chipmunk"]},{emoji:"🐾",aliases:["feet","paw prints"]},{emoji:"🐉",aliases:["dragon"]},{emoji:"🐲",aliases:["dragon face"]},{emoji:"🌵",aliases:["cactus"]},{emoji:"🎄",aliases:["christmas tree"]},{emoji:"🌲",aliases:["evergreen tree"]},{emoji:"🌳",aliases:["deciduous tree"]},{emoji:"🌴",aliases:["palm tree"]},{emoji:"🌱",aliases:["seedling"]},{emoji:"🌿",aliases:["herb"]},{emoji:"☘️",aliases:["shamrock"]},{emoji:"🍀",aliases:["four leaf clover"]},{emoji:"🎍",aliases:["bamboo"]},{emoji:"🎋",aliases:["tanabata tree"]},{emoji:"🍃",aliases:["leaves"]},{emoji:"🍂",aliases:["fallen leaf"]},{emoji:"🍁",aliases:["maple leaf"]},{emoji:"🍄",aliases:["mushroom"]},{emoji:"🌾",aliases:["ear of rice"]},{emoji:"💐",aliases:["bouquet"]},{emoji:"🌷",aliases:["tulip"]},{emoji:"🌹",aliases:["rose"]},{emoji:"🥀",aliases:["wilted flower"]},{emoji:"🌻",aliases:["sunflower"]},{emoji:"🌼",aliases:["blossom"]},{emoji:"🌸",aliases:["cherry blossom"]},{emoji:"🌺",aliases:["hibiscus"]},{emoji:"🌎",aliases:["earth americas"]},{emoji:"🌍",aliases:["earth africa"]},{emoji:"🌏",aliases:["earth asia"]},{emoji:"🌕",aliases:["full moon"]},{emoji:"🌖",aliases:["waning gibbous moon"]},{emoji:"🌗",aliases:["last quarter moon"]},{emoji:"🌘",aliases:["waning crescent moon"]},{emoji:"🌑",aliases:["new moon"]},{emoji:"🌒",aliases:["waxing crescent moon"]},{emoji:"🌓",aliases:["first quarter moon"]},{emoji:"🌔",aliases:["moon","waxing gibbous moon"]},{emoji:"🌚",aliases:["new moon with face"]},{emoji:"🌝",aliases:["full moon with face"]},{emoji:"🌞",aliases:["sun with face"]},{emoji:"🌛",aliases:["first quarter moon with face"]},{emoji:"🌜",aliases:["last quarter moon with face"]},{emoji:"🌙",aliases:["crescent moon"]},{emoji:"💫",aliases:["dizzy"]},{emoji:"⭐️",aliases:["star"]},{emoji:"🌟",aliases:["star2"]},{emoji:"✨",aliases:["sparkles"]},{emoji:"⚡️",aliases:["zap"]},{emoji:"🔥",aliases:["fire"]},{emoji:"💥",aliases:["boom","collision"]},{emoji:"☄",aliases:["comet"]},{emoji:"☀️",aliases:["sunny"]},{emoji:"🌤",aliases:["sun behind small cloud"]},{emoji:"⛅️",aliases:["partly sunny"]},{emoji:"🌥",aliases:["sun behind large cloud"]},{emoji:"🌦",aliases:["sun behind rain cloud"]},{emoji:"🌈",aliases:["rainbow"]},{emoji:"☁️",aliases:["cloud"]},{emoji:"🌧",aliases:["cloud with rain"]},{emoji:"⛈",aliases:["cloud with lightning and rain"]},{emoji:"🌩",aliases:["cloud with lightning"]},{emoji:"🌨",aliases:["cloud with snow"]},{emoji:"☃️",aliases:["snowman with snow"]},{emoji:"⛄️",aliases:["snowman"]},{emoji:"❄️",aliases:["snowflake"]},{emoji:"🌬",aliases:["wind face"]},{emoji:"💨",aliases:["dash"]},{emoji:"🌪",aliases:["tornado"]},{emoji:"🌫",aliases:["fog"]},{emoji:"🌊",aliases:["ocean"]},{emoji:"💧",aliases:["droplet"]},{emoji:"💦",aliases:["sweat drops"]},{emoji:"☔️",aliases:["umbrella"]},{emoji:"🍏",aliases:["green apple"]},{emoji:"🍎",aliases:["apple"]},{emoji:"🍐",aliases:["pear"]},{emoji:"🍊",aliases:["tangerine","orange","mandarin"]},{emoji:"🍋",aliases:["lemon"]},{emoji:"🍌",aliases:["banana"]},{emoji:"🍉",aliases:["watermelon"]},{emoji:"🍇",aliases:["grapes"]},{emoji:"🍓",aliases:["strawberry"]},{emoji:"🍈",aliases:["melon"]},{emoji:"🍒",aliases:["cherries"]},{emoji:"🍑",aliases:["peach"]},{emoji:"🍍",aliases:["pineapple"]},{emoji:"🥝",aliases:["kiwi fruit"]},{emoji:"🥑",aliases:["avocado"]},{emoji:"🍅",aliases:["tomato"]},{emoji:"🍆",aliases:["eggplant"]},{emoji:"🥒",aliases:["cucumber"]},{emoji:"🥕",aliases:["carrot"]},{emoji:"🌽",aliases:["corn"]},{emoji:"🌶",aliases:["hot pepper"]},{emoji:"🥔",aliases:["potato"]},{emoji:"🍠",aliases:["sweet potato"]},{emoji:"🌰",aliases:["chestnut"]},{emoji:"🥜",aliases:["peanuts"]},{emoji:"🍯",aliases:["honey pot"]},{emoji:"🥐",aliases:["croissant"]},{emoji:"🍞",aliases:["bread"]},{emoji:"🥖",aliases:["baguette bread"]},{emoji:"🧀",aliases:["cheese"]},{emoji:"🥚",aliases:["egg"]},{emoji:"🍳",aliases:["fried egg"]},{emoji:"🥓",aliases:["bacon"]},{emoji:"🥞",aliases:["pancakes"]},{emoji:"🍤",aliases:["fried shrimp"]},{emoji:"🍗",aliases:["poultry leg"]},{emoji:"🍖",aliases:["meat on bone"]},{emoji:"🍕",aliases:["pizza"]},{emoji:"🌭",aliases:["hotdog"]},{emoji:"🍔",aliases:["hamburger"]},{emoji:"🍟",aliases:["fries"]},{emoji:"🥙",aliases:["stuffed flatbread"]},{emoji:"🌮",aliases:["taco"]},{emoji:"🌯",aliases:["burrito"]},{emoji:"🥗",aliases:["green salad"]},{emoji:"🥘",aliases:["shallow pan of food"]},{emoji:"🍝",aliases:["spaghetti"]},{emoji:"🍜",aliases:["ramen"]},{emoji:"🍲",aliases:["stew"]},{emoji:"🍥",aliases:["fish cake"]},{emoji:"🍣",aliases:["sushi"]},{emoji:"🍱",aliases:["bento"]},{emoji:"🍛",aliases:["curry"]},{emoji:"🍚",aliases:["rice"]},{emoji:"🍙",aliases:["rice ball"]},{emoji:"🍘",aliases:["rice cracker"]},{emoji:"🍢",aliases:["oden"]},{emoji:"🍡",aliases:["dango"]},{emoji:"🍧",aliases:["shaved ice"]},{emoji:"🍨",aliases:["ice cream"]},{emoji:"🍦",aliases:["icecream"]},{emoji:"🍰",aliases:["cake"]},{emoji:"🎂",aliases:["birthday"]},{emoji:"🍮",aliases:["custard"]},{emoji:"🍭",aliases:["lollipop"]},{emoji:"🍬",aliases:["candy"]},{emoji:"🍫",aliases:["chocolate bar"]},{emoji:"🍿",aliases:["popcorn"]},{emoji:"🍩",aliases:["doughnut"]},{emoji:"🍪",aliases:["cookie"]},{emoji:"🥛",aliases:["milk glass"]},{emoji:"🍼",aliases:["baby bottle"]},{emoji:"☕️",aliases:["coffee"]},{emoji:"🍵",aliases:["tea"]},{emoji:"🍶",aliases:["sake"]},{emoji:"🍺",aliases:["beer"]},{emoji:"🍻",aliases:["beers"]},{emoji:"🥂",aliases:["clinking glasses"]},{emoji:"🍷",aliases:["wine glass"]},{emoji:"🥃",aliases:["tumbler glass"]},{emoji:"🍸",aliases:["cocktail"]},{emoji:"🍹",aliases:["tropical drink"]},{emoji:"🍾",aliases:["champagne"]},{emoji:"🥄",aliases:["spoon"]},{emoji:"🍴",aliases:["fork and knife"]},{emoji:"🍽",aliases:["plate with cutlery"]},{emoji:"⚽️",aliases:["soccer"]},{emoji:"🏀",aliases:["basketball"]},{emoji:"🏈",aliases:["football"]},{emoji:"⚾️",aliases:["baseball"]},{emoji:"🎾",aliases:["tennis"]},{emoji:"🏐",aliases:["volleyball"]},{emoji:"🏉",aliases:["rugby football"]},{emoji:"🎱",aliases:["8ball"]},{emoji:"🏓",aliases:["ping pong"]},{emoji:"🏸",aliases:["badminton"]},{emoji:"🥅",aliases:["goal net"]},{emoji:"🏒",aliases:["ice hockey"]},{emoji:"🏑",aliases:["field hockey"]},{emoji:"🏏",aliases:["cricket"]},{emoji:"⛳️",aliases:["golf"]},{emoji:"🏹",aliases:["bow and arrow"]},{emoji:"🎣",aliases:["fishing pole and fish"]},{emoji:"🥊",aliases:["boxing glove"]},{emoji:"🥋",aliases:["martial arts uniform"]},{emoji:"⛸",aliases:["ice skate"]},{emoji:"🎿",aliases:["ski"]},{emoji:"⛷",aliases:["skier"]},{emoji:"🏂",aliases:["snowboarder"]},{emoji:"🏋️‍♀️",aliases:["weight lifting woman"]},{emoji:"🏋",aliases:["weight lifting man"]},{emoji:"🤺",aliases:["person fencing"]},{emoji:"🤼‍♀️",aliases:["women wrestling"]},{emoji:"🤼‍♂️",aliases:["men wrestling"]},{emoji:"🤸‍♀️",aliases:["woman cartwheeling"]},{emoji:"🤸‍♂️",aliases:["man cartwheeling"]},{emoji:"⛹️‍♀️",aliases:["basketball woman"]},{emoji:"⛹",aliases:["basketball man"]},{emoji:"🤾‍♀️",aliases:["woman playing handball"]},{emoji:"🤾‍♂️",aliases:["man playing handball"]},{emoji:"🏌️‍♀️",aliases:["golfing woman"]},{emoji:"🏌",aliases:["golfing man"]},{emoji:"🏄‍♀️",aliases:["surfing woman"]},{emoji:"🏄",aliases:["surfing man","surfer"]},{emoji:"🏊‍♀️",aliases:["swimming woman"]},{emoji:"🏊",aliases:["swimming man","swimmer"]},{emoji:"🤽‍♀️",aliases:["woman playing water polo"]},{emoji:"🤽‍♂️",aliases:["man playing water polo"]},{emoji:"🚣‍♀️",aliases:["rowing woman"]},{emoji:"🚣",aliases:["rowing man","rowboat"]},{emoji:"🏇",aliases:["horse racing"]},{emoji:"🚴‍♀️",aliases:["biking woman"]},{emoji:"🚴",aliases:["biking man","bicyclist"]},{emoji:"🚵‍♀️",aliases:["mountain biking woman"]},{emoji:"🚵",aliases:["mountain biking man","mountain bicyclist"]},{emoji:"🎽",aliases:["running shirt with sash"]},{emoji:"🏅",aliases:["medal sports"]},{emoji:"🎖",aliases:["medal military"]},{emoji:"🥇",aliases:["1st place medal"]},{emoji:"🥈",aliases:["2nd place medal"]},{emoji:"🥉",aliases:["3rd place medal"]},{emoji:"🏆",aliases:["trophy"]},{emoji:"🏵",aliases:["rosette"]},{emoji:"🎗",aliases:["reminder ribbon"]},{emoji:"🎫",aliases:["ticket"]},{emoji:"🎟",aliases:["tickets"]},{emoji:"🎪",aliases:["circus tent"]},{emoji:"🤹‍♀️",aliases:["woman juggling"]},{emoji:"🤹‍♂️",aliases:["man juggling"]},{emoji:"🎭",aliases:["performing arts"]},{emoji:"🎨",aliases:["art"]},{emoji:"🎬",aliases:["clapper"]},{emoji:"🎤",aliases:["microphone"]},{emoji:"🎧",aliases:["headphones"]},{emoji:"🎼",aliases:["musical score"]},{emoji:"🎹",aliases:["musical keyboard"]},{emoji:"🥁",aliases:["drum"]},{emoji:"🎷",aliases:["saxophone"]},{emoji:"🎺",aliases:["trumpet"]},{emoji:"🎸",aliases:["guitar"]},{emoji:"🎻",aliases:["violin"]},{emoji:"🎲",aliases:["game die"]},{emoji:"🎯",aliases:["dart"]},{emoji:"🎳",aliases:["bowling"]},{emoji:"🎮",aliases:["video game"]},{emoji:"🎰",aliases:["slot machine"]},{emoji:"🚗",aliases:["car","red car"]},{emoji:"🚕",aliases:["taxi"]},{emoji:"🚙",aliases:["blue car"]},{emoji:"🚌",aliases:["bus"]},{emoji:"🚎",aliases:["trolleybus"]},{emoji:"🏎",aliases:["racing car"]},{emoji:"🚓",aliases:["police car"]},{emoji:"🚑",aliases:["ambulance"]},{emoji:"🚒",aliases:["fire engine"]},{emoji:"🚐",aliases:["minibus"]},{emoji:"🚚",aliases:["truck"]},{emoji:"🚛",aliases:["articulated lorry"]},{emoji:"🚜",aliases:["tractor"]},{emoji:"🛴",aliases:["kick scooter"]},{emoji:"🚲",aliases:["bike"]},{emoji:"🛵",aliases:["motor scooter"]},{emoji:"🏍",aliases:["motorcycle"]},{emoji:"🚨",aliases:["rotating light"]},{emoji:"🚔",aliases:["oncoming police car"]},{emoji:"🚍",aliases:["oncoming bus"]},{emoji:"🚘",aliases:["oncoming automobile"]},{emoji:"🚖",aliases:["oncoming taxi"]},{emoji:"🚡",aliases:["aerial tramway"]},{emoji:"🚠",aliases:["mountain cableway"]},{emoji:"🚟",aliases:["suspension railway"]},{emoji:"🚃",aliases:["railway car"]},{emoji:"🚋",aliases:["train"]},{emoji:"🚞",aliases:["mountain railway"]},{emoji:"🚝",aliases:["monorail"]},{emoji:"🚄",aliases:["bullettrain side"]},{emoji:"🚅",aliases:["bullettrain front"]},{emoji:"🚈",aliases:["light rail"]},{emoji:"🚂",aliases:["steam locomotive"]},{emoji:"🚆",aliases:["train2"]},{emoji:"🚇",aliases:["metro"]},{emoji:"🚊",aliases:["tram"]},{emoji:"🚉",aliases:["station"]},{emoji:"🚁",aliases:["helicopter"]},{emoji:"🛩",aliases:["small airplane"]},{emoji:"✈️",aliases:["airplane"]},{emoji:"🛫",aliases:["flight departure"]},{emoji:"🛬",aliases:["flight arrival"]},{emoji:"🚀",aliases:["rocket"]},{emoji:"🛰",aliases:["artificial satellite"]},{emoji:"💺",aliases:["seat"]},{emoji:"🛶",aliases:["canoe"]},{emoji:"⛵️",aliases:["boat","sailboat"]},{emoji:"🛥",aliases:["motor boat"]},{emoji:"🚤",aliases:["speedboat"]},{emoji:"🛳",aliases:["passenger ship"]},{emoji:"⛴",aliases:["ferry"]},{emoji:"🚢",aliases:["ship"]},{emoji:"⚓️",aliases:["anchor"]},{emoji:"🚧",aliases:["construction"]},{emoji:"⛽️",aliases:["fuelpump"]},{emoji:"🚏",aliases:["busstop"]},{emoji:"🚦",aliases:["vertical traffic light"]},{emoji:"🚥",aliases:["traffic light"]},{emoji:"🗺",aliases:["world map"]},{emoji:"🗿",aliases:["moyai"]},{emoji:"🗽",aliases:["statue of liberty"]},{emoji:"⛲️",aliases:["fountain"]},{emoji:"🗼",aliases:["tokyo tower"]},{emoji:"🏰",aliases:["european castle"]},{emoji:"🏯",aliases:["japanese castle"]},{emoji:"🏟",aliases:["stadium"]},{emoji:"🎡",aliases:["ferris wheel"]},{emoji:"🎢",aliases:["roller coaster"]},{emoji:"🎠",aliases:["carousel horse"]},{emoji:"⛱",aliases:["parasol on ground"]},{emoji:"🏖",aliases:["beach umbrella"]},{emoji:"🏝",aliases:["desert island"]},{emoji:"⛰",aliases:["mountain"]},{emoji:"🏔",aliases:["mountain snow"]},{emoji:"🗻",aliases:["mount fuji"]},{emoji:"🌋",aliases:["volcano"]},{emoji:"🏜",aliases:["desert"]},{emoji:"🏕",aliases:["camping"]},{emoji:"⛺️",aliases:["tent"]},{emoji:"🛤",aliases:["railway track"]},{emoji:"🛣",aliases:["motorway"]},{emoji:"🏗",aliases:["building construction"]},{emoji:"🏭",aliases:["factory"]},{emoji:"🏠",aliases:["house"]},{emoji:"🏡",aliases:["house with garden"]},{emoji:"🏘",aliases:["houses"]},{emoji:"🏚",aliases:["derelict house"]},{emoji:"🏢",aliases:["office"]},{emoji:"🏬",aliases:["department store"]},{emoji:"🏣",aliases:["post office"]},{emoji:"🏤",aliases:["european post office"]},{emoji:"🏥",aliases:["hospital"]},{emoji:"🏦",aliases:["bank"]},{emoji:"🏨",aliases:["hotel"]},{emoji:"🏪",aliases:["convenience store"]},{emoji:"🏫",aliases:["school"]},{emoji:"🏩",aliases:["love hotel"]},{emoji:"💒",aliases:["wedding"]},{emoji:"🏛",aliases:["classical building"]},{emoji:"⛪️",aliases:["church"]},{emoji:"🕌",aliases:["mosque"]},{emoji:"🕍",aliases:["synagogue"]},{emoji:"🕋",aliases:["kaaba"]},{emoji:"⛩",aliases:["shinto shrine"]},{emoji:"🗾",aliases:["japan"]},{emoji:"🎑",aliases:["rice scene"]},{emoji:"🏞",aliases:["national park"]},{emoji:"🌅",aliases:["sunrise"]},{emoji:"🌄",aliases:["sunrise over mountains"]},{emoji:"🌠",aliases:["stars"]},{emoji:"🎇",aliases:["sparkler"]},{emoji:"🎆",aliases:["fireworks"]},{emoji:"🌇",aliases:["city sunrise"]},{emoji:"🌆",aliases:["city sunset"]},{emoji:"🏙",aliases:["cityscape"]},{emoji:"🌃",aliases:["night with stars"]},{emoji:"🌌",aliases:["milky way"]},{emoji:"🌉",aliases:["bridge at night"]},{emoji:"🌁",aliases:["foggy"]},{emoji:"⌚️",aliases:["watch"]},{emoji:"📱",aliases:["iphone"]},{emoji:"📲",aliases:["calling"]},{emoji:"💻",aliases:["computer"]},{emoji:"⌨️",aliases:["keyboard"]},{emoji:"🖥",aliases:["desktop computer"]},{emoji:"🖨",aliases:["printer"]},{emoji:"🖱",aliases:["computer mouse"]},{emoji:"🖲",aliases:["trackball"]},{emoji:"🕹",aliases:["joystick"]},{emoji:"🗜",aliases:["clamp"]},{emoji:"💽",aliases:["minidisc"]},{emoji:"💾",aliases:["floppy disk"]},{emoji:"💿",aliases:["cd"]},{emoji:"📀",aliases:["dvd"]},{emoji:"📼",aliases:["vhs"]},{emoji:"📷",aliases:["camera"]},{emoji:"📸",aliases:["camera flash"]},{emoji:"📹",aliases:["video camera"]},{emoji:"🎥",aliases:["movie camera"]},{emoji:"📽",aliases:["film projector"]},{emoji:"🎞",aliases:["film strip"]},{emoji:"📞",aliases:["telephone receiver"]},{emoji:"☎️",aliases:["phone","telephone"]},{emoji:"📟",aliases:["pager"]},{emoji:"📠",aliases:["fax"]},{emoji:"📺",aliases:["tv"]},{emoji:"📻",aliases:["radio"]},{emoji:"🎙",aliases:["studio microphone"]},{emoji:"🎚",aliases:["level slider"]},{emoji:"🎛",aliases:["control knobs"]},{emoji:"⏱",aliases:["stopwatch"]},{emoji:"⏲",aliases:["timer clock"]},{emoji:"⏰",aliases:["alarm clock"]},{emoji:"🕰",aliases:["mantelpiece clock"]},{emoji:"⌛️",aliases:["hourglass"]},{emoji:"⏳",aliases:["hourglass flowing sand"]},{emoji:"📡",aliases:["satellite"]},{emoji:"🔋",aliases:["battery"]},{emoji:"🔌",aliases:["electric plug"]},{emoji:"💡",aliases:["bulb"]},{emoji:"🔦",aliases:["flashlight"]},{emoji:"🕯",aliases:["candle"]},{emoji:"🗑",aliases:["wastebasket"]},{emoji:"🛢",aliases:["oil drum"]},{emoji:"💸",aliases:["money with wings"]},{emoji:"💵",aliases:["dollar"]},{emoji:"💴",aliases:["yen"]},{emoji:"💶",aliases:["euro"]},{emoji:"💷",aliases:["pound"]},{emoji:"💰",aliases:["moneybag"]},{emoji:"💳",aliases:["credit card"]},{emoji:"💎",aliases:["gem"]},{emoji:"⚖️",aliases:["balance scale"]},{emoji:"🔧",aliases:["wrench"]},{emoji:"🔨",aliases:["hammer"]},{emoji:"⚒",aliases:["hammer and pick"]},{emoji:"🛠",aliases:["hammer and wrench"]},{emoji:"⛏",aliases:["pick"]},{emoji:"🔩",aliases:["nut and bolt"]},{emoji:"⚙️",aliases:["gear"]},{emoji:"⛓",aliases:["chains"]},{emoji:"🔫",aliases:["gun"]},{emoji:"💣",aliases:["bomb"]},{emoji:"🔪",aliases:["hocho","knife"]},{emoji:"🗡",aliases:["dagger"]},{emoji:"⚔️",aliases:["crossed swords"]},{emoji:"🛡",aliases:["shield"]},{emoji:"🚬",aliases:["smoking"]},{emoji:"⚰️",aliases:["coffin"]},{emoji:"⚱️",aliases:["funeral urn"]},{emoji:"🏺",aliases:["amphora"]},{emoji:"🔮",aliases:["crystal ball"]},{emoji:"📿",aliases:["prayer beads"]},{emoji:"💈",aliases:["barber"]},{emoji:"⚗️",aliases:["alembic"]},{emoji:"🔭",aliases:["telescope"]},{emoji:"🔬",aliases:["microscope"]},{emoji:"🕳",aliases:["hole"]},{emoji:"💊",aliases:["pill"]},{emoji:"💉",aliases:["syringe"]},{emoji:"🌡",aliases:["thermometer"]},{emoji:"🚽",aliases:["toilet"]},{emoji:"🚰",aliases:["potable water"]},{emoji:"🚿",aliases:["shower"]},{emoji:"🛁",aliases:["bathtub"]},{emoji:"🛀",aliases:["bath"]},{emoji:"🛎",aliases:["bellhop bell"]},{emoji:"🔑",aliases:["key"]},{emoji:"🗝",aliases:["old key"]},{emoji:"🚪",aliases:["door"]},{emoji:"🛋",aliases:["couch and lamp"]},{emoji:"🛏",aliases:["bed"]},{emoji:"🛌",aliases:["sleeping bed"]},{emoji:"🖼",aliases:["framed picture"]},{emoji:"🛍",aliases:["shopping"]},{emoji:"🛒",aliases:["shopping cart"]},{emoji:"🎁",aliases:["gift"]},{emoji:"🎈",aliases:["balloon"]},{emoji:"🎏",aliases:["flags"]},{emoji:"🎀",aliases:["ribbon"]},{emoji:"🎊",aliases:["confetti ball"]},{emoji:"🎉",aliases:["tada"]},{emoji:"🎎",aliases:["dolls"]},{emoji:"🏮",aliases:["izakaya lantern","lantern"]},{emoji:"🎐",aliases:["wind chime"]},{emoji:"✉️",aliases:["email","envelope"]},{emoji:"📩",aliases:["envelope with arrow"]},{emoji:"📨",aliases:["incoming envelope"]},{emoji:"📧",aliases:["e-mail"]},{emoji:"💌",aliases:["love letter"]},{emoji:"📥",aliases:["inbox tray"]},{emoji:"📤",aliases:["outbox tray"]},{emoji:"📦",aliases:["package"]},{emoji:"🏷",aliases:["label"]},{emoji:"📪",aliases:["mailbox closed"]},{emoji:"📫",aliases:["mailbox"]},{emoji:"📬",aliases:["mailbox with mail"]},{emoji:"📭",aliases:["mailbox with no mail"]},{emoji:"📮",aliases:["postbox"]},{emoji:"📯",aliases:["postal horn"]},{emoji:"📜",aliases:["scroll"]},{emoji:"📃",aliases:["page with curl"]},{emoji:"📄",aliases:["page facing up"]},{emoji:"📑",aliases:["bookmark tabs"]},{emoji:"📊",aliases:["bar chart"]},{emoji:"📈",aliases:["chart with upwards trend"]},{emoji:"📉",aliases:["chart with downwards trend"]},{emoji:"🗒",aliases:["spiral notepad"]},{emoji:"🗓",aliases:["spiral calendar"]},{emoji:"📆",aliases:["calendar"]},{emoji:"📅",aliases:["date"]},{emoji:"📇",aliases:["card index"]},{emoji:"🗃",aliases:["card file box"]},{emoji:"🗳",aliases:["ballot box"]},{emoji:"🗄",aliases:["file cabinet"]},{emoji:"📋",aliases:["clipboard"]},{emoji:"📁",aliases:["file folder"]},{emoji:"📂",aliases:["open file folder"]},{emoji:"🗂",aliases:["card index dividers"]},{emoji:"🗞",aliases:["newspaper roll"]},{emoji:"📰",aliases:["newspaper"]},{emoji:"📓",aliases:["notebook"]},{emoji:"📔",aliases:["notebook with decorative cover"]},{emoji:"📒",aliases:["ledger"]},{emoji:"📕",aliases:["closed book"]},{emoji:"📗",aliases:["green book"]},{emoji:"📘",aliases:["blue book"]},{emoji:"📙",aliases:["orange book"]},{emoji:"📚",aliases:["books"]},{emoji:"📖",aliases:["book","open book"]},{emoji:"🔖",aliases:["bookmark"]},{emoji:"🔗",aliases:["link"]},{emoji:"📎",aliases:["paperclip"]},{emoji:"🖇",aliases:["paperclips"]},{emoji:"📐",aliases:["triangular ruler"]},{emoji:"📏",aliases:["straight ruler"]},{emoji:"📌",aliases:["pushpin"]},{emoji:"📍",aliases:["round pushpin"]},{emoji:"✂️",aliases:["scissors"]},{emoji:"🖊",aliases:["pen"]},{emoji:"🖋",aliases:["fountain pen"]},{emoji:"✒️",aliases:["black nib"]},{emoji:"🖌",aliases:["paintbrush"]},{emoji:"🖍",aliases:["crayon"]},{emoji:"📝",aliases:["memo","pencil"]},{emoji:"✏️",aliases:["pencil2"]},{emoji:"🔍",aliases:["mag"]},{emoji:"🔎",aliases:["mag right"]},{emoji:"🔏",aliases:["lock with ink pen"]},{emoji:"🔐",aliases:["closed lock with key"]},{emoji:"🔒",aliases:["lock"]},{emoji:"🔓",aliases:["unlock"]},{emoji:"❤️",aliases:["heart"]},{emoji:"💛",aliases:["yellow heart"]},{emoji:"💚",aliases:["green heart"]},{emoji:"💙",aliases:["blue heart"]},{emoji:"💜",aliases:["purple heart"]},{emoji:"🖤",aliases:["black heart"]},{emoji:"💔",aliases:["broken heart"]},{emoji:"❣️",aliases:["heavy heart exclamation"]},{emoji:"💕",aliases:["two hearts"]},{emoji:"💞",aliases:["revolving hearts"]},{emoji:"💓",aliases:["heartbeat"]},{emoji:"💗",aliases:["heartpulse"]},{emoji:"💖",aliases:["sparkling heart"]},{emoji:"💘",aliases:["cupid"]},{emoji:"💝",aliases:["gift heart"]},{emoji:"💟",aliases:["heart decoration"]},{emoji:"☮️",aliases:["peace symbol"]},{emoji:"✝️",aliases:["latin cross"]},{emoji:"☪️",aliases:["star and crescent"]},{emoji:"🕉",aliases:["om"]},{emoji:"☸️",aliases:["wheel of dharma"]},{emoji:"✡️",aliases:["star of david"]},{emoji:"🔯",aliases:["six pointed star"]},{emoji:"🕎",aliases:["menorah"]},{emoji:"☯️",aliases:["yin yang"]},{emoji:"☦️",aliases:["orthodox cross"]},{emoji:"🛐",aliases:["place of worship"]},{emoji:"⛎",aliases:["ophiuchus"]},{emoji:"♈️",aliases:["aries"]},{emoji:"♉️",aliases:["taurus"]},{emoji:"♊️",aliases:["gemini"]},{emoji:"♋️",aliases:["cancer"]},{emoji:"♌️",aliases:["leo"]},{emoji:"♍️",aliases:["virgo"]},{emoji:"♎️",aliases:["libra"]},{emoji:"♏️",aliases:["scorpius"]},{emoji:"♐️",aliases:["sagittarius"]},{emoji:"♑️",aliases:["capricorn"]},{emoji:"♒️",aliases:["aquarius"]},{emoji:"♓️",aliases:["pisces"]},{emoji:"🆔",aliases:["id"]},{emoji:"⚛️",aliases:["atom symbol"]},{emoji:"🉑",aliases:["accept"]},{emoji:"☢️",aliases:["radioactive"]},{emoji:"☣️",aliases:["biohazard"]},{emoji:"📴",aliases:["mobile phone off"]},{emoji:"📳",aliases:["vibration mode"]},{emoji:"🈶",aliases:["u6709"]},{emoji:"🈚️",aliases:["u7121"]},{emoji:"🈸",aliases:["u7533"]},{emoji:"🈺",aliases:["u55b6"]},{emoji:"🈷️",aliases:["u6708"]},{emoji:"✴️",aliases:["eight pointed black star"]},{emoji:"🆚",aliases:["vs"]},{emoji:"💮",aliases:["white flower"]},{emoji:"🉐",aliases:["ideograph advantage"]},{emoji:"㊙️",aliases:["secret"]},{emoji:"㊗️",aliases:["congratulations"]},{emoji:"🈴",aliases:["u5408"]},{emoji:"🈵",aliases:["u6e80"]},{emoji:"🈹",aliases:["u5272"]},{emoji:"🈲",aliases:["u7981"]},{emoji:"🅰️",aliases:["a"]},{emoji:"🅱️",aliases:["b"]},{emoji:"🆎",aliases:["ab"]},{emoji:"🆑",aliases:["cl"]},{emoji:"🅾️",aliases:["o2"]},{emoji:"🆘",aliases:["sos"]},{emoji:"❌",aliases:["x"]},{emoji:"⭕️",aliases:["o"]},{emoji:"🛑",aliases:["stop sign"]},{emoji:"⛔️",aliases:["no entry"]},{emoji:"📛",aliases:["name badge"]},{emoji:"🚫",aliases:["no entry sign"]},{emoji:"💯",aliases:["100"]},{emoji:"💢",aliases:["anger"]},{emoji:"♨️",aliases:["hotsprings"]},{emoji:"🚷",aliases:["no pedestrians"]},{emoji:"🚯",aliases:["do not litter"]},{emoji:"🚳",aliases:["no bicycles"]},{emoji:"🚱",aliases:["non-potable water"]},{emoji:"🔞",aliases:["underage"]},{emoji:"📵",aliases:["no mobile phones"]},{emoji:"🚭",aliases:["no smoking"]},{emoji:"❗️",aliases:["exclamation","heavy exclamation mark"]},{emoji:"❕",aliases:["grey exclamation"]},{emoji:"❓",aliases:["question"]},{emoji:"❔",aliases:["grey question"]},{emoji:"‼️",aliases:["bangbang"]},{emoji:"⁉️",aliases:["interrobang"]},{emoji:"🔅",aliases:["low brightness"]},{emoji:"🔆",aliases:["high brightness"]},{emoji:"〽️",aliases:["part alternation mark"]},{emoji:"⚠️",aliases:["warning"]},{emoji:"🚸",aliases:["children crossing"]},{emoji:"🔱",aliases:["trident"]},{emoji:"⚜️",aliases:["fleur de lis"]},{emoji:"🔰",aliases:["beginner"]},{emoji:"♻️",aliases:["recycle"]},{emoji:"✅",aliases:["white check mark"]},{emoji:"🈯️",aliases:["u6307"]},{emoji:"💹",aliases:["chart"]},{emoji:"❇️",aliases:["sparkle"]},{emoji:"✳️",aliases:["eight spoked asterisk"]},{emoji:"❎",aliases:["negative squared cross mark"]},{emoji:"🌐",aliases:["globe with meridians"]},{emoji:"💠",aliases:["diamond shape with a dot inside"]},{emoji:"Ⓜ️",aliases:["m"]},{emoji:"🌀",aliases:["cyclone"]},{emoji:"💤",aliases:["zzz"]},{emoji:"🏧",aliases:["atm"]},{emoji:"🚾",aliases:["wc"]},{emoji:"♿️",aliases:["wheelchair"]},{emoji:"🅿️",aliases:["parking"]},{emoji:"🈳",aliases:["u7a7a"]},{emoji:"🈂️",aliases:["sa"]},{emoji:"🛂",aliases:["passport control"]},{emoji:"🛃",aliases:["customs"]},{emoji:"🛄",aliases:["baggage claim"]},{emoji:"🛅",aliases:["left luggage"]},{emoji:"🚹",aliases:["mens"]},{emoji:"🚺",aliases:["womens"]},{emoji:"🚼",aliases:["baby symbol"]},{emoji:"🚻",aliases:["restroom"]},{emoji:"🚮",aliases:["put litter in its place"]},{emoji:"🎦",aliases:["cinema"]},{emoji:"📶",aliases:["signal strength"]},{emoji:"🈁",aliases:["koko"]},{emoji:"🔣",aliases:["symbols"]},{emoji:"ℹ️",aliases:["information source"]},{emoji:"🔤",aliases:["abc"]},{emoji:"🔡",aliases:["abcd"]},{emoji:"🔠",aliases:["capital abcd"]},{emoji:"🆖",aliases:["ng"]},{emoji:"🆗",aliases:["ok"]},{emoji:"🆙",aliases:["up"]},{emoji:"🆒",aliases:["cool"]},{emoji:"🆕",aliases:["new"]},{emoji:"🆓",aliases:["free"]},{emoji:"0️⃣",aliases:["zero"]},{emoji:"1️⃣",aliases:["one"]},{emoji:"2️⃣",aliases:["two"]},{emoji:"3️⃣",aliases:["three"]},{emoji:"4️⃣",aliases:["four"]},{emoji:"5️⃣",aliases:["five"]},{emoji:"6️⃣",aliases:["six"]},{emoji:"7️⃣",aliases:["seven"]},{emoji:"8️⃣",aliases:["eight"]},{emoji:"9️⃣",aliases:["nine"]},{emoji:"🔟",aliases:["keycap ten"]},{emoji:"🔢",aliases:["1234"]},{emoji:"#️⃣",aliases:["hash"]},{emoji:"*️⃣",aliases:["asterisk"]},{emoji:"▶️",aliases:["arrow forward"]},{emoji:"⏸",aliases:["pause button"]},{emoji:"⏯",aliases:["play or pause button"]},{emoji:"⏹",aliases:["stop button"]},{emoji:"⏺",aliases:["record button"]},{emoji:"⏭",aliases:["next track button"]},{emoji:"⏮",aliases:["previous track button"]},{emoji:"⏩",aliases:["fast forward"]},{emoji:"⏪",aliases:["rewind"]},{emoji:"⏫",aliases:["arrow double up"]},{emoji:"⏬",aliases:["arrow double down"]},{emoji:"◀️",aliases:["arrow backward"]},{emoji:"🔼",aliases:["arrow up small"]},{emoji:"🔽",aliases:["arrow down small"]},{emoji:"➡️",aliases:["arrow right"]},{emoji:"⬅️",aliases:["arrow left"]},{emoji:"⬆️",aliases:["arrow up"]},{emoji:"⬇️",aliases:["arrow down"]},{emoji:"↗️",aliases:["arrow upper right"]},{emoji:"↘️",aliases:["arrow lower right"]},{emoji:"↙️",aliases:["arrow lower left"]},{emoji:"↖️",aliases:["arrow upper left"]},{emoji:"↕️",aliases:["arrow up down"]},{emoji:"↔️",aliases:["left right arrow"]},{emoji:"↪️",aliases:["arrow right hook"]},{emoji:"↩️",aliases:["leftwards arrow with hook"]},{emoji:"⤴️",aliases:["arrow heading up"]},{emoji:"⤵️",aliases:["arrow heading down"]},{emoji:"🔀",aliases:["twisted rightwards arrows"]},{emoji:"🔁",aliases:["repeat"]},{emoji:"🔂",aliases:["repeat one"]},{emoji:"🔄",aliases:["arrows counterclockwise"]},{emoji:"🔃",aliases:["arrows clockwise"]},{emoji:"🎵",aliases:["musical note"]},{emoji:"🎶",aliases:["notes"]},{emoji:"➕",aliases:["heavy plus sign"]},{emoji:"➖",aliases:["heavy minus sign"]},{emoji:"➗",aliases:["heavy division sign"]},{emoji:"✖️",aliases:["heavy multiplication x"]},{emoji:"💲",aliases:["heavy dollar sign"]},{emoji:"💱",aliases:["currency exchange"]},{emoji:"™️",aliases:["tm"]},{emoji:"©️",aliases:["copyright"]},{emoji:"®️",aliases:["registered"]},{emoji:"〰️",aliases:["wavy dash"]},{emoji:"➰",aliases:["curly loop"]},{emoji:"➿",aliases:["loop"]},{emoji:"🔚",aliases:["end"]},{emoji:"🔙",aliases:["back"]},{emoji:"🔛",aliases:["on"]},{emoji:"🔝",aliases:["top"]},{emoji:"🔜",aliases:["soon"]},{emoji:"✔️",aliases:["heavy check mark"]},{emoji:"☑️",aliases:["ballot box with check"]},{emoji:"🔘",aliases:["radio button"]},{emoji:"⚪️",aliases:["white circle"]},{emoji:"⚫️",aliases:["black circle"]},{emoji:"🔴",aliases:["red circle"]},{emoji:"🔵",aliases:["large blue circle"]},{emoji:"🔺",aliases:["small red triangle"]},{emoji:"🔻",aliases:["small red triangle down"]},{emoji:"🔸",aliases:["small orange diamond"]},{emoji:"🔹",aliases:["small blue diamond"]},{emoji:"🔶",aliases:["large orange diamond"]},{emoji:"🔷",aliases:["large blue diamond"]},{emoji:"🔳",aliases:["white square button"]},{emoji:"🔲",aliases:["black square button"]},{emoji:"▪️",aliases:["black small square"]},{emoji:"▫️",aliases:["white small square"]},{emoji:"◾️",aliases:["black medium small square"]},{emoji:"◽️",aliases:["white medium small square"]},{emoji:"◼️",aliases:["black medium square"]},{emoji:"◻️",aliases:["white medium square"]},{emoji:"⬛️",aliases:["black large square"]},{emoji:"⬜️",aliases:["white large square"]},{emoji:"🔈",aliases:["speaker"]},{emoji:"🔇",aliases:["mute"]},{emoji:"🔉",aliases:["sound"]},{emoji:"🔊",aliases:["loud sound"]},{emoji:"🔔",aliases:["bell"]},{emoji:"🔕",aliases:["no bell"]},{emoji:"📣",aliases:["mega"]},{emoji:"📢",aliases:["loudspeaker"]},{emoji:"👁‍🗨",aliases:["eye speech bubble"]},{emoji:"💬",aliases:["speech balloon"]},{emoji:"💭",aliases:["thought balloon"]},{emoji:"🗯",aliases:["right anger bubble"]},{emoji:"♠️",aliases:["spades"]},{emoji:"♣️",aliases:["clubs"]},{emoji:"♥️",aliases:["hearts"]},{emoji:"♦️",aliases:["diamonds"]},{emoji:"🃏",aliases:["black joker"]},{emoji:"🎴",aliases:["flower playing cards"]},{emoji:"🀄️",aliases:["mahjong"]},{emoji:"🕐",aliases:["clock1"]},{emoji:"🕑",aliases:["clock2"]},{emoji:"🕒",aliases:["clock3"]},{emoji:"🕓",aliases:["clock4"]},{emoji:"🕔",aliases:["clock5"]},{emoji:"🕕",aliases:["clock6"]},{emoji:"🕖",aliases:["clock7"]},{emoji:"🕗",aliases:["clock8"]},{emoji:"🕘",aliases:["clock9"]},{emoji:"🕙",aliases:["clock10"]},{emoji:"🕚",aliases:["clock11"]},{emoji:"🕛",aliases:["clock12"]},{emoji:"🕜",aliases:["clock130"]},{emoji:"🕝",aliases:["clock230"]},{emoji:"🕞",aliases:["clock330"]},{emoji:"🕟",aliases:["clock430"]},{emoji:"🕠",aliases:["clock530"]},{emoji:"🕡",aliases:["clock630"]},{emoji:"🕢",aliases:["clock730"]},{emoji:"🕣",aliases:["clock830"]},{emoji:"🕤",aliases:["clock930"]},{emoji:"🕥",aliases:["clock1030"]},{emoji:"🕦",aliases:["clock1130"]},{emoji:"🕧",aliases:["clock1230"]},{emoji:"🏳️",aliases:["white flag"]},{emoji:"🏴",aliases:["black flag"]},{emoji:"🏁",aliases:["checkered flag"]},{emoji:"🚩",aliases:["triangular flag on post"]},{emoji:"🏳️‍🌈",aliases:["rainbow flag"]},{emoji:"🇦🇫",aliases:["afghanistan"]},{emoji:"🇦🇽",aliases:["aland islands"]},{emoji:"🇦🇱",aliases:["albania"]},{emoji:"🇩🇿",aliases:["algeria"]},{emoji:"🇦🇸",aliases:["american samoa"]},{emoji:"🇦🇩",aliases:["andorra"]},{emoji:"🇦🇴",aliases:["angola"]},{emoji:"🇦🇮",aliases:["anguilla"]},{emoji:"🇦🇶",aliases:["antarctica"]},{emoji:"🇦🇬",aliases:["antigua barbuda"]},{emoji:"🇦🇷",aliases:["argentina"]},{emoji:"🇦🇲",aliases:["armenia"]},{emoji:"🇦🇼",aliases:["aruba"]},{emoji:"🇦🇺",aliases:["australia"]},{emoji:"🇦🇹",aliases:["austria"]},{emoji:"🇦🇿",aliases:["azerbaijan"]},{emoji:"🇧🇸",aliases:["bahamas"]},{emoji:"🇧🇭",aliases:["bahrain"]},{emoji:"🇧🇩",aliases:["bangladesh"]},{emoji:"🇧🇧",aliases:["barbados"]},{emoji:"🇧🇾",aliases:["belarus"]},{emoji:"🇧🇪",aliases:["belgium"]},{emoji:"🇧🇿",aliases:["belize"]},{emoji:"🇧🇯",aliases:["benin"]},{emoji:"🇧🇲",aliases:["bermuda"]},{emoji:"🇧🇹",aliases:["bhutan"]},{emoji:"🇧🇴",aliases:["bolivia"]},{emoji:"🇧🇶",aliases:["caribbean netherlands"]},{emoji:"🇧🇦",aliases:["bosnia herzegovina"]},{emoji:"🇧🇼",aliases:["botswana"]},{emoji:"🇧🇷",aliases:["brazil"]},{emoji:"🇮🇴",aliases:["british indian ocean territory"]},{emoji:"🇻🇬",aliases:["british virgin islands"]},{emoji:"🇧🇳",aliases:["brunei"]},{emoji:"🇧🇬",aliases:["bulgaria"]},{emoji:"🇧🇫",aliases:["burkina faso"]},{emoji:"🇧🇮",aliases:["burundi"]},{emoji:"🇨🇻",aliases:["cape verde"]},{emoji:"🇰🇭",aliases:["cambodia"]},{emoji:"🇨🇲",aliases:["cameroon"]},{emoji:"🇨🇦",aliases:["canada"]},{emoji:"🇮🇨",aliases:["canary islands"]},{emoji:"🇰🇾",aliases:["cayman islands"]},{emoji:"🇨🇫",aliases:["central african republic"]},{emoji:"🇹🇩",aliases:["chad"]},{emoji:"🇨🇱",aliases:["chile"]},{emoji:"🇨🇳",aliases:["cn"]},{emoji:"🇨🇽",aliases:["christmas island"]},{emoji:"🇨🇨",aliases:["cocos islands"]},{emoji:"🇨🇴",aliases:["colombia"]},{emoji:"🇰🇲",aliases:["comoros"]},{emoji:"🇨🇬",aliases:["congo brazzaville"]},{emoji:"🇨🇩",aliases:["congo kinshasa"]},{emoji:"🇨🇰",aliases:["cook islands"]},{emoji:"🇨🇷",aliases:["costa rica"]},{emoji:"🇨🇮",aliases:["cote divoire"]},{emoji:"🇭🇷",aliases:["croatia"]},{emoji:"🇨🇺",aliases:["cuba"]},{emoji:"🇨🇼",aliases:["curacao"]},{emoji:"🇨🇾",aliases:["cyprus"]},{emoji:"🇨🇿",aliases:["czech republic"]},{emoji:"🇩🇰",aliases:["denmark"]},{emoji:"🇩🇯",aliases:["djibouti"]},{emoji:"🇩🇲",aliases:["dominica"]},{emoji:"🇩🇴",aliases:["dominican republic"]},{emoji:"🇪🇨",aliases:["ecuador"]},{emoji:"🇪🇬",aliases:["egypt"]},{emoji:"🇸🇻",aliases:["el salvador"]},{emoji:"🇬🇶",aliases:["equatorial guinea"]},{emoji:"🇪🇷",aliases:["eritrea"]},{emoji:"🇪🇪",aliases:["estonia"]},{emoji:"🇪🇹",aliases:["ethiopia"]},{emoji:"🇪🇺",aliases:["eu","european union"]},{emoji:"🇫🇰",aliases:["falkland islands"]},{emoji:"🇫🇴",aliases:["faroe islands"]},{emoji:"🇫🇯",aliases:["fiji"]},{emoji:"🇫🇮",aliases:["finland"]},{emoji:"🇫🇷",aliases:["fr"]},{emoji:"🇬🇫",aliases:["french guiana"]},{emoji:"🇵🇫",aliases:["french polynesia"]},{emoji:"🇹🇫",aliases:["french southern territories"]},{emoji:"🇬🇦",aliases:["gabon"]},{emoji:"🇬🇲",aliases:["gambia"]},{emoji:"🇬🇪",aliases:["georgia"]},{emoji:"🇩🇪",aliases:["de"]},{emoji:"🇬🇭",aliases:["ghana"]},{emoji:"🇬🇮",aliases:["gibraltar"]},{emoji:"🇬🇷",aliases:["greece"]},{emoji:"🇬🇱",aliases:["greenland"]},{emoji:"🇬🇩",aliases:["grenada"]},{emoji:"🇬🇵",aliases:["guadeloupe"]},{emoji:"🇬🇺",aliases:["guam"]},{emoji:"🇬🇹",aliases:["guatemala"]},{emoji:"🇬🇬",aliases:["guernsey"]},{emoji:"🇬🇳",aliases:["guinea"]},{emoji:"🇬🇼",aliases:["guinea bissau"]},{emoji:"🇬🇾",aliases:["guyana"]},{emoji:"🇭🇹",aliases:["haiti"]},{emoji:"🇭🇳",aliases:["honduras"]},{emoji:"🇭🇰",aliases:["hong kong"]},{emoji:"🇭🇺",aliases:["hungary"]},{emoji:"🇮🇸",aliases:["iceland"]},{emoji:"🇮🇳",aliases:["india"]},{emoji:"🇮🇩",aliases:["indonesia"]},{emoji:"🇮🇷",aliases:["iran"]},{emoji:"🇮🇶",aliases:["iraq"]},{emoji:"🇮🇪",aliases:["ireland"]},{emoji:"🇮🇲",aliases:["isle of man"]},{emoji:"🇮🇱",aliases:["israel"]},{emoji:"🇮🇹",aliases:["it"]},{emoji:"🇯🇲",aliases:["jamaica"]},{emoji:"🇯🇵",aliases:["jp"]},{emoji:"🎌",aliases:["crossed flags"]},{emoji:"🇯🇪",aliases:["jersey"]},{emoji:"🇯🇴",aliases:["jordan"]},{emoji:"🇰🇿",aliases:["kazakhstan"]},{emoji:"🇰🇪",aliases:["kenya"]},{emoji:"🇰🇮",aliases:["kiribati"]},{emoji:"🇽🇰",aliases:["kosovo"]},{emoji:"🇰🇼",aliases:["kuwait"]},{emoji:"🇰🇬",aliases:["kyrgyzstan"]},{emoji:"🇱🇦",aliases:["laos"]},{emoji:"🇱🇻",aliases:["latvia"]},{emoji:"🇱🇧",aliases:["lebanon"]},{emoji:"🇱🇸",aliases:["lesotho"]},{emoji:"🇱🇷",aliases:["liberia"]},{emoji:"🇱🇾",aliases:["libya"]},{emoji:"🇱🇮",aliases:["liechtenstein"]},{emoji:"🇱🇹",aliases:["lithuania"]},{emoji:"🇱🇺",aliases:["luxembourg"]},{emoji:"🇲🇴",aliases:["macau"]},{emoji:"🇲🇰",aliases:["macedonia"]},{emoji:"🇲🇬",aliases:["madagascar"]},{emoji:"🇲🇼",aliases:["malawi"]},{emoji:"🇲🇾",aliases:["malaysia"]},{emoji:"🇲🇻",aliases:["maldives"]},{emoji:"🇲🇱",aliases:["mali"]},{emoji:"🇲🇹",aliases:["malta"]},{emoji:"🇲🇭",aliases:["marshall islands"]},{emoji:"🇲🇶",aliases:["martinique"]},{emoji:"🇲🇷",aliases:["mauritania"]},{emoji:"🇲🇺",aliases:["mauritius"]},{emoji:"🇾🇹",aliases:["mayotte"]},{emoji:"🇲🇽",aliases:["mexico"]},{emoji:"🇫🇲",aliases:["micronesia"]},{emoji:"🇲🇩",aliases:["moldova"]},{emoji:"🇲🇨",aliases:["monaco"]},{emoji:"🇲🇳",aliases:["mongolia"]},{emoji:"🇲🇪",aliases:["montenegro"]},{emoji:"🇲🇸",aliases:["montserrat"]},{emoji:"🇲🇦",aliases:["morocco"]},{emoji:"🇲🇿",aliases:["mozambique"]},{emoji:"🇲🇲",aliases:["myanmar"]},{emoji:"🇳🇦",aliases:["namibia"]},{emoji:"🇳🇷",aliases:["nauru"]},{emoji:"🇳🇵",aliases:["nepal"]},{emoji:"🇳🇱",aliases:["netherlands"]},{emoji:"🇳🇨",aliases:["new caledonia"]},{emoji:"🇳🇿",aliases:["new zealand"]},{emoji:"🇳🇮",aliases:["nicaragua"]},{emoji:"🇳🇪",aliases:["niger"]},{emoji:"🇳🇬",aliases:["nigeria"]},{emoji:"🇳🇺",aliases:["niue"]},{emoji:"🇳🇫",aliases:["norfolk island"]},{emoji:"🇲🇵",aliases:["northern mariana islands"]},{emoji:"🇰🇵",aliases:["north korea"]},{emoji:"🇳🇴",aliases:["norway"]},{emoji:"🇴🇲",aliases:["oman"]},{emoji:"🇵🇰",aliases:["pakistan"]},{emoji:"🇵🇼",aliases:["palau"]},{emoji:"🇵🇸",aliases:["palestinian territories"]},{emoji:"🇵🇦",aliases:["panama"]},{emoji:"🇵🇬",aliases:["papua new guinea"]},{emoji:"🇵🇾",aliases:["paraguay"]},{emoji:"🇵🇪",aliases:["peru"]},{emoji:"🇵🇭",aliases:["philippines"]},{emoji:"🇵🇳",aliases:["pitcairn islands"]},{emoji:"🇵🇱",aliases:["poland"]},{emoji:"🇵🇹",aliases:["portugal"]},{emoji:"🇵🇷",aliases:["puerto rico"]},{emoji:"🇶🇦",aliases:["qatar"]},{emoji:"🇷🇪",aliases:["reunion"]},{emoji:"🇷🇴",aliases:["romania"]},{emoji:"🇷🇺",aliases:["ru"]},{emoji:"🇷🇼",aliases:["rwanda"]},{emoji:"🇧🇱",aliases:["st barthelemy"]},{emoji:"🇸🇭",aliases:["st helena"]},{emoji:"🇰🇳",aliases:["st kitts nevis"]},{emoji:"🇱🇨",aliases:["st lucia"]},{emoji:"🇵🇲",aliases:["st pierre miquelon"]},{emoji:"🇻🇨",aliases:["st vincent grenadines"]},{emoji:"🇼🇸",aliases:["samoa"]},{emoji:"🇸🇲",aliases:["san marino"]},{emoji:"🇸🇹",aliases:["sao tome principe"]},{emoji:"🇸🇦",aliases:["saudi arabia"]},{emoji:"🇸🇳",aliases:["senegal"]},{emoji:"🇷🇸",aliases:["serbia"]},{emoji:"🇸🇨",aliases:["seychelles"]},{emoji:"🇸🇱",aliases:["sierra leone"]},{emoji:"🇸🇬",aliases:["singapore"]},{emoji:"🇸🇽",aliases:["sint maarten"]},{emoji:"🇸🇰",aliases:["slovakia"]},{emoji:"🇸🇮",aliases:["slovenia"]},{emoji:"🇸🇧",aliases:["solomon islands"]},{emoji:"🇸🇴",aliases:["somalia"]},{emoji:"🇿🇦",aliases:["south africa"]},{emoji:"🇬🇸",aliases:["south georgia south sandwich islands"]},{emoji:"🇰🇷",aliases:["kr"]},{emoji:"🇸🇸",aliases:["south sudan"]},{emoji:"🇪🇸",aliases:["es"]},{emoji:"🇱🇰",aliases:["sri lanka"]},{emoji:"🇸🇩",aliases:["sudan"]},{emoji:"🇸🇷",aliases:["suriname"]},{emoji:"🇸🇿",aliases:["swaziland"]},{emoji:"🇸🇪",aliases:["sweden"]},{emoji:"🇨🇭",aliases:["switzerland"]},{emoji:"🇸🇾",aliases:["syria"]},{emoji:"🇹🇼",aliases:["taiwan"]},{emoji:"🇹🇯",aliases:["tajikistan"]},{emoji:"🇹🇿",aliases:["tanzania"]},{emoji:"🇹🇭",aliases:["thailand"]},{emoji:"🇹🇱",aliases:["timor leste"]},{emoji:"🇹🇬",aliases:["togo"]},{emoji:"🇹🇰",aliases:["tokelau"]},{emoji:"🇹🇴",aliases:["tonga"]},{emoji:"🇹🇹",aliases:["trinidad tobago"]},{emoji:"🇹🇳",aliases:["tunisia"]},{emoji:"🇹🇷",aliases:["tr"]},{emoji:"🇹🇲",aliases:["turkmenistan"]},{emoji:"🇹🇨",aliases:["turks caicos islands"]},{emoji:"🇹🇻",aliases:["tuvalu"]},{emoji:"🇺🇬",aliases:["uganda"]},{emoji:"🇺🇦",aliases:["ukraine"]},{emoji:"🇦🇪",aliases:["united arab emirates"]},{emoji:"🇬🇧",aliases:["gb","uk"]},{emoji:"🇺🇸",aliases:["us"]},{emoji:"🇻🇮",aliases:["us virgin islands"]},{emoji:"🇺🇾",aliases:["uruguay"]},{emoji:"🇺🇿",aliases:["uzbekistan"]},{emoji:"🇻🇺",aliases:["vanuatu"]},{emoji:"🇻🇦",aliases:["vatican city"]},{emoji:"🇻🇪",aliases:["venezuela"]},{emoji:"🇻🇳",aliases:["vietnam"]},{emoji:"🇼🇫",aliases:["wallis futuna"]},{emoji:"🇪🇭",aliases:["western sahara"]},{emoji:"🇾🇪",aliases:["yemen"]},{emoji:"🇿🇲",aliases:["zambia"]},{emoji:"🇿🇼",aliases:["zimbabwe"]}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"manageSuggestedUsers",function(){return v}),n.d(t,"checkStatus",function(){return j}),n.d(t,"open",function(){return S}),n.d(t,"close",function(){return E});var i,a,o,r,s,l=n(0),c=n(75),u=document.getElementById("suggestedUsersContainer"),d=u.querySelector(".suggestedListBox"),m=document.getElementById("suggestedUsersTemplate"),p=[],g=0,h=null;function f(){var e,t=[{user:{username:"everyone",_id:"everyone"},icon:r.icon.type,projectName:r.name}].concat(r.users);if(t.length>1)return""===h?(p=t.filter(function(e){var t=e.user;return t._id!==Zeplin.user._id&&"invited"!==t.status}),g=1,o=p[1]):p=t.filter(function(e){var t=e.user;return t._id!==Zeplin.user._id&&"invited"!==t.status&&t.username.startsWith(h)}),p.length?(p.forEach(b),u.appendChild(d),o&&(e=o,p.some(function(t){return t.user._id===e.user._id}))?g=u.querySelector(".suggestedItem[data-id='"+o.user._id+"']").dataset.index:(g=0,o=p[0]),u):void E();E()}function b(e,t){var n=document.importNode(m.content,!0),i=n.querySelector(".suggestedItem"),a=n.querySelector(".suggestedUserName"),o=n.querySelector(".everyoneInfo"),r=n.querySelector(".suggestedUserImage"),s=n.querySelector(".projectIcon");i.dataset.id=e.user._id,i.dataset.index=t,a.textContent=e.user.username||e.user.email,a.title=e.user.username||e.user.email,"everyone"===e.user._id?(o.textContent="Notify everyone in "+e.projectName,s.dataset.type=e.icon,r.parentElement.classList.add("hidden")):(o.textContent="",l.B(r,e.user)),d.appendChild(n)}function y(e){var t=i.value.substring(0,i.selectionStart),n=i.value.substring(i.selectionStart),o=e.user.username,r=t.substr(0,t.lastIndexOf("@"))+"@"+o+" ";i.value=r+n,a.innerHTML=l.f(i.value)+"&nbsp;",i.focus(),i.setSelectionRange(r.length+1,r.length+1),E()}function v(e,t,n){if(i=e,a=t,r=n,!u.classList.contains("hidden")){var s=u.querySelector(".suggestedItem.selected");s&&(o=p[s.dataset.index])}var c,d=l.j(i.value.substring(0,i.selectionStart),!0);return c=(c=l.j(i.value.substr(i.selectionStart)))>-1?i.selectionStart+c:0,E(),h=null,"everyone"===(h=c?i.value.substring(d+1,c):i.value.substring(d+1))&&(h=""),f()}function j(){h&&c.b(s)}function S(){s={elements:{textContainer:i,suggestedListContainer:u},cb:{autoComplete:y},index:g,list:p},c.b(s)}function E(){c.a()}},function(e,t,n){"use strict";var i,a,o,r={root:document.body,allowX:!0,allowY:!0,grabDelay:300},s={},l=0,c=!1,u=!1,d=null,m=null,p={x:0,y:0},g={x:0,y:0};function h(e,t){m.classList.add("hidden");var n=document.elementFromPoint(e,t);return m.classList.remove("hidden"),n}function f(){requestAnimationFrame(function(){var e,t,n;c&&(e=a.root,t=g.x,n=g.y,g.x=e.scrollLeft,g.y=e.scrollTop,p.x+=t-g.x,p.y+=n-g.y)})}function b(e,t,n){d=e,function(e,t){var n=d.getBoundingClientRect(),i=a.root.getBoundingClientRect();g.x=a.root.scrollLeft,g.y=a.root.scrollTop,p.x=e-(n.left+g.x-i.left),p.y=t-(n.top+g.y-i.top),(m=d.cloneNode(!0)).style.top=t-p.y+"px",m.style.left=e-p.x+"px",m.classList.add("mirror"),a.root.appendChild(m)}(t,n),d.classList.add("target"),c=!0,i=!1,o=a.root.scrollHeight,a.root.addEventListener("scroll",f),a.onGrab&&a.onGrab(d,m)}document.addEventListener("click",function(e){u&&(e.preventDefault(),e.stopImmediatePropagation())},!0),document.addEventListener("mousedown",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT&&(t=e.target,!["input","textarea"].includes(t.tagName.toLowerCase())&&!t.isContentEditable)){var t,n=e.target.closest("[data-drag-id] > *");n&&((a=s[parseInt(n.parentNode.dataset.dragId,10)]).canGrab&&!a.canGrab(n,e.target)||(clearTimeout(i),i=setTimeout(b,a.grabDelay,n,e.clientX,e.clientY)))}}),document.addEventListener("mouseup",function(e){if(u=!1,i)clearTimeout(i),i=!1;else if(c){e.stopPropagation(),u=!0,c=!1,a.root.removeEventListener("scroll",f);var t=Promise.resolve();if(a.onDrop){var n,o,r=h(e.clientX,e.clientY);r&&(n=r.closest('[data-drag-id="'+a.dragId+'"] > *:not(.mirror)'),o=r.closest('[data-drag-id="'+a.dragId+'"]')||r.closest('[data-drop-target-for="'+a.dragId+'"]')),t=a.onDrop(d.parentNode,d,o,n,m)||t}t.then(function(){d.classList.remove("target"),m&&(m.remove(),m=null),d=null,a=null})}}),document.addEventListener("mousemove",function(e){if(c){var t=m.getBoundingClientRect(),n=a.root.getBoundingClientRect();a.allowY&&(e.clientY>window.innerHeight-t.height/10&&a.root.scrollTop+a.root.offsetHeight+t.height/10<o?a.root.scrollTop+=t.height/10:e.clientY<n.top+t.height/10&&a.root.scrollTop>0&&(a.root.scrollTop-=t.height/10))}}),document.addEventListener("mousemove",function(e){if(c){a.allowY&&(m.style.top=e.clientY-p.y+"px"),a.allowX&&(m.style.left=e.clientX-p.x+"px");var t,n,i=h(e.clientX,e.clientY);i&&(t=i.closest('[data-drag-id="'+a.dragId+'"] > *:not(.mirror)'),n=i.closest('[data-drag-id="'+a.dragId+'"]')||i.closest('[data-drop-target-for="'+a.dragId+'"]')),a.onMove(d.parentNode,d,n,t,m)}}),t.a={enable:function(e){[].concat(e).forEach(function(e){(e=Object.assign({},r,e)).containers=[].concat(e.containers).map(function(e){return e.dataset.dragId=l,e}),e.dropTargets=(e.dropTargets||[]).map(function(e){return e.dataset.dropTargetFor=l,e}),e.dragId=l,s[l]=e,l++})},disable:function(e){delete s[e]}}},function(e,t,n){"use strict";n.d(t,"a",function(){return C}),n.d(t,"b",function(){return D});var i=n(3),a=n(2),o=n(0),r=n(11);const s=document.querySelector(".integrationPreferencesContainer"),l=document.querySelector(".integrationPreferencesDialog"),c=document.querySelector(".integrationPreferencesDone"),u=document.getElementById("slackIntegrationPreferenceTemplate"),d=document.querySelector(".integrationPreferences"),m=document.querySelector(".integrationPreferencesHeader span"),p={screens:{name:"Screens",info:"Screen added",events:["screen.created"]},versions:{name:"Screen versions",info:"Version added to screen",events:["screen.version.created"]},colors:{name:"Colors",info:"Color added, removed or updated on Styleguide",events:["color.created","color.updated","color.deleted"]},textStyles:{name:"Text styles",info:"Text style added, removed or updated on Styleguide",events:["textstyle.created","textstyle.updated","textstyle.deleted"]},notes:{name:"Notes",info:"Note added",events:["dot.created"]},replies:{name:"Replies",info:"Replied to note",events:["dot.comment.created"]},members:{name:"Members",info:"Member invited",events:["project.user.invited"]},extensions:{name:"Extensions",info:"Extension added or removed",events:["project.extension.added","project.extension.removed"]},projectStatus:{name:"Project status",info:"Project archived or activated",events:["project.archived","project.activated"]}},g=Object.keys(p).reduce(function(e,t){return p[t].events.reduce(function(e,n){return e[n]=t,e},e)},{});let h,f,b,y={},v={};function j(e,t){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/integrations/slacks/"+t+"/events",{method:"GET",headers:Zeplin.headers}).then(function(e){return e.json().then(function(t){if(e.ok)return t;throw a.a(e.status,t)})}).then(function(e){return e.events}).catch(function(){})}function S(e){const t=e.target.closest(".integrationPreference"),n=e.target;t.classList.add("loading"),e.target.disabled=!0;const i=n.name;let o;var r,s,l;(o=n.checked?(r=i,s=h,l=f,p[r].events.reduce(function(e,t){return e.then(function(){return function(e,t,n){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/integrations/slacks/"+t+"/events/"+n,{method:"POST",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw a.a(e.status,t)})}).catch(function(e){a.b(e)})}(s,l,t)})},Promise.resolve())).then(function(){y[f][i]=Array.from(p[i].events)}):function(e,t,n){return p[e].events.reduce(function(e,i){return e.then(function(){return function(e,t,n){return fetch(Zeplin.urls.baseURL+"/projects/"+e+"/integrations/slacks/"+t+"/events/"+n,{method:"DELETE",headers:Zeplin.headers}).then(function(e){if(!e.ok)return e.json().then(function(t){throw a.a(e.status,t)})}).catch(function(e){a.b(e)})}(t,n,i)})},Promise.resolve())}(i,h,f).then(function(){delete y[f][i]})).then(function(){e.target.disabled=!1,t.classList.remove("loading")}).catch(function(n){e.target.disabled=!1,e.target.checked=!e.target.checked,t.classList.remove("loading"),a.b(n)})}function E(e,t){v[e]=!!t,t&&(y[e]=t.reduce(function(e,t){return g[t]?(e[g[t]]?e[g[t]].push(t):e[g[t]]=[t],e):e},{}))}function w(e,t){document.querySelector(".integrationPreferences input[type='checkbox'][name='"+e+"']").checked=t}function L(){s.classList.add("hidden")}function C(e,t){h=e,function(e,t){v={},y={};const n=t.map(function(t){return j(e,t)});return Promise.all(n).then(function(e){e.forEach(function(e,n){E(t[n],e)})})}(e,t).then(function(t){return function(e){b&&r.c.unsubscribe(b),b="private-project@"+e;const t=r.c.channel(b)||r.c.subscribe(b);t.bind("AddIntegrationEvent",function(e){if(e.params.pid!==h||"slacks"!==e.params.intype||!y[e.params.inid])return;const t=g[e.params.event];y[e.params.inid][t]?-1===y[e.params.inid][t].indexOf(e.params.event)&&y[e.params.inid][t].push(e.params.event):y[e.params.inid][t]=[e.params.event],s.classList.contains("hidden")||y[e.params.inid][t].length===p[t].events.length&&w(t,!0)}),t.bind("DeleteIntegrationEvent",function(e){const t=g[e.params.event];e.params.pid===h&&"slacks"===e.params.intype&&y[e.params.inid]&&y[e.params.inid][t]&&y[e.params.inid][t].indexOf(e.params.event)>-1&&(o.b(y[e.params.inid][t],function(t){return t===e.params.event}),s.classList.contains("hidden")||w(t,!1))})}(e),t})}function D(e,t){v[e]?(f=e,s.classList.remove("hidden"),m.textContent=t,m.title=t,function(e){Array.from(document.querySelectorAll(".integrationPreferences input[type='checkbox']")).forEach(function(e){e.checked=!1}),Object.keys(y[e]).forEach(function(t){y[e][t].length===p[t].events.length&&w(t,!0)})}(e),d.scrollTop=1,d.scrollTop=0):i.a({message:"Something went wrong while fetching Slack preferences.",done:{name:"TRY AGAIN",cb:function(){j(h,e).then(function(n){E(e,n),D(e,t)})}}})}Object.keys(p).forEach(function(e){const t=p[e],n=document.importNode(u.content,!0),i=n.querySelector(".integrationPreferenceGroupName"),a=n.querySelector(".integrationPreferenceGroupInfo"),o=n.querySelector("input[type='checkbox']");i.textContent=t.name,i.title=t.name,a.textContent=t.info,a.title=t.info,o.name=e,d.appendChild(n)}),s.addEventListener("click",function(e){e.stopPropagation(),L()}),l.addEventListener("click",function(e){e.stopPropagation()}),c.addEventListener("click",function(){L()}),Array.from(document.querySelectorAll(".integrationPreferences input[type='checkbox']")).forEach(function(e){e.addEventListener("change",S)})},function(e,t,n){"use strict";var i=n(124);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(125),r=n(2),s=n(128),l=(n.n(s),Object.freeze({android:"Android",ios:"iOS",osx:"macOS",web:"Web"}));class c extends a.a.Component{constructor(e){super(e),this.closePopup=this.closePopup.bind(this),this.moveHandler=this.moveHandler.bind(this),this.openHandler=this.openHandler.bind(this),this.moveStartHandler=this.moveStartHandler.bind(this),this.state={spinnerIndex:-1,listItems:[],loading:!0}}static stopPropagation(e){e.stopPropagation()}getInteractiveItemAtIndex(e){return this.state.listItems.filter(function(e){return"header"!==e.type})[e]}closePopup(){a.a.render(null,this.base.parentElement,this.base)}moveStartHandler(e){this.setState({spinnerIndex:e})}moveHandler(e){if(-1===this.state.spinnerIndex){if(!this.props.onMove)throw new Error("Prop onMove is required");this.props.onMove(this.getInteractiveItemAtIndex(e),e,this.moveStartHandler,this.closePopup)}}positionPopup(){var e=this.base.getBoundingClientRect(),t=Math.max(108,this.props.top-e.height/2);t=Math.min(t,window.innerHeight-24-e.height);var n=Math.min(this.props.left,window.innerWidth-36-e.width);this.base.style.top=t+"px",this.base.style.left=n+"px"}openHandler(){this.props.onOpen&&this.props.onOpen()}componentDidMount(){if(this.positionPopup(),this.openHandler(),this.props.projectsLoader){var e=this;e.setState({loading:!0}),this.props.projectsLoader().then(function(t){e.setState({loading:!1,listItems:t})}).catch(r.b)}}componentWillUnmount(){this.props.onClose&&this.props.onClose()}componentDidUpdate(){this.positionPopup()}render(e,t){var n;return n=t.loading?a.a.h("div",{class:"projectListLoading"}):a.a.h(o.a,{projectType:l[e.projectType],density:e.density,items:t.listItems,spinnerIndex:t.spinnerIndex,onSelect:this.moveHandler}),a.a.h("div",{class:"moveToProjectPopup",onClick:c.stopPropagation,onContextMenu:c.stopPropagation},a.a.h("p",null,"To keep asset sizes and measurements consistent, only ",a.a.h("strong",null,l[e.projectType])," projects with ",a.a.h("strong",null,e.density)," density are listed. Select one or create a new one to move the screen(s):"),n)}}t.a=c},function(e,t,n){"use strict";var i=n(126);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(0),r=n(127),s=(n.n(r),a.a.h("svg",{class:"spinner",width:"12",height:"12",viewBox:"0 0 12 12"},a.a.h("g",{"fill-rule":"evenodd"},a.a.h("path",{d:"M4.328 3.606c-.398.035-.75-.256-.784-.657L3.354.785c-.034-.398.258-.748.658-.783.398-.035.75.257.784.657l.19 2.163c.034.398-.257.748-.658.783z"}),a.a.h("path",{d:"M3.125 5.49c-.257.306-.71.348-1.02.09L.444 4.183c-.306-.257-.348-.71-.09-1.02.258-.305.712-.347 1.02-.088L3.036 4.47c.306.258.348.712.09 1.02z",opacity:".3"}),a.a.h("path",{d:"M3.606 7.672c.035.398-.256.75-.657.784l-2.164.19c-.398.034-.748-.258-.783-.658-.035-.398.257-.75.657-.784l2.163-.19c.398-.034.748.257.783.658z",opacity:".4"}),a.a.h("path",{d:"M5.49 8.875c.306.257.348.71.09 1.02l-1.396 1.662c-.257.306-.71.348-1.02.09-.305-.258-.347-.712-.088-1.02L4.47 8.964c.258-.306.712-.348 1.02-.09z",opacity:".5"}),a.a.h("path",{d:"M7.672 8.394c.398-.035.75.256.784.657l.19 2.164c.034.398-.258.748-.658.783-.398.035-.75-.257-.784-.657l-.19-2.163c-.034-.398.257-.748.658-.783z",opacity:".6"}),a.a.h("path",{d:"M8.875 6.51c.257-.306.71-.348 1.02-.09l1.662 1.396c.306.257.348.71.09 1.02-.258.305-.712.347-1.02.088L8.964 7.53c-.306-.258-.348-.712-.09-1.02z",opacity:".7"}),a.a.h("path",{d:"M8.394 4.328c-.035-.398.256-.75.657-.784l2.164-.19c.398-.034.748.258.783.658.035.398-.257.75-.657.784l-2.163.19c-.398.034-.748-.257-.783-.658z",opacity:".85"}),a.a.h("path",{d:"M6.51 3.125c-.306-.257-.348-.71-.09-1.02L7.817.444c.257-.306.71-.348 1.02-.09.305.258.347.712.088 1.02L7.53 3.036c-.258.306-.712.348-1.02.09z",opacity:".95"}))));class l extends a.a.Component{constructor(e){super(),this.mouseEnterHandler=this.mouseEnterHandler.bind(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.clickHandler=this.clickHandler.bind(this),this.keydownHandler=this.keydownHandler.bind(this),this.itemCount=l.getInteractiveItemCount(e.items),this.state={selectedIndex:0}}static getInteractiveItemCount(e){return e.filter(function(e){return"header"!==e.type}).length}mouseEnterHandler(e){this.lastX=e.clientX,this.lastY=e.clientY}mouseMoveHandler(e){if(e.stopPropagation(),this.lastX!==e.clientX||this.lastY!==e.clientY){var t=e.target.closest("[data-index]");if(t){var n=parseInt(t.dataset.index,10);n!==this.state.selectedIndex&&this.setState({selectedIndex:n}),this.lastX=e.clientX,this.lastY=e.clientY}}}clickHandler(e){e.stopPropagation(),this.props.onSelect&&this.props.onSelect(this.state.selectedIndex)}keydownHandler(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ENTER:this.props.onSelect&&this.props.onSelect(this.state.selectedIndex);break;case Zeplin.KEY_CODE.ArrowUp:e.preventDefault(),this.setState({selectedIndex:Math.max(0,this.state.selectedIndex-1)});break;case Zeplin.KEY_CODE.ArrowDown:e.preventDefault(),this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this.itemCount-1)})}}componentDidMount(){document.addEventListener("keydown",this.keydownHandler)}componentWillReceiveProps(e){this.itemCount=l.getInteractiveItemCount(e.items)}componentDidUpdate(){o.z(this.base.querySelector("[data-index='"+this.state.selectedIndex+"']"))}componentWillUnmount(){document.removeEventListener("keydown",this.keydownHandler)}createHeader(e){return a.a.h("h3",{key:e},a.a.h("span",null,e)," ",a.a.h("span",null,"(",this.props.projectType,", ",this.props.density,")"))}createProjectButton(e,t){var n=["newProjectButton"];return t===this.state.selectedIndex&&n.push("selected"),a.a.h("div",{key:e,class:n.join(" "),"data-index":t,"data-oid":e},a.a.h("svg",{class:"plus",width:"24",height:"24"},a.a.h("g",{fill:"none","fill-rule":"evenodd"},a.a.h("circle",{cx:"12",cy:"12",r:"12"}),a.a.h("path",{d:"M13 7.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5V11H7.5a.5.5 0 0 0-.5.5v1c0 .3.2.5.5.5H11v3.5c0 .3.2.5.5.5h1a.5.5 0 0 0 .5-.5V13h3.5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H13V7.5z"}))),a.a.h("div",null,a.a.h("div",null,"New project"),a.a.h("div",null,"Create a new project and transfer screens")),t===this.props.spinnerIndex&&s)}createProjectItem(e,t,n,i){var o=["project"];return n&&o.push("odd"),i===this.state.selectedIndex&&o.push("selected"),a.a.h("div",{key:e,class:o.join(" "),title:t,"data-index":i},a.a.h("span",null,t),i===this.props.spinnerIndex&&s)}render(e,t){var n=this,i=0,o=!1,r=e.items.map(function(e){switch(e.type){case"header":return n.createHeader(e.content);case"create":return o=!1,n.createProjectButton(e.oid,i++);case"project":return o=!o,n.createProjectItem(e.pid,e.name,o,i++);default:return null}});return a.a.h("div",{class:"projectList",onMouseEnter:this.mouseEnterHandler,onMouseMove:this.mouseMoveHandler,onClick:this.clickHandler},r)}}t.a=l},function(e,t){},function(e,t){},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(10),r=n(130);n.n(r);t.a=function(e){return a.a.h("div",{class:"noScreenAssets"},a.a.h("h1",null,"Rock paper scissors",a.a.h("img",{src:o.a("img/emjAssetVictory.png"),srcset:o.a("img/emjAssetVictory@2x.png")+" 2x, "+o.a("img/emjAssetVictory@3x.png")+" 3x",alt:"✌",class:"victory"}),a.a.h("img",{src:o.a("img/emjScissors.png"),srcset:o.a("img/emjScissors@2x.png")+" 2x, "+o.a("img/emjScissors@3x.png")+" 3x",alt:"✂",class:"scissors"})),function(e){switch(e){case"sketch":return a.a.h("div",{class:"info sketchFile"},a.a.h("p",null,a.a.h("strong",null,"Set layers as exportable or draw slices")," in Sketch and Zeplin will generate assets and list them here."),a.a.h("img",{src:o.a("img/icSketchSampleAsset.svg"),class:"sampleAsset"}),a.a.h("img",{src:o.a("img/icSketchMakeExportable.png"),srcset:o.a("img/icSketchMakeExportable@2x.png")+" 2x, "+o.a("img/icSketchMakeExportable@3x.png")+" 3x",class:"exportableAsset"}),a.a.h("p",null,"or"),a.a.h("img",{src:o.a("img/icSketchDrawSlices.svg"),class:"sliceAsset"}),a.a.h("p",null,"For more ProTips on assets, check out our ",a.a.h("a",{href:"https://blog.zeplin.io/exporting-assets-in-zeplin-50b8b4a56b05",target:"_blank"},"blog post.")));case"psd":return a.a.h("div",{class:"info psdFile"},a.a.h("p",null,a.a.h("strong",null,"Mark layers as assets")," in Photoshop, from Zeplin’s panel and Zeplin will generate assets and list them here."),a.a.h("img",{src:o.a("img/icPhotoshopSampleAsset.svg"),class:"sampleAsset"}),a.a.h("img",{src:o.a("img/icPhotoshopMakeExportable.png"),srcset:o.a("img/icPhotoshopMakeExportable@2x.png")+" 2x, "+o.a("img/icPhotoshopMakeExportable@3x.png")+" 3x",class:"exportableAsset"}),a.a.h("p",null,"For more ProTips on assets, check out our ",a.a.h("a",{href:"https://blog.zeplin.io/photoshop-open-beta-now-3f8f502fc4de",target:"_blank"},"blog post.")));case"figma":return a.a.h("div",{class:"info"},a.a.h("p",null,a.a.h("strong",null,"Set layers as exportable")," in Figma and Zeplin will generate assets and list them here."),a.a.h("img",{src:o.a("img/icFigmaSampleAsset.svg"),class:"sampleAsset"}),a.a.h("img",{src:o.a("img/icFigmaMakeExportable.png"),srcset:o.a("img/icFigmaMakeExportable@2x.png")+" 2x, "+o.a("img/icFigmaMakeExportable@3x.png")+" 3x",class:"exportableAsset"}))}}(e.source))}},function(e,t){},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(9),r=n(10),s=n(12),l=n(132);n.n(l);class c extends a.a.Component{constructor(){super(),this.state={designTool:"photoshop"},this.changeDesignTool=this.changeDesignTool.bind(this)}componentDidMount(){var e=this;o.c.get("noScreensDesignToolSelection").then(function(t){e.setState({designTool:t})})}changeDesignTool(e){this.setState({designTool:e.target.value}),o.c.set("noScreensDesignToolSelection",e.target.value)}static openInstallationInfo(e){e.preventDefault(),s.a.shell.openExternal(e.target.href)}static toolImages(e){return"photoshop"===e?[a.a.h("img",{class:"psLogo",src:r.a("img/icLogoPS.png"),srcset:r.a("img/icLogoPS@2x.png")+" 2x,"+r.a("img/icLogoPS@3x.png")+" 3x"}),a.a.h("img",{class:"psToZeplinLogo",src:r.a("img/icDashboardPSToZeplin.svg")})]:"figma"===e?[a.a.h("img",{class:"figmaLogo",src:r.a("img/icDshbrdFigma.svg")}),a.a.h("img",{class:"figmaToZeplinLogo",src:r.a("img/figmaDashboardPSToZeplin.svg")})]:void 0}static toolToZeplin(e){return a.a.h("div",{class:"toolToZeplin"},c.toolImages(e),a.a.h("img",{class:"zeplinLogo",src:r.a("img/icZeplin.svg")}))}static photoshopSteps(e){return a.a.h("ol",{class:"photoshopSteps"},a.a.h("li",null,a.a.h("div",null,a.a.h("div",null,"Open your Photoshop file"),a.a.h("img",{src:r.a("img/icPSLogoGrayscale.png"),srcset:r.a("img/icPSLogoGrayscale@2x.png")+" 2x,"+r.a("img/icPSLogoGrayscale@3x.png")+" 3x"}))),a.a.h("li",null,a.a.h("div",null,"Select artboards (or layers in artboards) and click:"),a.a.h("img",{class:"ssDashboardEmpty",src:r.a("img/ss/ssDashboardEmpty.png"),srcset:r.a("img/ss/ssDashboardEmpty@2x.png")+" 2x,"+r.a("img/ss/ssDashboardEmpty@3x.png")+" 3x"}),e?a.a.h("div",{class:"installPanelInfo"},"If you can’t see the panel under ",a.a.h("code",null,"“Window > Extensions > Zeplin”"),", check how it’s installed from ",a.a.h("a",{onClick:c.openInstallationInfo,target:"_blank",href:"https://support.zeplin.io/photoshop-integration/installing-photoshop-plugin-on-windows"},"here"),"."):a.a.h("div",{class:"installPanelInfo"},"If you can’t see the panel, install it from ",a.a.h("a",{onClick:c.openInstallationInfo,target:"_blank",href:"https://support.zeplin.io/photoshop-integration/installing-photoshop-plugin-on-windows"},"here"),".")))}static steps(e){return"photoshop"===e?c.photoshopSteps():"figma"===e?a.a.h("ol",{class:"figmaSteps"},a.a.h("li",null,a.a.h("div",null,"Enable the integration on Figma. From the menu, "),a.a.h("div",null,"select ",a.a.h("strong",null,"“Integrations > Zeplin”:")),a.a.h("img",{src:r.a("img/imgFigmaMenuIntegration.png"),srcset:r.a("img/imgFigmaMenuIntegration@2x.png")+" 2x,"+r.a("img/imgFigmaMenuIntegration@3x.png")+" 3x"})),a.a.h("li",null,a.a.h("div",null,"Select a frame in your Figma file.")),a.a.h("li",null,a.a.h("div",null,"Press ",a.a.h("strong",null,"Alt+E")," or select ",a.a.h("strong",null,"“Export to Zeplin”")," under the Export menu:"),a.a.h("div",null,a.a.h("img",{src:r.a("img/icFigmaShortcut.svg")}),a.a.h("div",null,"or"),a.a.h("img",{src:r.a("img/imgFigmaMenuExport.png"),srcset:r.a("img/imgFigmaMenuExport@2x.png")+" 2x,"+r.a("img/imgFigmaMenuExport@3x.png")+" 3x"})))):void 0}render(e,t){return e.photoshopAndFigma?a.a.h("div",{class:"noScreensElectron photoshopAndFigma","data-designtool":t.designTool},a.a.h("h1",null,"Let’s start by exporting screens from:"),a.a.h("div",{class:"designToolSelection"},a.a.h("label",null,a.a.h("input",{name:"noScreensElectronDesignTool",value:"photoshop",type:"radio",checked:"photoshop"===t.designTool,onChange:this.changeDesignTool}),a.a.h("span",null,"Photoshop")),a.a.h("hr",null),a.a.h("label",null,a.a.h("input",{name:"noScreensElectronDesignTool",value:"figma",type:"radio",checked:"figma"===t.designTool,onChange:this.changeDesignTool}),a.a.h("span",null,"Figma"))),c.toolToZeplin(t.designTool),c.steps(t.designTool)):a.a.h("div",{class:"noScreensElectron photoshopOnly"},a.a.h("h1",null,"Designers!"),a.a.h("h2",null,"Let’s start by exporting screens from Photoshop:"),c.toolToZeplin("photoshop"),c.photoshopSteps(!0),a.a.h("h1",null,"Developers!"),a.a.h("h2",{class:"inviteYourDesigner"},"Invite your designer to upload screens:"),a.a.h("h3",{class:"inviteYourDesignerInfo"},"You can invite your designer from the 'Members' section."))}}t.a=c},function(e,t){},function(e,t,n){"use strict";var i=n(134);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(42),r=n(32),s=n(136),l=n(144),c=n(79),u=n(43),d=n(65),m=n(4),p=n(22),g=n(10),h=n(0),f=n(3),b=n(154);n.n(b);const y="http://127.0.0.1:7070";function v(e){e.stopPropagation()}function j(){return a.a.h("div",{class:"noExtensions"},a.a.h("h2",null,"No added extensions yet",a.a.h("img",{src:Object(g.a)("img/emjAlembic.png"),srcSet:`${Object(g.a)("img/emjAlembic@2x.png")} 2x, ${Object(g.a)("img/emjAlembic@3x.png")} 3x`})),a.a.h("p",null,"Extensions are built by the community, generating code snippets from designs.",a.a.h("br",null),"Looks like you don’t have any extensions enabled on this project.",a.a.h("br",null),a.a.h("br",null),"Pick the ones that fit your workflow."),a.a.h("a",{href:Object(h.i)(),class:"explore",target:"_blank",rel:"noopener"},"Explore extensions"))}class S extends a.a.Component{constructor(e){super(e),this.handleAddClick=this.handleAddClick.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleInputKeyDown=this.handleInputKeyDown.bind(this),this.state={urlChanged:!1,invalidUrl:!1}}handleDocumentClick(e){this.base.contains(e.target)||(e.preventDefault(),e.stopPropagation(),this.props.onClose())}handleDocumentKeyDown(e){e.keyCode===Zeplin.KEY_CODE.ESC&&(e.preventDefault(),e.stopPropagation(),this.props.onClose())}handleAddClick(){const{textInput:e}=this.nodeRefs;let t=e.value;if(t){if(!e.checkValidity())return Object(h.K)(e),Object(h.o)(e),void this.setState({invalidUrl:!0});/^https?:\/\//.test(t)||(t=`http://${t}`),this.props.onAdd(t)}}handleInputKeyDown(e){e.keyCode===Zeplin.KEY_CODE.ENTER&&(e.stopPropagation(),this.handleAddClick())}handleInputChange(){this.state.urlChanged&&!this.state.invalidUrl||this.setState({urlChanged:!0,invalidUrl:!1})}focusTextInput(){const{extension:e,alreadyAdded:t,initialUrl:n}=this.props,{urlChanged:i}=this.state,{textInput:a}=this.nodeRefs;i||(n&&!e||t?Object(h.o)(a):a.focus())}setInitialUrl(){this.state.urlChanged||(this.nodeRefs.textInput.value=this.props.initialUrl)}componentWillReceiveProps(e){this.setState({urlChanged:!1,invalidUrl:!1})}componentWillUnmount(){document.removeEventListener("keydown",this.handleDocumentKeyDown,!0),document.removeEventListener("click",this.handleDocumentClick,!0)}componentDidMount(){document.addEventListener("keydown",this.handleDocumentKeyDown,!0),document.addEventListener("click",this.handleDocumentClick,!0),this.focusTextInput(),this.setInitialUrl()}componentDidUpdate(){this.focusTextInput(),this.setInitialUrl()}renderInfo(){const{extension:e,alreadyAdded:t,initialUrl:n}=this.props,{urlChanged:i,invalidUrl:o}=this.state,r=n&&!e,s=i&&!o,l=r||t||o;let c;return o?c="Enter a valid URL.":t?c=`“${e.name}” is already added.`:e?c=`Found “${e.name}”.`:r&&(c="No extension found."),a.a.h("p",{class:Object(m.a)("info",{warning:l,invisible:s})},c)}render(e,t){const{extension:n,alreadyAdded:i,initialUrl:o,onClose:s}=e,{urlChanged:l,invalidUrl:u}=t,d=u||!l&&(o&&!n||i);return a.a.h("div",{class:"localExtensionPopup",onClick:v},a.a.h("div",null,a.a.h("p",null,"Enter extension URL:"),a.a.h(c.a,{inputRef:Object(p.a)(this,"textInput"),type:"url",class:"localExtensionUrl",onInput:this.handleInputChange,onKeyDown:this.handleInputKeyDown,placeholder:"e.g. http://localhost:7070"}),this.renderInfo()),a.a.h("div",{class:"footer"},a.a.h(r.a,{class:"cancel",ripple:!0,onClick:s},"CANCEL"),a.a.h(r.a,{class:"done",ripple:!d,onClick:this.handleAddClick,disabled:d},"ADD")))}}class E extends a.a.Component{constructor(e){super(e),this.close=this.close.bind(this),this.showSettings=this.showSettings.bind(this),this.handleBackLinkClick=this.handleBackLinkClick.bind(this),this.removeExtension=this.removeExtension.bind(this),this.updateExtensionOption=this.updateExtensionOption.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentKeyUp=this.handleDocumentKeyUp.bind(this),this.showAddLocalExtensionPopup=this.showAddLocalExtensionPopup.bind(this),this.hideLocalExtensionPopup=this.hideLocalExtensionPopup.bind(this),this.addLocalExtension=this.addLocalExtension.bind(this),this.state={selectedExtensionId:null,altPressed:!1,localExtensionPopupVisible:!1,localExtensionUrl:null,localExtension:null}}handleBackLinkClick(e){e.preventDefault(),this.setState({selectedExtensionId:null})}showSettings(e){this.setState({selectedExtensionId:e})}updateExtensionOption(e,t){this.props.updateExtensionOption(this.state.selectedExtensionId,e,t)}removeExtension(){const e=new URL(Object(h.i)()),t=this.props.extensions.find(e=>e.id===this.state.selectedExtensionId);this.setState({selectedExtensionId:null});const{projectId:n,removeExtension:i}=this.props;t.local?i(n,t.id,!0):f.a({title:`Remove “${t.name}” from project?`,message:`Extension will be removed for all members of this project. You can add it back from “${e.hostname}”.`,done:{name:"REMOVE",cb:()=>{i(n,t.id)}},cancel:{name:"KEEP"}})}handleBackdropClick(e){e.stopPropagation(),this.close()}handleDocumentKeyDown(e){e.keyCode===Zeplin.KEY_CODE.ESC?(e.stopPropagation(),this.close()):e.keyCode!==Zeplin.KEY_CODE.ALT||e.shiftKey||this.setState({altPressed:!0})}handleDocumentKeyUp(e){this.state.altPressed&&e.keyCode===Zeplin.KEY_CODE.ALT&&this.setState({altPressed:!1})}showAddLocalExtensionPopup(){const e=y;d.a.createLocal(e).then(t=>{const n={localExtensionPopupVisible:!0};this.props.extensions.some(e=>e.id===t.id)||Object.assign(n,{localExtensionUrl:e,localExtension:t}),this.setState(n)}).catch(()=>{this.setState({localExtensionPopupVisible:!0,localExtensionUrl:null,localExtension:null})})}hideLocalExtensionPopup(){this.setState({localExtensionPopupVisible:!1,localExtensionUrl:null,localExtension:null})}addLocalExtension(e){const{extensions:t,addLocalExtension:n}=this.props;d.a.createLocal(e).then(i=>{t.some(e=>e.id===i.id)?this.setState({localExtension:i,localExtensionUrl:e}):(n(i),this.hideLocalExtensionPopup())}).catch(()=>{this.setState({localExtension:null,localExtensionUrl:e})})}close(){a.a.render(null,this.base.parentElement,this.base)}componentWillUnmount(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("keyup",this.handleDocumentKeyUp)}componentDidMount(){const{selectedExtensionId:e}=this.props;void 0!==e&&this.showSettings(e),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("keyup",this.handleDocumentKeyUp)}componentWillReceiveProps(e){e.selectedExtensionId!==this.props.selectedExtensionId&&void 0===e.selectedExtensionId&&this.showSettings(this.props.selectedExtensionId)}renderContent(e){return e?a.a.h(l.a,{onChange:this.updateExtensionOption,name:e.name,description:e.description,author:e.author,repository:e.repository,url:e.url,options:e.options,local:e.local}):this.props.extensions.length?a.a.h(s.a,{extensions:this.props.extensions,onEnable:this.props.enableExtension,onDisable:this.props.disableExtension,onSettingsClick:this.showSettings}):a.a.h(j,null)}render(e,t){if(!e.visible)return;const{extensions:n,class:i,canRemoveExtensions:o}=e,{localExtension:s,localExtensionUrl:l,localExtensionPopupVisible:c,selectedExtensionId:u,altPressed:d}=t,f=s&&n.some(e=>e.id===s.id),b=n.find(e=>e.id===u);return a.a.h("div",{class:"extensionDialogBackdrop",onClick:this.handleBackdropClick},a.a.h("div",{class:Object(m.a)("extensionDialog",i),onClick:v,ref:Object(p.a)(this,"extensionDialog")},a.a.h("div",{class:"header"},b&&a.a.h("a",{onClick:this.handleBackLinkClick,href:"#",class:"backLink"},a.a.h("img",{src:Object(g.a)("img/icNavUp.svg")}),a.a.h("span",null,"Extensions")),a.a.h("h2",null,b?b.name:"Extensions"),d||c?a.a.h(r.a,{class:"addLocalExtension",disabled:c,onClick:this.showAddLocalExtensionPopup},"Add local extension"):a.a.h("a",{href:Object(h.i)(),class:"explore",target:"_blank",rel:"noopener"},"Explore extensions")),a.a.h("div",{class:"main"},this.renderContent(b),c&&a.a.h(S,{top:this.nodeRefs.extensionDialog.getBoundingClientRect().top,initialUrl:l,alreadyAdded:f,onAdd:this.addLocalExtension,onClose:this.hideLocalExtensionPopup,extension:s})),a.a.h("div",{class:"footer"},b&&(b.local||o)&&a.a.h(r.a,{key:"remove",class:"remove",ripple:!0,onClick:this.removeExtension},"REMOVE"),a.a.h(r.a,{key:"done",class:"done",ripple:!0,onClick:this.close},"DONE"))))}}const w=o.a.create(class extends a.a.Component{static getStores(){return[u.b]}static calculateState(e,t){const n=u.b.getState(),i=n.extensions.map(e=>({id:e.id,default:e.default,enabled:n.enabledExtensions.includes(e.id),loaded:e.loaded,name:e.name,description:e.description,author:e.author,url:Object(h.i)(e),repository:e.repository,options:e.optionsSchema.map(t=>Object.assign({},t,{value:e.getOption(t.id)})),local:e.local}));return{projectId:t.projectId,selectedExtensionId:t.selectedExtensionId,canRemoveExtensions:t.canRemoveExtensions,extensions:i,visible:!0,addLocalExtension:u.a.addLocalExtension,removeExtension:u.a.removeExtension,updateExtensionOption:u.a.updateExtensionOption,enableExtension:u.a.enableExtension,disableExtension:u.a.disableExtension}}render(e,t){return a.a.h(E,t)}},{withProps:!0});t.a=w},function(e,t){e.exports=FluxUtils},function(e,t,n){"use strict";var i=n(137);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(32),r=n(76),s=n(77),l=n(24),c=n(78),u=n(4),d=n(10),m=n(0),p=n(143);n.n(p);const g=".button-bg {\n\t\twidth: 200px;\n\t\theight: 40px;\n\t\tborder-radius: 20px;\n\t\tbackground-color: #fdbd39;\n\t\tbackground-color: var(--light-orange);\n\t\tbox-shadow: 0 0 4px 0 #2f333a;\n\t\tborder: solid 2px rgba(255, 255, 255, 0.4);\n}";function h(){return a.a.h("div",{class:"extensionPreview"},a.a.h("p",null,"Extensions are built by community to generate code snippets from designs. Pick the ones that fit your workflow, or create your own and contribute. ",a.a.h("a",{href:Object(m.i)(),target:"_blank",rel:"noopener"},"Learn more…")),a.a.h("div",{class:"snippetExample"},a.a.h("div",{class:"sampleButtonWithArrow"},a.a.h("img",{src:Object(d.a)("img/icCurvedArrow.svg")}),a.a.h("div",{class:"sampleButton"},"Button")),a.a.h(s.a,{lang:"css",class:"sampleCode",content:g,asyncHighlight:!1,style:{fontSize:"12px",lineHeight:"14px"}})))}class f extends a.a.Component{constructor(e){super(e),this.handleEnabledChange=this.handleEnabledChange.bind(this),this.handleSettingsClick=this.handleSettingsClick.bind(this)}handleEnabledChange(e){(e.target.checked?this.props.onEnable:this.props.onDisable)(this.props.id)}handleSettingsClick(){this.props.onSettingsClick(this.props.id)}render(e){const{name:t,author:n,repository:i,description:s,url:m,local:p,loaded:g,enabled:h}=e,f=[].concat(n.url,i).filter(Boolean).map(e=>{const t=Object(c.a)(e);return a.a.h("a",{key:t.text,href:t.url,target:"_blank",rel:"noopener"},t.text)});return f.length>1&&f.splice(1,0," • "),a.a.h("div",{class:"extensionListItem"},p&&a.a.h("div",{class:"localExtensionInfo"},a.a.h("img",{src:Object(d.a)("img/emjConstructionTeyze.png"),srcSet:`${Object(d.a)("img/emjConstructionTeyze@2x.png")} 2x, ${Object(d.a)("img/emjConstructionTeyze@3x.png")} 3x`}),"Local extension, only visible to you."),a.a.h("label",null,a.a.h(r.a,{onChange:this.handleEnabledChange,checked:h}),a.a.h("div",{class:"extensionInfo"},a.a.h("div",null,a.a.h("span",{class:"name"},t),a.a.h("span",{class:"author"},n.displayName)),g?a.a.h("span",{class:"description"},s):a.a.h("span",{class:"error"},"Fetching extension failed"),a.a.h("span",{class:"links"},f))),a.a.h("a",{class:Object(u.a)("readmeLink",{invisible:p}),href:m,target:"_blank",rel:"noopener"},a.a.h(l.a,{class:"maroon"}),a.a.h("img",{src:Object(d.a)("img/icReadme.svg")})),a.a.h(o.a,{ripple:"maroon",class:"settingsButton",onClick:this.handleSettingsClick},a.a.h("img",{src:Object(d.a)("img/icExtensionSettings.svg")})))}}t.a=function(e){const t=e.extensions.map(t=>a.a.h(f,{onEnable:e.onEnable,onDisable:e.onDisable,onSettingsClick:e.onSettingsClick,key:t.id,id:t.id,name:t.name,description:t.description,author:t.author,url:t.url,repository:t.repository,enabled:t.enabled,loaded:t.loaded,local:t.local}));return a.a.h("div",{class:"projectExtensions"},a.a.h(h,null),t)}},function(e,t,n){"use strict";t.a=function(e){var t=Object.assign({},e);return delete t.class,a.a.h("div",{class:Object(o.a)("checkbox",e.class)},a.a.h("input",Object.assign(t,{type:"checkbox"})),a.a.h("div",{class:"indicator"}))};var i=n(1),a=n.n(i),o=n(4),r=n(139);n.n(r)},function(e,t){},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(141),r=n.n(o),s=n(4),l=n(142);n.n(l);t.a=class extends a.a.Component{highlight(e){const{content:t,lang:n,asyncHighlight:i=!0}=e;var a;(a=n)&&r.a.languages[a]?function(e,t,n){return n?new Promise((n,i)=>{try{r.a.tokenizeFlat(e,r.a.languages[t],!0,e=>{n(e)})}catch(e){i(e)}}):Promise.resolve(r.a.tokenizeFlat(e,r.a.languages[t]))}(t,n,i).then(e=>{this.setState({lines:function(e){let t=[];const n=[t];for(const i of e)if("string"==typeof i&&i.includes("\n")){const e=i.split("\n");t.push(e[0]);for(let t=1;t<e.length-1;t++)n.push([e[t]]);t=[e[e.length-1]],n.push(t)}else t.push(i);return n}(e)})}).catch(()=>{this.setState({lines:e.content.split("\n")})}):this.setState({lines:e.content.split("\n")})}componentWillReceiveProps(e){this.highlight(e)}componentDidMount(){this.highlight(this.props)}render(e,t){const{class:n,lang:i,lineIndicator:o,style:r}=e,{lines:l=[]}=t,c=Object(s.a)("code",n,{lineIndicator:o});return a.a.h("pre",{class:c},a.a.h("code",{class:`language-${i}`,style:r},l.map((e,t)=>a.a.h("span",{key:t,class:"lineWrapper"},a.a.h("span",{class:"lineno"}),a.a.h("pre",{class:"line"},Array.isArray(e)?e.map(e=>"string"==typeof e?e:a.a.h("span",{class:`token ${e.type}`},e.content)):e)))))}}},function(e,t){e.exports=Prism},function(e,t){},function(e,t){},function(e,t,n){"use strict";var i=n(145);t.a=i.a},function(e,t,n){"use strict";t.a=function(e){const{author:t,repository:n,description:i,url:o,local:r,options:l,onChange:d}=e,m=l.map(e=>{let t;switch(e.type){case"picker":t=p;break;case"switch":t=g;break;case"text":t=h;break;default:return null}return a.a.h(t,Object.assign(e,{onChange:d}))}).filter(Boolean),f=[].concat(t.url,n).filter(Boolean).map(e=>{const t=Object(u.a)(e);return a.a.h("a",{key:t.text,href:t.url,target:"_blank",rel:"noopener"},t.text)});f.length>1&&f.splice(1,0," • ");return a.a.h("div",{class:"extensionSettings"},a.a.h("div",{class:"extensionInfo"},a.a.h("div",null,r&&a.a.h("div",{class:"localExtensionInfo"},a.a.h("img",{src:Object(c.a)("img/emjConstructionTeyze.png"),srcSet:`${Object(c.a)("img/emjConstructionTeyze@2x.png")} 2x, ${Object(c.a)("img/emjConstructionTeyze@3x.png")} 3x`}),"Local extension, only visible to you."),a.a.h("div",{class:"author"},t.displayName),a.a.h("div",{class:"description"},i),a.a.h("div",{class:"links"},f)),!r&&a.a.h("a",{class:"readmeLink",href:o,target:"_blank",rel:"noopener"},a.a.h(s.a,{class:"maroon"}),a.a.h("img",{src:Object(c.a)("img/icReadme.svg")}))),m.length>0&&a.a.h("h3",null,"Settings"),m)};var i=n(1),a=n.n(i),o=n(47),r=n(76),s=n(24),l=n(79),c=n(10),u=n(78),d=n(4),m=n(148);n.n(m);class p extends a.a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(this.props.id,this.props.options[e].value)}render(e){const{options:t,name:n,value:i}=e,r=t.findIndex(e=>e.value===i);return a.a.h("div",{class:"option"},a.a.h("span",{class:"name"},n),a.a.h(o.a,{portalInto:document.body,onChange:this.handleChange,class:"picker",selectedIndex:r,content:function(e,t){return a.a.h("div",{class:"pickerItems"},e.map((e,n)=>a.a.h(o.a.Item,{class:Object(d.a)("pickerItem",{selected:n===t}),index:n,key:e.value},a.a.h(s.a,null),e.name,a.a.h("img",{src:Object(c.a)("img/icMenuCheck.svg"),alt:"&check;"}))))}(t,r),pos:{top:-12,left:96},optionsWidth:200,ripple:!0},t[r].name))}}class g extends a.a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(this.props.id,e.target.checked)}render(e){return a.a.h("label",{class:"option"},a.a.h("span",{class:"name"},e.name),a.a.h(r.a,{name:e.id,onChange:this.handleChange,checked:e.value}))}}class h extends a.a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){e.target.value!==this.props.value&&this.props.onChange(this.props.id,e.target.value)}render(e){return a.a.h("label",{class:"option"},a.a.h("span",{class:"name"},e.name),a.a.h(l.a,{class:"textOption",onBlur:this.handleChange,value:e.value,placeholder:"Let’s find a placeholder"}))}}},function(e,t,n){"use strict";t.a=function(e){const t=Object.assign({},e);return delete t.class,a.a.h("div",{class:Object(o.a)("textInput",e.class)},a.a.h("input",Object.assign(t,{type:e.type||"text",ref:e.inputRef})),a.a.h("div",{class:"inputMirror"}))};var i=n(1),a=n.n(i),o=n(4),r=n(147);n.n(r)},function(e,t){},function(e,t){},function(e,t){e.exports=Flux},function(e,t,n){"use strict";let i=0;t.a=class{constructor(e,t){this.worker=e,this.callbacks={},this.errorLogger=t&&t.errorLogger,this.attachToWorker();const n=t&&t.methods;n&&Array.isArray(n)&&n.forEach(e=>{Object.defineProperty(this,e,{value:function(){return this.invoke(e,Array.from(arguments))}})})}static getInvocationId(){return++i}attachToWorker(){this.worker.addEventListener("message",e=>{if("invokeResult"!==e.data.type)return;const t=e.data.data,n=this.callbacks[t.id];if(n)if(delete this.callbacks[t.id],"result"in t)n.resolve(t.result);else if("error"in t){const e=new Error;Object.assign(e,t.error),n.reject(e)}})}invoke(e,t){return new Promise((n,i)=>{const a=this.constructor.getInvocationId();this.callbacks[a]={resolve:n,reject:i},this.worker.postMessage({type:"invoke",data:{id:a,name:e,args:t}})}).catch(n=>{throw this.errorLogger&&this.errorLogger(n,{fnName:e,args:t}),n})}terminate(){this.worker.terminate()}}},function(e,t,n){"use strict";var i=n(9);const a={create:function(e,t,n={}){return{get:a=>i.a.get(e,t,a).then(function(e){return null===e||void 0===e?n[a]:e}),getAll:()=>i.a.get(e,t).then(function(e){return Object.assign({},n,e)}),set:(n,a)=>i.a.set(e,t,n,a)}},clear:function(e){return i.a.remove(e)}};t.a=a},function(e,t,n){"use strict";let i;const a={android_xml:[(i={xml:"5a7823629b29236b1f69d063",objc:"5a7823d19b29236b1f69d064",swift:"5a7823ef9b29236b1f69d065",css:"5a7824029b29236b1f69d066",less:"5a7824739b29236b1f69d068",sass:"5a7824969b29236b1f69d069",scss:"5a7824a79b29236b1f69d06a",stylus:"5a7824b49b29236b1f69d06b",reactNative:"5a7824e39b29236b1f69d06c",html:"5a7825629b29236b1f69d06d",attributedStrings:"5a8b366b8e013fba7d816e5f"}).xml],react_native:[i.reactNative],osx_swift2:[i.swift,i.attributedStrings],osx_swift3:[i.swift,i.attributedStrings],osx_objc:[i.objc,i.attributedStrings],ios_swift2:[i.swift,i.attributedStrings],ios_swift3:[i.swift,i.attributedStrings],ios_objc:[i.objc,i.attributedStrings],stylesheet_css:[i.css,i.html],stylesheet_less:[i.less,i.html],stylesheet_sass:[i.sass,i.html],stylesheet_scss:[i.scss,i.html],stylesheet_stylus:[i.stylus,i.html]};t.a=a},function(e,t,n){"use strict";var i=n(42),a=n(0),o=n(80),r=n(81),s=n(82),l=n(83);t.a=new class extends i.b{constructor(){super(s.a)}getInitialState(){return{removedExtensions:[],enabledExtensions:[],extensions:[],project:null,initialized:!1}}loadExtensions(e,t,n,i){return e.extensions.forEach(e=>{e.terminate()}),{initialized:!0,removedExtensions:[],enabledExtensions:i,project:t,extensions:n}}updateExtensionOption(e,t,n,i){return e.extensions.find(e=>e.id===t).setOption(n,i),Object.assign({},e)}enableExtension(e,t){return e.enabledExtensions.includes(t)?e:(l.a.enableExtension(e.project.id,t),e.enabledExtensions.push(t),Object.assign({},e))}disableExtension(e,t){return l.a.disableExtension(e.project.id,t),Object(a.b)(e.enabledExtensions,e=>e===t),Object.assign({},e)}removeExtensionRequested(e,t,n){l.a.disableExtension(t,n),Object(a.b)(e.enabledExtensions,e=>e===n);const i=Object(a.b)(e.extensions,e=>e.id===n);return i&&e.removedExtensions.push(i),Object.assign({},e)}removeExtensionResult(e,t,n,i){const o=Object(a.b)(e.removedExtensions,e=>e.id===n);return o?(i?(e.project.removeExtension(n),o.terminate()):(e.extensions.push(o),l.a.enableExtension(t,o.id),e.enabledExtensions.push(o.id)),Object.assign({},e)):e}addExtensionRequested(e,t,n){const i=e.extensions.find(e=>t.id===e.id);return i?(n&&i.reload(),Object.assign({},this.enableExtension(e,i.id))):(o.a.loadExtension(e.project,t),e)}loadExtension(e,t){return e.extensions.push(t),Object.assign({},this.enableExtension(e,t.id))}reloadLocalExtensions(e){const t=e.extensions.filter(e=>e.local);return t.length?(t.forEach(e=>{console.log(`Local extension "${e.name}" reloaded`),e.reload()}),Object.assign({},e)):e}reduce(e,t){switch(t.type){case r.a.LOAD_EXTENSIONS:return this.loadExtensions(e,t.project,t.extensions,t.enabledExtensions);case r.a.UPDATE_EXTENSION_OPTION:return this.updateExtensionOption(e,t.id,t.name,t.value);case r.a.DISABLE_EXTENSION:return this.disableExtension(e,t.id);case r.a.ENABLE_EXTENSION:return this.enableExtension(e,t.id);case r.a.REMOVE_EXTENSION_REQUESTED:return this.removeExtensionRequested(e,t.pid,t.id);case r.a.REMOVE_EXTENSION_SUCCESS:return this.removeExtensionResult(e,t.pid,t.id,!0);case r.a.REMOVE_EXTENSION_FAIL:return this.removeExtensionResult(e,t.pid,t.id,!1);case r.a.ADD_EXTENSION_REQUESTED:return this.addExtensionRequested(e,t.extension,t.local);case r.a.LOAD_EXTENSION:return this.loadExtension(e,t.extension);case r.a.ADD_LOCAL_EXTENSION:return this.addLocalExtension(e,t.extension);case r.a.RELOAD_LOCAL_EXTENSIONS:return this.reloadLocalExtensions(e);default:return e}}}},function(e,t){},function(e,t,n){"use strict";var i=n(156);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(42),r=n(32),s=n(84),l=n(43),c=n(10),u=n(0),d=n(159);n.n(d);function m(e,t,n,i){let a;if("color"===t)a=Promise.all([e.styleguideColors(i),e.comment(n)]);else{if("textStyle"!==t)return;a=Promise.all([e.styleguideTextStyles(i),e.comment(n)])}return a.then(function([e,n]){if(!e)return;const i={name:t};return"string"==typeof e?i.code=e:Object.assign(i,e),i.code=`${n?`${n}\n\n`:""}${e.code}`,i})}function p(e){return a.a.h("div",{class:"emptyStyleguideCodePanel"},e.hasExtensions?[a.a.h("h2",{key:"emptyStyleguideHeader"},"No extension snippets",a.a.h("img",{src:Object(c.a)("img/emjAlembic.png"),srcSet:`${Object(c.a)("img/emjAlembic@2x.png")} 2x, ${Object(c.a)("img/emjAlembic@3x.png")} 3x`})),a.a.h("p",{key:"emptyStyleguideParagraph"},"Looks like you don’t have any extensions that generate Styleguide code snippets. Extensions are built by the community, generating code snippets from designs.",a.a.h("br",null),a.a.h("br",null),"Manage and enable the ones that fit your workflow."),a.a.h(r.a,{key:"emptyStyleguideButton",onClick:e.onManageExtensionsClick,class:"manageExtensions"},"Manage extensions")]:[a.a.h("h2",{key:"emptyStyleguideHeader"},"No extensions",a.a.h("img",{src:Object(c.a)("img/emjAlembic.png"),srcSet:`${Object(c.a)("img/emjAlembic@2x.png")} 2x, ${Object(c.a)("img/emjAlembic@3x.png")} 3x`})),a.a.h("p",{key:"emptyStyleguideParagraph"},"Looks like you don’t have any extensions on this project. Extensions are built by the community, generating code snippets from designs.",a.a.h("br",null),a.a.h("br",null),"Browse and pick the ones that fit your workflow."),a.a.h("a",{key:"emptyStyleguideButton",href:Object(u.i)(),target:"_blank",rel:"noopener"},"Explore extensions")])}class g extends a.a.Component{constructor(e){super(e),this.exportCode=this.exportCode.bind(this),this.openSettings=this.openSettings.bind(this)}exportCode(e){this.props.onExportClick(this.props.extension.id,e)}openSettings(){this.props.onSettingsClick(this.props.extension.id)}render(e){return a.a.h(s.a,{class:"styleguideCode",exportEnabled:!0,onExportClick:this.exportCode,onSettingsClick:this.openSettings,snippets:e.codeSnippets,title:e.extension.name,asyncHighlight:!0})}}class h extends a.a.Component{constructor(e){super(e),this.exportCode=this.exportCode.bind(this),this.state={codeSnippets:null}}exportCode(e,t){let n;const i=this.props.enabledExtensions.find(t=>t.id===e);if(i){if("color"===t)n=i.exportStyleguideColors(this.props.colors);else{if("textStyle"!==t)return;n=i.exportStyleguideTextStyles(this.props.textStyles)}n.then(n=>this.props.onExportClick(t,n,e))}}generateCode(e,t,n){e.length?Promise.all(e.map(e=>(function(e,{colorTitle:t,colors:n},{textStyleTitle:i,textStyles:a}){return Promise.all([m(e,"color",t,n),m(e,"textStyle",i,a)]).then(function(e){return e.filter(Boolean)}).catch(function(){})})(e,t,n).then(t=>({[e.id]:t})))).then(e=>{this.setState({codeSnippets:Object.assign({},...e)})}):this.setState({codeSnippets:{}})}componentWillReceiveProps(e){const{colorTitle:t,colors:n,textStyleTitle:i,textStyles:a}=e;this.generateCode(e.enabledExtensions,{colorTitle:t,colors:n},{textStyleTitle:i,textStyles:a})}shouldComponentUpdate(e,t){return this.state.codeSnippets!==t.codeSnippets&&(!this.state.codeSnippets||!t.codeSnippets||(Object.keys(this.state.codeSnippets).length!==Object.keys(t.codeSnippets).length||Object.keys(this.state.codeSnippets).some(e=>{const n=this.state.codeSnippets[e],i=t.codeSnippets[e];return!(!i&&!n)&&(!i||!n||(n.length!==i.length||n.some((e,t)=>i[t].language!==e.language||i[t].code!==e.code)))})))}componentDidMount(){const{colorTitle:e,colors:t,textStyleTitle:n,textStyles:i}=this.props;this.generateCode(this.props.enabledExtensions,{colorTitle:e,colors:t},{textStyleTitle:n,textStyles:i})}render(e,t){if(!t.codeSnippets)return;const n=e.enabledExtensions.map(n=>{const i=t.codeSnippets[n.id];return i&&i.length?a.a.h(g,{onExportClick:this.exportCode,onSettingsClick:e.onSettingsClick,key:n.id,extension:n,codeSnippets:i}):null}).filter(Boolean);return e.enabledExtensions.length&&n.length?a.a.h("div",{class:"styleguideCodePanel"},n):a.a.h(p,{hasExtensions:e.hasExtensions,onManageExtensionsClick:e.onManageExtensionsClick})}}var f=o.a.create(class extends a.a.Component{static getStores(){return[l.b]}static calculateState(e,t){var n=l.b.getState(),i=n.extensions.filter(function(e){return n.enabledExtensions.includes(e.id)&&e.loaded});return{initialized:n.initialized,hasExtensions:n.extensions.length>0,enabledExtensions:i}}render(e,t){if(t.initialized)return a.a.h(h,{hasExtensions:t.hasExtensions,enabledExtensions:t.enabledExtensions,onManageExtensionsClick:e.onManageExtensionsClick,onExportClick:e.onExportClick,onSettingsClick:e.onSettingsClick,colorTitle:e.colorTitle,colors:e.colors,textStyleTitle:e.textStyleTitle,textStyles:e.textStyles})}},{withProps:!0});t.a=f},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(10),r=n(4),s=n(32),l=n(77),c=n(158);n.n(c);t.a=class extends a.a.Component{constructor(e){super(e),this.handleCopyClick=this.handleCopyClick.bind(this),this.handleSettingsClick=this.handleSettingsClick.bind(this)}bindHandler(e,t){if(e)return function(){e(t)}}handleCopyClick(){this.props.onCopyClick()}handleSettingsClick(e){e.stopPropagation(),this.props.onSettingsClick()}render(e){var t=e.snippets.map(function(t,n){return a.a.h("div",{key:t.name,class:"snippet"},e.exportEnabled&&a.a.h(s.a,{class:"exportButton",onClick:this.bindHandler(e.onExportClick,t.name)},a.a.h("img",{src:Object(o.a)("img/icDownloadLight.svg")})),a.a.h(l.a,{lineIndicator:!0,lang:t.language,content:t.code,asyncHighlight:e.asyncHighlight}))},this);return a.a.h("div",{class:Object(r.a)("codePanel",e.class)},a.a.h("div",{class:"gutter"}),a.a.h("div",{class:"title"},a.a.h("h3",null,e.title),e.copyEnabled&&a.a.h(s.a,{class:"copyButton",onClick:this.handleCopyClick},a.a.h("img",{src:Object(o.a)("img/icCopyLight.svg")})),a.a.h(s.a,{class:"settingsButton",onClick:this.handleSettingsClick},a.a.h("img",{src:Object(o.a)("img/icSettingsLight.svg")}))),t)}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";var i=n(161);t.a=i.a},function(e,t,n){"use strict";var i=n(1),a=n.n(i),o=n(42),r=n(84),s=n(43),l=n(162);n.n(l);class c extends a.a.Component{constructor(e){super(e),this.copyCode=this.copyCode.bind(this),this.openSettings=this.openSettings.bind(this),this.state={codeSnippets:[]}}copyCode(e){var t;t=e?this.state.codeSnippets.find(function(t){return t.name===e}).code:this.state.codeSnippets.map(function(e){return e.code}).join("\n\n"),this.props.onCopyClick(t,this.props.extension.id)}openSettings(){this.props.onSettingsClick(this.props.extension.id)}generateCodeSnippets(e){var t=this;this.props.extension.layer(e).then(function(e){if(!e)return void t.setState({codeSnippets:[]});const n={name:"layer"};"string"==typeof e?n.code=e:Object.assign(n,e),t.setState({codeSnippets:[n]})}).catch(function(){})}componentWillReceiveProps(e){this.generateCodeSnippets(e.layer)}componentDidMount(){this.generateCodeSnippets(this.props.layer)}shouldComponentUpdate(e,t){return this.state.codeSnippets.length!==t.codeSnippets.length||this.state.codeSnippets.some(function(e,n){return t.codeSnippets[n].language!==e.language||t.codeSnippets[n].code!==e.code})}render(e,t){if(0!==t.codeSnippets.length)return a.a.h(r.a,{class:"layerCode",copyEnabled:e.copyEnabled,onCopyClick:this.copyCode,onSettingsClick:this.openSettings,snippets:t.codeSnippets,title:e.extension.name,asyncHighlight:!1})}}var u=o.a.create(class extends a.a.Component{static getStores(){return[s.b]}static calculateState(e,t){var n=s.b.getState();return{enabledExtensions:n.extensions.filter(function(e){return n.enabledExtensions.includes(e.id)&&e.loaded})}}render(e,t){var n=t.enabledExtensions.map(function(t){return a.a.h(c,{key:t.id,extension:t,copyEnabled:e.copyEnabled,onCopyClick:e.onCopyClick,onSettingsClick:e.onSettingsClick,layer:e.layer})},this);return a.a.h("div",{class:"layerCodePanel"},n)}},{withProps:!0});t.a=u},function(e,t){}]);
//# sourceMappingURL=maps/project.js.map
